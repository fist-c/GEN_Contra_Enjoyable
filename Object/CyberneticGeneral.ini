;------------------------------------------------------------------------------
Object Cybr_AmericaJetStealthFighter

  ; *** ART Parameters ***
  SelectPortrait         = SAPegas_L
  ButtonImage            = SAPegas
  
  UpgradeCameo1 = Upgrade_AmericaLaserMissiles
  UpgradeCameo2 = Upgrade_AmericaBunkerBusters
  UpgradeCameo3 = Upgrade_AmericaCountermeasures
  
  Draw = W3DModelDraw ModuleTag_01
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model             = AVPegas
      HideSubObject     = BurnerFX03 BurnerFX04
      WeaponLaunchBone  = PRIMARY WeaponA
    End
    
    ConditionState        = JETEXHAUST
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = JETEXHAUST JETAFTERBURNER
      ; exhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ; afterburners
      ShowSubObject       = BurnerFX03 BurnerFX04
      ParticleSysBone     = Engine01 JetLenzflare
      ParticleSysBone     = Engine02 JetLenzflare
    End

    ConditionState        = REALLYDAMAGED
      Model               = AVPegas_D
      ; damage
      ParticleSysBone     = Smoke01 JetSmoke
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST
      Model               = AVPegas_D
      ; damage
      ParticleSysBone     = Smoke01 JetSmoke
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
      ; exhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model               = AVPegas_D
      ; damage
      ParticleSysBone     = Smoke01 JetSmoke
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
      ; exhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ; afterburners
      ShowSubObject       = BurnerFX03 BurnerFX04
      ParticleSysBone     = Engine01 JetLenzflare
      ParticleSysBone     = Engine02 JetLenzflare
    End

    ConditionState        = RUBBLE
      Model               = AVPegas_E
      HideSubObject       = None 
      ShowSubObject       = None
    End

    ConditionState        = RUBBLE JETEXHAUST JETAFTERBURNER
      Model               = AVPegas_E
      ;HideSubObject is needed cause there're inherited from default condition state      
      HideSubObject       = None 
      ShowSubObject       = None
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End
    
    OkToChangeModelColor = Yes

  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Pegas
  EditorSorting         = VEHICLE
  Side                  = AmericaCyberneticGeneral
  TransportSlotCount    = 0                
  VisionRange           = 180.0 
  ShroudClearingRange   = 400.0
  BuildCost           = 1100
  BuildTime           = 11
  ExperienceValue     = 44 64 94 135
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  CrusherLevel        = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GenericCommandSet

  Prerequisites
    Object = Cybr_AmericaAirfield
  End

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY Cybr_StealthJetMissileWeapon
  End

  ArmorSet
    Conditions  = None
    Armor       = RoboticBomberArmor
    DamageFX    = None
  End
  ArmorSet
    Conditions  = PLAYER_UPGRADE
    Armor       = CountermeasuresRoboticBomberArmor
    DamageFX    = None
  End

  ; *** AUDIO Parameters ***
  VoiceSelect            = RoboRaptorVoiceSelect
  VoiceMove              = RoboRaptorVoiceMove
  VoiceAttack            = RoboRaptorVoiceAttack
  VoiceAttackAir         = RoboRaptorVoiceAttack
  VoiceGuard             = RoboRaptorVoiceMove
  SoundAmbient           = RaptorAmbientLoop
  SoundAmbientRubble     = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    VoiceCreate          = RoboRaptorVoiceCreate
    Afterburner          = RaptorAfterburner
    VoiceGarrison        = RoboRaptorVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE SCORE AIRCRAFT DRONE VEHICLE SALVAGER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_03
    DeathTypes                      = ALL
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_PegasDeathFinalBlowUp
    DestructionDelay                = 99999999; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100% ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%  ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_StealthFighterDeathInitial
    ;OCLInitialDeath                = None
    DelaySecondaryFromInitialDeath  = 500  ; in milliseconds
    FXSecondary                     = FX_JetDeathSecondary
    ;OCLSecondary                   = None
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_RaptorDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200 ; in milliseconds
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                  = OCL_PegasDeathFinalBlowUp
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

  Behavior = JetAIUpdate ModuleTag_06
    OutOfAmmoDamagePerSecond = 0%
    TakeoffDistForMaxLift    = 0%
    TakeoffPause           = 500
    MinHeight              = 5
    ReturnToBaseIdleTime   = 10000
  End

  Behavior = StealthUpdate ModuleTag_Stealth
    StealthDelay                          = 1000 ; msec
    StealthForbiddenConditions            = ATTACKING
    FriendlyOpacityMin                    = 50.0%
    FriendlyOpacityMax                    = 100.0%
    InnateStealth                         = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior                = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy           = Upgrade_AmericaCountermeasures
  End

  Behavior                = CountermeasuresBehavior ModuleTag_10
    TriggeredBy           = Upgrade_AmericaCountermeasures
    FlareTemplateName     = CountermeasureFlare
    FlareBoneBaseName     = Flare ; Name of the base flare bone (Flare01, Flare02, Flare03)
    VolleySize            = 2     ; Number of flares launched per volley (requires bones)
    VolleyArcAngle        = 60.0  ; Max angle of flare relative to forward direction (with VolleySize of 1, flare will always goes straight back).
    VolleyVelocityFactor  = 2.0   ; Shoots out flares at a stronger velocity with a higher value.
    DelayBetweenVolleys   = 1000  ; Time between flare volleys
    NumberOfVolleys       = 3     ; Number of times the volleys will fire before reloading
    ReloadTime            = 0     ; After all volleys launched, then reloading must occur. If 0, then reloading occurs at airstrip only.
    EvasionRate           = 30%   ; With active flares, the specified percentage will be diverted.
    ReactionLaunchLatency = 0     ; Reaction between getting shot at and the firing of the first volley of countermeasures.
    MissileDecoyDelay     = 200   ; A reported missile that has been determined to hit a decoy will wait this long before acquiring countermeasures.
  End

  Locomotor = SET_NORMAL StealthJetLocomotor
  Locomotor = SET_TAXIING BasicJetTaxiLocomotor

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior                 = TransitionDamageFX ModuleTag_22
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry = Cylinder
  GeometryIsSmall = Yes
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 7.0
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleComanche

  ; *** ART Parameters ***
  SelectPortrait         = SATiger2_L
  ButtonImage            = SATiger2

  UpgradeCameo1 = Upgrade_AmericaLaserMissiles
  UpgradeCameo2 = Upgrade_AmericaMissileAI
  UpgradeCameo3 = Upgrade_AmericaCountermeasures
  
  Draw = W3DOverlordAircraftDraw ModuleTag_01
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model             = AVOrca
      Turret            = ORCA
      TurretPitch       = TurretEL
      WeaponFireFXBone  = PRIMARY WeaponB
      WeaponLaunchBone  = PRIMARY WeaponB
      WeaponFireFXBone  = SECONDARY WeaponB
      WeaponLaunchBone  = SECONDARY WeaponB
      ParticleSysBone = ENGINE01 SpectreEngineFlare3
      ParticleSysBone = ENGINE02 SpectreEngineFlare3
    End

    ConditionState = REALLYDAMAGED
      Model             = AVOrca_d
      Animation         = AVOrca_d.AVOrca_d
      AnimationMode     = LOOP
      ParticleSysBone = ENGINE01 SpectreEngineFlare3
      ParticleSysBone = ENGINE02 SpectreEngineFlare3
    End

    ConditionState = RUBBLE
      Model             = AVOrca_d
      Animation         = AVOrca_d.AVOrca_d
      AnimationMode     = LOOP
    End
    ConditionState = RUBBLE SPECIAL_DAMAGED
      Model             = AVOrca_d
    End

    OkToChangeModelColor = Yes
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Orca
  EditorSorting       = VEHICLE
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0                
  VisionRange         = 200.0 
  ShroudClearingRange = 400
  BuildCost          = 1400
  BuildTime          = 14.0
  ExperienceValue    = 57 83 121 174
  ExperienceRequired = 0 20000 40000 60000
  IsTrainable        = Yes
  CommandSet         = Cybr_AmericaVehicleComancheCommandSet

  Prerequisites
    Object = Cybr_AmericaAirfield
    Object = Cybr_AmericaStrategyCenter
  End

  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY Cybr_ComancheAntiTankMissileWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon     = PRIMARY Cybr_ComancheAntiTankMissileWeapon
    Weapon     = SECONDARY Cybr_ComancheAntiTankMissileAssistWeapon
    AutoChooseSources  = SECONDARY NONE
    ShareWeaponReloadTime = Yes
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_AmericaMissileAI
  End

  ArmorSet
    Conditions      = None
    Armor           = ComancheArmor
    DamageFX        = None
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = CountermeasuresComancheArmor
    DamageFX        = None
  End

  ; *** AUDIO Parameters ***
  VoiceSelect           = RoboRaptorVoiceSelect
  VoiceMove             = RoboRaptorVoiceMove
  VoiceAttack           = RoboRaptorVoiceAttack
  VoiceAttackAir        = RoboRaptorVoiceAttack
  VoiceGuard            = RoboRaptorVoiceMove
  SoundAmbient          = OrcaAmbientLoop
  SoundAmbientRubble    = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    VoiceCreate         = RoboRaptorVoiceCreate
    Afterburner         = RaptorAfterburner
    VoiceGarrison       = RoboRaptorVoiceMove
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT PRODUCED_AT_HELIPAD

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = FXListDie ModuleTag_05
    DeathFX = FX_ComancheStartDeath
  End

  Behavior = JetAIUpdate ModuleTag_06
    MinHeight                     = 5
    NeedsRunway                   = No
    KeepsParkingSpaceWhenAirborne = No
    AutoAcquireEnemiesWhenIdle    = Yes
    Turret
      TurretTurnRate = 180
      TurretPitchRate = 180
      MinPhysicalPitch = -90
      AllowsPitch = yes
      ControlledWeaponSlots = PRIMARY SECONDARY
      RecenterTime = 100
    End
  End
  Locomotor = SET_NORMAL  Tiger2Locomotor
  Locomotor = SET_TAXIING BasicHelicopterTaxiLocomotor

  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End
  Behavior = HelicopterSlowDeathBehavior ModuleTag_08
    DestructionDelay                = 99999999        ; the destruction delay
    SpiralOrbitTurnRate             = 140.0           ; in degrees per second, bigger # = tighter spiral
    SpiralOrbitForwardSpeed         = 350.0           ; bigger # = larger spiral
    SpiralOrbitForwardSpeedDamping  = .9999           ; smaller #'s = slow down faster
    MaxBraking                      = 190   ; max braking we can use during death spiral (lower num = wilder spiral)    
    SoundDeathLoop                  = ComancheDamagedLoop
    MinSelfSpin                     = 100                     ; in degrees per second
    MaxSelfSpin                     = 300                     ; in degrees per second
    SelfSpinUpdateDelay             = 100             ; in milliseconds
    SelfSpinUpdateAmount            = 10             ; in degrees   
    FallHowFast                     = 12.0%  ; fraction of gravity, lower = take longer to fall
    MinBladeFlyOffDelay             = 1500            ; in milliseconds
    MaxBladeFlyOffDelay             = 1500            ; in milliseconds
    AttachParticle                  = SootySmokeTrail
    AttachParticleBone              = Propeller02
    FXHitGround                     = FX_HelicopterHitGround
    OCLHitGround                    = OCL_HelicopterHitGround
    FXFinalBlowUp                   = FX_GroundedHelicopterBlowUp
    OCLFinalBlowUp                  = OCL_GroundedHelicopterBlowUp
    DelayFromGroundToFinalDeath     = 1500
    FinalRubbleObject               = OrcaRubbleHull
  End

  Behavior = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuousDown
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_ComancheDamageTransition
  End

  Behavior                = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy           = Upgrade_AmericaCountermeasures
  End

  Behavior                = CountermeasuresBehavior ModuleTag_10
    TriggeredBy           = Upgrade_AmericaCountermeasures
    FlareTemplateName     = CountermeasureFlare
    FlareBoneBaseName     = Flare ; Name of the base flare bone (Flare01, Flare02, Flare03)
    VolleySize            = 2     ; Number of flares launched per volley (requires bones)
    VolleyArcAngle        = 60.0  ; Max angle of flare relative to forward direction (with VolleySize of 1, flare will always goes straight back).
    VolleyVelocityFactor  = 2.0   ; Shoots out flares at a stronger velocity with a higher value.
    DelayBetweenVolleys   = 1000  ; Time between flare volleys
    NumberOfVolleys       = 3     ; Number of times the volleys will fire before reloading
    ReloadTime            = 4000  ; After all volleys launched, then reloading must occur. If 0, then reloading occurs at airstrip only.
    EvasionRate           = 30%   ; With active flares, the specified percentage will be diverted.
    ReactionLaunchLatency = 0     ; Reaction between getting shot at and the firing of the first volley of countermeasures.
    MissileDecoyDelay     = 200   ; A reported missile that has been determined to hit a decoy will wait this long before acquiring countermeasures.
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = OverlordContain ModuleTag_Turret
    Slots                   = 1
    DamagePercentToUnits    = 100%
    AllowInsideKindOf       = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PayloadTemplateName     = AmericaOrcaTurret
    PassengersInTurret      = Yes
    ExperienceSinkForRider  = Yes
  End

  Behavior = AssistedTargetingUpdate ModuleTag_07A
    AssistingClipSize = 2                       ; How many shots to make when asked by someone of my kind who has a RequestAssistRange weapon
    AssistingWeaponSlot = SECONDARY             ; And the weapon to use.  Should have huge range and no natural clip.
    LaserFromAssisted = PatriotBinaryDataStream ; Stream to draw from the requestor to me
    LaserToTarget = PatriotBinaryDataStream     ; Stream to draw from me to the target
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleChinook

  ; *** ART Parameters ***
  SelectPortrait         = SAChinook_L
  ButtonImage            = SAChinook

  UpgradeCameo1 = Upgrade_AmericaSupplyLines
  
  Draw = W3DModelDraw ModuleTag_01

    ExtraPublicBone = RopeStart
    ExtraPublicBone = RopeEnd

    DefaultConditionState
      Model = AVChinook
      Animation = AVChinook.AVChinook
      AnimationMode = LOOP
    End

    ConditionState = MOVING
      ParticleSysBone = EXHAUST01 HelixExhaust
      ParticleSysBone = EXHAUST02 HelixExhaust
      ParticleSysBone = EXHAUST01 HeliExhaustHeat
      ParticleSysBone = EXHAUST02 HeliExhaustHeat
    End

    ConditionState = REALLYDAMAGED
      Model = AVChinook_d
      Animation = AVChinook_d.AVChinook_d
      AnimationMode = LOOP
    End

    ConditionState = MOVING REALLYDAMAGED
      Model = AVChinook_d
      Animation = AVChinook_d.AVChinook_d
      AnimationMode = LOOP
      ParticleSysBone = EXHAUST01 HelixExhaust
      ParticleSysBone = EXHAUST02 HelixExhaust
      ParticleSysBone = EXHAUST01 HeliExhaustHeat
      ParticleSysBone = EXHAUST02 HeliExhaustHeat
    End

    ConditionState = RUBBLE
      Model = AVChinook_d
      Animation = AVChinook_d.AVChinook_d
      AnimationMode = LOOP
    End

    ConditionState = RUBBLE SPECIAL_DAMAGED
      Model = AVChinook_d
      HideSubObject = Props01
      HideSubObject = Props02
    End

    OkToChangeModelColor = Yes
  End

  Draw = W3DModelDraw                         ModuleTag_02 ; Cargo net 
    ConditionState = NONE
      Model = None
      TransitionKey = TRANS_Empty
      WaitForStateToFinishIfPossible = TRANS_Unloading
    End

    ConditionState = DYING 
      Model = None
    End
    AliasConditionState = RUBBLE
    AliasConditionState = CARRYING RUBBLE
    AliasConditionState = DOCKING RUBBLE
    AliasConditionState = DOCKING CARRYING RUBBLE
 
     ConditionState = CARRYING
      Model = AVChinook_A ;Carrying a full wobbly net of stuff
      Animation = AVChinook_A.AVChinook_A
      AnimationMode = LOOP
      TransitionKey = TRANS_Full
      WaitForStateToFinishIfPossible = TRANS_PickingUp
    End

    ConditionState = DOCKING
      Model = AVChinook_A1MSH ;Lowering an empty net, pulling up with stuff
      Animation = AVChinook_A1SK.AVChinook_A1
      AnimationMode = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
      AnimationSpeedFactorRange = .75 .75
      TransitionKey = TRANS_PickingUp
      WaitForStateToFinishIfPossible = TRANS_Unloading
    End

    ConditionState = DOCKING CARRYING
      Model = AVChinook_A1MSH ; Lowering a full net, letting stuff fall out, and pulling up an empty net
      Animation = AVChinook_A1SK.AVChinook_A1
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.75 2.75
      TransitionKey = TRANS_Unloading
      WaitForStateToFinishIfPossible = TRANS_PickingUp
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Chinook
  EditorSorting       = VEHICLE
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0                
  VisionRange         = 300.0 
  ShroudClearingRange = 300
  BuildCost           = 1200
  BuildTime           = 12.0

  Prerequisites
    Object = Cybr_AmericaSupplyCenter
  End

  ExperienceValue     = 0 0 0 0 ;Experience point value at each level
  IsTrainable         = No  
  CommandSet          = Cybr_AmericaVehicleChinookCommandSet

  ArmorSet
    Conditions      = None
    Armor           = ChinookArmor
    DamageFX        = None
  End

  ; *** AUDIO Parameters ***
  VoiceSelect     = ChinookVoiceSelect
  VoiceMove       = ChinookVoiceMove
  VoiceAttack     = ChinookVoiceAttack
  SoundAmbient    = ChinookAmbientLoop
  SoundAmbientRubble    = NoSound
  SoundEnter      = HumveeEnter
  SoundExit       = HumveeExit
  UnitSpecificSounds
    VoiceCreate         = ChinookVoiceCreate
    VoiceSupply         = ChinookVoiceSupply
    VoiceUnload         = ChinookVoiceUnload
    VoiceCombatDrop     = ChinookVoiceCombatDrop
    VoiceClearBuilding  = RangerVoiceClearBuilding ;Special combat drop that clears buildings!
    VoiceGarrison       = ChinookVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = PRELOAD CAN_CAST_REFLECTIONS SELECTABLE VEHICLE AIRCRAFT HARVESTER SCORE PRODUCED_AT_HELIPAD

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 600.0
    InitialHealth   = 600.0
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = FXListDie ModuleTag_05
    DeathFX = FX_HelicopterStartDeath
  End

  Behavior                       = TransitionDamageFX ModuleTag_06
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuousDown
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_ComancheDamageTransition
  End

  Behavior = ChinookAIUpdate ModuleTag_07
    MaxBoxes                = 8
    SupplyCenterActionDelay = 3000    ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay = 1100 ; ms per box (many small transactions)
    SupplyWarehouseScanDistance = 700 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    SuppliesDepletedVoice = ChinookVoiceSuppliesDepleted
    NumRopes                = 4
    PerRopeDelayMin         = 900
    PerRopeDelayMax         = 1500
    RopeWidth               = 0.5
    RopeColor               = R:0 G:0 B:0
    RopeWobbleLen           = 10
    RopeWobbleAmplitude     = 0.25
    RopeWobbleRate          = 180
    RopeFinalHeight         = 10    ; stop this far above ground
    RappelSpeed             = 30
    MinDropHeight           = 40    ; if dropping into a tall bldg, go at least this far above it
    UpgradedSupplyBoost     = 60    ; increase in value of the crates when supply lines has been upgraded
  End
  Locomotor = SET_NORMAL    ChinookLocomotor
  Locomotor = SET_TAXIING   BasicHelicopterTaxiLocomotor

  Behavior = TransportContain ModuleTag_08
  End

  Behavior = PhysicsBehavior ModuleTag_09
    Mass = 50.0
  End
  Behavior = HelicopterSlowDeathBehavior ModuleTag_10
    DestructionDelay                = 99999999        ; the destruction delay
    SpiralOrbitTurnRate             = 140.0           ; in degrees per second, bigger # = tighter spiral
    SpiralOrbitForwardSpeed         = 350.0           ; bigger # = larger spiral
    SpiralOrbitForwardSpeedDamping  = .9999           ; smaller #'s = slow down faster
    MaxBraking                      = 190   ; max braking we can use during death spiral (lower num = wilder spiral)    
    SoundDeathLoop                  = ComancheDamagedLoop
    MinSelfSpin                     = 100                     ; in degrees per second
    MaxSelfSpin                     = 300                     ; in degrees per second
    SelfSpinUpdateDelay             = 100                     ; in milliseconds
    SelfSpinUpdateAmount            = 10                      ; in degrees   
    FallHowFast                     = 12.0%                   ; fraction of gravity, lower = take longer to fall
    MinBladeFlyOffDelay             = 1500                    ; in milliseconds
    MaxBladeFlyOffDelay             = 1500                    ; in milliseconds
    AttachParticle                  = SootySmokeTrail
    AttachParticleBone              = Propeller02
    BladeObjectName                 = ComancheBlades
    BladeBoneName                   = Propeller01    
    FXBlade                         = FX_HelicopterBladeExplosion
    OCLBlade                        = OCL_HelicopterBladeExplosion
    FXHitGround                     = FX_HelicopterHitGround
    OCLHitGround                    = OCL_HelicopterHitGround
    FXFinalBlowUp                   = FX_GroundedHelicopterBlowUp
    OCLFinalBlowUp                  = OCL_GroundedHelicopterBlowUp
    DelayFromGroundToFinalDeath     = 30
    FinalRubbleObject               = ChinookRubbleHull
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1
  End

  Geometry              = BOX
  GeometryMajorRadius   = 20.0
  GeometryMinorRadius   = 6.0
  GeometryHeight        = 12.0     
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME    
  ShadowSizeX           = 89
End

;------------------------------------------------------------------------------
Object AmericaClusterTomahawkMissile

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
  ParticlesAttachedToAnimatedBones = Yes 
    DefaultConditionState
      Model           = AVClustTmg
      ParticleSysBone = Engine01 SpectreAfterburnerTrail
      ParticleSysBone = Engine01 SpectreEngineFlare
      ParticleSysBone = Engine01 JetExhaustHeat
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model           = AVClustTmg_D
      ParticleSysBone = Engine01 JetBlackTrail
      ParticleSysBone = Engine01 SpectreEngineFlare
    End
    OkToChangeModelColor = Yes
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CargoPlane
  EditorSorting       = VEHICLE
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0                
  VisionRange         = 0.0 
  ArmorSet
    Conditions      = None
    Armor           = BallisticMissileArmor
    DamageFX        = None
  End

  ; *** AUDIO Parameters ***
  SoundAmbient = A10ThunderboltAmbientLoop
  SoundAmbientRubble    = NoSound

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK VEHICLE SCORE TRANSPORT AIRCRAFT FORCEATTACKABLE IGNORED_IN_GUI EMP_HARDENED BALLISTIC_MISSILE
  Body = ActiveBody ModuleTag_03
    MaxHealth     = 2000.0
    InitialHealth = 2000.0
  End
 
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 500.0
  End

  Behavior = DeliverPayloadAIUpdate ModuleTag_05
    DoorDelay = 500
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-10
    DropDelay = 300 ;500 ; time in between each item dropped (if more than one)
    PutInContainer = AmericaParachute
    DeliveryDistance = 150
  End
  Locomotor = SET_NORMAL ClusterTomahawkLocomotor

  Behavior = TransportContain ModuleTag_06
    Slots = 100
    ScatterNearbyOnExit = No
    OrientLikeContainerOnExit = Yes
    KeepContainerVelocityOnExit = Yes
    ExitPitchRate = 30
    ExitBone = WeaponA01
    AllowInsideKindOf  = INFANTRY VEHICLE PROJECTILE DOZER PARACHUTABLE FORCEATTACKABLE
    DoorOpenTime = 0
    NumberOfExitPaths = 0
    DestroyRidersWhoAreNotFreeToExit = Yes
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_10
    DestructionDelay                = 2000 
    RollRate                        = 0.0
    RollRateDelta                   = 100%
    PitchRate                       = 0
    FallHowFast                     = 25.0%
    FXInitialDeath                  = FX_JetBigDeathInitial
    OCLInitialDeath                 = OCL_AmericaJetCargoDeathStart
    DelaySecondaryFromInitialDeath  = 2000
    OCLSecondary                    = OCL_AmericaJetCargoHulkDeath
    FXSecondary                     = FX_BigPlaneDeath
  End

  Behavior = TransitionDamageFX ModuleTag_12
    DamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_JetBigDamageTransition
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_JetBigDamageTransition
  End

  Geometry = Box
  GeometryIsSmall = No
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 10.0
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaInfantryColonelBurton

  ; *** ART Parameters ***
  SelectPortrait         = SABurton_L
  ButtonImage            = SABurton

  UpgradeCameo1 = Upgrade_AmericaExosceletons

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ; idle
    DefaultConditionState
      Model               = AIBFG_SKN
      IdleAnimation       = AIHERO_SKL.AIHERO_STA 0 25
      IdleAnimation       = AIHERO_SKL.AIHERO_IDA
      IdleAnimation       = AIHERO_SKL.AIHERO_IDB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_Stand
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponMuzzleFlash   = SECONDARY NONE
      HideSubObject     = MUZZLEFX01
    End
    
    ; injured idle
    ConditionState        = REALLYDAMAGED
      IdleAnimation       = AIHERO_SKL.AIHERO_ISTA 0 30
      IdleAnimation       = AIHERO_SKL.AIHERO_IIDA
      IdleAnimation       = AIHERO_SKL.AIHERO_IIDB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = AIHERO_SKL.AIHERO_ISTAHIT
      AnimationMode     = ONCE
    End
    
    ; moving
    ConditionState        = MOVING
      Animation           = AIHERO_SKL.AIHERO_RNA 26
      AnimationMode       = LOOP
      Flags               = RANDOMSTART
      TransitionKey       = TRANS_Walking
      ParticleSysBone     = None InfantryDustTrails
      HideSubObject     = MUZZLEFX01
    End
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING FIRING_B
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = MOVING RELOADING_B

    ; injured moving
    ConditionState     = MOVING REALLYDAMAGED
      Animation        = AIHERO_SKL.AIHERO_IRNA 26
      AnimationMode    = LOOP
      Flags            = RANDOMSTART
      TransitionKey    = TRANS_WalkingInjured
      ParticleSysBone  = None InfantryDustTrails
      HideSubObject     = MUZZLEFX01
    End
    AliasConditionState = MOVING FIRING_A REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_A REALLYDAMAGED
    AliasConditionState = MOVING FIRING_B REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_B REALLYDAMAGED

    ; Placing charge animation
    ConditionState      = UNPACKING
      Animation         = AIHERO_SKL.AIHERO_ATB1
      AnimationMode     = ONCE
    End
    AliasConditionState = MOVING UNPACKING

    ; Injured Placing charge animation
    ConditionState      = UNPACKING REALLYDAMAGED
      Animation         = AIHERO_SKL.AIHERO_IATB1
      AnimationMode     = ONCE
    End
    AliasConditionState = MOVING UNPACKING REALLYDAMAGED

; Firing animation
ConditionState = FIRING_A
Animation = AIHERO_SKL.AIHERO_ATA
AnimationMode = ONCE
;AnimationSpeedFactorRange = 0.2 0.2
TransitionKey = TRANS_FiringA
End

ConditionState = BETWEEN_FIRING_SHOTS_A
Animation = AIHERO_SKL.AIHERO_ATA
AnimationMode = MANUAL
Flags = START_FRAME_LAST
WaitForStateToFinishIfPossible = TRANS_FiringA
End
AliasConditionState = RELOADING_A

; Injured Firing animation
ConditionState = FIRING_A REALLYDAMAGED
Animation = AIHERO_SKL.AIHERO_IATA
AnimationMode = ONCE
;AnimationSpeedFactorRange = 0.2 0.2
TransitionKey = TRANS_FiringAInjured
End

ConditionState = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
Animation = AIHERO_SKL.AIHERO_IATA
AnimationMode = MANUAL
Flags = START_FRAME_LAST
WaitForStateToFinishIfPossible = TRANS_FiringAInjured
End
AliasConditionState = RELOADING_A REALLYDAMAGED

TransitionState = TRANS_FiringA TRANS_FiringAInjured
Animation = AIHERO_SKL.AIHERO_IATAHIT
AnimationMode = ONCE
End

;Вторичное оружие(нож) - анимация прописана в перезарядку и выглядит правильно.

; Stab animations
ConditionState = PREATTACK_B
Animation = AIHERO_SKL.AIHERO_ATC
AnimationMode = ONCE
TransitionKey = TRANS_Stabbing
HideSubObject = MUZZLEFX01
End
AliasConditionState = PREATTACK_B MOVING
AliasConditionState = PREATTACK_B FIRING_B
AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B

ConditionState = FIRING_B
Animation = AIHERO_SKL.AIHERO_ATC
AnimationMode = MANUAL
Flags = START_FRAME_LAST
TransitionKey = TRANS_Stabbing
HideSubObject = MUZZLEFX01
End

ConditionState = RELOADING_B
Animation = AIHERO_SKL.AIHERO_ATC
AnimationMode = ONCE
Flags = START_FRAME_FIRST
HideSubObject = MUZZLEFX01
End
AliasConditionState = BETWEEN_FIRING_SHOTS_B

TransitionState = TRANS_Stabbing TRANS_Stand
Animation = AIHERO_SKL.AIHERO_ATC2
AnimationMode = ONCE
End

; Injured Stab animations
ConditionState = PREATTACK_B REALLYDAMAGED
Animation = AIHERO_SKL.AIHERO_IATC1
AnimationMode = ONCE
TransitionKey = TRANS_StabbingInjured
HideSubObject = MUZZLEFX01
End
AliasConditionState = PREATTACK_B MOVING REALLYDAMAGED
AliasConditionState = PREATTACK_B FIRING_B REALLYDAMAGED
AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B REALLYDAMAGED

ConditionState = FIRING_B REALLYDAMAGED
Animation = AIHERO_SKL.AIHERO_IATC2
AnimationMode = MANUAL
Flags = START_FRAME_LAST
TransitionKey = TRANS_StabbingInjured
HideSubObject = MUZZLEFX01
End

ConditionState = RELOADING_B REALLYDAMAGED
Animation = AIHERO_SKL.AIHERO_IATC2
AnimationMode = ONCE
Flags = START_FRAME_FIRST
HideSubObject = MUZZLEFX01
End
AliasConditionState = BETWEEN_FIRING_SHOTS_B REALLYDAMAGED

TransitionState = TRANS_StabbingInjured TRANS_StandInjured
Animation = AIHERO_SKL.AIHERO_IATC2
AnimationMode = ONCE
End 

    ; cheering
    ConditionState      = SPECIAL_CHEERING
      Animation         = AIHERO_SKL.AIHERO_CHA
      AnimationMode     = ONCE
    End
    
    ; injured cheering
    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = AIHERO_SKL.AIHERO_ICHA
      AnimationMode     = ONCE
    End
    
    ; climbing
    ConditionState      = CLIMBING
      Animation         = AIHERO_SKL.AIHERO_CLMID
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Climbing
    End
    AliasConditionState = RAPPELLING
    AliasConditionState = CLIMBING REALLYDAMAGED
    AliasConditionState = RAPPELLING REALLYDAMAGED

    ConditionState      = CLIMBING MOVING
      Animation         = AIHERO_SKL.AIHERO_CLMUP
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Climbing
    End
    AliasConditionState = CLIMBING MOVING REALLYDAMAGED

    ConditionState      = RAPPELLING MOVING
      Animation         = AIHERO_SKL.AIHERO_CLMUP
      AnimationMode     = LOOP_BACKWARDS
      TransitionKey     = TRANS_Climbing
    End
    AliasConditionState = RAPPELLING MOVING REALLYDAMAGED

    ; dying anims
    ConditionState      = DYING
      Animation         = AIHERO_SKL.AIHERO_DTA
      Animation         = AIHERO_SKL.AIHERO_DTB
      Animation         = AIHero_SKL.AIHero_IDTA
      Animation         = AIHero_SKL.AIHero_IDTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End
    AliasConditionState = RAPPELLING DYING
    AliasConditionState = CLIMBING DYING

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = AIHERO_SKL.AIHERO_ADTG21
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = AIHERO_SKL.AIHERO_ADTG22
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = AIHERO_SKL.AIHERO_ADTG23
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ; misc anims
    ConditionState      = FREEFALL
      Animation         = AIHERO_SKL.AIHERO_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = AIHERO_SKL.AIHERO_PHG
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = AIHERO_SKL.AIHERO_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = AIHERO_SKL.AIHERO_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = AIHERO_SKL.AIHERO_PTD
      AnimationMode     = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ColonelBurton
  Side                = AmericaCyberneticGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                
  VisionRange         = 150
  ShroudClearingRange = 300
  BuildCost = 2000
  BuildTime = 20.0

  Prerequisites
    Object = Cybr_AmericaBarracks
    Object = Cybr_AmericaStrategyCenter
    Science = SCIENCE_CYBR SCIENCE_AIRF SCIENCE_LAZR SCIENCE_SUPW
  End

  ExperienceValue     = 52 69 92 122
  ExperienceRequired  = 0 155 206 275
  IsTrainable         = Yes
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Cybr_AmericaInfantryColonelBurtonCommandSet
  MaxSimultaneousOfType = 1

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     ColonelBurtonBFGWeapon
    Weapon              = SECONDARY   ColonelBurtonKnifeWeapon
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = ColonelBurtonVoiceSelect
  VoiceMove = ColonelBurtonVoiceMove
  VoiceAttack = ColonelBurtonVoiceAttack
  VoiceFear = ColonelBurtonVoiceFear
  VoiceGuard = ColonelBurtonVoiceMove
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceMelee = ColonelBurtonVoiceAttackKnife
    VoiceCreate           = ColonelBurtonVoiceCreate
    VoiceGarrison         = ColonelBurtonVoiceGarrison
    VoiceEnter            = ColonelBurtonVoiceMove
    VoiceEnterHostile     = ColonelBurtonVoiceMove
    VoiceGetHealed        = ColonelBurtonVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE HERO CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1100.0
    InitialHealth   = 1100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes STEALTHED
  End

  Behavior = StealthUpdate ModuleTag_Stealth
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = FIRING_PRIMARY
    HintDetectableConditions    = IS_FIRING_WEAPON 
    FriendlyOpacityMin          = 50.0%
    FriendlyOpacityMax          = 100.0%
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent      = EnemyColonelBurtonDetected
    OwnDetectionEvaEvent        = OwnColonelBurtonDetected
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit. 
  End

  Behavior = AutoFindHealingUpdate   ModuleTag_05 ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000
    ScanRange = 300
    NeverHeal = 0.85
    AlwaysHeal = 0.25
  End

  Locomotor = SET_NORMAL ColonelBurtonGroundLocomotor ColonelBurtonCliffLocomotor
  Locomotor = SET_NORMAL_UPGRADED BasicHumanLocomotorUpgraded ColonelBurtonCliffLocomotor

  Behavior = LocomotorSetUpgrade ModuleTag_77
    TriggeredBy = Upgrade_AmericaExosceletons
  End

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 24.0
  End

  Behavior = SpecialAbility ModuleTag_08
    SpecialPowerTemplate = SpecialAbilityColonelBurtonRemoteCharges
    UpdateModuleStartsAttack = Yes
    InitiateSound             = ColonelBurtonVoicePlantRemoteCharge
  End
  Behavior = SpecialAbilityUpdate ModuleTag_09
    SpecialPowerTemplate = SpecialAbilityColonelBurtonRemoteCharges
    StartAbilityRange = 0.0
    PreparationTime = 0
    SpecialObject = RemoteC4Charge
    MaxSpecialObjects = 1
    SpecialObjectsPersistWhenOwnerDies = No ;Charges are removed instantly when owner dies (nobody can detonate).
    AlwaysValidateSpecialObjects = Yes      ;Coupled with the above setting, this one is necessary for code optimization.
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
    UnpackTime              = 5500          ;NOTE: Modifying this value will require modifying the delay for ColonelBurtonPlantCharge
    PackTime                = 0
    SkipPackingWithNoTarget = Yes           ;When yes, the packing/unpacking will be ignored when detonating charges.
    FlipOwnerAfterUnpacking = Yes
    FleeRangeAfterCompletion = 100.0         ;Runs away after finishing ability
    UnpackSound               = ColonelBurtonPlantCharge
    LoseStealthOnTrigger      = Yes
    PreTriggerUnstealthTime   = 5000 ; in milliseconds
  End

  Behavior = SpecialAbility ModuleTag_10
    SpecialPowerTemplate = SpecialAbilityColonelBurtonTimedCharges
    UpdateModuleStartsAttack = Yes
    InitiateSound             = ColonelBurtonVoicePlantTimedCharge
  End
  Behavior = SpecialAbilityUpdate ModuleTag_11
    SpecialPowerTemplate = SpecialAbilityColonelBurtonTimedCharges
    StartAbilityRange = 0.0
    PreparationTime = 0
    SpecialObject = TimedC4Charge
    MaxSpecialObjects = 10
    SpecialObjectsPersistWhenOwnerDies = Yes 
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
    UnpackTime              = 5500          ;NOTE: Modifying this value will require modifying the delay for ColonelBurtonPlantCharge
    FlipOwnerAfterUnpacking = Yes
    FleeRangeAfterCompletion = 100.0         ;Runs away after finishing ability
    UnpackSound               = ColonelBurtonPlantCharge
    LoseStealthOnTrigger      = Yes
    PreTriggerUnstealthTime   = 5000 ; in milliseconds
  End
 
  Behavior = ExperienceScalarUpgrade ModuleTag_12
    TriggeredBy   = Upgrade_AmericaAdvancedTraining
    AddXPScalar   = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End
 
; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_ColonelBurtonDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_ColonelBurtonDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireUSA
    OCL                 = INITIAL OCL_FlamingInfantryUSA
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
    Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_ColonelBurtonDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_18
    PoisonDamageInterval = 100
    PoisonDuration = 3000
  End

  Behavior = LockWeaponCreate ModuleTag_21Lock
    SlotToLock = PRIMARY
  End

  Behavior = StealthDetectorUpdate ModuleTag_MineDetector ;+
    DetectionRate   = 250
    ExtraForbiddenKindOf     = VEHICLE INFANTRY STRUCTURE AIRCRAFT
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Cybr_AmericaInfantryRanger

  ; *** ART Parameters ***
  SelectPortrait         = SACybRanger_L
  ButtonImage            = SACybRanger
  
  UpgradeCameo1 = Upgrade_InfantryCaptureBuilding
  UpgradeCameo2 = Upgrade_AmericaRangerFlashBangGrenade
  UpgradeCameo3 = Upgrade_AmericaExosceletons

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

    ; --- Idle
    DefaultConditionState
      Model             = RANGER3
      IdleAnimation     = AIRngr_SKL.AIRngr_STA 0 35
      IdleAnimation     = AIRngr_SKL.AIRngr_IDA
      IdleAnimation     = AIRngr_SKL.AIRngr_IDB
      AnimationMode     = ONCE
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponFireFXBone  = SECONDARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle
      TransitionKey     = TRANS_Stand
    End

    ConditionState      = REALLYDAMAGED
      IdleAnimation     = AIRngr_SKL.AIRngr_STB 0 35
      IdleAnimation     = AIRngr_SKL.AIRngr_IDC
      IdleAnimation     = AIRngr_SKL.AIRngr_IDD
      AnimationMode     = ONCE
      TransitionKey     = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_SA2SB
      AnimationMode     = ONCE
    End

    ; --- attacking (Machine Gun)
    ConditionState      = USING_WEAPON_A
      Animation         = AIRngr_SKL.AIRngr_ATA
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringA
    End

    ConditionState      = USING_WEAPON_A REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_ATA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringAInjured
    End

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = AIRngr_SKL.AIRngr_A2WAA
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Stand TRANS_FiringA
      Animation         = AIRngr_SKL.AIRngr_ATAST
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_FiringA TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_ATAED
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_StandInjured TRANS_FiringAInjured
      Animation         = AIRngr_SKL.AIRngr_S2WAA
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_FiringAInjured TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_WAA2S
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End
    
    TransitionState     = TRANS_Stand TRANS_Move
      Animation         = AIRngr_SKL.AIRngr_STA2RNA
      AnimationMode     = ONCE
    End

    ; --- attacking (Grenade Launcher)
    ConditionState      = PREATTACK_B 
      Animation         = AIRngr_SKL.AIRngr_ATBA
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringB
    End
    AliasConditionState = PREATTACK_B MOVING
    AliasConditionState = PREATTACK_B FIRING_B
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B

    ConditionState      = FIRING_B
      Animation         = AIRngr_SKL.AIRngr_ATBB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringB
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_B
      Animation         = AIRngr_SKL.AIRngr_ATBB
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_FiringB
      WaitForStateToFinishIfPossible = TRANS_FiringB
    End
    AliasConditionState = RELOADING_B

    TransitionState     = TRANS_Stand TRANS_FiringB
      Animation         = AIRngr_SKL.AIRngr_ATBST1
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_FiringB TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_ATBST2
      AnimationMode     = ONCE
    End

    ConditionState      = PREATTACK_B REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_ATB2A
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringBInjured
    End
    AliasConditionState = PREATTACK_B MOVING REALLYDAMAGED
    AliasConditionState = PREATTACK_B FIRING_B REALLYDAMAGED
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B REALLYDAMAGED

    ConditionState      = FIRING_B REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_ATB2B
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringBInjured
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_ATB2B
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_FiringBInjured
      WaitForStateToFinishIfPossible = TRANS_FiringBInjured
    End
    AliasConditionState = RELOADING_B REALLYDAMAGED

    TransitionState     = TRANS_StandInjured TRANS_FiringBInjured
      Animation         = AIRngr_SKL.AIRngr_ATB2ST1
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_FiringBInjured TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_ATB2ST2
      AnimationMode     = ONCE
    End

    ; -- cross-attack transitions
    TransitionState     = TRANS_FiringA TRANS_FiringB
      Animation         = AIRngr_SKL.AIRngr_ATA2AB
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_FiringB TRANS_FiringA
      Animation         = AIRngr_SKL.AIRngr_ATA2AB
      AnimationMode     = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 4 4
    End

    ; --- moving
    ConditionState      = MOVING
      Animation         = AIRngr_SKL.AIRngr_RNA 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_Move
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING

    ConditionState      = MOVING REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_RNB 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_Move
    End
    AliasConditionState = MOVING REALLYDAMAGED ATTACKING
    
    ; --- dying anims
    ConditionState      = DYING
      Animation         = AIRngr_SKL.AIRngr_DTA
      Animation         = AIRngr_SKL.AIRngr_DTB
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = AIRngr_SKL.AIRngr_ADTF1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = AIRngr_SKL.AIRngr_ADTF2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = AIRngr_SKL.AIRngr_ADTF3
      AnimationMode     = ONCE
      TransitionKey     = None
      ParticleSysBone   = None BloodPoolGrowing00
    End
    AliasConditionState = DYING SPLATTED

    ; --- cheering
    ConditionState      = SPECIAL_CHEERING
      Animation         = AIRngr_SKL.AIRngr_CHA
      AnimationMode     = LOOP
    End

    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_CHB
      AnimationMode     = LOOP
    End

    ; ----- PARACHUTING ANIMATIONS
    ConditionState      = FREEFALL
      Animation         = AIRngr_SKL.AIRngr_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING
    ConditionState      = PARACHUTING
      Animation         = AIRngr_SKL.AIRngr_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING
    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = AIRngr_SKL.AIRngr_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End
    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_PTD
      AnimationMode     = ONCE
    End
    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_PTD
      AnimationMode     = ONCE
    End

    ; --- RAPPELLING ANIMATIONS
    ConditionState      = RAPPELLING
      Animation         = AIRngr_SKL.AIRngr_RPL1 ;30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_Rappelling
    End
    AliasConditionState = MOVING RAPPELLING

    TransitionState     = TRANS_Rappelling TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_RPL2
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Rappelling TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_RPL2
      AnimationMode     = ONCE
    End

    ; ------- Bldg-capture
    ConditionState      = UNPACKING
      Model             = RANGER3_F
      Animation         = AIRngr_F_SKL.AIRngr_F_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState      = RAISING_FLAG
      Model             = RANGER3_F
      Animation         = AIRngr_F_SKL.AIRngr_F_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState      = PACKING
      Model             = RANGER3_F
      Animation         = AIRngr_F_SKL.AIRngr_F_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState     = TRANS_Raising TRANS_Packing
      Model             = RANGER3_F
      Animation         = AIRngr_F_SKL.AIRngr_F_FDP2
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Cyborg
  Side                = AmericaCyberneticGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                
  VisionRange         = 150
  ShroudClearingRange = 200
  BuildCost           = 250
  BuildTime           = 2.5
  
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY Cybr_RangerAdvancedCombatRifle
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY Cybr_RangerAdvancedCombatRifle
    Weapon = SECONDARY RangerFlashBangGrenadeWeapon
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

  ArmorSet
    Conditions      = None
    Armor           = CyborgArmor
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Cybr_AmericaBarracks
  End
  
  ExperienceValue    = 10 13 17 23
  ExperienceRequired =  0 29 39 52
  IsTrainable        = Yes
  CrushableLevel     = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = Cybr_AmericaInfantryRangerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = CyborgVoiceSelect
  VoiceMove   = CyborgVoiceMove
  VoiceGuard  = CyborgVoiceMove
  VoiceAttack = CyborgVoiceAttack
  VoiceFear   = CyborgVoiceFear
  VoiceTaskComplete = CyborgVoiceCreate

  UnitSpecificSounds
    VoiceEnter        = CyborgVoiceMove
    VoiceEnterHostile = CyborgVoiceMove
    VoiceGarrison     = CyborgVoiceMove
    VoiceCreate       = CyborgVoiceCreate
    VoiceClearBuilding = CyborgVoiceAttack
    VoiceGetHealed     = CyborgVoiceMove
  End

  UnitSpecificFX
    CombatDropKillFX = FX_RangerCombatDropKill
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE

  Behavior = CommandButtonHuntUpdate ModuleTag_02
  End

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 165.0
    InitialHealth   = 165.0
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_04
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0
  End

  Behavior = AutoFindHealingUpdate ModuleTag_05
    ScanRate = 1000
    ScanRange = 300
    NeverHeal = 0.85
    AlwaysHeal = 0.25
  End

  Behavior = AIUpdateInterface ModuleTag_06
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL BasicHumanLocomotor
  Locomotor = SET_NORMAL_UPGRADED BasicHumanLocomotorUpgraded
  Behavior = LocomotorSetUpgrade ModuleTag_77
    TriggeredBy = Upgrade_AmericaExosceletons
  End

  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 24.0
  End

  Behavior = ProductionUpdate ModuleTag_08
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_09 ; allows use of command button hunt script with this unit. 
  End

  Behavior = WeaponSetUpgrade ModuleTag_10
    TriggeredBy = Upgrade_AmericaRangerFlashBangGrenade
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_CyborgDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_CyborgDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireCyborg
    OCL                 = INITIAL OCL_FlamingInfantryCyborg
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_CyborgDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
; --- end Death modules ---

  Behavior = SquishCollide ModuleTag_12
  End

  Behavior = PoisonedBehavior ModuleTag_17
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Behavior = SpecialAbility ModuleTag_18
    SpecialPowerTemplate      = SpecialAbilityInfantryCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes ; Unpaused by upgrade module
    InitiateSound         = RangerVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_19
    SpecialPowerTemplate  = SpecialAbilityInfantryCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 20000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 8
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_20
    SpecialPowerTemplate = SpecialAbilityInfantryCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End

  Behavior = LockWeaponCreate ModuleTag_21
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 13.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Cybr_AmericaInfantryMissileDefender

  ; *** ART Parameters ***
  SelectPortrait         = SACybMD_L
  ButtonImage            = SACybMD

  UpgradeCameo1 = Upgrade_AmericaMissileAI
  UpgradeCameo2 = Upgrade_AmericaExosceletons
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model             = CITHNT_SKN
      IdleAnimation     = NITHNT_SKL.NITHNT_STA 0 30
      IdleAnimation     = NITHNT_SKL.NITHNT_IDA
      IdleAnimation     = NITHNT_SKL.NITHNT_IDB
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 0.8 1.2
      TransitionKey     = TRANS_Stand
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle

    End
    AliasConditionState = REALLYDAMAGED

    ConditionState      = MOVING
      Animation         = NITHNT_SKL.NITHNT_RNA 20
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING REALLYDAMAGED

    ;--------------------------------------------------- Firing weapon
    ConditionState      = FIRING_A 
      Animation         = NITHNT_SKL.NITHNT_ATA 
      AnimationMode     = ONCE
      TransitionKey     = TRANS_START_FIRING
    End
    AliasConditionState = FIRING_A REALLYDAMAGED
    AliasConditionState = FIRING_B
    AliasConditionState = FIRING_B REALLYDAMAGED

    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = NITHNT_SKL.NITHNT_STA
      AnimationMode     = ONCE
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = BETWEEN_FIRING_SHOTS_B
    AliasConditionState = BETWEEN_FIRING_SHOTS_B REALLYDAMAGED

    ConditionState      = RELOADING_A
      Animation         = NITHNT_SKL.NITHNT_ATA 10
      AnimationMode     = ONCE
      ;WeaponLaunchBone = PRIMARY WeaponA
    End
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING RELOADING_A REALLYDAMAGED
    AliasConditionState = RELOADING_B
    AliasConditionState = MOVING RELOADING_B
    AliasConditionState = MOVING RELOADING_B REALLYDAMAGED

    ;---- Dying
    ConditionState      = DYING
      Animation         = NITHNT_SKL.NITHNT_DTA
      Animation         = NITHNT_SKL.NITHNT_DTB
      AnimationSpeedFactorRange = 0.9 1.25
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NITHNT_SKL.NITHNT_ADTA1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NITHNT_SKL.NITHNT_ADTA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NITHNT_SKL.NITHNT_ADTA3
      AnimationMode     = ONCE
      TransitionKey     = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ;PARACHUTING ANIMATIONS
    ConditionState      = FREEFALL
      Animation         = NITHNT_SKL.NITHNT_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = NITHNT_SKL.NITHNT_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = NITHNT_SKL.NITHNT_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = NITHNT_SKL.NITHNT_PTD
      AnimationMode     = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MissileCyborg
  Side                = AmericaCyberneticGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1
  VisionRange         = 190
  ShroudClearingRange = 200
  BuildCost = 325
  BuildTime = 3.5

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    MissileDefenderMissileWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY    Cybr_MissileDefenderMissileWeapon
    Weapon = SECONDARY  Cybr_MissileDefenderAssistMissileWeapon
    AutoChooseSources  = SECONDARY  NONE
    ShareWeaponReloadTime = Yes
  End

  ArmorSet
    Conditions = None
    Armor      = CyborgArmor
    DamageFX   = InfantryDamageFX
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_AmericaMissileAI
  End

  Prerequisites
    Object = Cybr_AmericaBarracks
  End
  
  ExperienceValue = 14 19 25 34
  ExperienceRequired = 0 43 57 76
  IsTrainable = Yes
  CrushableLevel      = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Cybr_AmericaGenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = CyborgVoiceSelect
  VoiceMove   = CyborgVoiceMove
  VoiceGuard  = CyborgVoiceMove
  VoiceAttack = CyborgVoiceAttack
  VoiceFear   = CyborgVoiceFear
  VoiceTaskComplete = CyborgVoiceCreate

  UnitSpecificSounds
    VoiceEnter        = CyborgVoiceMove
    VoiceEnterHostile = CyborgVoiceMove
    VoiceGarrison     = CyborgVoiceMove
    VoiceCreate       = CyborgVoiceCreate
    VoiceClearBuilding = CyborgVoiceAttack
    VoiceGetHealed     = CyborgVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 130.0
    InitialHealth   = 130.0
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_03
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = AutoFindHealingUpdate   ModuleTag_05 ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000
    ScanRange = 300
    NeverHeal = 0.85
    AlwaysHeal = 0.25
  End

  Locomotor = SET_NORMAL BasicHumanLocomotor
  Locomotor = SET_NORMAL_UPGRADED BasicHumanLocomotorUpgraded
  Behavior = LocomotorSetUpgrade ModuleTag_77
    TriggeredBy = Upgrade_AmericaExosceletons
  End

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 24.0
  End

  Behavior = SquishCollide ModuleTag_10
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_CyborgDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_CyborgDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireCyborg
    OCL                 = INITIAL OCL_FlamingInfantryCyborg
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_CyborgDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinUSA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = AssistedTargetingUpdate ModuleTag_07A
    AssistingClipSize = 1                       ; How many shots to make when asked by someone of my kind who has a RequestAssistRange weapon
    AssistingWeaponSlot = SECONDARY             ; And the weapon to use.  Should have huge range and no natural clip.
    LaserFromAssisted = PatriotBinaryDataStream ; Stream to draw from the requestor to me
    LaserToTarget = PatriotBinaryDataStream     ; Stream to draw from me to the target
  End
 
  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;----------------------------------------------------------
Object Cybr_AmericaVehicleTomahawk

  ; *** ART Parameters ***
  SelectPortrait         = SACTomahawk_L
  ButtonImage            = SACTomahawk

  UpgradeCameo1 = Upgrade_AmericaMissileAI
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVATACMS
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      WeaponLaunchBone = TERTIARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = AVATACMS_D
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = REALLYDAMAGED AFLAME
      Model = AVATACMS_D
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Atacms
  Side                = AmericaCyberneticGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 5
  BuildCost           = 1400
  BuildTime           = 14.0
  VisionRange         = 175
  ShroudClearingRange = 175
  ExperienceValue     = 52 75 110 157
  ExperienceRequired  = 0 155 225 329
  IsTrainable         = Yes

  Prerequisites
    Object = Cybr_AmericaWarFactory
    Object = Cybr_AmericaStrategyCenter
  End

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY Cybr_TomahawkMissileWeapon
    Weapon = TERTIARY Cybr_TomahawkMissileLaunchDroneWeapon
    AutoChooseSources  = TERTIARY   NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY Cybr_TomahawkMissileWeaponUpgraded
    Weapon = SECONDARY Cybr_TomahawkMissileAssistWeapon
    Weapon = TERTIARY Cybr_TomahawkMissileLaunchDroneWeapon
    AutoChooseSources  = PRIMARY    FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources  = SECONDARY  NONE
    AutoChooseSources  = TERTIARY   NONE
    ShareWeaponReloadTime = Yes
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_AmericaMissileAI
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End

  CrusherLevel    = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Cybr_AmericaATACMSCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TomahawkVoiceSelect
  VoiceMove = TomahawkVoiceMove
  VoiceGuard = TomahawkVoiceMove
  VoiceAttack = TomahawkVoiceAttack
  SoundMoveStart = TomahawkMoveStart
  SoundMoveStartDamaged = TomahawkMoveStart
  
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate = TomahawkVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoopLoud
    SoundEject = PilotSoundEject
    VoiceEject = PilotVoiceEject
    VoiceCrush = TomahawkVoiceCrush
    VoiceEnter = TomahawkVoiceMove
    VoiceBombard = TomahawkVoiceAttack
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE DONT_AUTO_CRUSH_INFANTRY CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DeployStyleAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 45
      TurretPitchRate = 30
      AllowsPitch = Yes
      FirePitch = 60
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      InitiallyDisabled = yes
    End
    AutoAcquireEnemiesWhenIdle = Yes
    PackTime = 500
    UnpackTime = 500
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
  End

  Locomotor = SET_NORMAL TomahawkLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 500
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_AmericaVehicleTomahawkDie
    FX =  FINAL FX_AmericaVehicleTomahawkDeathExplosion
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_09
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = DestroyDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_AmericaVehicleTomahawkDieSimple
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = AssistedTargetingUpdate ModuleTag_07A
    AssistingClipSize = 2                       ; How many shots to make when asked by someone of my kind who has a RequestAssistRange weapon
    AssistingWeaponSlot = SECONDARY             ; And the weapon to use.  Should have huge range and no natural clip.
    LaserFromAssisted = PatriotBinaryDataStream ; Stream to draw from the requestor to me
    LaserToTarget = PatriotBinaryDataStream     ; Stream to draw from me to the target
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 12.0
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45   
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleDozer

  ; *** ART Parameters ***
  SelectPortrait         = SACMech_L
  ButtonImage            = SACMech

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model = Thresher
      Animation = Thresher.Thresher
      AnimationMode = LOOP
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone = NONE ThresherWashRing
   End

   ConditionState     = ACTIVELY_CONSTRUCTING
      Model = Thresher
      Animation = Thresher.Thresher
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone = NONE ThresherWashRing
      Flags           = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = "LEFT PALM" SparksMedium
      ParticleSysBone = "RIGHT PALM" SparksMedium
    End

    ConditionState      = MOVING
      Model = Thresher
      Animation = Thresher.Thresher
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY HelixExhaust
      ParticleSysBone = BODY HeliExhaustHeat
    End

    ConditionState      = MOVING ACTIVELY_CONSTRUCTING
      Model = Thresher
      Animation = Thresher.Thresher
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY HelixExhaust
      ParticleSysBone = BODY HeliExhaustHeat
      ParticleSysBone = "LEFT PALM" SparksMedium
      ParticleSysBone = "RIGHT PALM" SparksMedium
    End

    ConditionState = REALLYDAMAGED
      Model = Thresher_D
      Animation = Thresher_D.Thresher_D
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
    End
    AliasConditionState = RUBBLE

    ConditionState      = ACTIVELY_CONSTRUCTING REALLYDAMAGED
      Model = Thresher_D
      Animation = Thresher_D.Thresher_D
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = "LEFT PALM" SparksMedium
      ParticleSysBone = "RIGHT PALM" SparksMedium
    End

    ConditionState      = MOVING REALLYDAMAGED
      Model = Thresher_D
      Animation = Thresher_D.Thresher_D
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY HelixExhaust
      ParticleSysBone = BODY HeliExhaustHeat
    End

    ConditionState      = MOVING ACTIVELY_CONSTRUCTING REALLYDAMAGED
      Model = Thresher_D
      Animation = Thresher_D.Thresher_D
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY HelixExhaust
      ParticleSysBone = BODY HeliExhaustHeat
      ParticleSysBone = "LEFT PALM" SparksMedium
      ParticleSysBone = "RIGHT PALM" SparksMedium
    End

    ConditionState = AFLAME
      Model = Thresher
      Animation = Thresher.Thresher
      AnimationMode = LOOP
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      ParticleSysBone = BODY TankFireContinious
    End

    ConditionState = ACTIVELY_CONSTRUCTING AFLAME
      Model = Thresher
      Animation = Thresher.Thresher
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY TankFireContinious
      ParticleSysBone = "LEFT PALM" SparksMedium
      ParticleSysBone = "RIGHT PALM" SparksMedium
    End

    ConditionState      = MOVING AFLAME
      Model = Thresher
      Animation = Thresher.Thresher
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY HelixExhaust
      ParticleSysBone = BODY HeliExhaustHeat
      ParticleSysBone = BODY TankFireContinious
    End

    ConditionState      = MOVING ACTIVELY_CONSTRUCTING AFLAME
      Model = Thresher
      Animation = Thresher.Thresher
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY HelixExhaust
      ParticleSysBone = BODY HeliExhaustHeat
      ParticleSysBone = "LEFT PALM" SparksMedium
      ParticleSysBone = "RIGHT PALM" SparksMedium
      ParticleSysBone = BODY TankFireContinious
    End

    ConditionState = REALLYDAMAGED AFLAME
      Model = Thresher_D
      Animation = Thresher_D.Thresher_D
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      ParticleSysBone = BODY TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    ConditionState      = ACTIVELY_CONSTRUCTING REALLYDAMAGED AFLAME
      Model = Thresher_D
      Animation = Thresher_D.Thresher_D
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone   = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY TankFireContinious
      ParticleSysBone = "LEFT PALM" SparksMedium
      ParticleSysBone = "RIGHT PALM" SparksMedium
    End

    ConditionState      = MOVING REALLYDAMAGED AFLAME
      Model = Thresher_D
      Animation = Thresher_D.Thresher_D
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone = NONE ThresherWashRing
      Flags           = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY HelixExhaust
      ParticleSysBone = BODY HeliExhaustHeat
      ParticleSysBone = BODY TankFireContinious
    End

    ConditionState      = MOVING ACTIVELY_CONSTRUCTING REALLYDAMAGED AFLAME
      Model = Thresher_D
      Animation = Thresher_D.Thresher_D
      AnimationSpeedFactorRange = 0.5 0.75
      ParticleSysBone     = NONE ThresherWashRing
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = BODY HelixExhaust
      ParticleSysBone = BODY HeliExhaustHeat
      ParticleSysBone = "LEFT PALM" SparksMedium
      ParticleSysBone = "RIGHT PALM" SparksMedium
      ParticleSysBone = BODY TankFireContinious
    End

    ConditionState = OVER_WATER
      ParticleSysBone = OVER_WATER ThresherOverWater
      ParticleSysBone = OVER_WATER ThresherOverWaterDust
    End
    AliasConditionState = OVER_WATER REALLYDAMAGED
    AliasConditionState = OVER_WATER RUBBLE
    AliasConditionState = OVER_WATER AFLAME
    AliasConditionState = OVER_WATER AFLAME REALLYDAMAGED
    AliasConditionState = OVER_WATER AFLAME RUBBLE
    AliasConditionState = OVER_WATER MOVING
    AliasConditionState = OVER_WATER REALLYDAMAGED MOVING
    AliasConditionState = OVER_WATER RUBBLE MOVING
    AliasConditionState = OVER_WATER AFLAME MOVING
    AliasConditionState = OVER_WATER AFLAME REALLYDAMAGED MOVING
    AliasConditionState = OVER_WATER AFLAME RUBBLE MOVING
    AliasConditionState = OVER_WATER ACTIVELY_CONSTRUCTING
    AliasConditionState = OVER_WATER REALLYDAMAGED ACTIVELY_CONSTRUCTING
    AliasConditionState = OVER_WATER RUBBLE ACTIVELY_CONSTRUCTING
    AliasConditionState = OVER_WATER AFLAME ACTIVELY_CONSTRUCTING
    AliasConditionState = OVER_WATER AFLAME REALLYDAMAGED ACTIVELY_CONSTRUCTING
    AliasConditionState = OVER_WATER AFLAME RUBBLE ACTIVELY_CONSTRUCTING
  End

  Scale = 1.5

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BuilderMech
  Side                = AmericaCyberneticGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3
  BuildCost           = 1000
  BuildTime           = 10.0
  VisionRange         = 200
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None
  End

  ArmorSet
    Conditions = None
    Armor      = CyberDozerArmor
    DamageFX   = TankDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = CyberDozerArmorUpgraded
    DamageFX   = TankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  ExperienceValue     = 0 0 0 0 ;Experience point value at each level
  CrusherLevel        = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel      = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Cybr_AmericaDozerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = ThresherVoiceSelect
  VoiceMove           = ThresherVoiceMove
  VoiceGuard          = ThresherVoiceMove
  SoundMoveStart      = ThresherMoveStart
  SoundMoveStartDamaged = ThresherMoveStart
  VoiceTaskComplete     = ThresherVoiceTaskComplete

  UnitSpecificSounds
    VoiceCreate        = ThresherVoiceCreate
    VoiceCrush         = ThresherVoiceMove
    VoiceDisarm        = ThresherVoiceMove
    VoiceEnter         = ThresherVoiceMove
    VoiceBuildResponse = ThresherVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf        = PRELOAD SCORE SELECTABLE CAN_CAST_REFLECTIONS DOZER DRONE VEHICLE 
 
  Body            = ActiveBody ModuleTag_02
    MaxHealth     = 300.0
    InitialHealth = 300.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = DozerAIUpdate ModuleTag_03
    RepairHealthPercentPerSecond = 2%
    BoredTime                    = 5000
    BoredRange                   = 150
    AutoAcquireEnemiesWhenIdle   = Yes
  End

  Locomotor = SET_NORMAL ThresherLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 75.0
  End

  Behavior                 = TransitionDamageFX ModuleTag_06
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 500
    FX  = INITIAL FX_BuilderCatchFire
    OCL = FINAL   OCL_AmericaCyberDozerExplode
    FX  = FINAL   FX_BattleMasterExplosionOneFinal
  End   

  Behavior = FXListDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = DestroyDie ModuleTag_24
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
    CrateData = SalvageCrateData
  End
  
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = CommandSetUpgrade ModuleTag_ComSet01
    CommandSet = Cybr_AmericaDozerCommandSetDrones
    TriggeredBy = Upgrade_SwitchCommandSet
    RemovesUpgrades = Upgrade_SwitchBackCommandSet
  End
  Behavior = CommandSetUpgrade ModuleTag_ComSet02
    CommandSet = Cybr_AmericaDozerCommandSet
    TriggeredBy = Upgrade_SwitchBackCommandSet
    RemovesUpgrades = Upgrade_SwitchCommandSet Upgrade_SwitchBackCommandSet
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1
  End

  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 15.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 45
  ShadowSizeY = 45
  ShadowTexture = ShadowI
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleSentryDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAsentry_L
  ButtonImage            = SAsentry
  
  UpgradeCameo1 = Upgrade_AmericaDroneArmor
  UpgradeCameo2 = Upgrade_StealthCovering
  UpgradeCameo3 = Upgrade_AmericaTransmitionCodes
  UpgradeCameo4 = Upgrade_AmericaRangerFlashBangGrenade
  UpgradeCameo5 = Upgrade_APBullets

  Draw = W3DTankDraw ModuleTag_01
    
    InitialRecoilSpeed   = 10
    MaxRecoilDistance    = 1.5
    RecoilSettleSpeed    = 3

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model             = AVCybSntry
      Turret            = TURRET01
      WeaponFireFXBone  = PRIMARY   TurretFX
      WeaponLaunchBone  = PRIMARY   TurretFX
      WeaponMuzzleFlash = PRIMARY   TurretFX
      WeaponRecoilBone  = PRIMARY   TURRETUP09
      WeaponFireFXBone  = SECONDARY TurretMS02
      WeaponLaunchBone  = SECONDARY TurretMS02
      WeaponFireFXBone  = TERTIARY  TurretMS02
      WeaponLaunchBone  = TERTIARY  TurretMS02
      HideSubObject     = TURRETUP01
    End
    ConditionState = REALLYDAMAGED
      Model             = AVCybSntry_D
      HideSubObject     = TURRETUP01
    End
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model             = AVCybSntry
      ShowSubObject     = TURRETUP01
    End
    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model             = AVCybSntry_D
      ShowSubObject     = TURRETUP01
    End
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE RUBBLE

    ConditionState = AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model             = AVCybSntry_D
      HideSubObject     = TURRETUP01
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    ConditionState = WEAPONSET_PLAYER_UPGRADE AFLAME
      Model             = AVCybSntry
      ShowSubObject     = TURRETUP01
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED AFLAME
      Model             = AVCybSntry_D
      ShowSubObject     = TURRETUP01
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE RUBBLE AFLAME

    TrackMarks           = EXTnkTrack.tga
    TreadDebrisLeft      = SentryDroneTrackDebrisDirtLeft
    TreadDebrisRight     = SentryDroneTrackDebrisDirtRight
    TreadAnimationRate   = 5.0
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SentryDrone
  Side                = AmericaCyberneticGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1                
  BuildCost           = 550
  BuildTime           = 5.5
  VisionRange         = 200
  ShroudClearingRange = 400
  ExperienceValue     = 23 33 48 69
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes

  WeaponSet
    Conditions = none
    Weapon = PRIMARY SentryDroneGun
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY SentryDroneGun
    Weapon = SECONDARY FlashMissileWeapon
  End

  ArmorSet
    Conditions = None
    Armor      = CyberDroneArmor
    DamageFX   = TruckDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = CyberDroneArmorUpgraded
    DamageFX   = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
  End

  CrusherLevel   = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = Cybr_AmericaGenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = SentryDroneMoveStart
  SoundMoveStartDamaged = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    VoiceCreate         = NoSound
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS SCORE ATTACK_NEEDS_LINE_OF_SIGHT DRONE VEHICLE SALVAGER
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 180
      TurretPitchRate       = 180
      MinPhysicalPitch      = -25
      AllowsPitch           = yes
      RecenterTime          = 1000
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed NotWhileAttacking
  End

  Locomotor = SET_NORMAL Cybr_SentryLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_AmericaVehicleSentryDroneDie
    FX =  FINAL FX_AmericaVehicleTomahawkDeathExplosion
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
    CrateData = SalvageCrateData
  End

  Behavior = MaxHealthUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 90.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2000
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_AmericaRangerFlashBangGrenade
  End
  Behavior = WeaponBonusUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_APBullets
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry = BOX
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Cybr_AmericaTankAvenger

  ; *** ART Parameters ***
  SelectPortrait         = SACybAvenger_L
  ButtonImage            = SACybAvenger

  UpgradeCameo1 = Upgrade_AmericaDroneArmor
  UpgradeCameo2 = Upgrade_AmericaTransmitionCodes
  
  Draw = W3DOverlordTruckDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    ExtraPublicBone = TurretFX03

    DefaultConditionState
      Model     = AVCbAvngr
      Animation = AVCbAvngr.AVCbAvngr
      AnimationMode = LOOP
      Turret        = TURRET01
      TurretPitch   = BARREL
      WeaponFireFXBone    = PRIMARY FIREPOINT
      WeaponLaunchBone    = PRIMARY FIREPOINT
    End
    ConditionState        = REALLYDAMAGED
      Model     = AVCbAvngr_D
      Animation = AVCbAvngr_D.AVCbAvngr_D
      AnimationMode = LOOP
    End
    AliasConditionState   = RUBBLE

    ConditionState = AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model     = AVCbAvngr_D
      Animation = AVCbAvngr_D.AVCbAvngr_D
      AnimationMode = LOOP
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState   = RUBBLE AFLAME

    TrackMarks = EXTireTrack.tga
    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    LeftRearTireBone = Tire02
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Avenger
  Side               = AmericaCyberneticGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 3
  BuildCost          = 800
  BuildTime          = 8
  VisionRange        = 175
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY AvengerRailgunWeapon
    Weapon = SECONDARY AvengerAirLaserDummy
  End

  ArmorSet
    Conditions      = None
    Armor           = AntiAirVehicleDrone
    DamageFX        = TankDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = AntiAirVehicleDroneCybrUpgraded
    DamageFX        = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
  End

  ExperienceValue     = 31 42 56 75
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  CrusherLevel           = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Cybr_AmericaGenericCommandSet
    
  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = SentryDroneMoveStart
  SoundMoveStartDamaged = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff

  UnitSpecificSounds
    VoiceCreate         = NoSound
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SCORE CANNOT_RETALIATE DRONE VEHICLE SALVAGER
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 360
      TurretPitchRate     = 360
      AllowsPitch         = Yes
    End
    AutoAcquireEnemiesWhenIdle = Yes 
    MoodAttackCheckRate = 500 ; default is 2000
  End
  Locomotor = SET_NORMAL HumveeLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 500
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    FX  = FINAL    FX_GenericTankDeathExplosion
    OCL = FINAL    OCL_AvengerTankDeathEffectSimple
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FXListDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_AvengerTankDeathEffectSimple
  End
  Behavior = DestroyDie ModuleTag_15
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = CreateCrateDie ModuleTag_16
    CrateData = SalvageCrateData
  End

  Behavior = FlammableUpdate ModuleTag_22
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = MaxHealthUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 75.0
    ChangeType    = PRESERVE_RATIO ;;, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End
	
	Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
	End

  Behavior = StealthDetectorUpdate ModuleTag_AircraftDetector ;+
    DetectionRate     = 500
    ExtraRequiredKindOf = AIRCRAFT
  End

  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 11.0
  GeometryHeight = 11.0     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Cybr_AmericaTankMicrowave

  ; *** ART Parameters ***
  SelectPortrait         = SAThunderBolt_L
  ButtonImage            = SAThunderBolt

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes
  
  Draw = W3DTankDraw ModuleTag_01

    ExtraPublicBone = WEAPON02 
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model         = AVMicrowave
      Turret        = TURRET01
      TurretPitch    = LID
      ParticleSysBone = NONE MicrowaveRotisserie
    End
    ConditionState  = USING_WEAPON_A USING_WEAPON_B USING_WEAPON_C
      Model         = AVMicrowave
    End
    ConditionState  = REALLYDAMAGED RUBBLE
      Model         = AVMicrowave_D
      ParticleSysBone = NONE MicrowaveRotisserie
    End
    ConditionState  = REALLYDAMAGED RUBBLE USING_WEAPON_A USING_WEAPON_B USING_WEAPON_C
      Model         = AVMicrowave_D
    End

    ConditionState = AFLAME
      ParticleSysBone = NONE MicrowaveRotisserie
      ParticleSysBone = TURRET01 TankFireContinious
    End
    ConditionState  = USING_WEAPON_A USING_WEAPON_B USING_WEAPON_C AFLAME
      Model         = AVMicrowave
      ParticleSysBone = TURRET01 TankFireContinious
    End
    ConditionState  = REALLYDAMAGED RUBBLE AFLAME
      Model         = AVMicrowave_D
      ParticleSysBone = TURRET01 TankFireContinious
      ParticleSysBone = NONE MicrowaveRotisserie
    End
    ConditionState  = REALLYDAMAGED RUBBLE USING_WEAPON_A USING_WEAPON_B USING_WEAPON_C AFLAME
      Model         = AVMicrowave_D
      ParticleSysBone = TURRET01 TankFireContinious
    End
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Microwave
  Side                = AmericaCyberneticGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3
  BuildCost    = 800
  BuildTime    = 8.0
  VisionRange  = 200
  ShroudClearingRange = 300

  ArmorSet
    Conditions        = None
    Armor             = MicrowaveRoboticTankArmor
    DamageFX          = TankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = MicrowaveRoboticTankArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY MicrowaveTankBuildingDisabler
    Weapon              = SECONDARY MicrowaveTankBuildingClearer
    Weapon              = TERTIARY MicrowaveTankInfantryKiller
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
    Object = Cybr_AmericaStrategyCenter
  End

  ExperienceValue     = 39 56 82 118
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = Cybr_AmericaDefenderGenericCommandSet
  
  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = CrusaderTankMoveStart
  SoundMoveStartDamaged = CrusaderTankMoveStart
  UnitSpecificSounds
    VoiceCreate         = NoSound
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf        = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SCORE CANNOT_RETALIATE DRONE VEHICLE SALVAGER
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 400
    InitialHealth   = 400
    SubdualDamageCap = 700
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    Turret
      TurretTurnRate        = 180
      TurretPitchRate       = 120
      FirePitch             = 98
      AllowsPitch           = Yes
      RecenterTime          = 3000
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor            = SET_NORMAL CrusaderLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass                 = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_MicrowaveTankDeath
    FX  = FINAL    FX_GenericTankDeathExplosion
  End

  Behavior                 = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_15
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_MicrowaveTankDeath_CrushEffect
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
   CrateData = SalvageCrateData
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_Upgrade01
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  ClientUpdate = AnimatedParticleSysBoneClientUpdate ModuleTag_Particles
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry               = BOX
  GeometryMajorRadius    = 15.0
  GeometryMinorRadius    = 10.0
  GeometryHeight         = 10.0     
  GeometryIsSmall        = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleGuardianDrone

  ; *** ART Parameters ***
  SelectPortrait = SAGuardianDrone_L
  ButtonImage    = SAGuardianDrone
  
  UpgradeCameo1 = Upgrade_AmericaDroneArmor
  UpgradeCameo2 = Upgrade_StealthCovering
  UpgradeCameo3 = Upgrade_AmericaTransmitionCodes
  UpgradeCameo4 = Upgrade_AmericaTOWMissile
  UpgradeCameo5 = Upgrade_APBullets

  Draw = W3DTankDraw ModuleTag_01
    IgnoreConditionStates = SNOW NIGHT
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model             = avguarddr
      Turret            = TURRET
      HideSubObject     = TURRETUP01
      WeaponFireFXBone  = PRIMARY   TURRETMS01
      WeaponMuzzleFlash = PRIMARY   TurretFX01
      WeaponRecoilBone  = PRIMARY   BARREL01
      WeaponLaunchBone  = PRIMARY   TURRETMS01
      WeaponFireFXBone  = SECONDARY TURRETMS02
      WeaponLaunchBone  = SECONDARY TURRETMS02
      WeaponFireFXBone  = TERTIARY TURRETMS02
      WeaponLaunchBone  = TERTIARY TURRETMS02
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model             = avguarddr_D
      HideSubObject     = TURRETUP01
    End
    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model             = avguarddr
      ShowSubObject     = TURRETUP01
    End
    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED RUBBLE
      Model             = avguarddr_D
      ShowSubObject     = TURRETUP01
    End

    ConditionState = AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = REALLYDAMAGED RUBBLE AFLAME
      Model             = avguarddr_D
      ParticleSysBone = CHASSIS TankFireContinious
      HideSubObject     = TURRETUP01
    End
    ConditionState = WEAPONSET_PLAYER_UPGRADE AFLAME
      Model             = avguarddr
      ParticleSysBone = CHASSIS TankFireContinious
      ShowSubObject     = TURRETUP01
    End
    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED RUBBLE AFLAME
      Model             = avguarddr_D
      ParticleSysBone = CHASSIS TankFireContinious
      ShowSubObject     = TURRETUP01
    End
   
    TrackMarks           = EXTnkTrack.tga
    TreadDebrisLeft      = SentryDroneTrackDebrisDirtLeft
    TreadDebrisRight     = SentryDroneTrackDebrisDirtRight
    TreadAnimationRate   = 5.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:GuardianDrone
  Side               = AmericaCyberneticGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 1                
  BuildCost       = 600
  BuildTime       = 6.0
  VisionRange     = 200
  ShroudClearingRange = 400

  WeaponSet
    Conditions = NONE
    Weapon = PRIMARY GuardianDroneGun
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY GuardianDroneGun
    Weapon = SECONDARY HumveeMissileWeapon
  End

  ArmorSet
    Conditions = None
    Armor      = CyberDroneArmor
    DamageFX   = TruckDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = CyberDroneArmorUpgraded
    DamageFX   = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_AmericaTOWMissile
  End

  Behavior = WeaponBonusUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_APBullets
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
  End

  ExperienceValue = 25 37 54 77
  ExperienceRequired = 0 20000 40000 60000
  IsTrainable        = Yes
  CrusherLevel       = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = Cybr_AmericaGenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = SentryDroneMoveStart
  SoundMoveStartDamaged = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    VoiceCreate         = NoSound
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS SCORE ATTACK_NEEDS_LINE_OF_SIGHT DRONE VEHICLE SALVAGER
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 180
      TurretPitchRate       = 180
      FirePitch             = 0            ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch           = No
      RecenterTime          = 1000         ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      NaturalTurretAngle    = 0
      InitiallyDisabled     = No
      MinIdleScanInterval   = 250    ; in milliseconds
      MaxIdleScanInterval   = 250    ; in milliseconds
      MinIdleScanAngle      = 0       ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 360     ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ; Means "Yes when idle, even if I am stealthed"
  End

  Locomotor = SET_NORMAL Cybr_SentryLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 30.0
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_AmericaVehicleGuardianDroneDie
    FX =  FINAL FX_AmericaVehicleTomahawkDeathExplosion
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
    CrateData = SalvageCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = MaxHealthUpgrade ModuleTag_18
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 75.0
    ChangeType    = PRESERVE_RATIO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry = BOX
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;----------------------------------------------------------------------------
Object Cybr_AmericaVehicleRepairDrone

  ; *** ART Parameters ***
  SelectPortrait         = SACGRD_L
  ButtonImage            = SACGRD

  UpgradeCameo1 = Upgrade_AmericaDroneArmor
  UpgradeCameo2 = Upgrade_StealthCovering
  UpgradeCameo3 = Upgrade_AmericaTransmitionCodes

  Draw = W3DOverlordTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVRepairDr
      WeaponFireFXBone = PRIMARY SMOKE03
      WeaponFireFXBone = SECONDARY SMOKE03
      WeaponLaunchBone = PRIMARY SMOKE03
      Turret = BARREL02
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = AVRepairDr_D
    End

    ConditionState = AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = REALLYDAMAGED RUBBLE AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
      Model = AVRepairDr_D
    End

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 1.25   ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RepairDrone
  Side = AmericaCyberneticGeneral
  EditorSorting   = VEHICLE
  BuildCost       = 600
  BuildTime       = 6.0
  VisionRange     = 150
  ShroudClearingRange = 200
  TransportSlotCount = 2

  WeaponSet
    Conditions = None
    Weapon = PRIMARY RangerAdvancedCombatRifle
  End

  ArmorSet
    Conditions  = None
    Armor       = RoboticTankArmorMineProof
    DamageFX    = TruckDamageFX
  End
  ArmorSet
    Conditions  = PLAYER_UPGRADE
    Armor       = RoboticTankArmorCybrUpgradedMineProof
    DamageFX    = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
  End

  ExperienceValue     = 21 31 45 65
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes

  CrusherLevel         = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel       = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet           = Cybr_AmericaRepairDroneCommandSet
  
  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = SentryDroneMoveStart
  SoundMoveStartDamaged = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    VoiceCreate         = NoSound
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS SCORE DRONE VEHICLE SALVAGER
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03A
    Turret
      TurretTurnRate = 270
      ControlledWeaponSlots = PRIMARY
      RecenterTime    = 100
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL HumveeLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = MaxHealthUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 90.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_RepairDroneDeathEffect
    FX =  FINAL FX_AmericaVehicleTomahawkDeathExplosion
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_09a
    CrateData = SalvageCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    QuantityModifier = Cybr_AmericaVehicleSpiderMine 3
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_Exit
    UnitCreatePoint   = X:0.0  Y:0.0   Z:0.0
    NaturalRallyPoint = X:20.0  Y:0.0   Z:0.0
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Behavior = AutoHealBehavior ModuleTag_22
    HealingAmount     = 8
    HealingDelay      = 1000
    Radius            = 100.0f
    StartsActive      = Yes
    KindOf            = VEHICLE STRUCTURE
  End

  Behavior = StealthDetectorUpdate ModuleTag_MineDetector ;+
    DetectionRate            = 250
    CanDetectWhileGarrisoned = No
    CanDetectWhileContained  = No
    ExtraForbiddenKindOf     = VEHICLE INFANTRY STRUCTURE AIRCRAFT
  End

  Behavior = OverlordContain ModuleTag_Decal
    Slots  = 1
    DamagePercentToUnits  = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PayloadTemplateName   = MineDetonatorDecalObject
  End

  Behavior = FireWeaponUpdate ModuleTag_03B
    Weapon = MineDetonationFieldWeapon
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry = BOX
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Cybr_AmericaCommandCenter

  ; *** ART Parameters ***
  SelectPortrait         = SAComCentr_L
  ButtonImage            = SAComCentr

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes
  
  ; ----------------- Main Building ------------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day ******************************************
    ConditionState       = NONE
      Model              = ABBtCmdHQ
      Animation          = ABBtCmdHQ.ABBtCmdHQ
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED
      Model              = ABBtCmdHQ_D
      Animation          = ABBtCmdHQ_D.ABBtCmdHQ_D
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = ABBtCmdHQ_E
      Animation          = ABBtCmdHQ_E.ABBtCmdHQ_E
      AnimationMode      = LOOP
    End

    ; night ****************************************
    ConditionState       = NIGHT
      Model              = ABBtCmdHQ_N
      Animation          = ABBtCmdHQ_N.ABBtCmdHQ_N
      AnimationMode      = LOOP
    End  
    ConditionState       = DAMAGED NIGHT
      Model              = ABBtCmdHQ_DN
      Animation          = ABBtCmdHQ_DN.ABBtCmdHQ_DN
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABBtCmdHQ_EN
      Animation          = ABBtCmdHQ_EN.ABBtCmdHQ_EN
      AnimationMode      = LOOP
     End    
    
    ; Snow
    ConditionState       = SNOW
      Model              = ABBtCmdHQ_S
      Animation          = ABBtCmdHQ_S.ABBtCmdHQ_S
      AnimationMode      = LOOP
    End  
    ConditionState       = DAMAGED SNOW
      Model              = ABBtCmdHQ_DS
      Animation          = ABBtCmdHQ_DS.ABBtCmdHQ_DS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = ABBtCmdHQ_ES
      Animation          = ABBtCmdHQ_ES.ABBtCmdHQ_ES
      AnimationMode      = LOOP
     End    
    
    ; night snow ****************************************
    ConditionState       = NIGHT SNOW
      Model              = ABBtCmdHQ_NS
      Animation          = ABBtCmdHQ_NS.ABBtCmdHQ_NS
      AnimationMode      = LOOP
    End  
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ABBtCmdHQ_DNS
      Animation          = ABBtCmdHQ_DNS.ABBtCmdHQ_DNS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ABBtCmdHQ_ENS
      Animation          = ABBtCmdHQ_ENS.ABBtCmdHQ_ENS
      AnimationMode      = LOOP
     End 


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABBtCmdHQ
      Animation          = ABBtCmdHQ.ABBtCmdHQ
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABBtCmdHQ_D
      Animation          = ABBtCmdHQ_D.ABBtCmdHQ_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABBtCmdHQ_E
      Animation          = ABBtCmdHQ_E.ABBtCmdHQ_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABBtCmdHQ_N
      Animation          = ABBtCmdHQ_N.ABBtCmdHQ_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABBtCmdHQ_DN
      Animation          = ABBtCmdHQ_DN.ABBtCmdHQ_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABBtCmdHQ_EN
      Animation          = ABBtCmdHQ_EN.ABBtCmdHQ_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABBtCmdHQ_S
      Animation          = ABBtCmdHQ_S.ABBtCmdHQ_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABBtCmdHQ_DS
      Animation          = ABBtCmdHQ_DS.ABBtCmdHQ_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABBtCmdHQ_ES
      Animation          = ABBtCmdHQ_ES.ABBtCmdHQ_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABBtCmdHQ_NS
      Animation          = ABBtCmdHQ_NS.ABBtCmdHQ_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABBtCmdHQ_DNS
      Animation          = ABBtCmdHQ_DNS.ABBtCmdHQ_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABBtCmdHQ_ENS
      Animation          = ABBtCmdHQ_ENS.ABBtCmdHQ_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
   End

  ; ----------------- the factory door -------------------
  Draw                = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = ABBtCmdHQ_A7
      Animation       = ABBtCmdHQ_A7.ABBtCmdHQ_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABBtCmdHQ_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABBtCmdHQ_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT DAMAGED
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABBtCmdHQ_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW NIGHT
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED

    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

    ConditionState    = DAMAGED
      Model           = ABBtCmdHQ_A7D
      Animation       = ABBtCmdHQ_A7D.ABBtCmdHQ_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_A7E
      Animation       = ABBtCmdHQ_A7E.ABBtCmdHQ_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    
    ConditionState    = DOOR_1_OPENING
      Model           = ABBtCmdHQ_A7
      Animation       = ABBtCmdHQ_A7.ABBtCmdHQ_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = ABBtCmdHQ_A7D
      Animation       = ABBtCmdHQ_A7D.ABBtCmdHQ_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_A7E
      Animation       = ABBtCmdHQ_A7E.ABBtCmdHQ_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    ConditionState    = DOOR_1_CLOSING
      Model           = ABBtCmdHQ_A7
      Animation       = ABBtCmdHQ_A7.ABBtCmdHQ_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = ABBtCmdHQ_A7D
      Animation       = ABBtCmdHQ_A7D.ABBtCmdHQ_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_A7E
      Animation       = ABBtCmdHQ_A7E.ABBtCmdHQ_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = ABBtCmdHQ_A7
      Animation       = ABBtCmdHQ_A7.ABBtCmdHQ_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = ABBtCmdHQ_A7D
      Animation       = ABBtCmdHQ_A7D.ABBtCmdHQ_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_A7E
      Animation       = ABBtCmdHQ_A7E.ABBtCmdHQ_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
  End
  
  PlacementViewAngle  = -135

  ; ------------ Radar Extending -----------------
  Draw                = W3DModelDraw ModuleTag_03
    ConditionState    = None
      Model           = ABBtCmdHQ_AC
      Animation       = ABBtCmdHQ_AC.ABBtCmdHQ_AC
      AnimationMode   = LOOP
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = ABBtCmdHQ_ACD
      Animation       = ABBtCmdHQ_ACD.ABBtCmdHQ_ACD
      AnimationMode   = LOOP
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_ACE
      Animation       = ABBtCmdHQ_ACE.ABBtCmdHQ_ACE
      AnimationMode   = LOOP
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABBtCmdHQ_AC
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABBtCmdHQ_ACD
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABBtCmdHQ_ACE
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ----------------- The Door ------------------------
  Draw = W3DModelDraw ModuleTag_04
  
    DefaultConditionState
      Model           = ABBtCmdHQ_A7

      Animation       = ABBtCmdHQ_A7.ABBtCmdHQ_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW 
    AliasConditionState = NIGHT SNOW
       
    ConditionState    = DAMAGED
      Model           = ABBtCmdHQ_A7D
      Animation       = ABBtCmdHQ_A7D.ABBtCmdHQ_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_A7E
      Animation       = ABBtCmdHQ_A7E.ABBtCmdHQ_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = ABBtCmdHQ_A7
      Animation       = ABBtCmdHQ_A7.ABBtCmdHQ_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = ABBtCmdHQ_A7D
      Animation       = ABBtCmdHQ_A7D.ABBtCmdHQ_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End  
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
     
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_A7E
      Animation       = ABBtCmdHQ_A7E.ABBtCmdHQ_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_CLOSING
      Model           = ABBtCmdHQ_A7
      Animation       = ABBtCmdHQ_A7.ABBtCmdHQ_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = ABBtCmdHQ_A7D
      Animation       = ABBtCmdHQ_A7D.ABBtCmdHQ_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_A7E
      Animation       = ABBtCmdHQ_A7E.ABBtCmdHQ_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = ABBtCmdHQ_A7
      Animation       = ABBtCmdHQ_A7.ABBtCmdHQ_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = ABBtCmdHQ_A7D
      Animation       = ABBtCmdHQ_A7D.ABBtCmdHQ_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = ABBtCmdHQ_A7E
      Animation       = ABBtCmdHQ_A7E.ABBtCmdHQ_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABBtCmdHQ_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABBtCmdHQ_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABBtCmdHQ_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End    

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
  
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBtCmdHQ_A4
      Animation       = ABBtCmdHQ_A4.ABBtCmdHQ_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBtCmdHQ_A4N
      Animation       = ABBtCmdHQ_A4N.ABBtCmdHQ_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBtCmdHQ_A4S
      Animation       = ABBtCmdHQ_A4S.ABBtCmdHQ_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBtCmdHQ_A4SN
      Animation       = ABBtCmdHQ_A4SN.ABBtCmdHQ_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABBtCmdHQ_A4
      Animation       = ABBtCmdHQ_A4.ABBtCmdHQ_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABBtCmdHQ_A4N
      Animation       = ABBtCmdHQ_A4N.ABBtCmdHQ_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABBtCmdHQ_A4S
      Animation       = ABBtCmdHQ_A4S.ABBtCmdHQ_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABBtCmdHQ_A4SN
      Animation       = ABBtCmdHQ_A4SN.ABBtCmdHQ_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABBtCmdHQ_A4
      Animation       = ABBtCmdHQ_A4.ABBtCmdHQ_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABBtCmdHQ_A4N
      Animation       = ABBtCmdHQ_A4N.ABBtCmdHQ_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABBtCmdHQ_A4S
      Animation       = ABBtCmdHQ_A4S.ABBtCmdHQ_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW NIGHT DOWN_DEFAULT
      Model           = ABBtCmdHQ_A4SN
      Animation       = ABBtCmdHQ_A4SN.ABBtCmdHQ_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABBtCmdHQ_A6
      Animation       = ABBtCmdHQ_A6.ABBtCmdHQ_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
      ParticleSysBone = Sparks08 BuildUpBlueSpark
      ParticleSysBone = Sparks09 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABBtCmdHQ_A6N
      Animation       = ABBtCmdHQ_A6N.ABBtCmdHQ_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
      ParticleSysBone = Sparks08 BuildUpBlueSpark
      ParticleSysBone = Sparks09 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABBtCmdHQ_A6S
      Animation       = ABBtCmdHQ_A6S.ABBtCmdHQ_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
      ParticleSysBone = Sparks08 BuildUpBlueSpark
      ParticleSysBone = Sparks09 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABBtCmdHQ_A6SN
      Animation       = ABBtCmdHQ_A6SN.ABBtCmdHQ_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
      ParticleSysBone = Sparks08 BuildUpBlueSpark
      ParticleSysBone = Sparks09 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABBtCmdHQ_A6
      Animation       = ABBtCmdHQ_A6.ABBtCmdHQ_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABBtCmdHQ_A6N
      Animation       = ABBtCmdHQ_A6N.ABBtCmdHQ_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABBtCmdHQ_A6S
      Animation       = ABBtCmdHQ_A6S.ABBtCmdHQ_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABBtCmdHQ_A6SN
      Animation       = ABBtCmdHQ_A6SN.ABBtCmdHQ_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABBtCmdHQ_A6
      Animation       = ABBtCmdHQ_A6.ABBtCmdHQ_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABBtCmdHQ_A6N
      Animation       = ABBtCmdHQ_A6N.ABBtCmdHQ_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABBtCmdHQ_A6S
      Animation       = ABBtCmdHQ_A6S.ABBtCmdHQ_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABBtCmdHQ_A6SN
      Animation       = ABBtCmdHQ_A6SN.ABBtCmdHQ_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState    = ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBtCmdHQ_A5
      Animation       = ABBtCmdHQ_A5.ABBtCmdHQ_A5
      AnimationMode   = LOOP
      TransitionKey   = UP_DAY
    End

    ConditionState    = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBtCmdHQ_A5N
      Animation       = ABBtCmdHQ_A5N.ABBtCmdHQ_A5N
      AnimationMode   = LOOP
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBtCmdHQ_A5S
      Animation       = ABBtCmdHQ_A5S.ABBtCmdHQ_A5S
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBtCmdHQ_A5SN
      Animation       = ABBtCmdHQ_A5SN.ABBtCmdHQ_A5SN
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABBtCmdHQ_A3
      Animation       = ABBtCmdHQ_A3.ABBtCmdHQ_A3
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABBtCmdHQ_A3N
      Animation       = ABBtCmdHQ_A3N.ABBtCmdHQ_A3N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABBtCmdHQ_A3S
      Animation       = ABBtCmdHQ_A3S.ABBtCmdHQ_A3S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABBtCmdHQ_A3SN
      Animation       = ABBtCmdHQ_A3SN.ABBtCmdHQ_A3SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABBtCmdHQ_A3
      Animation       = ABBtCmdHQ_A3.ABBtCmdHQ_A3
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABBtCmdHQ_A3N
      Animation       = ABBtCmdHQ_A3N.ABBtCmdHQ_A3N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABBtCmdHQ_A3S
      Animation       = ABBtCmdHQ_A3S.ABBtCmdHQ_A3S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABBtCmdHQ_A3S
      Animation       = ABBtCmdHQ_A3S.ABBtCmdHQ_A3S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ logo -----------------
  Draw = W3DModelDraw ModuleTag_Draw_Logo

    ConditionState       = NONE
      Model              = Logo_Cybr
    End
    AliasConditionState       = DAMAGED
    AliasConditionState       = REALLYDAMAGED RUBBLE
    AliasConditionState       = NIGHT
    AliasConditionState       = DAMAGED NIGHT
    AliasConditionState       = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState       = SNOW
    AliasConditionState       = DAMAGED SNOW
    AliasConditionState       = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState       = NIGHT SNOW
    AliasConditionState       = DAMAGED NIGHT SNOW
    AliasConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = Logo_Cybr
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  PlacementViewAngle  = -135

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:CommandCenterCommandCenterCommandCenter 
  Side                  = AmericaCyberneticGeneral
  EditorSorting         = STRUCTURE
  BuildCost             = 2500
  BuildTime             = 50.0
  EnergyProduction      = 0
  CommandSet            = Cybr_AmericaCommandCenterCommandSet
  VisionRange           = 300
  ShroudClearingRange   = 300
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction

  Prerequisites
    Science = SCIENCE_CYBR
  End
  
  WeaponSet
    Conditions = None
    Weapon = TERTIARY CCSelfdestructWeapon
    AutoChooseSources = TERTIARY NONE
  End

  ArmorSet
    Conditions          = None
    Armor               = StructureArmorTough
    DamageFX            = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorToughCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  ExperienceValue     = 160 160 160 160

  ; *** AUDIO Parameters ***
  VoiceSelect           = CommandCenterUSASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE COMMANDCENTER SCORE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY IMMUNE_TO_CAPTURE
  Body                = StructureBody ModuleTag_08
    MaxHealth         = 4750.0
    InitialHealth     = 4750.0
    SubdualDamageCap = 5000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = GrantUpgradeCreate ModuleTag_09
    UpgradeToGrant    = Upgrade_Radar
    ExemptStatus      = UNDER_CONSTRUCTION
  End

  Behavior = ProductionUpdate ModuleTag_11
    NumDoorAnimations            = 1
    DoorOpeningTime              = 1500  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 1500  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End

  Behavior       = RadarUpgrade ModuleTag_19
    TriggeredBy  = Upgrade_Radar
  End
  Behavior       = RadarUpdate ModuleTag_12
    RadarExtendTime   = 4000     ;in mSeconds
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_13
    UnitCreatePoint   = X:-18.0  Y:  35.0   Z:0.0
    NaturalRallyPoint = X: 60.0  Y:  35.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = BaseRegenerateUpdate ModuleTag_14
  End

  Behavior             = DestroyDie ModuleTag_15
  End

  Behavior             = CreateObjectDie ModuleTag_16
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior             = CreateObjectDie ModuleTag_17
    CreationList  = OCL_AmericanRangerDebris10
    ExemptStatus  = UNDER_CONSTRUCTION
  End
  Behavior             = FXListDie ModuleTag_18
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SuperweaponShockwaveBomb
    UpgradeOCL           = SCIENCE_MOAB SUPERWEAPON_MOAB
    OCL                  = SUPERWEAPON_ShockwaveBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower02
    SpecialPowerTemplate = SpecialPowerSpyDrone
    OCL                  = SUPERWEAPON_SpyDrone
    CreateLocation       = CREATE_ABOVE_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower03
    SpecialPowerTemplate = SuperweaponDroneParadrop
    UpgradeOCL           = Cybr_SCIENCE_DroneParadrop3 SUPERWEAPON_DroneParadrop3
    UpgradeOCL           = Cybr_SCIENCE_DroneParadrop2 SUPERWEAPON_DroneParadrop2
    OCL                  = SUPERWEAPON_DroneParadrop1
    CreateLocation       = CREATE_ABOVE_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End 
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower04
    SpecialPowerTemplate = SpecialPowerSpySatellite
    OCL                  = SUPERWEAPON_SpySatellite
    UpgradeOCL           = SCIENCE_Sensors SUPERWEAPON_SpySatelliteUpgraded
    CreateLocation       = CREATE_ABOVE_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower05
    SpecialPowerTemplate = SuperweaponA10ThunderboltMissileStrike
    UpgradeOCL           = SCIENCE_A10ThunderboltMissileStrike3 SUPERWEAPON_A10ThunderboltMissileStrike3
    UpgradeOCL           = SCIENCE_A10ThunderboltMissileStrike2 SUPERWEAPON_A10ThunderboltMissileStrike2
    OCL                  = SUPERWEAPON_A10ThunderboltMissileStrike1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower06
    SpecialPowerTemplate = SuperweaponEarlyEmergencyRepair
    OCL                  = SUPERWEAPON_RepairEverything1
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower07
    SpecialPowerTemplate = SuperweaponDataUpload
    UpgradeOCL           = Cybr_SCIENCE_DataUpload SUPERWEAPON_DataUpload
    OCL                  = SUPERWEAPON_DataUpload
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = SpecialAbility ModuleTag_SpecialPower08
    SpecialPowerTemplate = SuperweaponSpectreGunship
    UpdateModuleStartsAttack = Yes
  End

  Behavior           = SpectreGunshipDeploymentUpdate ModuleTag_SpecialPower09
    SpecialPowerTemplate = SuperweaponSpectreGunship
    GunshipTemplateName  = AmericaJetSpectreGunship
    AttackAreaRadius     = 200
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower11
    SpecialPowerTemplate = SuperweaponClusterTomahawk
    UpgradeOCL           = Cybr_SCIENCE_ClusterTomahawk3 SUPERWEAPON_ClusterTomahawk3
    UpgradeOCL           = Cybr_SCIENCE_ClusterTomahawk2 SUPERWEAPON_ClusterTomahawk2
    OCL                  = SUPERWEAPON_ClusterTomahawk1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower12
    SpecialPowerTemplate = SuperweaponClusterBomb
    OCL                  = SUPERWEAPON_ClusterBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower13
    SpecialPowerTemplate = SpecialPowerComandoParadrop
    OCL                  = SUPERWEAPON_ComandoParadrop
    CreateLocation       = CREATE_ABOVE_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End 

  Behavior = FlammableUpdate ModuleTag_30
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = GrantScienceUpgrade ModuleTag_Science01
    GrantScience = SCIENCE_MOAB
    TriggeredBy = Upgrade_AmericaMOAB
  End

  Behavior       = CostModifierUpgrade Upgrade02
    TriggeredBy  = Upgrade_AutomatizedProduction
    EffectKindOf = VEHICLE
    Percentage   = -20%
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry            = BOX
  GeometryMajorRadius = 60.0
  GeometryMinorRadius = 70.0
  GeometryHeight      = 49.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25     ; How much space to leave for units exiting.
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaPowerPlant

  ; *** ART Parameters ***
  SelectPortrait         = SAPowerPlant_L
  ButtonImage            = SAPowerPlant

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  ; ---- the building itself ------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day ********************************************
    ConditionState       = NONE;
      Model              = ABPWRPLANT
      Animation          = ABPWRPLANT.ABPWRPLANT
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke02 SteamVent
    End
    ConditionState       = DAMAGED
      Model              = ABPWRPLANT_D
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 SteamVent
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFireLarge
      ParticleSysBone    = Sparks01 LiveWireSparks
      ParticleSysBone    = Sparks02 LiveWireSparks
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = ABPWRPLANT_E
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 SteamVent
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke 
      ParticleSysBone    = Smoke05 SmolderingSmoke 
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFireLarge 
      ParticleSysBone    = Fire02 SmolderingFireLarge
      ParticleSysBone    = Fire03 SmolderingFireLarge
      ParticleSysBone    = Spark01 LiveWireSparks
    End

    ; day upgrade
    ConditionState = POWER_PLANT_UPGRADED ;
      Model = ABPWRPLANT
      Animation     = ABPWRPLANT.ABPWRPLANT
      AnimationMode = LOOP
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks02
      ParticleSysBone = Spark03 LiveWireSparks02 
      ParticleSysBone = Spark04 LiveWireSparks
      ParticleSysBone = Spark05 LiveWireSparks02
      ParticleSysBone = Spark06 LiveWireSparks 
    End
    ConditionState = DAMAGED POWER_PLANT_UPGRADED
      Model = ABPWRPLANT_D
      ParticleSysBone = Smoke01 SmolderingSmoke 
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFireLarge
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks02
      ParticleSysBone = Spark03 LiveWireSparks02 
      ParticleSysBone = Spark04 LiveWireSparks
      ParticleSysBone = Spark05 LiveWireSparks02
      ParticleSysBone = Spark06 LiveWireSparks 
    End
    ConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED
      Model = ABPWRPLANT_E
      ParticleSysBone = Smoke01 SmolderingSmoke 
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke 
      ParticleSysBone = Smoke05 SmolderingSmoke 
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFireLarge 
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire03 SmolderingFireLarge
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks02
      ParticleSysBone = Spark03 LiveWireSparks02 
      ParticleSysBone = Spark04 LiveWireSparks
      ParticleSysBone = Spark05 LiveWireSparks02
      ParticleSysBone = Spark06 LiveWireSparks 
    End

    ; night 
    ConditionState = NIGHT;
      Model = ABPWRPLANT_N
      Animation     = ABPWRPLANT_N.ABPWRPLANT_N
      AnimationMode = LOOP
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState       = DAMAGED NIGHT
      Model              = ABPWRPLANT_DN
      Animation          = ABPWRPLANT_DN.ABPWRPLANT_DN
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 SteamVent
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFireLarge
      ParticleSysBone    = Sparks01 LiveWireSparks
      ParticleSysBone    = Sparks02 LiveWireSparks
      ParticleSysBone    = Sparks03 LiveWireSparks02
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT;
      Model = ABPWRPLANT_EN
      Animation     = ABPWRPLANT_EN.ABPWRPLANT_EN
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke 
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke 
      ParticleSysBone = Smoke05 SmolderingSmoke 
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFireLarge 
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire03 SmolderingFireLarge
      ParticleSysBone = Sparks01 LiveWireSparks
      ParticleSysBone = Sparks02 LiveWireSparks02
      ParticleSysBone = Sparks03 LiveWireSparks02 
      ParticleSysBone = Sparks04 LiveWireSparks
      ParticleSysBone = Sparks05 LiveWireSparks02
      ParticleSysBone = Sparks07 LiveWireSparks 
    End

    ; night upgraded
    ConditionState = NIGHT POWER_PLANT_UPGRADED
      Model = ABPWRPLANT_N
      Animation     = ABPWRPLANT_N.ABPWRPLANT_N
      AnimationMode = LOOP
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Sparks02 LiveWireSparks02
      ParticleSysBone = Sparks03 LiveWireSparks02 
      ParticleSysBone = Sparks04 LiveWireSparks
      ParticleSysBone = Sparks05 LiveWireSparks02
      ParticleSysBone = Sparks07 LiveWireSparks 
      ParticleSysBone = Sparks08 LiveWireSparks02
      ParticleSysBone = Sparks09 LiveWireSparks 
      ParticleSysBone = Sparks10 LiveWireSparks02
      ParticleSysBone = Sparks11 LiveWireSparks 
    End
    ConditionState       = DAMAGED NIGHT POWER_PLANT_UPGRADED
      Model              = ABPWRPLANT_DN
      Animation          = ABPWRPLANT_DN.ABPWRPLANT_DN
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 SteamVent
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFireLarge
      ParticleSysBone = Sparks02 LiveWireSparks02
      ParticleSysBone = Sparks03 LiveWireSparks02 
      ParticleSysBone = Sparks04 LiveWireSparks
      ParticleSysBone = Sparks05 LiveWireSparks02
      ParticleSysBone = Sparks07 LiveWireSparks 
      ParticleSysBone = Sparks08 LiveWireSparks02
      ParticleSysBone = Sparks09 LiveWireSparks 
      ParticleSysBone = Sparks10 LiveWireSparks02
      ParticleSysBone = Sparks11 LiveWireSparks 
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT POWER_PLANT_UPGRADED
      Model = ABPWRPLANT_EN
      Animation     = ABPWRPLANT_EN.ABPWRPLANT_EN
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke 
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke 
      ParticleSysBone = Smoke05 SmolderingSmoke 
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFireLarge 
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire03 SmolderingFireLarge
      ParticleSysBone = Sparks02 LiveWireSparks02
      ParticleSysBone = Sparks03 LiveWireSparks02 
      ParticleSysBone = Sparks04 LiveWireSparks
      ParticleSysBone = Sparks05 LiveWireSparks02
      ParticleSysBone = Sparks07 LiveWireSparks 
      ParticleSysBone = Sparks08 LiveWireSparks02
      ParticleSysBone = Sparks09 LiveWireSparks 
      ParticleSysBone = Sparks10 LiveWireSparks02
      ParticleSysBone = Sparks11 LiveWireSparks 
    End
    
    
        ; day ********************************************
    ConditionState       = SNOW
      Model              = ABPWRPLANT_S
      Animation          = ABPWRPLANT_S.ABPWRPLANT_S
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke02 SteamVent
    End
    ConditionState       = DAMAGED SNOW
      Model              = ABPWRPLANT_DS
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 SteamVent
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFireLarge
      ParticleSysBone    = Sparks01 LiveWireSparks
      ParticleSysBone    = Sparks02 LiveWireSparks
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = ABPWRPLANT_ES
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 SteamVent
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke 
      ParticleSysBone    = Smoke05 SmolderingSmoke 
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFireLarge 
      ParticleSysBone    = Fire02 SmolderingFireLarge
      ParticleSysBone    = Fire03 SmolderingFireLarge
      ParticleSysBone    = Spark01 LiveWireSparks
    End


    ; day upgrade
    ConditionState = POWER_PLANT_UPGRADED SNOW;
      Model = ABPWRPLANT_S
      Animation     = ABPWRPLANT_S.ABPWRPLANT_S
      AnimationMode = LOOP
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks02
      ParticleSysBone = Spark03 LiveWireSparks02 
      ParticleSysBone = Spark04 LiveWireSparks
      ParticleSysBone = Spark05 LiveWireSparks02
      ParticleSysBone = Spark06 LiveWireSparks 
    End
    ConditionState = DAMAGED POWER_PLANT_UPGRADED SNOW
      Model = ABPWRPLANT_DS
      ParticleSysBone = Smoke01 SmolderingSmoke 
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFireLarge
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks02
      ParticleSysBone = Spark03 LiveWireSparks02 
      ParticleSysBone = Spark04 LiveWireSparks
      ParticleSysBone = Spark05 LiveWireSparks02
      ParticleSysBone = Spark06 LiveWireSparks 
    End
    ConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED SNOW
      Model = ABPWRPLANT_ES
      ParticleSysBone = Smoke01 SmolderingSmoke 
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke 
      ParticleSysBone = Smoke05 SmolderingSmoke 
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFireLarge 
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire03 SmolderingFireLarge
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks02
      ParticleSysBone = Spark03 LiveWireSparks02 
      ParticleSysBone = Spark04 LiveWireSparks
      ParticleSysBone = Spark05 LiveWireSparks02
      ParticleSysBone = Spark06 LiveWireSparks 
    End


    ; night 
    ConditionState = NIGHT SNOW;
      Model = ABPWRPLANT_NS
      Animation     = ABPWRPLANT_NS.ABPWRPLANT_NS
      AnimationMode = LOOP
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ABPWRPLANT_DNS
      Animation          = ABPWRPLANT_DNS.ABPWRPLANT_DNS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 SteamVent
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFireLarge
      ParticleSysBone    = Sparks01 LiveWireSparks
      ParticleSysBone    = Sparks02 LiveWireSparks
      ParticleSysBone    = Sparks03 LiveWireSparks02
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW;
      Model = ABPWRPLANT_ENS
      Animation     = ABPWRPLANT_ENS.ABPWRPLANT_ENS
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke 
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke 
      ParticleSysBone = Smoke05 SmolderingSmoke 
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFireLarge 
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire03 SmolderingFireLarge
      ParticleSysBone = Sparks01 LiveWireSparks
      ParticleSysBone = Sparks02 LiveWireSparks02
      ParticleSysBone = Sparks03 LiveWireSparks02 
      ParticleSysBone = Sparks04 LiveWireSparks
      ParticleSysBone = Sparks05 LiveWireSparks02
      ParticleSysBone = Sparks07 LiveWireSparks 
    End

    ; night upgraded
    ConditionState = NIGHT POWER_PLANT_UPGRADED SNOW
      Model = ABPWRPLANT_NS
      Animation     = ABPWRPLANT_NS.ABPWRPLANT_NS
      AnimationMode = LOOP
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Sparks02 LiveWireSparks02
      ParticleSysBone = Sparks03 LiveWireSparks02 
      ParticleSysBone = Sparks04 LiveWireSparks
      ParticleSysBone = Sparks05 LiveWireSparks02
      ParticleSysBone = Sparks07 LiveWireSparks 
      ParticleSysBone = Sparks08 LiveWireSparks02
      ParticleSysBone = Sparks09 LiveWireSparks 
      ParticleSysBone = Sparks10 LiveWireSparks02
      ParticleSysBone = Sparks11 LiveWireSparks 
    End
    ConditionState       = DAMAGED NIGHT POWER_PLANT_UPGRADED SNOW
      Model              = ABPWRPLANT_DNS
      Animation          = ABPWRPLANT_DNS.ABPWRPLANT_DNS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 SteamVent
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFireLarge
      ParticleSysBone = Sparks02 LiveWireSparks02
      ParticleSysBone = Sparks03 LiveWireSparks02 
      ParticleSysBone = Sparks04 LiveWireSparks
      ParticleSysBone = Sparks05 LiveWireSparks02
      ParticleSysBone = Sparks07 LiveWireSparks 
      ParticleSysBone = Sparks08 LiveWireSparks02
      ParticleSysBone = Sparks09 LiveWireSparks 
      ParticleSysBone = Sparks10 LiveWireSparks02
      ParticleSysBone = Sparks11 LiveWireSparks 
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT POWER_PLANT_UPGRADED SNOW
      Model = ABPWRPLANT_ENS
      Animation     = ABPWRPLANT_ENS.ABPWRPLANT_ENS
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke 
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke 
      ParticleSysBone = Smoke05 SmolderingSmoke 
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFireLarge 
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire03 SmolderingFireLarge
      ParticleSysBone = Sparks02 LiveWireSparks02
      ParticleSysBone = Sparks03 LiveWireSparks02 
      ParticleSysBone = Sparks04 LiveWireSparks
      ParticleSysBone = Sparks05 LiveWireSparks02
      ParticleSysBone = Sparks07 LiveWireSparks 
      ParticleSysBone = Sparks08 LiveWireSparks02
      ParticleSysBone = Sparks09 LiveWireSparks 
      ParticleSysBone = Sparks10 LiveWireSparks02
      ParticleSysBone = Sparks11 LiveWireSparks 
    End
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABPWRPLANT
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABPWRPLANT_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABPWRPLANT_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABPWRPLANT_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABPWRPLANT_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABPWRPLANT_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABPWRPLANT_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABPWRPLANT_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABPWRPLANT_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABPWRPLANT_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABPWRPLANT_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABPWRPLANT_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED POWER_PLANT_UPGRADED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPwrPlant_A4
      Animation       = ABPwrPlant_A4.ABPwrPlant_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPwrPlant_A4N
      Animation       = ABPwrPlant_A4N.ABPwrPlant_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPwrPlant_A4S
      Animation       = ABPwrPlant_A4S.ABPwrPlant_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPwrPlant_A4S
      Animation       = ABPwrPlant_A4S.ABPwrPlant_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABPwrPlant_A4
      Animation       = ABPwrPlant_A4.ABPwrPlant_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABPwrPlant_A4N
      Animation       = ABPwrPlant_A4N.ABPwrPlant_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABPwrPlant_A4S
      Animation       = ABPwrPlant_A4S.ABPwrPlant_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABPwrPlant_A4SN
      Animation       = ABPwrPlant_A4SN.ABPwrPlant_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABPwrPlant_A4
      Animation       = ABPwrPlant_A4.ABPwrPlant_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABPwrPlant_A4N
      Animation       = ABPwrPlant_A4N.ABPwrPlant_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABPwrPlant_A4S
      Animation       = ABPwrPlant_A4S.ABPwrPlant_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABPwrPlant_A4SN
      Animation       = ABPwrPlant_A4SN.ABPwrPlant_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABPwrPlant_A6
      Animation       = ABPwrPlant_A6.ABPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SparksS01 BuildUpBlueSpark
      ParticleSysBone = SparksS02 BuildUpBlueSpark
      ParticleSysBone = SparksS03 SparksSmall
      ParticleSysBone = SparksS06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABPwrPlant_A6N
      Animation       = ABPwrPlant_A6N.ABPwrPlant_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SparksS01 BuildUpBlueSpark
      ParticleSysBone = SparksS02 BuildUpBlueSpark
      ParticleSysBone = SparksS03 SparksSmall
      ParticleSysBone = SparksS06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABPwrPlant_A6S
      Animation       = ABPwrPlant_A6S.ABPwrPlant_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SparksS01 BuildUpBlueSpark
      ParticleSysBone = SparksS02 BuildUpBlueSpark
      ParticleSysBone = SparksS03 SparksSmall
      ParticleSysBone = SparksS06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABPwrPlant_A6SN
      Animation       = ABPwrPlant_A6SN.ABPwrPlant_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SparksS01 BuildUpBlueSpark
      ParticleSysBone = SparksS02 BuildUpBlueSpark
      ParticleSysBone = SparksS03 SparksSmall
      ParticleSysBone = SparksS06 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABPwrPlant_A6
      Animation       = ABPwrPlant_A6.ABPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABPwrPlant_A6N
      Animation       = ABPwrPlant_A6N.ABPwrPlant_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABPwrPlant_A6S
      Animation       = ABPwrPlant_A6S.ABPwrPlant_A6S
      AnimationMode   = ONCE

      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABPwrPlant_A6SN
      Animation       = ABPwrPlant_A6SN.ABPwrPlant_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABPwrPlant_A6
      Animation       = ABPwrPlant_A6.ABPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABPwrPlant_A6N
      Animation       = ABPwrPlant_A6N.ABPwrPlant_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABPwrPlant_A6S
      Animation       = ABPwrPlant_A6S.ABPwrPlant_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABPwrPlant_A6SN
      Animation       = ABPwrPlant_A6SN.ABPwrPlant_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPwrPlant_A5
      Animation       = ABPwrPlant_A5.ABPwrPlant_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPwrPlant_A5N
      Animation       = ABPwrPlant_A5N.ABPwrPlant_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPwrPlant_A5S
      Animation       = ABPwrPlant_A5S.ABPwrPlant_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPwrPlant_A5SN
      Animation       = ABPwrPlant_A5SN.ABPwrPlant_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = ABPwrPlant_AB
      Animation       = ABPwrPlant_AB.ABPwrPlant_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = ABPwrPlant_ABN
      Animation       = ABPwrPlant_ABN.ABPwrPlant_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = ABPwrPlant_ABS
      Animation       = ABPwrPlant_ABS.ABPwrPlant_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = ABPwrPlant_ABSN
      Animation       = ABPwrPlant_ABSN.ABPwrPlant_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = ABPwrPlant_AB
      Animation       = ABPwrPlant_AB.ABPwrPlant_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = ABPwrPlant_ABN
      Animation       = ABPwrPlant_ABN.ABPwrPlant_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = ABPwrPlant_ABS
      Animation       = ABPwrPlant_ABS.ABPwrPlant_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = ABPwrPlant_ABSN
      Animation       = ABPwrPlant_ABSN.ABPwrPlant_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
 
; ---- the control rods -----
  Draw = W3DModelDraw ModuleTag_05
    OkToChangeModelColor = Yes

    ; no upgrade
    ConditionState = NONE
      Model ABPWRPLANT_A1
      HideSubObject = TURRETUP01  
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT

    ConditionState = DAMAGED
      Model ABPWRPLANT_A1D
      HideSubObject = TURRETUP01  
    End
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = DAMAGED SNOW NIGHT

    ConditionState = REALLYDAMAGED RUBBLE
      Model ABPWRPLANT_A1E
      HideSubObject = TURRETUP01  
    End
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABPWRPLANT_A1
      HideSubObject = TURRETUP01  
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABPWRPLANT_A1D
      HideSubObject = TURRETUP01  
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState = DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState = DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
      Model              = ABPWRPLANT_A1E
      HideSubObject = TURRETUP01  
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = REALLYDAMAGED RUBBLE AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT

    ; first to upgrade
    ConditionState = POWER_PLANT_UPGRADING
      Model ABPWRPLANT_A1
      Animation     = ABPWRPLANT_A1.ABPWRPLANT_A1
      AnimationMode = ONCE
      HideSubObject = TURRETUP01  
      Flags         = START_FRAME_FIRST
    End
    AliasConditionState = POWER_PLANT_UPGRADING SNOW
    AliasConditionState = POWER_PLANT_UPGRADING NIGHT
    AliasConditionState = POWER_PLANT_UPGRADING SNOW NIGHT

    ConditionState = DAMAGED POWER_PLANT_UPGRADING
      Model ABPWRPLANT_A1D
      HideSubObject = TURRETUP01  
      Animation     = ABPWRPLANT_A1D.ABPWRPLANT_A1D
      AnimationMode = ONCE
      Flags         = START_FRAME_FIRST
    End
    AliasConditionState = DAMAGED POWER_PLANT_UPGRADING SNOW
    AliasConditionState = DAMAGED POWER_PLANT_UPGRADING NIGHT
    AliasConditionState = DAMAGED POWER_PLANT_UPGRADING SNOW NIGHT

    ConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADING
      Model ABPWRPLANT_A1E
      HideSubObject = TURRETUP01  
      Animation     = ABPWRPLANT_A1E.ABPWRPLANT_A1E
      AnimationMode = ONCE
      Flags         = START_FRAME_FIRST
    End
    AliasConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADING SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADING NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADING SNOW NIGHT

    ; already upgraded
    ConditionState = POWER_PLANT_UPGRADED
      Model ABPWRPLANT_A1
      HideSubObject = TURRETUP01  
      Animation     = ABPWRPLANT_A1.ABPWRPLANT_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_LAST
    End
    AliasConditionState = POWER_PLANT_UPGRADED SNOW
    AliasConditionState = POWER_PLANT_UPGRADED NIGHT
    AliasConditionState = POWER_PLANT_UPGRADED SNOW NIGHT

    ConditionState = DAMAGED POWER_PLANT_UPGRADED
      Model ABPWRPLANT_A1D
      HideSubObject = TURRETUP01  
      Animation     = ABPWRPLANT_A1D.ABPWRPLANT_A1D
      AnimationMode = MANUAL
      Flags         = START_FRAME_LAST
    End
    AliasConditionState = DAMAGED POWER_PLANT_UPGRADED SNOW
    AliasConditionState = DAMAGED POWER_PLANT_UPGRADED NIGHT
    AliasConditionState = DAMAGED POWER_PLANT_UPGRADED SNOW NIGHT

    ConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED
      Model ABPWRPLANT_A1E
      HideSubObject = TURRETUP01  
      Animation     = ABPWRPLANT_A1E.ABPWRPLANT_A1E
      AnimationMode = MANUAL
      Flags         = START_FRAME_LAST
    End
    AliasConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED SNOW NIGHT
 
  
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED POWER_PLANT_UPGRADED
  End
 
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ColdFusionReactor
  Side             = AmericaCyberneticGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 800
  BuildTime        = 16
  EnergyProduction = 8
  EnergyBonus      = 4
  VisionRange      = 200
  ShroudClearingRange = 200
  ExperienceValue  = 67 67 67 67

  ArmorSet
    Conditions     = None
    Armor          = StructureArmor
    DamageFX       = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  WeaponSet
    Conditions = None
    Weapon     = TERTIARY SlowSelfdestructWeapon
  End

  Behavior = AIUpdateInterface ModuleTag_AI
  End

  CommandSet       = Cybr_AmericaPowerPlantCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ColdFusionReactorSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_POWER MP_COUNT_FOR_VICTORY
  Body            = StructureBody ModuleTag_06
    MaxHealth       = 1600.0
    InitialHealth   = 1600.0
    SubdualDamageCap = 1600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = PowerPlantUpgrade ModuleTag_07
    TriggeredBy = Upgrade_AmericaAdvancedControlRods
  End

  Behavior = BaseRegenerateUpdate ModuleTag_08
  End
  Behavior = PowerPlantUpdate ModuleTag_09
    RodsExtendTime = 600
  End

  Behavior = DestroyDie ModuleTag_10
  End

  Behavior        = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABPowerPlantExplode
  End
  Behavior        = CreateObjectDie ModuleTag_12
    CreationList  = OCL_AmericanRangerDebris02
    ExemptStatus  = UNDER_CONSTRUCTION
  End
  Behavior        = CreateObjectDie ModuleTag_Die3
    CreationList  = OCL_PowerPlantDeathLightning
    ExemptStatus  = UNDER_CONSTRUCTION
  End
  Behavior        = FXListDie ModuleTag_Die4
    DeathFX       = FX_PowerPlantDeathLightning
    ExemptStatus  = UNDER_CONSTRUCTION
  End
  Behavior        = FXListDie ModuleTag_13
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ProductionUpdate ModuleTag_14
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry            = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 30.0
  GeometryHeight      = 46.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaStrategyCenter

  ; *** ART Parameters ***
  SelectPortrait         = SAStrategyCenter_L
  ButtonImage            = SAStrategyCenter

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day ***************************************************
    ConditionState = NONE
      Model              = ABStrategy
      Animation          = ABStrategy.ABStrategy
      AnimationMode      = LOOP
    End
    ConditionState = DAMAGED
      Model              = ABStrategy_D
      Animation          = ABStrategy_D.ABStrategy_D
      AnimationMode      = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model              = ABStrategy_E
      Animation          = ABStrategy_E.ABStrategy_E
      AnimationMode      = LOOP
    End
       
    ; SNOW ***************************************************
    ConditionState = SNOW
      Model              = ABStrategy_S
      Animation          = ABStrategy_S.ABStrategy_S
      AnimationMode      = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model              = ABStrategy_DS
      Animation          = ABStrategy_DS.ABStrategy_DS
      AnimationMode      = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model              = ABStrategy_ES
      Animation          = ABStrategy_ES.ABStrategy_ES
      AnimationMode      = LOOP
    End
    
    ; night **************************************************
    ConditionState = NIGHT
      Model              = ABStrategy_N
      Animation          = ABStrategy_N.ABStrategy_N
      AnimationMode      = ONCE_BACKWARDS
      Flags              = START_FRAME_FIRST
    End
    ConditionState = NIGHT DAMAGED
      Model              = ABStrategy_DN
      Animation          = ABStrategy_DN.ABStrategy_DN
      AnimationMode      = LOOP
    End
    ConditionState = NIGHT REALLYDAMAGED RUBBLE
      Model              = ABStrategy_EN
      Animation          = ABStrategy_EN.ABStrategy_EN
      AnimationMode      = LOOP
    End
    
    ; night Snow**************************************************
    ConditionState = NIGHT SNOW
      Model              = ABStrategy_NS
      Animation          = ABStrategy_NS.ABStrategy_NS
      AnimationMode      = ONCE_BACKWARDS
      Flags              = START_FRAME_FIRST
    End
    ConditionState = NIGHT DAMAGED SNOW
      Model              = ABStrategy_DNS
      Animation          = ABStrategy_DNS.ABStrategy_DNS
      AnimationMode      = LOOP
    End
    ConditionState = NIGHT REALLYDAMAGED RUBBLE SNOW
      Model              = ABStrategy_ENS
      Animation          = ABStrategy_ENS.ABStrategy_ENS
      AnimationMode      = LOOP
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABStrategy
      Animation          = ABStrategy.ABStrategy
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABStrategy_D
      Animation          = ABStrategy_D.ABStrategy_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABStrategy_E
      Animation          = ABStrategy_E.ABStrategy_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABStrategy_N
      Animation          = ABStrategy_N.ABStrategy_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABStrategy_DN
      Animation          = ABStrategy_DN.ABStrategy_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABStrategy_EN
      Animation          = ABStrategy_EN.ABStrategy_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABStrategy_S
      Animation          = ABStrategy_S.ABStrategy_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABStrategy_DS
      Animation          = ABStrategy_DS.ABStrategy_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABStrategy_ES
      Animation          = ABStrategy_ES.ABStrategy_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABStrategy_NS
      Animation          = ABStrategy_NS.ABStrategy_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABStrategy_DNS
      Animation          = ABStrategy_DNS.ABStrategy_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABStrategy_ENS
      Animation          = ABStrategy_ENS.ABStrategy_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABStrategy_A4
      Animation       = ABStrategy_A4.ABStrategy_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SparksS01 LiveWireSparks02
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABStrategy_A4N
      Animation       = ABStrategy_A4N.ABStrategy_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SparksS01 LiveWireSparks02
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABStrategy_A4S
      Animation       = ABStrategy_A4S.ABStrategy_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SparksS01 LiveWireSparks02
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABStrategy_A4SN
      Animation       = ABStrategy_A4SN.ABStrategy_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SparksS01 LiveWireSparks02
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABStrategy_A4
      Animation       = ABStrategy_A4.ABStrategy_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABStrategy_A4N
      Animation       = ABStrategy_A4N.ABStrategy_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABStrategy_A4S
      Animation       = ABStrategy_A4S.ABStrategy_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABStrategy_A4SN
      Animation       = ABStrategy_A4SN.ABStrategy_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABStrategy_A4
      Animation       = ABStrategy_A4.ABStrategy_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABStrategy_A4N
      Animation       = ABStrategy_A4N.ABStrategy_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABStrategy_A4S
      Animation       = ABStrategy_A4S.ABStrategy_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABStrategy_A4SN
      Animation       = ABStrategy_A4SN.ABStrategy_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABStrategy_A6
      Animation       = ABStrategy_A6.ABStrategy_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABStrategy_A6N
      Animation       = ABStrategy_A6N.ABStrategy_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABStrategy_A6S
      Animation       = ABStrategy_A6S.ABStrategy_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABStrategy_A6SN
      Animation       = ABStrategy_A6SN.ABStrategy_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABStrategy_A6
      Animation       = ABStrategy_A6.ABStrategy_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABStrategy_A6N
      Animation       = ABStrategy_A6N.ABStrategy_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABStrategy_A6S
      Animation       = ABStrategy_A6S.ABStrategy_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABStrategy_A6SN
      Animation       = ABStrategy_A6SN.ABStrategy_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABStrategy_A6
      Animation       = ABStrategy_A6.ABStrategy_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABStrategy_A6N
      Animation       = ABStrategy_A6N.ABStrategy_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABStrategy_A6S
      Animation       = ABStrategy_A6S.ABStrategy_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABStrategy_A6SN
      Animation       = ABStrategy_A6SN.ABStrategy_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT

      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = ABStrategy_A5
      Animation       = ABStrategy_A5.ABStrategy_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABStrategy_A5N
      Animation       = ABStrategy_A5N.ABStrategy_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End

    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = ABStrategy_A5S
      Animation       = ABStrategy_A5S.ABStrategy_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABStrategy_A5SN
      Animation       = ABStrategy_A5SN.ABStrategy_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = ABStrategy_AB
      Animation       = ABStrategy_AB.ABStrategy_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = ABStrategy_ABN
      Animation       = ABStrategy_ABN.ABStrategy_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = ABStrategy_ABS
      Animation       = ABStrategy_ABS.ABStrategy_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = ABStrategy_ABSN
      Animation       = ABStrategy_ABSN.ABStrategy_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = ABStrategy_AB
      Animation       = ABStrategy_AB.ABStrategy_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = ABStrategy_ABN
      Animation       = ABStrategy_ABN.ABStrategy_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = ABStrategy_ABS
      Animation       = ABStrategy_ABS.ABStrategy_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = ABStrategy_ABSN
      Animation       = ABStrategy_ABSN.ABStrategy_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ BOMBARDMENT BATTLE PLAN -----------------
  Draw = W3DModelDraw ModuleTag_05
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = ABStrategy_A1
      Animation       = ABStrategy_A1.ABStrategy_A1
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = SNOW
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = ABStrategy_A1
      Animation       = ABStrategy_A1.ABStrategy_A1
      AnimationMode   = ONCE
    End
    AliasConditionState = DAMAGED DOOR_1_OPENING
    AliasConditionState = REALLYDAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_1_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_OPENING
    
    ConditionState    = DOOR_1_CLOSING
      Model           = ABStrategy_A1
      Animation       = ABStrategy_A1.ABStrategy_A1
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = DAMAGED DOOR_1_CLOSING
    AliasConditionState = REALLYDAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_WAITING_TO_CLOSE
      Model           = NONE
    End
    AliasConditionState = DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = SNOW DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = SNOW DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_WAITING_TO_CLOSE



    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABStrategy_A1
      Animation          = ABStrategy_A1.ABStrategy_A1
      AnimationMode      = MANUAL
      Flags              = START_FRAME_FIRST ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
  End
  
  Draw = W3DModelDraw ModuleTag_06
    ;***This is the bombardment cannon object that only shows up when ready to fire***
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model            = ABStrategy_A8
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponFireFXBone                = PRIMARY Muzzle
      WeaponRecoilBone                = PRIMARY Barrel
      Turret                          = Turret01
      TurretPitch                     = TurretEL
      HideSubObject = Chassis
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = SNOW
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_WAITING_TO_CLOSE
      Model           = ABStrategy_A8
      ShowSubObject   = Chassis
    End
    AliasConditionState = DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = SNOW DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = SNOW DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_1_WAITING_TO_CLOSE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_WAITING_TO_CLOSE
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABStrategy_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABStrategy_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
      Model              = ABStrategy_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED DOOR_1_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED DOOR_1_WAITING_TO_CLOSE
  End

  ; ------------ HOLD THE LINE BATTLE PLAN -----------------
  Draw = W3DModelDraw ModuleTag_07
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = ABStrategy_A7
      Animation       = ABStrategy_A7.ABStrategy_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = SNOW
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_2_OPENING
      Model           = ABStrategy_A7
      Animation       = ABStrategy_A7.ABStrategy_A7
      AnimationMode   = ONCE
    End
    AliasConditionState = DAMAGED DOOR_2_OPENING
    AliasConditionState = REALLYDAMAGED DOOR_2_OPENING
    AliasConditionState = NIGHT DOOR_2_OPENING
    AliasConditionState = NIGHT SNOW DOOR_2_OPENING
    AliasConditionState = SNOW DOOR_2_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_2_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_2_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_2_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_2_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_2_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_2_OPENING
    
    ConditionState    = DOOR_2_CLOSING
      Model           = ABStrategy_A7
      Animation       = ABStrategy_A7.ABStrategy_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = DAMAGED DOOR_2_CLOSING
    AliasConditionState = REALLYDAMAGED DOOR_2_CLOSING
    AliasConditionState = NIGHT DOOR_2_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_2_CLOSING
    AliasConditionState = SNOW DOOR_2_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_2_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_2_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_2_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_2_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_2_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_2_CLOSING
    
    ConditionState    = DOOR_2_WAITING_TO_CLOSE
      Model           = ABStrategy_A7
      Animation       = ABStrategy_A7.ABStrategy_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = DAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = REALLYDAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = SNOW DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = SNOW DAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_2_WAITING_TO_CLOSE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_2_WAITING_TO_CLOSE
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABStrategy_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
        
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD DAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD REALLYDAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW REALLYDAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED DOOR_2_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED DOOR_2_WAITING_TO_CLOSE
 
  End

  ; ------------ SEARCH AND DESTROY BATTLE PLAN -----------------
  Draw = W3DModelDraw ModuleTag_08
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = ABStrategy_A2
      Animation       = ABStrategy_A2.ABStrategy_A2
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = SNOW
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_3_OPENING
      Model           = ABStrategy_A2
      Animation       = ABStrategy_A2.ABStrategy_A2
      AnimationMode   = ONCE
    End
    AliasConditionState = DAMAGED DOOR_3_OPENING
    AliasConditionState = REALLYDAMAGED DOOR_3_OPENING
    AliasConditionState = NIGHT DOOR_3_OPENING
    AliasConditionState = NIGHT SNOW DOOR_3_OPENING
    AliasConditionState = SNOW DOOR_3_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_3_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_3_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_3_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_3_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_OPENING
    
    ConditionState    = DOOR_3_CLOSING
      Model           = ABStrategy_A2
      Animation       = ABStrategy_A2.ABStrategy_A2
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = DAMAGED DOOR_3_CLOSING
    AliasConditionState = REALLYDAMAGED DOOR_3_CLOSING
    AliasConditionState = NIGHT DOOR_3_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_3_CLOSING
    AliasConditionState = SNOW DOOR_3_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_3_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_3_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_3_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    
    ConditionState    = DOOR_3_WAITING_TO_CLOSE
      Model           = NONE
    End
    AliasConditionState = DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = SNOW DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = SNOW DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_WAITING_TO_CLOSE
    
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABStrategy_A2
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
        
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE

    
    
  End
  Draw = W3DModelDraw ModuleTag_09
    ;***This is the radar array that only shows up when plan is active***
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = NONE
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = SNOW
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_3_WAITING_TO_CLOSE
      Model           = ABStrategy_A3
      Animation       = ABStrategy_A3.ABStrategy_A3
      AnimationMode   = LOOP
    End
    AliasConditionState = DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = SNOW DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = SNOW DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_3_WAITING_TO_CLOSE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_WAITING_TO_CLOSE
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD SNOW REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED DOOR_3_WAITING_TO_CLOSE
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED DOOR_3_WAITING_TO_CLOSE
  End
 
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName          = OBJECT:StrategyCenter
  Side                 = AmericaCyberneticGeneral
  EditorSorting        = STRUCTURE
  CommandSet           = Cybr_AmericaStrategyCenterCommandSet
  BuildCost            = 2500
  BuildTime            = 50
  EnergyProduction     = -2
  VisionRange          = 400
  ShroudClearingRange  = 400
  ExperienceValue      = 84 84 84 84
  MaxSimultaneousOfType = 1

  Prerequisites
    Object = Cybr_AmericaWarFactory
    Science = SCIENCE_Rank3
  End

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY StrategyCenterGun
    AutoChooseSources = PRIMARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = StrategyCenterSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY FS_STRATEGY_CENTER FS_ADVANCED_TECH IMMUNE_TO_CAPTURE

  Body            = StructureBody ModuleTag_10
    MaxHealth       = 5000.0
    InitialHealth   = 5000.0
    SubdualDamageCap = 5000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = ProductionUpdate ModuleTag_11
  End

  Behavior = BaseRegenerateUpdate ModuleTag_12
  End 

  Behavior = SpecialAbility ModuleTag_13
    SpecialPowerTemplate = SpecialAbilityChangeBattlePlans
    UpdateModuleStartsAttack = Yes
  End
  Behavior = BattlePlanUpdate ModuleTag_14
    SpecialPowerTemplate              = SpecialAbilityChangeBattlePlans

    ;Transition Timings
    BombardmentPlanAnimationTime      = 7000
    HoldTheLinePlanAnimationTime      = 7000
    SearchAndDestroyPlanAnimationTime = 7000
    TransitionIdleTime                = 0

    ;Messages
    BombardmentMessageLabel      = MESSAGE:BattlePlanBombardmentInitiated
    HoldTheLineMessageLabel      = MESSAGE:BattlePlanHoldTheLineInitiated
    SearchAndDestroyMessageLabel = MESSAGE:BattlePlanSearchAndDestroyInitiated

    ;Audio hooks
    BombardmentPlanUnpackSoundName        = StrategyCenter_BombardmentPlanUnpackSound
    BombardmentPlanPackSoundName          = StrategyCenter_BombardmentPlanPackSound
    BombardmentAnnouncementName           = StrategyCenter_BombardmentPlanAnnouncement
    SearchAndDestroyPlanUnpackSoundName   = StrategyCenter_SearchAndDestroyPlanUnpack
    SearchAndDestroyPlanIdleLoopSoundName = StrategyCenter_SearchAndDestroyPlanIdleLoop
    SearchAndDestroyPlanPackSoundName     = StrategyCenter_SearchAndDestroyPlanPack
    SearchAndDestroyAnnouncementName      = StrategyCenter_SearchAndDestroyAnnouncement
    HoldTheLinePlanUnpackSoundName        = StrategyCenter_HoldTheLinePlanUnpack
    HoldTheLinePlanPackSoundName          = StrategyCenter_HoldTheLinePlanPack
    HoldTheLineAnnouncementName           = StrategyCenter_HoldTheLineAnnouncement

    ;Army bonuses granted by different battle plans
    ValidMemberKindOf                   = DRONE
    InvalidMemberKindOf                 = DOZER STRUCTURE AIRCRAFT INFANTRY
    BattlePlanChangeParalyzeTime          = 3000 ;Subjected to paralyzation whenever a battle plan is changed.
    HoldTheLinePlanArmorDamageScalar      = 0.85 ;Armor damage bonus scalar -- LESS is better!
    SearchAndDestroyPlanSightRangeScalar  = 1.1 ;Sight range bonus -- more is better!
    ;***NOTE*** WEAPON bonuses for army are specified in GameData.ini file!

    ;Building bonuses granted based on battle plan mode.
    StrategyCenterSearchAndDestroySightRangeScalar = 2.0
    StrategyCenterSearchAndDestroyDetectsStealth   = Yes
    StrategyCenterHoldTheLineMaxHealthScalar       = 2.0
    StrategyCenterHoldTheLineMaxHealthChangeType   = PRESERVE_RATIO

  End

  Behavior = AIUpdateInterface ModuleTag_15
    Turret
      ControlledWeaponSlots    = PRIMARY
      TurretTurnRate      = 60
      TurretPitchRate     = 60
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 45 ; this keeps it aimed half way between land and sky
                               ; since you never know from whence cometh danger
      NaturalTurretAngle = -90  ; this turret points backwards normally

      FirePitch           = 45       ; Instead of aiming pitchwise at the target, it will aim here
      MinIdleScanInterval = 500    ; in milliseconds
      MaxIdleScanInterval = 1000   ; in milliseconds
      MinIdleScanAngle    = 0      ; in degrees off the natural turret angle
      MaxIdleScanAngle    = 60     ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes ;ATTACK_BUILDINGS
  End

  Behavior = StealthDetectorUpdate ModuleTag_StealthDetector ;+
    DetectionRate       = 500
    InitiallyDisabled   = Yes
    DetectionRange     =  500
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraForbiddenKindOf     = AIRCRAFT MINE DEMOTRAP
  End

  Behavior                   = SpyVisionSpecialPower SpyTag_1
    SpecialPowerTemplate     = SuperweaponCIAIntelligence   
    BaseDuration             =  30000 ;in milliseconds
    BonusDurationPerCaptured =  10000 ;in milliseconds
    MaxDuration              = 240000 ;in milliseconds    
  End
  Behavior = SpyVisionUpdate SpyTag_2
  End

  Behavior = DestroyDie ModuleTag_17
  End

  Behavior = CreateObjectDie ModuleTag_18
    CreationList  = OCL_ABPowerPlantExplode
  End

  Behavior = CreateObjectDie ModuleTag_19
    CreationList  = OCL_AmericanRangerDebris04
    ExemptStatus  = UNDER_CONSTRUCTION
  End

  Behavior = FXListDie ModuleTag_20
    DeathFX = FX_StructureMediumDeath
  End

  Behavior = FlammableUpdate ModuleTag_22
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_23
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = GrantScienceUpgrade ModuleTag_Science01
    GrantScience = SCIENCE_AdvancedAI
    TriggeredBy = Upgrade_AdvancedAI
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Behavior = CommandSetUpgrade ModuleTag_ComSet01
    CommandSet = Cybr_AmericaStrategyCenterCommandSetDrones
    TriggeredBy = Upgrade_SwitchCommandSet
    RemovesUpgrades = Upgrade_SwitchBackCommandSet
  End
  Behavior = CommandSetUpgrade ModuleTag_ComSet02
    CommandSet = Cybr_AmericaStrategyCenterCommandSet
    TriggeredBy = Upgrade_SwitchBackCommandSet
    RemovesUpgrades = Upgrade_SwitchCommandSet Upgrade_SwitchBackCommandSet
  End

  Geometry            = BOX
  GeometryMajorRadius = 62.0
  GeometryMinorRadius = 44.0
  GeometryHeight      = 24.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaAirfield

  ; *** ART Parameters ***
  SelectPortrait         = SAACommand_L
  ButtonImage            = SAACommand

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  Draw = W3DModelDraw ModuleTag_01

    ExtraPublicBone = Runway1Parking1 
    ExtraPublicBone = Runway1Parking2 
    ExtraPublicBone = Runway2Parking1 
    ExtraPublicBone = Runway2Parking2 
    ExtraPublicBone = Runway1Park1Han
    ExtraPublicBone = Runway1Park2Han
    ExtraPublicBone = Runway2Park1Han
    ExtraPublicBone = Runway2Park2Han 
    ExtraPublicBone = Runway1Prep1 
    ExtraPublicBone = Runway1Prep2 
    ExtraPublicBone = Runway2Prep1 
    ExtraPublicBone = Runway2Prep2 
    ExtraPublicBone = RunwayStart1 
    ExtraPublicBone = RunwayStart2 
    ExtraPublicBone = RunwayEnd1 
    ExtraPublicBone = RunwayEnd2
    ExtraPublicBone = HeliPark01

    OkToChangeModelColor = Yes

    ; day ********************************************
    DefaultConditionState
      Model              = ABArFrcCmd
      Animation          = ABArFrcCmd.ABArFrcCmd
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED
      Model              = ABArFrcCmd_D
      Animation          = ABArFrcCmd_D.ABArFrcCmd_D
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = ABArFrcCmd_E
      Animation          = ABArFrcCmd_E.ABArFrcCmd_E
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
      ParticleSysBone    = Spark01 SparksLarge
    End
    
    ConditionState       = SNOW
      Model              = ABArFrcCmd_S
      Animation          = ABArFrcCmd_S.ABArFrcCmd_S
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED SNOW
      Model              = ABArFrcCmd_DS
      Animation          = ABArFrcCmd_DS.ABArFrcCmd_DS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = ABArFrcCmd_ES
      Animation          = ABArFrcCmd_ES.ABArFrcCmd_ES
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
      ParticleSysBone    = Spark01 SparksLarge
    End

    ; night ******************************************
    ConditionState       = NIGHT
      Model              = ABArFrcCmd_N
      Animation          = ABArFrcCmd_N.ABArFrcCmd_N
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT
      Model              = ABArFrcCmd_ND
      Animation          = ABArFrcCmd_ND.ABArFrcCmd_ND
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABArFrcCmd_NE
      Animation          = ABArFrcCmd_NE.ABArFrcCmd_NE
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT SNOW
      Model              = ABArFrcCmd_NS
      Animation          = ABArFrcCmd_NS.ABArFrcCmd_NS
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ABArFrcCmd_NDS
      Animation          = ABArFrcCmd_NDS.ABArFrcCmd_NDS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ABArFrcCmd_NES
      Animation          = ABArFrcCmd_NES.ABArFrcCmd_NES
      AnimationMode      = LOOP
    End
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABArFrcCmd
      Animation          = ABArFrcCmd.ABArFrcCmd
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABArFrcCmd_D
      Animation          = ABArFrcCmd_D.ABArFrcCmd_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABArFrcCmd_E
      Animation          = ABArFrcCmd_E.ABArFrcCmd_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABArFrcCmd_N
      Animation          = ABArFrcCmd_N.ABArFrcCmd_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABArFrcCmd_ND
      Animation          = ABArFrcCmd_ND.ABArFrcCmd_ND
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABArFrcCmd_NE
      Animation          = ABArFrcCmd_NE.ABArFrcCmd_NE
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABArFrcCmd_S
      Animation          = ABArFrcCmd_S.ABArFrcCmd_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABArFrcCmd_DS
      Animation          = ABArFrcCmd_DS.ABArFrcCmd_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABArFrcCmd_ES
      Animation          = ABArFrcCmd_ES.ABArFrcCmd_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABArFrcCmd_NS
      Animation          = ABArFrcCmd_NS.ABArFrcCmd_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABArFrcCmd_NDS
      Animation          = ABArFrcCmd_NDS.ABArFrcCmd_NDS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABArFrcCmd_NES
      Animation          = ABArFrcCmd_NES.ABArFrcCmd_NES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ blinky production lights -----------------
  Draw = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model              = None
    End
    ConditionState       = ACTIVELY_CONSTRUCTING
      Model              = ABArFrcCmd_A9
      Animation          = ABArFrcCmd_A9.ABArFrcCmd_A9
      AnimationMode      = LOOP
    End
  End

  ; ----------------- door #1 -------------------
  Draw                = W3DModelDraw ModuleTag_03
    ConditionState    = NONE
      Model           = ABArFrcCmd_A7
      Animation       = ABArFrcCmd_A7.ABArFrcCmd_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW 
    AliasConditionState = NIGHT SNOW 
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE 
       
    ConditionState    = DOOR_1_OPENING
      Model           = ABArFrcCmd_A7
      Animation       = ABArFrcCmd_A7.ABArFrcCmd_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End 
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_1_OPENING
     
    ConditionState    = DOOR_1_CLOSING
      Model           = ABArFrcCmd_A7
      Animation       = ABArFrcCmd_A7.ABArFrcCmd_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE  DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = ABArFrcCmd_A7
      Animation       = ABArFrcCmd_A7.ABArFrcCmd_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABArFrcCmd_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABArFrcCmd_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABArFrcCmd_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

    
  End

  ; ----------------- door #2 -------------------
  Draw                = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = ABArFrcCmd_A8
      Animation       = ABArFrcCmd_A8.ABArFrcCmd_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW 
    AliasConditionState = NIGHT SNOW 
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE 
    
    
    ConditionState    = DOOR_2_OPENING
      Model           = ABArFrcCmd_A8
      Animation       = ABArFrcCmd_A8.ABArFrcCmd_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_2_OPENING
    AliasConditionState = SNOW DOOR_2_OPENING
    AliasConditionState = NIGHT SNOW DOOR_2_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_2_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_2_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_2_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_2_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_2_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_2_OPENING
       
    ConditionState    = DOOR_2_CLOSING
      Model           = ABArFrcCmd_A8
      Animation       = ABArFrcCmd_A8.ABArFrcCmd_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_2_CLOSING
    AliasConditionState = SNOW DOOR_2_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_2_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_2_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_2_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_2_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_2_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_2_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_2_CLOSING
    
    ConditionState    = DOOR_2_WAITING_OPEN
      Model           = ABArFrcCmd_A8
      Animation       = ABArFrcCmd_A8.ABArFrcCmd_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST 
    End 
    AliasConditionState = NIGHT DOOR_2_WAITING_OPEN
    AliasConditionState = SNOW DOOR_2_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_2_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_2_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_2_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_2_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_2_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_2_WAITING_OPEN
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_2_WAITING_OPEN
    
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABArFrcCmd_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABArFrcCmd_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABArFrcCmd_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

    
  End
  
  ; ----------------- door #3 -------------------
  Draw                = W3DModelDraw ModuleTag_05
    DefaultConditionState
      Model           = ABArFrcCmd_A2
      Animation       = ABArFrcCmd_A2.ABArFrcCmd_A2
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW 
    AliasConditionState = NIGHT SNOW 
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    
    ConditionState    = DOOR_3_OPENING
      Model           = ABArFrcCmd_A2
      Animation       = ABArFrcCmd_A2.ABArFrcCmd_A2
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_3_OPENING
    AliasConditionState = SNOW DOOR_3_OPENING
    AliasConditionState = NIGHT SNOW DOOR_3_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_3_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_3_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_3_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_3_OPENING
    
    ConditionState    = DOOR_3_CLOSING
      Model           = ABArFrcCmd_A2
      Animation       = ABArFrcCmd_A2.ABArFrcCmd_A2
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_3_CLOSING
    AliasConditionState = SNOW DOOR_3_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_3_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_3_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_3_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_3_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    
    ConditionState    = DOOR_3_WAITING_OPEN
      Model           = ABArFrcCmd_A2
      Animation       = ABArFrcCmd_A2.ABArFrcCmd_A2
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN
        
    
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABArFrcCmd_A2
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABArFrcCmd_A2
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABArFrcCmd_A2
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

       
  End

  ; ----------------- door #4 -------------------
  Draw                = W3DModelDraw ModuleTag_06
    DefaultConditionState
      Model           = ABArFrcCmd_A3
      Animation       = ABArFrcCmd_A3.ABArFrcCmd_A3
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW 
    AliasConditionState = NIGHT SNOW 
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_4_OPENING
      Model           = ABArFrcCmd_A3
      Animation       = ABArFrcCmd_A3.ABArFrcCmd_A3
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_4_OPENING
    AliasConditionState = SNOW DOOR_4_OPENING
    AliasConditionState = NIGHT SNOW DOOR_4_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_4_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_4_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_4_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_4_OPENING
    
    ConditionState    = DOOR_4_CLOSING
      Model           = ABArFrcCmd_A3
      Animation       = ABArFrcCmd_A3.ABArFrcCmd_A3
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_4_CLOSING
    AliasConditionState = SNOW DOOR_4_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_4_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_4_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_4_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_4_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    
    ConditionState    = DOOR_4_WAITING_OPEN
      Model           = ABArFrcCmd_A3
      Animation       = ABArFrcCmd_A3.ABArFrcCmd_A3
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End 
    AliasConditionState = NIGHT DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABArFrcCmd_A3
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABArFrcCmd_A3
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABArFrcCmd_A3
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABArFrcCmd_A4
      Animation       = ABArFrcCmd_A4.ABArFrcCmd_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABArFrcCmd_A4N
      Animation       = ABArFrcCmd_A4N.ABArFrcCmd_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABArFrcCmd_A4S
      Animation       = ABArFrcCmd_A4S.ABArFrcCmd_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABArFrcCmd_A4SN
      Animation       = ABArFrcCmd_A4SN.ABArFrcCmd_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABArFrcCmd_A4
      Animation       = ABArFrcCmd_A4.ABArFrcCmd_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABArFrcCmd_A4N
      Animation       = ABArFrcCmd_A4N.ABArFrcCmd_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABArFrcCmd_A4S
      Animation       = ABArFrcCmd_A4S.ABArFrcCmd_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABArFrcCmd_A4SN
      Animation       = ABArFrcCmd_A4SN.ABArFrcCmd_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABArFrcCmd_A4
      Animation       = ABArFrcCmd_A4.ABArFrcCmd_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABArFrcCmd_A4N
      Animation       = ABArFrcCmd_A4N.ABArFrcCmd_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABArFrcCmd_A4S
      Animation       = ABArFrcCmd_A4S.ABArFrcCmd_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABArFrcCmd_A4SN
      Animation       = ABArFrcCmd_A4SN.ABArFrcCmd_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_08
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABArFrcCmd_A6
      Animation       = ABArFrcCmd_A6.ABArFrcCmd_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABArFrcCmd_A6N
      Animation       = ABArFrcCmd_A6N.ABArFrcCmd_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABArFrcCmd_A6S
      Animation       = ABArFrcCmd_A6S.ABArFrcCmd_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABArFrcCmd_A6SN
      Animation       = ABArFrcCmd_A6SN.ABArFrcCmd_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABArFrcCmd_A6
      Animation       = ABArFrcCmd_A6.ABArFrcCmd_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABArFrcCmd_A6N
      Animation       = ABArFrcCmd_A6N.ABArFrcCmd_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABArFrcCmd_A6S
      Animation       = ABArFrcCmd_A6S.ABArFrcCmd_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABArFrcCmd_A6SN
      Animation       = ABArFrcCmd_A6SN.ABArFrcCmd_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABArFrcCmd_A6
      Animation       = ABArFrcCmd_A6.ABArFrcCmd_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABArFrcCmd_A6N
      Animation       = ABArFrcCmd_A6N.ABArFrcCmd_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABArFrcCmd_A6S
      Animation       = ABArFrcCmd_A6S.ABArFrcCmd_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABArFrcCmd_A6SN
      Animation       = ABArFrcCmd_A6SN.ABArFrcCmd_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_09
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState    = ACTIVELY_BEING_CONSTRUCTED
      Model           = ABArFrcCmd_A5
      Animation       = ABArFrcCmd_A5.ABArFrcCmd_A5
      AnimationMode   = LOOP
      TransitionKey   = UP_DAY
    End

    ConditionState    = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABArFrcCmd_A5N
      Animation       = ABArFrcCmd_A5N.ABArFrcCmd_A5N
      AnimationMode   = LOOP
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = ABArFrcCmd_A5S
      Animation       = ABArFrcCmd_A5S.ABArFrcCmd_A5S
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABArFrcCmd_A5SN
      Animation       = ABArFrcCmd_A5SN.ABArFrcCmd_A5SN
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABArFrcCmd_AB
      Animation       = ABArFrcCmd_AB.ABArFrcCmd_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABArFrcCmd_ABN
      Animation       = ABArFrcCmd_ABN.ABArFrcCmd_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABArFrcCmd_ABS
      Animation       = ABArFrcCmd_ABS.ABArFrcCmd_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABArFrcCmd_ABSN
      Animation       = ABArFrcCmd_ABSN.ABArFrcCmd_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABArFrcCmd_AB
      Animation       = ABArFrcCmd_AB.ABArFrcCmd_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABArFrcCmd_ABN
      Animation       = ABArFrcCmd_ABN.ABArFrcCmd_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABArFrcCmd_ABS
      Animation       = ABArFrcCmd_ABS.ABArFrcCmd_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABArFrcCmd_ABS
      Animation       = ABArFrcCmd_ABS.ABArFrcCmd_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Airfield
  Side             = AmericaCyberneticGeneral
  EditorSorting    = STRUCTURE
  BuildCost           = 1500
  BuildTime           = 30.0
  EnergyProduction    = -1
  CommandSet          = Cybr_AmericaAirfieldCommandSet
  VisionRange         = 200
  ShroudClearingRange = 200
  ExperienceValue    = 84 84 84 84

  Prerequisites
    Object = Cybr_AmericaSupplyCenter
  End

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect         = AirfieldUSASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_FACTORY MP_COUNT_FOR_VICTORY FS_AIRFIELD AUTO_RALLYPOINT

  Body                = StructureBody ModuleTag_10
    MaxHealth         = 3000.0
    InitialHealth     = 3000.0
    SubdualDamageCap = 3000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  
  Behavior = ParkingPlaceBehavior ModuleTag_11
    HealAmountPerSecond     = 10
    NumRows                 = 2
    NumCols                 = 2
    HasRunways              = Yes
    ApproachHeight          = 50
  End

  Behavior = ProductionUpdate ModuleTag_12
    NumDoorAnimations            = 4
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1000  ;in mSeconds
  End
  Behavior = BaseRegenerateUpdate ModuleTag_13
  End 

  Behavior = DestroyDie ModuleTag_14
  End

  Behavior             = CreateObjectDie ModuleTag_15
    CreationList  = OCL_ABPowerPlantExplode
  End
  Behavior             = CreateObjectDie ModuleTag_16
    CreationList  = OCL_AmericanRangerDebris04
    ExemptStatus  = UNDER_CONSTRUCTION
  End
  Behavior             = FXListDie ModuleTag_17
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = FlammableUpdate ModuleTag_19
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry            = BOX
  GeometryMajorRadius = 112.0
  GeometryMinorRadius = 74.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaSupplyCenter

  ; *** ART Parameters ***
  SelectPortrait         = SASupplyCntr_L
  ButtonImage            = SASupplyCntr

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day **************************************
    ConditionState       = NONE
      Model              = ABSupplyCT
      Animation          = ABSupplyCT.ABSupplyCT
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = DAMAGED
      Model              = ABSupplyCT_D
      Animation          = ABSupplyCT_D.ABSupplyCT_D
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke01 SmolderingFire
      ParticleSysBone    = Smoke02 SmolderingFire
      ParticleSysBone    = Smoke03 SmolderingFire
      ParticleSysBone    = Smoke04 SmolderingFire
    End
     ConditionState      = REALLYDAMAGED RUBBLE
      Model              = ABSupplyCT_E
      Animation          = ABSupplyCT_E.ABSupplyCT_E
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Smoke01 SmolderingFire
      ParticleSysBone    = Smoke02 SmolderingFire
      ParticleSysBone    = Smoke03 SmolderingFire
      ParticleSysBone    = Smoke04 SmolderingFire
      ParticleSysBone    = Smoke05 SmolderingFire
      ParticleSysBone    = Smoke06 SmolderingFire
    End
    
    ; day Snow **************************************
    ConditionState       = SNOW
      Model              = ABSupplyCT_S
      Animation          = ABSupplyCT_S.ABSupplyCT_S
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = DAMAGED SNOW
      Model              = ABSupplyCT_DS
      Animation          = ABSupplyCT_DS.ABSupplyCT_DS
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke01 SmolderingFire
      ParticleSysBone    = Smoke02 SmolderingFire
      ParticleSysBone    = Smoke03 SmolderingFire
      ParticleSysBone    = Smoke04 SmolderingFire
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model              = ABSupplyCT_ES
      Animation          = ABSupplyCT_ES.ABSupplyCT_ES
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Smoke01 SmolderingFire
      ParticleSysBone    = Smoke02 SmolderingFire
      ParticleSysBone    = Smoke03 SmolderingFire
      ParticleSysBone    = Smoke04 SmolderingFire
      ParticleSysBone    = Smoke05 SmolderingFire
      ParticleSysBone    = Smoke06 SmolderingFire
    End
  
    ; Night *************************************
    ConditionState     = NIGHT
      Model              = ABSupplyCT_N
      Animation          = ABSupplyCT_N.ABSupplyCT_N
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End 
      ConditionState     = DAMAGED NIGHT
      Model              = ABSupplyCT_DN
      Animation          = ABSupplyCT_DN.ABSupplyCT_DN
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End 
      ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABSupplyCT_EN
      Animation          = ABSupplyCT_EN.ABSupplyCT_EN
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ; Night Snow*************************************
    ConditionState     = NIGHT SNOW
      Model              = ABSupplyCT_NS
      Animation          = ABSupplyCT_NS.ABSupplyCT_NS
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End 
      ConditionState     = DAMAGED NIGHT SNOW
      Model              = ABSupplyCT_DNS
      Animation          = ABSupplyCT_DNS.ABSupplyCT_DNS
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End 
      ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ABSupplyCT_ENS
      Animation          = ABSupplyCT_ENS.ABSupplyCT_ENS
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    
   
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABSupplyCT
      Animation          = ABSupplyCT.ABSupplyCT
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABSupplyCT_D
      Animation          = ABSupplyCT_D.ABSupplyCT_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABSupplyCT_E
      Animation          = ABSupplyCT_E.ABSupplyCT_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABSupplyCT_N
      Animation          = ABSupplyCT_N.ABSupplyCT_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABSupplyCT_DN
      Animation          = ABSupplyCT_DN.ABSupplyCT_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABSupplyCT_EN
      Animation          = ABSupplyCT_EN.ABSupplyCT_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABSupplyCT_S
      Animation          = ABSupplyCT_S.ABSupplyCT_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABSupplyCT_DS
      Animation          = ABSupplyCT_DS.ABSupplyCT_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABSupplyCT_ES
      Animation          = ABSupplyCT_ES.ABSupplyCT_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABSupplyCT_NS
      Animation          = ABSupplyCT_NS.ABSupplyCT_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABSupplyCT_DNS
      Animation          = ABSupplyCT_DNS.ABSupplyCT_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABSupplyCT_ENS
      Animation          = ABSupplyCT_ENS.ABSupplyCT_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupplyCT_A4
      Animation       = ABSupplyCT_A4.ABSupplyCT_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupplyCT_A4N
      Animation       = ABSupplyCT_A4N.ABSupplyCT_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupplyCT_A4S
      Animation       = ABSupplyCT_A4S.ABSupplyCT_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupplyCT_A4SN
      Animation       = ABSupplyCT_A4SN.ABSupplyCT_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABSupplyCT_A4
      Animation       = ABSupplyCT_A4.ABSupplyCT_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABSupplyCT_A4N
      Animation       = ABSupplyCT_A4N.ABSupplyCT_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABSupplyCT_A4S
      Animation       = ABSupplyCT_A4S.ABSupplyCT_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABSupplyCT_A4SN
      Animation       = ABSupplyCT_A4SN.ABSupplyCT_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABSupplyCT_A4
      Animation       = ABSupplyCT_A4.ABSupplyCT_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABSupplyCT_A4N
      Animation       = ABSupplyCT_A4N.ABSupplyCT_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABSupplyCT_A4S
      Animation       = ABSupplyCT_A4S.ABSupplyCT_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABSupplyCT_A4SN
      Animation       = ABSupplyCT_A4SN.ABSupplyCT_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABSupplyCT_A6
      Animation       = ABSupplyCT_A6.ABSupplyCT_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABSupplyCT_A6N
      Animation       = ABSupplyCT_A6N.ABSupplyCT_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABSupplyCT_A6S
      Animation       = ABSupplyCT_A6S.ABSupplyCT_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABSupplyCT_A6SN
      Animation       = ABSupplyCT_A6SN.ABSupplyCT_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABSupplyCT_A6
      Animation       = ABSupplyCT_A6.ABSupplyCT_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABSupplyCT_A6N
      Animation       = ABSupplyCT_A6N.ABSupplyCT_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABSupplyCT_A6S
      Animation       = ABSupplyCT_A6S.ABSupplyCT_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABSupplyCT_A6SN
      Animation       = ABSupplyCT_A6SN.ABSupplyCT_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABSupplyCT_A6
      Animation       = ABSupplyCT_A6.ABSupplyCT_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABSupplyCT_A6N
      Animation       = ABSupplyCT_A6N.ABSupplyCT_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABSupplyCT_A6S
      Animation       = ABSupplyCT_A6S.ABSupplyCT_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABSupplyCT_A6SN
      Animation       = ABSupplyCT_A6SN.ABSupplyCT_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupplyCT_A5
      Animation       = ABSupplyCT_A5.ABSupplyCT_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupplyCT_A5N
      Animation       = ABSupplyCT_A5N.ABSupplyCT_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupplyCT_A5S
      Animation       = ABSupplyCT_A5S.ABSupplyCT_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupplyCT_A5SN
      Animation       = ABSupplyCT_A5SN.ABSupplyCT_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = ABSupplyCT_AB
      Animation       = ABSupplyCT_AB.ABSupplyCT_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = ABSupplyCT_ABN
      Animation       = ABSupplyCT_ABN.ABSupplyCT_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = ABSupplyCT_ABS
      Animation       = ABSupplyCT_ABS.ABSupplyCT_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = ABSupplyCT_ABSN
      Animation       = ABSupplyCT_ABSN.ABSupplyCT_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = ABSupplyCT_AB
      Animation       = ABSupplyCT_AB.ABSupplyCT_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = ABSupplyCT_ABN
      Animation       = ABSupplyCT_ABN.ABSupplyCT_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = ABSupplyCT_ABS
      Animation       = ABSupplyCT_ABS.ABSupplyCT_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = ABSupplyCT_ABSN
      Animation       = ABSupplyCT_ABSN.ABSupplyCT_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
 
  ; ------------ Grabbing box crane arm -----------------
  Draw = W3DModelDraw ModuleTag_19
    OkToChangeModelColor = Yes   
    ConditionState    = NONE                        ; sit there
      Model           = ABSupplyCT_A8
      Animation       = ABSupplyCT_A8.ABSupplyCT_A8
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
      WaitForStateToFinishIfPossible = TRANS_Playing
    End
    AliasConditionState  =  NIGHT
    AliasConditionState  =  SNOW
    AliasConditionState  =  NIGHT SNOW
    AliasConditionState  =  DAMAGED
    AliasConditionState  =  NIGHT DAMAGED
    AliasConditionState  =  SNOW DAMAGED
    AliasConditionState  =  NIGHT SNOW DAMAGED
    AliasConditionState  =  REALLYDAMAGED RUBBLE
    AliasConditionState  =  NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState  =  SNOW REALLYDAMAGED RUBBLE
    AliasConditionState  =  NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOCKING_ACTIVE              ; play arm box anim once
      Model           = ABSupplyCT_A7
      Animation       = ABSupplyCT_A7.ABSupplyCT_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
      TransitionKey   = TRANS_Playing
    End
    AliasConditionState  =  NIGHT DOCKING_ACTIVE
    AliasConditionState  =  SNOW DOCKING_ACTIVE
    AliasConditionState  =  NIGHT SNOW DOCKING_ACTIVE
    AliasConditionState  =  DAMAGED DOCKING_ACTIVE
    AliasConditionState  =  NIGHT DAMAGED DOCKING_ACTIVE
    AliasConditionState  =  SNOW DAMAGED DOCKING_ACTIVE
    AliasConditionState  =  NIGHT SNOW DAMAGED DOCKING_ACTIVE
    AliasConditionState  =  REALLYDAMAGED RUBBLE DOCKING_ACTIVE
    AliasConditionState  =  NIGHT REALLYDAMAGED RUBBLE DOCKING_ACTIVE
    AliasConditionState  =  SNOW REALLYDAMAGED RUBBLE DOCKING_ACTIVE
    AliasConditionState  =  NIGHT SNOW REALLYDAMAGED RUBBLE DOCKING_ACTIVE
    
  End
  
    ; ------------ Spinny Belt -----------------
  Draw = W3DModelDraw ModuleTag_SpinnyBelt
    OkToChangeModelColor = Yes   
    ConditionState    = NONE                        ; sit there
      Model           = ABSupplyCT_A9
      Animation       = ABSupplyCT_A9.ABSupplyCT_A9
      AnimationMode   = LOOP
    End
    AliasConditionState  =  NIGHT
    AliasConditionState  =  SNOW
    AliasConditionState  =  NIGHT SNOW
    AliasConditionState  =  DAMAGED
    AliasConditionState  =  NIGHT DAMAGED
    AliasConditionState  =  SNOW DAMAGED
    AliasConditionState  =  NIGHT SNOW DAMAGED
    AliasConditionState  =  REALLYDAMAGED RUBBLE
    AliasConditionState  =  NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState  =  SNOW REALLYDAMAGED RUBBLE
    AliasConditionState  =  NIGHT SNOW REALLYDAMAGED RUBBLE
    
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABSupplyCT_A9
      Animation          = ABSupplyCT_A9.ABSupplyCT_A9
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT MAINTAIN_FRAME_ACROSS_STATES
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
    

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SupplyCenter
  Side             = AmericaCyberneticGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 1600
  RefundValue      = 400
  BuildTime        = 28.0
  EnergyProduction = -1
  CommandSet       = Cybr_AmericaSupplyCenterCommandSet
  VisionRange      = 200.0
  ShroudClearingRange = 200
  ExperienceValue  = 67 67 67 67

  Prerequisites
    Object = Cybr_AmericaPowerPlant
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  WeaponSet
    Conditions = None
    Weapon     = TERTIARY SlowSelfdestructWeapon
  End

  Behavior = AIUpdateInterface ModuleTag_AI
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyCenterUSASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CASH_GENERATOR SCORE CAPTURABLE AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY CANNOT_BUILD_NEAR_SUPPLIES FS_SUPPLY_CENTER
  Body                = StructureBody ModuleTag_05
    MaxHealth       = 1500.0
    InitialHealth   = 1500.0
    SubdualDamageCap = 2000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = SupplyCenterCreate ModuleTag_06
  End

  Behavior = DestroyDie ModuleTag_07
  End

  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_AmericanRangerDebris02
    ExemptStatus  = UNDER_CONSTRUCTION
  End

  Behavior = ProductionUpdate ModuleTag_09
  End

  Behavior = SupplyCenterProductionExitUpdate ModuleTag_10
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 44.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  Behavior            = SpawnBehavior ModuleTag_12
    SpawnNumber       = 1
    SpawnReplaceDelay = 9999
    SpawnTemplateName = Cybr_AmericaVehicleChinook
    OneShot           = Yes
    CanReclaimOrphans = No
    SlavesHaveFreeWill = Yes
  End

  Behavior = SupplyCenterDockUpdate ModuleTag_13
    NumberApproachPositions = 9 ; There are 9 approach bones in the art
  End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  
  Behavior             = CreateObjectDie ModuleTag_16
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_17
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry            = BOX
  GeometryMajorRadius = 44.0
  GeometryMinorRadius = 45.0
  GeometryHeight      = 24.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaSupplyDropZone

  ; *** ART Parameters ***
  SelectPortrait         = SADropZone_L
  ButtonImage            = SADropZone

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes
  UpgradeCameo2 = Upgrade_AmericaSupplyLines  

  Draw                 = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes   
    ConditionState       = NONE
      Model              = ABSupDrop
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop.ABSupDrop
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = ABSupDrop_D
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_D.ABSupDrop_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE
      Model              = ABSupDrop_E
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_E.ABSupDrop_E
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT
      Model              = ABSupDrop_N
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_N.ABSupDrop_N
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT
      Model              = ABSupDrop_DN
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DN.ABSupDrop_DN
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABSupDrop_EN
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_EN.ABSupDrop_EN
      AnimationMode      = LOOP
    End
    
    ;----------- SNOW
    
    ConditionState       = SNOW
      Model              = ABSupDrop_S
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_S.ABSupDrop_S
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED SNOW
      Model              = ABSupDrop_DS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DS.ABSupDrop_DS

      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model              = ABSupDrop_ES
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_ES.ABSupDrop_ES
      AnimationMode      = LOOP
    End
    
    ;---------- SNOW NIGHT
    
    ConditionState       = NIGHT SNOW
      Model              = ABSupDrop_NS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_NS.ABSupDrop_NS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ABSupDrop_DNS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DNS.ABSupDrop_DNS
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ABSupDrop_ENS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_ENS.ABSupDrop_ENS
      AnimationMode      = LOOP
    End
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABSupDrop
      Animation          = ABSupDrop.ABSupDrop
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABSupDrop_D
      Animation          = ABSupDrop_D.ABSupDrop_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABSupDrop_E
      Animation          = ABSupDrop_E.ABSupDrop_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABSupDrop_N
      Animation          = ABSupDrop_N.ABSupDrop_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABSupDrop_DN
      Animation          = ABSupDrop_DN.ABSupDrop_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABSupDrop_EN
      Animation          = ABSupDrop_EN.ABSupDrop_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABSupDrop_S
      Animation          = ABSupDrop_S.ABSupDrop_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABSupDrop_DS
      Animation          = ABSupDrop_DS.ABSupDrop_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABSupDrop_ES
      Animation          = ABSupDrop_ES.ABSupDrop_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABSupDrop_NS
      Animation          = ABSupDrop_NS.ABSupDrop_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABSupDrop_DNS
      Animation          = ABSupDrop_DNS.ABSupDrop_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABSupDrop_ENS
      Animation          = ABSupDrop_ENS.ABSupDrop_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End
 
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupDrop_A4
      Animation       = ABSupDrop_A4.ABSupDrop_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupDrop_A4N
      Animation       = ABSupDrop_A4N.ABSupDrop_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupDrop_A4S
      Animation       = ABSupDrop_A4S.ABSupDrop_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupDrop_A4SN
      Animation       = ABSupDrop_A4SN.ABSupDrop_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABSupDrop_A4
      Animation       = ABSupDrop_A4.ABSupDrop_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABSupDrop_A4N
      Animation       = ABSupDrop_A4N.ABSupDrop_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABSupDrop_A4S
      Animation       = ABSupDrop_A4S.ABSupDrop_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABSupDrop_A4SN
      Animation       = ABSupDrop_A4SN.ABSupDrop_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABSupDrop_A4
      Animation       = ABSupDrop_A4.ABSupDrop_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABSupDrop_A4N
      Animation       = ABSupDrop_A4N.ABSupDrop_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABSupDrop_A4S
      Animation       = ABSupDrop_A4S.ABSupDrop_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABSupDrop_A4SN
      Animation       = ABSupDrop_A4SN.ABSupDrop_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired    = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABSupDrop_A6
      Animation       = ABSupDrop_A6.ABSupDrop_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABSupDrop_A6N
      Animation       = ABSupDrop_A6N.ABSupDrop_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABSupDrop_A6S
      Animation       = ABSupDrop_A6S.ABSupDrop_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABSupDrop_A6SN
      Animation       = ABSupDrop_A6SN.ABSupDrop_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABSupDrop_A6
      Animation       = ABSupDrop_A6.ABSupDrop_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABSupDrop_A6N
      Animation       = ABSupDrop_A6N.ABSupDrop_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABSupDrop_A6S
      Animation       = ABSupDrop_A6S.ABSupDrop_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABSupDrop_A6SN
      Animation       = ABSupDrop_A6SN.ABSupDrop_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABSupDrop_A6
      Animation       = ABSupDrop_A6.ABSupDrop_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABSupDrop_A6N
      Animation       = ABSupDrop_A6N.ABSupDrop_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABSupDrop_A6S
      Animation       = ABSupDrop_A6S.ABSupDrop_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABSupDrop_A6SN
      Animation       = ABSupDrop_A6SN.ABSupDrop_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:AmericaSupplyDropZone
  Side                = AmericaCyberneticGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 2500
  BuildTime           = 50
  EnergyProduction = -1
  ShroudClearingRange = 100
  ExperienceValue    = 67 67 67 67

  Prerequisites
    Object = Cybr_AmericaAirfield
    Object = Cybr_AmericaWarFactory
  End

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***  
  KindOf              = STRUCTURE SELECTABLE IMMOBILE SCORE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY FS_SUPPLY_DROPZONE
  RadarPriority       = STRUCTURE

  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 1250.0
    InitialHealth     = 1250.0
    SubdualDamageCap  = 2500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior       = OCLUpdate ModuleTag_05 ; Context window is a reaction to this, no CommandSet
    OCL          = OCL_AmericaSupplyDropZoneCrateDrop
    MinDelay     = 120000
    MaxDelay     = 120000
    CreateAtEdge = Yes
  End

  Behavior  = DestroyDie ModuleTag_06
  End

  Behavior             = CreateObjectDie ModuleTag_07
    CreationList  = OCL_AmericanRangerDebris02
    ExemptStatus  = UNDER_CONSTRUCTION
  End
  
  Behavior                  = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End
  
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End

  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 27.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object Cybr_AmericaBarracks
 
  ; *** ART Parameters ***
  SelectPortrait         = SABarracks_L
  ButtonImage            = SABarracks

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  PlacementViewAngle     = -45
    
  ;Main barracks model
  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ;DAY *******************************
    ConditionState       = NONE
      Model              = ABBARRACKS
      Animation          = ABBarracks.ABBarracks
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED
      Model              = ABBarracks_D
      Animation          = ABBarracks_D.ABBarracks_D
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = ABBarracks_E
      Animation          = ABBarracks_E.ABBarracks_E
      AnimationMode      = LOOP
    End

    ;NIGHT *****************************
    ConditionState       = NIGHT
      Model              = ABBARRACKS_N
      Animation          = ABBarracks_N.ABBarracks_N
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT
      Model              = ABBarracks_DN
      Animation          = ABBarracks_DN.ABBarracks_DN
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABBarracks_EN
      Animation          = ABBarracks_EN.ABBarracks_EN
      AnimationMode      = LOOP
    End

    ;SNOW ******************************
    ConditionState       = SNOW
      Model              = ABBARRACKS_S
      Animation          = ABBarracks_S.ABBarracks_S
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED SNOW
      Model              = ABBarracks_DS
      Animation          = ABBarracks_DS.ABBarracks_DS
      AnimationMode      = LOOP
    End
     ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model              = ABBarracks_ES
      Animation          = ABBarracks_ES.ABBarracks_ES
      AnimationMode      = LOOP
    End

    ;SNOW AND NIGHT ********************
    ConditionState       = SNOW NIGHT
      Model              = ABBARRACKS_NS
      Animation          = ABBarracks_NS.ABBarracks_NS
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED SNOW NIGHT
      Model              = ABBarracks_DNS
      Animation          = ABBarracks_DNS.ABBarracks_DNS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model              = ABBarracks_ENS
      Animation          = ABBarracks_ENS.ABBarracks_ENS
      AnimationMode      = LOOP
    End

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABBarracks
      Animation          = ABBarracks.ABBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABBarracks_D
      Animation          = ABBarracks_D.ABBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABBarracks_E
      Animation          = ABBarracks_E.ABBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABBarracks_N
      Animation          = ABBarracks_N.ABBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABBarracks_DN
      Animation          = ABBarracks_DN.ABBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABBarracks_EN
      Animation          = ABBarracks_EN.ABBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABBarracks_S
      Animation          = ABBarracks_S.ABBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABBarracks_DS
      Animation          = ABBarracks_DS.ABBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABBarracks_ES
      Animation          = ABBarracks_ES.ABBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABBarracks_NS
      Animation          = ABBarracks_NS.ABBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABBarracks_DNS
      Animation          = ABBarracks_DNS.ABBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABBarracks_ENS
      Animation          = ABBarracks_ENS.ABBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  Draw = W3DModelDraw ModuleTag_TestFlag
    OkToChangeModelColor = Yes
   
    ;DAY *******************************
    ConditionState       = NONE
      Model              = ABAutoBarr
    End
    ConditionState       = DAMAGED
      Model              = ABAutoBarr_D
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = ABAutoBarr_E
    End

    ;NIGHT *****************************
    ConditionState       = NIGHT
      Model              = ABAutoBarr
    End
    ConditionState       = DAMAGED NIGHT
      Model              = ABAutoBarr_D
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABAutoBarr_E
    End

    ;SNOW ******************************
    ConditionState       = SNOW
      Model              = ABAutoBarr_S
    End
    ConditionState       = DAMAGED SNOW
      Model              = ABAutoBarr_DS
    End
     ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model              = ABAutoBarr_ES
    End

    ;SNOW AND NIGHT ********************
    ConditionState       = SNOW NIGHT
      Model              = ABAutoBarr_S
    End
    ConditionState       = DAMAGED SNOW NIGHT
      Model              = ABAutoBarr_DS
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model              = ABAutoBarr_ES
    End
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABAutoBarr
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABAutoBarr_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABAutoBarr_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABAutoBarr
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABAutoBarr_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABAutoBarr_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABAutoBarr_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABAutoBarr_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABAutoBarr_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABAutoBarr_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABAutoBarr_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABAutoBarr_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBarracks_A4
      Animation       = ABBarracks_A4.ABBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBarracks_A4N
      Animation       = ABBarracks_A4N.ABBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SparksS01 LiveWireSparks02
    End

    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBarracks_A4S
      Animation       = ABBarracks_A4S.ABBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBarracks_A4SN
      Animation       = ABBarracks_A4SN.ABBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABBarracks_A4
      Animation       = ABBarracks_A4.ABBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABBarracks_A4N
      Animation       = ABBarracks_A4N.ABBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABBarracks_A4S
      Animation       = ABBarracks_A4S.ABBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABBarracks_A4SN
      Animation       = ABBarracks_A4SN.ABBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABBarracks_A4
      Animation       = ABBarracks_A4.ABBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABBarracks_A4N
      Animation       = ABBarracks_A4N.ABBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABBarracks_A4S
      Animation       = ABBarracks_A4S.ABBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS    
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End  
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABBarracks_A4SN
      Animation       = ABBarracks_A4SN.ABBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS    
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End 
   End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABBarracks_A6
      Animation       = ABBarracks_A6.ABBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABBarracks_A6N
      Animation       = ABBarracks_A6N.ABBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABBarracks_A6S
      Animation       = ABBarracks_A6S.ABBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABBarracks_A6SN
      Animation       = ABBarracks_A6SN.ABBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End 
   TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABBarracks_A6
      Animation       = ABBarracks_A6.ABBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABBarracks_A6N
      Animation       = ABBarracks_A6N.ABBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABBarracks_A6S
      Animation       = ABBarracks_A6S.ABBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABBarracks_A6SN
      Animation       = ABBarracks_A6SN.ABBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABBarracks_A6
      Animation       = ABBarracks_A6.ABBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABBarracks_A6N
      Animation       = ABBarracks_A6N.ABBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABBarracks_A6S
      Animation       = ABBarracks_A6S.ABBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABBarracks_A6SN
      Animation       = ABBarracks_A6SN.ABBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState    = ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBarracks_A5
      Animation       = ABBarracks_A5.ABBarracks_A5
      AnimationMode   = LOOP
      TransitionKey   = UP_DAY
    End

    ConditionState    = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBarracks_A5N
      Animation       = ABBarracks_A5N.ABBarracks_A5N
      AnimationMode   = LOOP
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBarracks_A5S
      Animation       = ABBarracks_A5S.ABBarracks_A5S
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABBarracks_A5SN
      Animation       = ABBarracks_A5SN.ABBarracks_A5SN
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOWNIGHT
    End 
   TransitionState    = DOWN_DEFAULT UP_DAY
      Model           = ABBarracks_AB
      Animation       = ABBarracks_AB.ABBarracks_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABBarracks_ABN
      Animation       = ABBarracks_ABN.ABBarracks_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABBarracks_ABS
      Animation       = ABBarracks_ABS.ABBarracks_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABBarracks_ABSN
      Animation       = ABBarracks_ABSN.ABBarracks_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABBarracks_AB
      Animation       = ABBarracks_AB.ABBarracks_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABBarracks_ABN
      Animation       = ABBarracks_ABN.ABBarracks_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABBarracks_ABS
      Animation       = ABBarracks_ABS.ABBarracks_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABBarracks_ABSN
      Animation       = ABBarracks_ABSN.ABBarracks_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
 
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Barracks
  Side                = AmericaCyberneticGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 800
  BuildTime           = 16
  EnergyProduction    = 0
  CommandSet          = Cybr_AmericaBarracksCommandSet
  VisionRange         = 200
  ShroudClearingRange = 200
  ExperienceValue  = 67 67 67 67

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksUSASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMOBILE HEAL_PAD SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY FS_BARRACKS

  Body                 = StructureBody ModuleTag_05
    MaxHealth          = 1600.0
    InitialHealth      = 1600.0
    SubdualDamageCap   = 1600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior = HealContain ModuleTag_06
    ContainMax          = 10 ;way bigger than the # of objects we can have  
    TimeForFullHeal     = 2000
    AllowInsideKindOf   = INFANTRY
    AllowAlliesInside   = Yes
    AllowNeutralInside  = No
    AllowEnemiesInside  = No
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = DestroyDie ModuleTag_07
  End

  Behavior                  = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior                  = CreateObjectDie ModuleTag_09
    CreationList       = OCL_AmericanRangerDebris02
    ExemptStatus       = UNDER_CONSTRUCTION
  End

  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End

  Behavior = ProductionUpdate ModuleTag_11
    QuantityModifier = Cybr_AmericaInfantryBeetleMine 5
    ConstructionCompleteDuration = 5 5000
  End

  Behavior = QueueProductionExitUpdate ModuleTag_12
    UnitCreatePoint    = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint  = X: 55.0  Y:  0.0   Z:0.0
    ExitDelay = 300
  End

  Behavior = BaseRegenerateUpdate ModuleTag_13
  End 

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_ComSet01
    CommandSet = Cybr_AmericaBarracksCommandSetDrones
    TriggeredBy = Upgrade_SwitchCommandSet
    RemovesUpgrades = Upgrade_SwitchBackCommandSet
  End
  Behavior = CommandSetUpgrade ModuleTag_ComSet02
    CommandSet = Cybr_AmericaBarracksCommandSet
    TriggeredBy = Upgrade_SwitchBackCommandSet
    RemovesUpgrades = Upgrade_SwitchCommandSet Upgrade_SwitchBackCommandSet
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry             = BOX
  GeometryMajorRadius  = 55.0
  GeometryMinorRadius  = 45.0
  GeometryHeight       = 20.0
  GeometryIsSmall      = No
  FactoryExitWidth    = 25     ; How much space to leave for units exiting.
  Shadow               = SHADOW_VOLUME
  BuildCompletion      = PLACED_BY_PLAYER
 
End

;------------------------------------------------------------------------------
Object Cybr_AmericaWarFactory

  ; *** ART Parameters ***
  SelectPortrait = SACWeaponsfact_L
  ButtonImage    = SACWeaponsfact

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes
  UpgradeCameo2 = Upgrade_AutomatizedProduction
  
  ; ------------ the main factory itself -----------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes  
    DefaultConditionState
      Model           = ABWarFact
      Animation       = ABWarFact.ABWarFact
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent     
    End    
    ConditionState = DAMAGED
      Model           = ABWarFact_D
      Animation       = ABWarFact_D.ABWarFact_D
      AnimationMode   = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model           = ABWarFact_E
      Animation       = ABWarFact_E.ABWarFact_E
      AnimationMode   = LOOP 
    End


    ; night *************************************************
    ConditionState = NIGHT
      Model           = ABWarFact_N
      Animation       = ABWarFact_N.ABWarFact_N
      AnimationMode   = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model           = ABWarFact_DN
      Animation       = ABWarFact_DN.ABWarFact_DN
      AnimationMode   = LOOP  
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model           = ABWarFact_EN
      Animation       = ABWarFact_EN.ABWarFact_EN
      AnimationMode   = LOOP 
    End
    
    ; snow *************************************************
    ConditionState = SNOW
      Model           = ABWarFact_S
      Animation       = ABWarFact_S.ABWarFact_S
      AnimationMode   = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model           = ABWarFact_DS
      Animation       = ABWarFact_DS.ABWarFact_DS
      AnimationMode   = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model           = ABWarFact_ES
      Animation       = ABWarFact_ES.ABWarFact_ES
      AnimationMode   = LOOP 
    End


    ; night snow *************************************************
    ConditionState = NIGHT SNOW
      Model           = ABWarFact_NS
      Animation       = ABWarFact_NS.ABWarFact_NS
      AnimationMode   = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model           = ABWarFact_DNS
      Animation       = ABWarFact_DNS.ABWarFact_DNS
      AnimationMode   = LOOP  
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = ABWarFact_ENS
      Animation       = ABWarFact_ENS.ABWarFact_ENS
      AnimationMode   = LOOP 
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABWarFact
      Animation          = ABWarFact.ABWarFact
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABWarFact_D
      Animation          = ABWarFact_D.ABWarFact_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABWarFact_E
      Animation          = ABWarFact_E.ABWarFact_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABWarFact_N
      Animation          = ABWarFact_N.ABWarFact_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABWarFact_DN
      Animation          = ABWarFact_DN.ABWarFact_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABWarFact_EN
      Animation          = ABWarFact_EN.ABWarFact_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABWarFact_S
      Animation          = ABWarFact_S.ABWarFact_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABWarFact_DS
      Animation          = ABWarFact_DS.ABWarFact_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABWarFact_ES
      Animation          = ABWarFact_ES.ABWarFact_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABWarFact_NS
      Animation          = ABWarFact_NS.ABWarFact_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABWarFact_DNS
      Animation          = ABWarFact_DNS.ABWarFact_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABWarFact_ENS
      Animation          = ABWarFact_ENS.ABWarFact_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End


  ; ----------------- the factory door -------------------
  Draw = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = ABWarFact_A8
      Animation       = ABWarFact_A8.ABWarFact_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A8
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    
    ConditionState    = DAMAGED
      Model           = ABWarFact_A8D
      Animation       = ABWarFact_A8D.ABWarFact_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = ABWarFact_A8E
      Animation       = ABWarFact_A8E.ABWarFact_A8E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = ABWarFact_A8
      Animation       = ABWarFact_A8.ABWarFact_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = ABWarFact_A8D
      Animation       = ABWarFact_A8D.ABWarFact_A8D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = ABWarFact_A8E
      Animation       = ABWarFact_A8E.ABWarFact_A8E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_CLOSING
      Model           = ABWarFact_A8
      Animation       = ABWarFact_A8.ABWarFact_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING

    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = ABWarFact_A8D
      Animation       = ABWarFact_A8D.ABWarFact_A8D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = ABWarFact_A8E
      Animation       = ABWarFact_A8E.ABWarFact_A8E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = ABWarFact_A8
      Animation       = ABWarFact_A8.ABWarFact_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = ABWarFact_A8D
      Animation       = ABWarFact_A8D.ABWarFact_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = ABWarFact_A8E
      Animation       = ABWarFact_A8E.ABWarFact_A8E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------------ the construction crane ------------
  Draw = W3DModelDraw ModuleTag_03
    ; -----------------------------------------------------------
    OkToChangeModelColor = Yes
    ; -----------------------------------------------------------
    DefaultConditionState
      Model           = ABWarFact_A1
      Animation       = ABWarFact_A1.ABWarFact_A1
      AnimationMode   = LOOP
      TransitionKey   = TRANS_Idle
    End
    ConditionState    = DAMAGED
      Model           = ABWarFact_A1D
      Animation       = ABWarFact_A1D.ABWarFact_A1D
      AnimationMode   = LOOP
      TransitionKey   = TRANS_IdleDamaged
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = ABWarFact_A1E
      Animation       = ABWarFact_A1E.ABWarFact_A1E
      AnimationMode   = LOOP
      TransitionKey   = TRANS_IdleReallyDamaged
    End

    ; -----------------------------------------------------------
    TransitionState   = TRANS_Constructing TRANS_Idle
      Model           = ABWarFact_A3
      Animation       = ABWarFact_A3.ABWarFact_A3
      AnimationMode   = ONCE
      Flags           = MAINTAIN_FRAME_ACROSS_STATES
    End
    TransitionState   = TRANS_ConstructingDamaged TRANS_IdleDamaged
      Model           = ABWarFact_A3D
      Animation       = ABWarFact_A3D.ABWarFact_A3D
      AnimationMode   = ONCE
      Flags           = MAINTAIN_FRAME_ACROSS_STATES
    End
    TransitionState   = TRANS_ConstructingReallyDamaged TRANS_IdleReallyDamaged
      Model           = ABWarFact_A3E
      Animation       = ABWarFact_A3E.ABWarFact_A3E
      AnimationMode   = ONCE
      Flags           = MAINTAIN_FRAME_ACROSS_STATES
    End

    ; -----------------------------------------------------------
    ConditionState    = ACTIVELY_CONSTRUCTING
      Model           = ABWarFact_A3
      Animation       = ABWarFact_A3.ABWarFact_A3
      AnimationMode   = ONCE
      TransitionKey   = TRANS_Constructing
      Flags           = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
    End
    ConditionState    = ACTIVELY_CONSTRUCTING DAMAGED
      Model           = ABWarFact_A3D
      Animation       = ABWarFact_A3D.ABWarFact_A3D
      AnimationMode   = ONCE
      TransitionKey   = TRANS_ConstructingDamaged
      Flags           = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
    End
    ConditionState    = ACTIVELY_CONSTRUCTING REALLYDAMAGED RUBBLE
      Model           = ABWarFact_A3E
      Animation       = ABWarFact_A3E.ABWarFact_A3E
      AnimationMode   = ONCE
      TransitionKey   = TRANS_ConstructingReallyDamaged
      Flags           = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
    End
    ; -----------------------------------------------------------
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SOLD
      Model           = ABWarFact_A1
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState    = SOLD
      Model           = NONE
    End    
  End

  ; ------------------ the construction conveyor belt ------------
  Draw = W3DModelDraw ModuleTag_04
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = ABWarFact_A7
      Animation       = ABWarFact_A7.ABWarFact_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    
    ConditionState    = SOLD
      Model           = NONE
    End 
    AliasConditionState = SNOW SOLD
    AliasConditionState = NIGHT SOLD
    AliasConditionState = SNOW NIGHT SOLD 


    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED 
      Model           = ABWarFact_A7
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    
    ConditionState    = DAMAGED
      Model           = ABWarFact_A7D
      Animation       = ABWarFact_A7D.ABWarFact_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = ABWarFact_A7E
      Animation       = ABWarFact_A7E.ABWarFact_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE
    
    ConditionState    = ACTIVELY_CONSTRUCTING
      Model           = ABWarFact_A7
      Animation       = ABWarFact_A7.ABWarFact_A7
      AnimationMode   = LOOP
    End
    AliasConditionState = SNOW ACTIVELY_CONSTRUCTING
    AliasConditionState = NIGHT ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW NIGHT ACTIVELY_CONSTRUCTING
    
    ConditionState    = ACTIVELY_CONSTRUCTING DAMAGED
      Model           = ABWarFact_A7D
      Animation       = ABWarFact_A7D.ABWarFact_A7D
      AnimationMode   = LOOP
    End
    AliasConditionState = SNOW ACTIVELY_CONSTRUCTING DAMAGED
    AliasConditionState = NIGHT ACTIVELY_CONSTRUCTING DAMAGED
    AliasConditionState = SNOW NIGHT ACTIVELY_CONSTRUCTING DAMAGED
    
    ConditionState    = ACTIVELY_CONSTRUCTING REALLYDAMAGED RUBBLE
      Model           = ABWarFact_A7E
      Animation       = ABWarFact_A7E.ABWarFact_A7E
      AnimationMode   = LOOP
    End
    AliasConditionState = SNOW ACTIVELY_CONSTRUCTING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT ACTIVELY_CONSTRUCTING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT ACTIVELY_CONSTRUCTING REALLYDAMAGED RUBBLE
    
  End

  ; ------------ construction done flashing lights ----------
  Draw = W3DModelDraw ModuleTag_05
    DefaultConditionState
      Model           = None
    End
    ConditionState    = SOLD
      Model           = NONE
    End    
    ConditionState    = SOLD SNOW
       Model          = NONE
    End   
    ConditionState    = SOLD NIGHT
       Model          = NONE
    End    
    ConditionState    = SOLD NIGHT SNOW
       Model          = NONE
    End   
    ConditionState    = CONSTRUCTION_COMPLETE
      Model           = ABWarFact_A2
      Animation       = ABWarFact_A2.ABWarFact_A2
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
    End  
  End
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A4
      Animation       = ABWarFact_A4.ABWarFact_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A4N
      Animation       = ABWarFact_A4N.ABWarFact_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A4S
      Animation       = ABWarFact_A4S.ABWarFact_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A4SN
      Animation       = ABWarFact_A4SN.ABWarFact_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABWarFact_A4
      Animation       = ABWarFact_A4.ABWarFact_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABWarFact_A4N
      Animation       = ABWarFact_A4N.ABWarFact_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABWarFact_A4S
      Animation       = ABWarFact_A4S.ABWarFact_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABWarFact_A4SN
      Animation       = ABWarFact_A4SN.ABWarFact_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABWarFact_A4
      Animation       = ABWarFact_A4.ABWarFact_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABWarFact_A4N
      Animation       = ABWarFact_A4N.ABWarFact_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABWarFact_A4S
      Animation       = ABWarFact_A4S.ABWarFact_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABWarFact_A4SN
      Animation       = ABWarFact_A4SN.ABWarFact_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABWarFact_A6
      Animation       = ABWarFact_A6.ABWarFact_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABWarFact_A6N
      Animation       = ABWarFact_A6N.ABWarFact_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABWarFact_A6S
      Animation       = ABWarFact_A6S.ABWarFact_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABWarFact_A6SN
      Animation       = ABWarFact_A6SN.ABWarFact_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABWarFact_A6
      Animation       = ABWarFact_A6.ABWarFact_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABWarFact_A6N
      Animation       = ABWarFact_A6N.ABWarFact_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABWarFact_A6S
      Animation       = ABWarFact_A6S.ABWarFact_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABWarFact_A6SN
      Animation       = ABWarFact_A6SN.ABWarFact_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABWarFact_A6
      Animation       = ABWarFact_A6.ABWarFact_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABWarFact_A6N
      Animation       = ABWarFact_A6N.ABWarFact_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABWarFact_A6S
      Animation       = ABWarFact_A6S.ABWarFact_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABWarFact_A6SN
      Animation       = ABWarFact_A6SN.ABWarFact_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_08
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A5
      Animation       = ABWarFact_A5.ABWarFact_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A5N
      Animation       = ABWarFact_A5N.ABWarFact_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A5S
      Animation       = ABWarFact_A5S.ABWarFact_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABWarFact_A5SN
      Animation       = ABWarFact_A5SN.ABWarFact_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = ABWarFact_AB
      Animation       = ABWarFact_AB.ABWarFact_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = ABWarFact_ABN
      Animation       = ABWarFact_ABN.ABWarFact_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = ABWarFact_ABS
      Animation       = ABWarFact_ABS.ABWarFact_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End 
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = ABWarFact_ABSN
      Animation       = ABWarFact_ABSN.ABWarFact_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End 
   TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = ABWarFact_AB
      Animation       = ABWarFact_AB.ABWarFact_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = ABWarFact_ABN
      Animation       = ABWarFact_ABN.ABWarFact_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = ABWarFact_ABS
      Animation       = ABWarFact_ABS.ABWarFact_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = ABWarFact_ABSN
      Animation       = ABWarFact_ABSN.ABWarFact_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:WarFactory
  Side             = AmericaCyberneticGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 2000
  BuildTime        = 40
  EnergyProduction = -1
  CommandSet       = Cybr_AmericaWarFactoryCommandSet
  VisionRange     = 200
  ShroudClearingRange = 200
  ExperienceValue  = 80 80 80 80

  Prerequisites
    Object = Cybr_AmericaSupplyCenter
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryUSASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY FS_WARFACTORY
  Body            = StructureBody ModuleTag_09
    MaxHealth       = 4000.0
    InitialHealth   = 4000.0
    SubdualDamageCap = 4000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = ProductionUpdate ModuleTag_10
    NumDoorAnimations            = 1
    DoorOpeningTime              = 3250  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 4000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X: -10.0  Y:-30.0   Z:0.0
    NaturalRallyPoint = X: 53.0  Y:-30.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = RepairDockUpdate ModuleTag_12
    TimeForFullHeal   = 5000   ;(in milliseconds)     
    NumberApproachPositions = 5
  End

  Behavior = BaseRegenerateUpdate ModuleTag_13
  End 

  Behavior = AIUpdateInterface ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior             = CreateObjectDie ModuleTag_16
    CreationList  = OCL_AmericanRangerDebris05
    ExemptStatus  = UNDER_CONSTRUCTION
  End

  Behavior = FlammableUpdate ModuleTag_18
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End
  
  Behavior             = CreateObjectDie ModuleTag_20
    CreationList  = OCL_LargeStructureDebris
  End
  
  Behavior             = FXListDie ModuleTag_21
    DeathFX       = FX_StructureMediumDeath
  End
  
  Behavior             = DestroyDie ModuleTag_22
  End

  Behavior = CommandSetUpgrade ModuleTag_ComSet01
    CommandSet = Cybr_AmericaWarFactoryCommandSetDrones
    TriggeredBy = Upgrade_SwitchCommandSet
    RemovesUpgrades = Upgrade_SwitchBackCommandSet
  End
  Behavior = CommandSetUpgrade ModuleTag_ComSet02
    CommandSet = Cybr_AmericaWarFactoryCommandSet
    TriggeredBy = Upgrade_SwitchBackCommandSet
    RemovesUpgrades = Upgrade_SwitchCommandSet Upgrade_SwitchBackCommandSet
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry            = BOX
  GeometryMajorRadius = 53.0
  GeometryMinorRadius = 60.0
  GeometryHeight      = 40.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25     ; How much space to leave for units exiting.
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaPatriotBattery

  ; *** ART Parameters ***
  SelectPortrait         = SAPatriot_L
  ButtonImage            = SAPatriot

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes
  UpgradeCameo2 = Upgrade_AmericaMissileAI

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model             = ABPatriot
      Turret            = TURRET01
      TurretPitch       = TURRETEL
      WeaponLaunchBone  = PRIMARY   WeaponA
      WeaponLaunchBone  = SECONDARY WeaponA
      WeaponLaunchBone  = TERTIARY  WeaponA
      WeaponFireFXBone  = PRIMARY   WeaponA
      WeaponFireFXBone  = SECONDARY WeaponA
      WeaponFireFXBone  = TERTIARY  WeaponA
    End
    AliasConditionState = NIGHT
    
    ConditionState      = DAMAGED
      Model             = ABPatriot_D
    End
    AliasConditionState = DAMAGED NIGHT
    
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = ABPatriot_E
    End
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    
    
    ConditionState      = SNOW
      Model             = ABPatriot_S
    End
    AliasConditionState = SNOW NIGHT
    
    ConditionState      = DAMAGED SNOW
      Model             = ABPatriot_DS
    End
    AliasConditionState = SNOW NIGHT DAMAGED
    
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = ABPatriot_ES
    End
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE
   
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABPatriot
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABPatriot_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABPatriot_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
      Model              = ABPatriot_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABPatriot_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
      Model              = ABPatriot_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
    AnimationsRequirePower = No ; Do not pause the construction anims when low power disabled
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPatriot_A4
      Animation       = ABPatriot_A4.ABPatriot_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPatriot_A4N
      Animation       = ABPatriot_A4N.ABPatriot_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPatriot_A4S
      Animation       = ABPatriot_A4S.ABPatriot_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABPatriot_A4SN
      Animation       = ABPatriot_A4SN.ABPatriot_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABPatriot_A4
      Animation       = ABPatriot_A4.ABPatriot_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABPatriot_A4N
      Animation       = ABPatriot_A4N.ABPatriot_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABPatriot_A4S
      Animation       = ABPatriot_A4S.ABPatriot_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABPatriot_A4SN
      Animation       = ABPatriot_A4SN.ABPatriot_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABPatriot_A4
      Animation       = ABPatriot_A4.ABPatriot_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABPatriot_A4N
      Animation       = ABPatriot_A4N.ABPatriot_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABPatriot_A4S
      Animation       = ABPatriot_A4S.ABPatriot_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABPatriot_A4SN
      Animation       = ABPatriot_A4SN.ABPatriot_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
    AnimationsRequirePower = No ; Do not pause the construction anims when low power disabled
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABPatriot_A6
      Animation       = ABPatriot_A6.ABPatriot_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABPatriot_A6N
      Animation       = ABPatriot_A6N.ABPatriot_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABPatriot_A6S
      Animation       = ABPatriot_A6S.ABPatriot_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABPatriot_A6SN
      Animation       = ABPatriot_A6SN.ABPatriot_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABPatriot_A6
      Animation       = ABPatriot_A6.ABPatriot_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABPatriot_A6N
      Animation       = ABPatriot_A6N.ABPatriot_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABPatriot_A6S
      Animation       = ABPatriot_A6S.ABPatriot_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABPatriot_A6SN
      Animation       = ABPatriot_A6SN.ABPatriot_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABPatriot_A6
      Animation       = ABPatriot_A6.ABPatriot_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABPatriot_A6N
      Animation       = ABPatriot_A6N.ABPatriot_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABPatriot_A6S
      Animation       = ABPatriot_A6S.ABPatriot_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABPatriot_A6SN
      Animation       = ABPatriot_A6SN.ABPatriot_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:PatriotBattery
  Side              = AmericaCyberneticGeneral
  EditorSorting     = STRUCTURE
  BuildCost        = 1000
  BuildTime        = 20.0
  EnergyProduction = -2

  Prerequisites
    Object = Cybr_AmericaPowerPlant
  End

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     PatriotMissileWeapon
    Weapon              = SECONDARY   PatriotMissileAssistWeapon
    Weapon              = TERTIARY    PatriotMissileWeaponAir
    AutoChooseSources   = PRIMARY     FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources   = SECONDARY   NONE
    AutoChooseSources   = TERTIARY    FROM_PLAYER FROM_AI FROM_SCRIPT  
    PreferredAgainst    = PRIMARY     VEHICLE INFANTRY
    PreferredAgainst    = SECONDARY   BALLISTIC_MISSILE AIRCRAFT
    PreferredAgainst    = TERTIARY    BALLISTIC_MISSILE AIRCRAFT
    ShareWeaponReloadTime = Yes
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE
    Weapon              = PRIMARY     PatriotMissileWeaponUpgraded
    Weapon              = SECONDARY   PatriotMissileAssistWeaponUpgraded
    Weapon              = TERTIARY    PatriotMissileWeaponAirUpgraded
    AutoChooseSources   = PRIMARY     FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources   = SECONDARY   NONE
    AutoChooseSources   = TERTIARY    FROM_PLAYER FROM_AI FROM_SCRIPT  
    PreferredAgainst    = PRIMARY     VEHICLE INFANTRY
    PreferredAgainst    = SECONDARY   BALLISTIC_MISSILE AIRCRAFT
    PreferredAgainst    = TERTIARY    BALLISTIC_MISSILE AIRCRAFT
    ShareWeaponReloadTime = Yes
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_AmericaMissileAI
  End

  VisionRange         = 360.0
  ShroudClearingRange = 360

  ArmorSet
    Conditions      = None
    Armor           = BaseDefenseArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = BaseDefenseArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  CommandSet        = Cybr_AmericaPatriotBatteryCommandSet
  ExperienceValue   = 74 111 166 241

  ; *** AUDIO Parameters ***
  VoiceSelect = PatriotBatterySelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    UnderConstruction    = UnderConstructionLoop
  End

  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE SCORE FS_TECHNOLOGY POWERED FS_BASE_DEFENSE IMMUNE_TO_CAPTURE

  Body            = StructureBody ModuleTag_04
    MaxHealth     = 900.0
    InitialHealth = 900.0
    SubdualDamageCap = 1500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = StealthDetectorUpdate ModuleTag_AircraftDetector ;+
    DetectionRate     = 500
    ExtraRequiredKindOf = AIRCRAFT
  End

  Behavior = BaseRegenerateUpdate ModuleTag_05
  End 

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate        = 270
      TurretPitchRate       = 270
      AllowsPitch           = Yes
      NaturalTurretPitch    = 45   
      GroundUnitPitch       = 40
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      MinIdleScanInterval   = 250    ; in milliseconds
      MaxIdleScanInterval   = 250    ; in milliseconds
      MinIdleScanAngle      = 0       ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 360     ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes ;ATTACK_BUILDINGS
    MoodAttackCheckRate      = 250
  End

  Behavior = AssistedTargetingUpdate ModuleTag_07
    AssistingClipSize = 4                       ; How many shots to make when asked by someone of my kind who has a RequestAssistRange weapon
    AssistingWeaponSlot = SECONDARY             ; And the weapon to use.  Should have huge range and no natural clip.
    LaserFromAssisted = PatriotBinaryDataStream ; Stream to draw from the requestor to me
    LaserToTarget = PatriotBinaryDataStream     ; Stream to draw from me to the target
  End

  Behavior = DestroyDie ModuleTag_08
  End
  Behavior             = CreateObjectDie ModuleTag_09
    CreationList  = OCL_AmericanRangerDebris02
    ExemptStatus  = UNDER_CONSTRUCTION
  End
  Behavior             = FXListDie ModuleTag_10
    DeathFX       = FX_StructureTinyDeath
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ;-------------DESIGNED FOR TINY SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionTinyExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionTinyShockwave
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry = CYLINDER
  Scale = 1.15
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 16.0
  GeometryHeight      = 14.0
  GeometryIsSmall     = No
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaFireBase

  ; *** ART Parameters ***
  SelectPortrait         = SAFirebase_L
  ButtonImage            = SAFirebase

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  Draw = W3DModelDraw ModuleTag_Draw01

    IgnoreConditionStates = NIGHT

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model             = ABFortFBase
      Turret            = TURRET01
      TurretPitch       = TURRETEL
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponRecoilBone  = PRIMARY Barrel
      WeaponLaunchBone  = PRIMARY MUZZLE
      WeaponFireFXBone  = PRIMARY MUZZLEFX
    End

    ConditionState = USING_WEAPON_B
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponRecoilBone  = SECONDARY Barrel
      WeaponLaunchBone  = SECONDARY MUZZLE
      WeaponFireFXBone  = SECONDARY MUZZLEFX
    End
    
    ConditionState      = DAMAGED
      Model             = ABFortFBase_D
    End

    ConditionState = DAMAGED USING_WEAPON_B
      Model             = ABFortFBase_D
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponRecoilBone  = SECONDARY Barrel
      WeaponLaunchBone  = SECONDARY MUZZLE
      WeaponFireFXBone  = SECONDARY MUZZLEFX
    End
    
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = ABFortFBase_E
    End

    ConditionState = DAMAGED RUBBLE USING_WEAPON_B
      Model             = ABFortFBase_E
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponRecoilBone  = SECONDARY Barrel
      WeaponLaunchBone  = SECONDARY MUZZLE
      WeaponFireFXBone  = SECONDARY MUZZLEFX
    End
    
    ConditionState      = SNOW
      Model             = ABFortFBase_S
    End

    ConditionState = SNOW USING_WEAPON_B
      Model             = ABFortFBase_S
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponRecoilBone  = SECONDARY Barrel
      WeaponLaunchBone  = SECONDARY MUZZLE
      WeaponFireFXBone  = SECONDARY MUZZLEFX
    End
    
    ConditionState      = DAMAGED SNOW
      Model             = ABFortFBase_SD
    End

    ConditionState = DAMAGED SNOW USING_WEAPON_B
      Model             = ABFortFBase_SD
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponRecoilBone  = SECONDARY Barrel
      WeaponLaunchBone  = SECONDARY MUZZLE
      WeaponFireFXBone  = SECONDARY MUZZLEFX
    End
   
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = ABFortFBase_SE
    End

    ConditionState = DAMAGED RUBBLE SNOW USING_WEAPON_B
      Model             = ABFortFBase_SE
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponRecoilBone  = SECONDARY Barrel
      WeaponLaunchBone  = SECONDARY MUZZLE
      WeaponFireFXBone  = SECONDARY MUZZLEFX
    End
   
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED

    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABFortFBase
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABFortFBase_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABFortFBase_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
      Model              = ABFortFBase_SD
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
  End

  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_Draw02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupDrop_A4
      Animation       = ABSupDrop_A4.ABSupDrop_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupDrop_A4N
      Animation       = ABSupDrop_A4N.ABSupDrop_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupDrop_A4S
      Animation       = ABSupDrop_A4S.ABSupDrop_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSupDrop_A4SN
      Animation       = ABSupDrop_A4SN.ABSupDrop_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABSupDrop_A4
      Animation       = ABSupDrop_A4.ABSupDrop_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABSupDrop_A4N
      Animation       = ABSupDrop_A4N.ABSupDrop_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABSupDrop_A4S
      Animation       = ABSupDrop_A4S.ABSupDrop_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABSupDrop_A4SN
      Animation       = ABSupDrop_A4SN.ABSupDrop_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABSupDrop_A4
      Animation       = ABSupDrop_A4.ABSupDrop_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABSupDrop_A4N
      Animation       = ABSupDrop_A4N.ABSupDrop_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABSupDrop_A4S
      Animation       = ABSupDrop_A4S.ABSupDrop_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABSupDrop_A4SN
      Animation       = ABSupDrop_A4SN.ABSupDrop_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_Draw03
  AnimationsRequirePower = No
    MinLODRequired    = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABSupDrop_A6
      Animation       = ABSupDrop_A6.ABSupDrop_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABSupDrop_A6N
      Animation       = ABSupDrop_A6N.ABSupDrop_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABSupDrop_A6S
      Animation       = ABSupDrop_A6S.ABSupDrop_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABSupDrop_A6SN
      Animation       = ABSupDrop_A6SN.ABSupDrop_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABSupDrop_A6
      Animation       = ABSupDrop_A6.ABSupDrop_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABSupDrop_A6N
      Animation       = ABSupDrop_A6N.ABSupDrop_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABSupDrop_A6S
      Animation       = ABSupDrop_A6S.ABSupDrop_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABSupDrop_A6SN
      Animation       = ABSupDrop_A6SN.ABSupDrop_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABSupDrop_A6
      Animation       = ABSupDrop_A6.ABSupDrop_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABSupDrop_A6N
      Animation       = ABSupDrop_A6N.ABSupDrop_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABSupDrop_A6S
      Animation       = ABSupDrop_A6S.ABSupDrop_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABSupDrop_A6SN
      Animation       = ABSupDrop_A6SN.ABSupDrop_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:FireBase
  Side              = AmericaCyberneticGeneral
  EditorSorting     = STRUCTURE
  BuildCost        = 2000
  BuildTime        = 40
  EnergyProduction = -1

  Prerequisites
    Object = Cybr_AmericaPowerPlant
    Object = Cybr_AmericaStrategyCenter
  End

  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY     Cybr_FireBaseHowitzerGun
    Weapon     = SECONDARY   Cybr_FireBaseLaunchDroneGun
  End
  VisionRange         = 300
  ShroudClearingRange = 200

  ArmorSet
    Conditions      = None
    Armor           = FireBaseArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = FireBaseArmorCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  CommandSet        = Cybr_AmericaFireBaseCommandSet
  ExperienceValue   = 76 110 162 233

  ; *** AUDIO Parameters ***
  VoiceSelect = FireBaseSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = NoSound ;These aren't playing properly, will revisit (mp) TurretMoveLoopLoud
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE CAN_ATTACK IMMOBILE SPAWNS_ARE_THE_WEAPONS SCORE FS_TECHNOLOGY FS_BASE_DEFENSE IMMUNE_TO_CAPTURE GARRISONABLE_UNTIL_DESTROYED

  Body                 = HiveStructureBody ModuleTag_04;
    MaxHealth          = 900.0
    InitialHealth      = 900.0
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
    PropagateDamageTypesToSlavesWhenExisting = NONE +SNIPER
  End
 
  Behavior = BaseRegenerateUpdate ModuleTag_05
  End 

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate        = 60
      TurretPitchRate       = 60
      AllowsPitch           = Yes
      NaturalTurretPitch    = 1   
      GroundUnitPitch       = 40
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      MinIdleScanInterval   = 550
      MaxIdleScanInterval   = 950
      MinIdleScanAngle      = 0
      MaxIdleScanAngle      = 360
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End

  Behavior = GarrisonContain ModuleTag_07
    ContainMax                    = 5
    EnterSound                    = GarrisonEnter
    ExitSound                     = GarrisonExit
    ImmuneToClearBuildingAttacks  = Yes
    DamagePercentToUnits          = 100%
    IsEnclosingContainer          = Yes
  End

  Behavior = DestroyDie ModuleTag_08
  End

  Behavior             = FXListDie ModuleTag_10
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = CreateObjectDie ModuleTag_13
    CreationList = OCL_LargeStructureDebris
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ;-------------DESIGNED FOR TINY SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionTinyExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionTinyShockwave
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBuildingBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanBuildingScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanBuildingHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanBuildingStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = OCL_AmericanBuildingMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Geometry            = BOX
  GeometryMajorRadius = 26.0
  GeometryMinorRadius = 26.0
  GeometryHeight      = 15.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaJetRoboRaptor

  ; *** ART Parameters ***
  SelectPortrait         = SARRap_L
  ButtonImage            = SARRap
	
	UpgradeCameo1 = Upgrade_AmericaLaserMissiles
  UpgradeCameo2 = Upgrade_AmericaCountermeasures
  
  Draw                   = W3DModelDraw ModuleTag_01
    ExtraPublicBone = WeaponA01
    ParticlesAttachedToAnimatedBones = Yes
    DefaultConditionState
      Model               = AVRoboRapt
      HideSubObject       = BurnerFX01 BurnerFX02
      WeaponLaunchBone = PRIMARY WeaponA
    End

    ConditionState        = JETEXHAUST
      ; exhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = JETEXHAUST JETAFTERBURNER
      ; exhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ; afterburner
      ShowSubObject       = BurnerFX01 BurnerFX02
      ParticleSysBone     = Engine01 JetLenzflare
      ParticleSysBone     = Engine02 JetLenzflare
    End

    ConditionState        = REALLYDAMAGED
      Model               = AVRoboRapt_D
      ; damage
      ParticleSysBone     = Smoke01 JetSmoke
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
    End
    
    ConditionState        = REALLYDAMAGED JETEXHAUST
      Model               = AVRoboRapt_D
      ; damage
      ParticleSysBone     = Smoke01 JetSmoke
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
      ; exhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model               = AVRoboRapt_D
      ; damage
      ParticleSysBone     = Smoke01 JetSmoke
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
      ; afterburner
      ShowSubObject       = BurnerFX01 BurnerFX02
      ParticleSysBone     = Engine01 JetLenzflare
      ParticleSysBone     = Engine02 JetLenzflare
      ; exhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = RUBBLE
      Model               = AVRoboRapt_E
      HideSubObject       = None 
      ShowSubObject       = None
    End

    ConditionState        = RUBBLE JETEXHAUST JETAFTERBURNER
      Model               = AVRoboRapt_E
      HideSubObject       = None 
      ShowSubObject       = None
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End
    OkToChangeModelColor = Yes

  End

  ; ***DESIGN parameters ***
  DisplayName             = OBJECT:RoboRaptor
  EditorSorting           = VEHICLE
  Side                    = AmericaCyberneticGeneral
  TransportSlotCount      = 15
  VisionRange             = 200.0 
  ShroudClearingRange     = 400
  BuildCost          = 1500
  BuildTime          = 15
  ExperienceValue    = 70 93 124 166
  ExperienceRequired = 0 20000 40000 60000
  IsTrainable        = Yes
  CrusherLevel       = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = AmericaJetRaptorCommandSet

  Prerequisites
    Object = Cybr_AmericaAirfield
    Object = Cybr_AmericaStrategyCenter
  End

  WeaponSet
    Conditions     = None 
    Weapon         = PRIMARY RaptorJetMissileWeapon
  End

  ArmorSet
    Conditions = None
    Armor      = RoboticAirplaneArmor
    DamageFX   = None
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = CountermeasuresRoboticAirplaneArmor
    DamageFX   = None
  End

  ; *** AUDIO Parameters ***
  VoiceSelect            = RoboRaptorVoiceSelect
  VoiceMove              = RoboRaptorVoiceMove
  VoiceAttack            = RoboRaptorVoiceAttack
  VoiceAttackAir         = RoboRaptorVoiceAttack
  VoiceGuard             = RoboRaptorVoiceMove
  SoundAmbient           = RaptorAmbientLoop
  SoundAmbientRubble     = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    VoiceCreate          = RoboRaptorVoiceCreate
    Afterburner          = RaptorAfterburner
    VoiceGarrison        = RoboRaptorVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf          = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE SCORE AIRCRAFT DRONE VEHICLE SALVAGER

  Body            = ActiveBody ModuleTag_02
    MaxHealth     = 200
    InitialHealth = 200
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_RoboRaptorDeathFinalBlowUp
    DestructionDelay                = 99999999; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100% ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%  ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_RaptorDeathInitial
    OCLInitialDeath                 = OCL_RaptorDeathInitial
    DelaySecondaryFromInitialDeath  = 500  ; in milliseconds
    FXSecondary                     = FX_JetDeathSecondary
    OCLSecondary                    = OCL_RaptorDeathSecondary
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_RaptorDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200 ; in milliseconds
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                  = OCL_RoboRaptorDeathFinalBlowUp
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL OCL_RaptorDeathFinalBlowUp
  End

  Behavior               = PhysicsBehavior ModuleTag_07
    Mass                 = 500.0
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior = JetAIUpdate ModuleTag_09
    OutOfAmmoDamagePerSecond  = 0%
    TakeoffDistForMaxLift     = 0%
    TakeoffPause              = 500
    MinHeight                 = 5
    ParkingOffset             = 3
    ReturnToBaseIdleTime      = 10000
  End

  Locomotor = SET_NORMAL RaptorJetLocomotor
  Locomotor = SET_TAXIING BasicJetTaxiLocomotor

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = StealthUpdate ModuleTag_Stealth
    StealthDelay                          = 1000 ; msec
    StealthForbiddenConditions            = ATTACKING
    FriendlyOpacityMin                    = 50.0%
    FriendlyOpacityMax                    = 100.0%
    InnateStealth                         = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior                = ArmorUpgrade ModuleTag_Armor25
    TriggeredBy           = Upgrade_AmericaCountermeasures
  End

  Behavior                = CountermeasuresBehavior ModuleTag_26
    TriggeredBy           = Upgrade_AmericaCountermeasures
    FlareTemplateName     = CountermeasureFlare
    FlareBoneBaseName     = Flare ; Name of the base flare bone (Flare01, Flare02, Flare03)
    VolleySize            = 4     ; Number of flares launched per volley (requires bones)
    VolleyArcAngle        = 90.0  ; Max angle of flare relative to forward direction (with VolleySize of 1, flare will always goes straight back).
    VolleyVelocityFactor  = 2.0   ; Shoots out flares at a stronger velocity with a higher value.
    DelayBetweenVolleys   = 1000  ; Time between flare volleys
    NumberOfVolleys       = 5     ; Number of times the volleys will fire before reloading
    ReloadTime            = 0  ; After all volleys launched, then reloading must occur. If 0, then reloading occurs at airstrip only.
    EvasionRate           = 30%   ; With active flares, the specified percentage will be diverted.
    ReactionLaunchLatency = 100   ; Reaction between getting shot at and the firing of the first volley of countermeasures.
    MissileDecoyDelay     = 200   ; A reported missile that has been determined to hit a decoy will wait this long before acquiring countermeasures.
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry                 = Box
  GeometryIsSmall          = Yes
  GeometryMajorRadius      = 14.0
  GeometryMinorRadius      = 7.0
  GeometryHeight           = 5.0
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleMedic

  ; *** ART Parameters ***
  SelectPortrait         = SAMedicDrone_L
  ButtonImage            = SAMedicDrone
  
  UpgradeCameo1 = Upgrade_AmericaDroneArmor
  UpgradeCameo2 = Upgrade_AmericaTransmitionCodes

  Draw = W3DTankDraw ModuleTag_01
    
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model        = avmedicdr
      ParticleSysBone = CHASSIS SonicRange2
      WeaponFireFXBone = PRIMARY FIREPOINT01
      WeaponLaunchBone = PRIMARY FIREPOINT01
      WeaponFireFXBone = SECONDARY FIREPOINT01
      WeaponLaunchBone = SECONDARY FIREPOINT01
    End
    ConditionState = REALLYDAMAGED
      Model        = avmedicdr_D
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model        = avmedicdr_D
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    TrackMarks           = EXTnkTrack.tga
    TreadDebrisLeft      = SentryDroneTrackDebrisDirtLeft
    TreadDebrisRight     = SentryDroneTrackDebrisDirtRight
    TreadAnimationRate   = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:MedicDrone
  Side               = AmericaCyberneticGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 1                
  BuildCost       = 300
  BuildTime       = 3
  VisionRange     = 200
  ShroudClearingRange = 200

  WeaponSet 
    Conditions        = None 
    Weapon            = PRIMARY RangerAdvancedCombatRifle
    Weapon            = SECONDARY BioHazardTechCleanHazardWeapon 
    AutoChooseSources = SECONDARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = CyberDroneArmor
    DamageFX        = TruckDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = CyberDroneArmorUpgraded
    DamageFX        = TruckDamageFX
  End

  Prerequisites
    Object = Cybr_AmericaBarracks
    Object = Cybr_AmericaWarFactory
  End

  ExperienceValue    = 11 17 24 35
  ExperienceRequired = 0 20000 40000 60000
  IsTrainable = Yes
  CrusherLevel           = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = Cybr_AmericaGenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = SentryDroneMoveStart
  SoundMoveStartDamaged = NoSound

  UnitSpecificSounds
    VoiceCreate         = NoSound
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE ATTACK_NEEDS_LINE_OF_SIGHT DRONE SALVAGER CAN_SEE_THROUGH_STRUCTURE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No
  End

  Locomotor = SET_NORMAL BasicHumanLocomotor
  Locomotor = SET_NORMAL_UPGRADED BasicHumanLocomotorUpgraded

  Behavior = LocomotorSetUpgrade ModuleTag_77
    TriggeredBy = Upgrade_AmericaExosceletons
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_AmericaVehicleSentryDroneDie
    FX =  FINAL FX_AmericaVehicleTomahawkDeathExplosion
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
    CrateData = SalvageCrateData
  End

  Behavior = MaxHealthUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 30.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = CleanupHazardUpdate ModuleTag_12
    WeaponSlot = SECONDARY
    ScanRate   = 250
    ScanRange  = 125.0
  End

  Behavior = CleanupAreaPower ModuleTag_Clean01
    SpecialPowerTemplate        = SpecialAbilityAmbulanceCleanupArea
    MaxMoveDistanceFromLocation = 300.0
  End

  Behavior = AutoHealBehavior ModuleTag_22
    HealingAmount     = 4
    HealingDelay      = 1000
    Radius            = 100.0f
    StartsActive      = Yes
    KindOf            = INFANTRY
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry = BOX
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 5.0
  GeometryHeight = 5
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End
 
;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleDroneCarrier

  ; *** ART Parameters ***
  SelectPortrait         = SADcarrier_L
  ButtonImage            = SADcarrier

  UpgradeCameo1 = Upgrade_AmericaLaserMissiles
  UpgradeCameo2 = Upgrade_AmericaTransmitionCodes
  UpgradeCameo3 = Upgrade_StealthCovering
  UpgradeCameo4 = Upgrade_AmericaDroneArmor

  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model               = AVDCarrier
      Turret              = TURRET
      TurretPitch         = TURRETEL01
      WeaponLaunchBone = PRIMARY Launch01
    End

    ConditionState  = REALLYDAMAGED RUBBLE
      Model         = AVDCarrier_D
    End

    ConditionState       = AFLAME
      Model               = AVDCarrier
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End

    ConditionState  = REALLYDAMAGED RUBBLE AFLAME
      Model         = AVDCarrier_D
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End

    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 3.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End
  
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DroneCarrier
  Side                = AmericaCyberneticGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                
  BuildCost           = 1800
  BuildTime           = 26.0
  EnergyProduction    = 0
  VisionRange         = 300
  ShroudClearingRange = 300
  ExperienceValue     = 171 248 363 521
  IsTrainable         = No
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = Cybr_DroneCarrierCommandSet

  Prerequisites
    Object = Cybr_AmericaWarFactory
    Object = Cybr_AmericaStrategyCenter
  End

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY AvengerTargetDesignator
  End

  ArmorSet
    Conditions = None
    Armor      = TruckArmor
    DamageFX   = TankDamageFX
  End

  ; *** AUDIO Parameters ***
  VoiceSelect           = OmegaVoiceSelect
  VoiceMove             = OmegaVoiceMove
  VoiceGuard            = OmegaVoiceMove
  VoiceAttack           = OmegaVoiceAttack
  SoundMoveStart        = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    VoiceCreate         = OmegaVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = OmegaVoiceMove
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority = UNIT
  KindOf        = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SCORE CAN_ATTACK SALVAGER

  Body          = ActiveBody ModuleTag_04
    MaxHealth     = 750.0
    InitialHealth = 750.0
    SubdualDamageCap = 1500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior            = SpawnBehavior ModuleTag_05AAA
    SpawnNumber       = 5
    SpawnReplaceDelay = 15000
    SpawnTemplateName = AmericaVehicleCarrierBattleDrone
    ExitByBudding     = No
    InitialBurst      = 5
    OneShot           = No
    AggregateHealth    = No
    SlavesHaveFreeWill = Yes
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_06AAA
    UnitCreatePoint   = X:0.0  Y:0.0  Z:0.0
    NaturalRallyPoint = X:90.0  Y:0.0  Z:0.0
  End

  Locomotor = SET_NORMAL Nuke_FusionOverlordLocomotor

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 120.0
  End

  Behavior = SlowDeathBehavior ModuleTag_16
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL OCL_AmericaDroneCarrierDebris
    FX  = FINAL FX_OverlordExplosionOneFinal
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL OCL_AmericaDroneCarrierDeathEffectSimple
  End

  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_22
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry               = BOX
  GeometryMajorRadius    = 18.0
  GeometryMinorRadius    = 18.0
  GeometryHeight         = 12.0     
  GeometryIsSmall        = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object AmericaVehicleCarrierBattleDrone

  ; *** ART Parameters ***
  SelectPortrait         = SACMD_L
  ButtonImage            = SACMD
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVCMD
      WeaponLaunchBone = PRIMARY Launch
      WeaponLaunchBone = SECONDARY Launch
      Turret = TURRET
      TurretPitch = TURRETEL
    End

    ConditionState = REALLYDAMAGED
      Model = AVCMD_D
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MedusaDrone
  Side                = AmericaCyberneticGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0
  BuildCost           = 600
  BuildTime           = 6.0
  EnergyProduction    = 0

  Prerequisites
    Object = Cybr_AmericaVehicleDroneCarrier
  End

  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY DroneCarrierMissileWeapon
  End

  Behavior = WeaponBonusUpgrade Weapon_02
    TriggeredBy = Upgrade_AmericaLaserMissiles
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  ArmorSet
    Conditions = None
    Armor      = DroneArmor
    DamageFX   = SmallTankDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = DroneArmorCybrUpgraded
    DamageFX   = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  VisionRange         = 300
  ShroudClearingRange = 300
  ExperienceValue     = 44 59 78 105
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect       = NoSound
  VoiceMove         = NoSound
  VoiceAttack       = NoSound
  SoundMoveStart    = NoSound
  SoundStealthOn    = USStealthOn
  SoundStealthOff   = USStealthOff
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK DRONE NO_SELECT ATTACK_NEEDS_LINE_OF_SIGHT VEHICLE

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 225.0
    InitialHealth   = 225.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate   = 180
      TurretPitchRate  = 180
      MinPhysicalPitch = -90
      AllowsPitch      = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
  End

  Locomotor = SET_NORMAL Carrier_DroneLocomotor
  Locomotor = SET_WANDER Carrier_DroneWanderLocomotor
  Locomotor = SET_PANIC  Carrier_DronePanicLocomotor

  Behavior = MobMemberSlavedUpdate ModuleTag_06
    MustCatchUpRadius = 80
    NoNeedToCatchUpRadius = 70
    Squirrelliness = 0.0
    CatchUpCrisisBailTime = 60
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO
  End

  Behavior = CreateObjectDie ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaCMDroneExplode
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = ALL
    DeathFX = FX_AmericaScoutDroneExplode
  End

  Behavior = DestroyDie ModuleTag_Death
    DeathTypes = ALL
  End
  
  Behavior = TransitionDamageFX ModuleTag_10A
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay               = 1000
    StealthForbiddenConditions = ATTACKING USING_ABILITY
    MoveThresholdSpeed         = 3
    InnateStealth              = No
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Scale = 0.98
  Geometry = BOX
  GeometryMajorRadius = 8
  GeometryMinorRadius = 8
  GeometryHeight = 8.0
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleCarrierBattleDroneGuardian

  ; *** ART Parameters ***
  SelectPortrait         = SACMD_L
  ButtonImage            = SACMD
  
  UpgradeCameo1 = Upgrade_AmericaLaserMissiles

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVCMD
      WeaponLaunchBone = PRIMARY Launch
      WeaponLaunchBone = SECONDARY Launch
      Turret = TURRET
      TurretPitch = TURRETEL
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MedusaDrone
  Side                = AmericaCyberneticGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0
  BuildCost           = 600
  BuildTime           = 12.0
  EnergyProduction    = 0
	CommandSet 					= GenericCommandSet

  Prerequisites
    Object = Cybr_AmericaAirfield
  End

  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY DroneCarrierMissileWeapon
  End

  Behavior = WeaponBonusUpgrade Weapon_02
    TriggeredBy = Upgrade_AmericaLaserMissiles
  End

  ArmorSet
    Conditions = None
    Armor      = DroneArmor
    DamageFX   = SmallTankDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = DroneArmorCybrUpgraded
    DamageFX   = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  VisionRange         = 300
  ShroudClearingRange = 300
  ExperienceValue     = 44 59 78 105
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect       = NoSound
  VoiceMove         = NoSound
  VoiceAttack       = NoSound
  SoundMoveStart    = NoSound
  SoundStealthOn    = USStealthOn
  SoundStealthOff   = USStealthOff
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS CAN_ATTACK DRONE AIRCRAFT ATTACK_NEEDS_LINE_OF_SIGHT VEHICLE PRODUCED_AT_HELIPAD

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 225.0
    InitialHealth   = 225.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate   = 180
      TurretPitchRate  = 180
      MinPhysicalPitch = -90
      AllowsPitch      = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
  End

  Locomotor = SET_NORMAL Carrier_DroneLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO
  End

  Behavior = CreateObjectDie ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaScoutDroneExplode
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = ALL
    DeathFX = FX_AmericaScoutDroneExplode
  End

  Behavior = DestroyDie ModuleTag_Death
    DeathTypes = ALL
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10A
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 1000 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Scale = 0.98
  Geometry = BOX
  GeometryMajorRadius = 8
  GeometryMinorRadius = 8
  GeometryHeight = 8.0
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;----------------------------------------------------------------------------
Object Cybr_AmericaVehicleLeech

  ; *** ART Parameters ***
  SelectPortrait         = SALeech_L
  ButtonImage            = SALeech
  
  UpgradeCameo1 = Upgrade_AmericaDroneArmor
  UpgradeCameo2 = Upgrade_AmericaTransmitionCodes
  UpgradeCameo3 = Upgrade_StealthCovering

  Draw = W3DTankDraw ModuleTag_01
    
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model     = AVLeech
      Animation = AVLeech.AVLeech
      AnimationMode = LOOP
      WeaponFireFXBone  = PRIMARY BOX10
    End
    ConditionState = REALLYDAMAGED
      Model     = AVLeech_D
      Animation = AVLeech_D.AVLeech_D
      AnimationMode = LOOP
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model     = AVLeech_D
      Animation = AVLeech_D.AVLeech_D
      AnimationMode = LOOP
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    TrackMarks           = EXTnkTrack.tga
    TreadDebrisLeft      = SentryDroneTrackDebrisDirtLeft
    TreadDebrisRight     = SentryDroneTrackDebrisDirtRight
    TreadAnimationRate   = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Leech
  Side               = AmericaCyberneticGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 1                
  BuildCost       = 500
  BuildTime       = 5.0
  VisionRange     = 200
  ShroudClearingRange = 400
  ExperienceValue     = 26 38 55 79
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  CrusherLevel        = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = Cybr_AmericaLeechCommandSet

  WeaponSet
    Conditions = none
    Weapon = PRIMARY LeechMoneyStealingWeapon
    PreferredAgainst = PRIMARY FS_SUPPLY_CENTER
  End

  ArmorSet
    Conditions      = None
    Armor           = SentryDroneWithRadarArmor
    DamageFX        = TruckDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = SentryDroneWithRadarArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
  End

  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = SentryDroneMoveStart
  SoundMoveStartDamaged = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff

  UnitSpecificSounds
    VoiceCreate         = NoSound
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS SCORE ATTACK_NEEDS_LINE_OF_SIGHT DRONE VEHICLE SALVAGER IGNORES_SELECT_ALL
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
  End

  Locomotor = SET_NORMAL LeechLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_AmericaVehicleSentryDroneDie
    FX =  FINAL FX_AmericaVehicleTomahawkDeathExplosion
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
    CrateData = SalvageCrateData
  End

  Behavior = MaxHealthUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 50.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End
	
	Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = MOVING ATTACKING USING_ABILITY
    InnateStealth               = Yes  ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End 

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate   = 500
    DetectionRange  = 300
    ExtraForbiddenKindOf = AIRCRAFT
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry = BOX
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;----------------------------------------------------------
Object Cybr_AmericaMechFafnir

  ; *** ART Parameters ***
  SelectPortrait         = SAFafnir_L
  ButtonImage            = SAFafnir

  Draw = W3DTankDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes
    ExtraPublicBone = TURRETEL

    DefaultConditionState
      Model = Fafnir
      Turret = TURRET
      TurretPitch = TURRETEL
      Animation = Fafnir_SKL.Fafnir_STA
      AnimationMode = LOOP
      WeaponFireFXBone    = PRIMARY WEAPONC
      WeaponLaunchBone    = PRIMARY WEAPONC
      WeaponFireFXBone    = SECONDARY WEAPONA
      WeaponLaunchBone    = SECONDARY WEAPONA
      TransitionKey       = TRANS_Stand
      HideSubObject = MUZZLEFX01 MUZZLEFX02
    End

    ConditionState        = MOVING
      Animation           = Fafnir_SKL.Fafnir_RNA
      AnimationMode       = LOOP
    End

    ConditionState = MOVING CENTER_TO_LEFT
      Animation           = Fafnir_SKL.Fafnir_RNL
      AnimationMode       = ONCE
    End
    AliasConditionState = MOVING RIGHT_TO_CENTER

    ConditionState = MOVING CENTER_TO_RIGHT
      Animation           = Fafnir_SKL.Fafnir_RNR
      AnimationMode       = ONCE
    End
    AliasConditionState = MOVING LEFT_TO_CENTER

    ConditionState = DAMAGED
      Model = Fafnir_D
    End

    ConditionState        = MOVING DAMAGED
      Model               = Fafnir_D
      Animation           = Fafnir_SKL.Fafnir_RNA
      AnimationMode       = LOOP
    End
    
    ConditionState = MOVING CENTER_TO_LEFT DAMAGED
      Model               = Fafnir_D
      Animation           = Fafnir_SKL.Fafnir_RNL
      AnimationMode       = LOOP
    End
    AliasConditionState = MOVING RIGHT_TO_CENTER DAMAGED

    ConditionState = MOVING CENTER_TO_RIGHT DAMAGED
      Model               = Fafnir_D
      Animation           = Fafnir_SKL.Fafnir_RNR
      AnimationMode       = LOOP
    End
    AliasConditionState = MOVING LEFT_TO_CENTER DAMAGED

    ConditionState = REALLYDAMAGED RUBBLE
      Model = Fafnir_D1
    End

    ConditionState        = MOVING REALLYDAMAGED RUBBLE
      Model               = Fafnir_D1
      Animation           = Fafnir_SKL.Fafnir_RNA
      AnimationMode       = LOOP
    End
    
    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED RUBBLE
      Model               = Fafnir_D1
      Animation           = Fafnir_SKL.Fafnir_RNL
      AnimationMode       = LOOP
    End
    AliasConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED RUBBLE

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED RUBBLE
      Model               = Fafnir_D1
      Animation           = Fafnir_SKL.Fafnir_RNR
      AnimationMode       = LOOP
    End
    AliasConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED RUBBLE

  End

  Draw = W3DModelDraw ModuleTag_Draw02
    DefaultConditionState
      Model = EXFafnirSh
    End
    ConditionState = RUBBLE
      Model = none
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Fafnir
  Side               = AmericaCyberneticGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 0
  BuildCost           = 4500
  BuildTime           = 50
  VisionRange         = 250
  ShroudClearingRange = 300
  ExperienceValue     = 273 364 484 647
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction
  EnergyProduction   = -1

  WeaponSet
    Conditions = None 
    Weapon              = PRIMARY FafnirTankGun
    Weapon              = SECONDARY HeavyGaussBlasterWeapon
    Weapon              = TERTIARY FafnirMissileWeaponAirDummy
    PreferredAgainst    = PRIMARY INFANTRY
    PreferredAgainst    = SECONDARY VEHICLE STRUCTURE
    PreferredAgainst    = TERTIARY AIRCRAFT
  End

  ArmorSet
    Conditions       = None
    Armor            = SuperTankArmor
    DamageFX         = TankDamageFX
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
    Object = Cybr_AmericaStrategyCenter
    Science = SCIENCE_CYBR
    Science = SCIENCE_Rank5
  End

  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = Cybr_AmericaGenericCommandSet
  
  ; *** AUDIO Parameters ***
  VoiceSelect           = FafnirVoiceSelect
  VoiceMove             = FafnirVoiceMove
  VoiceGuard            = FafnirVoiceMove
  VoiceAttack           = FafnirVoiceMove
  SoundMoveStart        = FafnirMechMoveStart
  SoundMoveStartDamaged = FafnirMechMoveStart
  UnitSpecificSounds
    VoiceCreate         = FafnirVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NewTurretMoveLoop2
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf        = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SCORE DRONE VEHICLE 
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 2750
    InitialHealth   = 2750
    SubdualDamageCap = 4000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate  = 90
      TurretPitchRate = 45
      MinPhysicalPitch = -60
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY 
      MinIdleScanInterval   = 550    ; in milliseconds
      MaxIdleScanInterval   = 960    ; in milliseconds
      MinIdleScanAngle      = -60    ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 60     ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor            = SET_NORMAL FafnirLocomotor

  Behavior = OverlordContain ModuleTag_Turret ; Like Transport, but when full, passes transport queries along to first passenger (redirects like tunnel) 
    Slots                   = 1
    DamagePercentToUnits    = 100%
    AllowInsideKindOf       = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PassengersInTurret = Yes
    PayloadTemplateName     = Cybr_AmericaFafnirGunner
    ExperienceSinkForRider  = Yes ; I get the Exp for things my turret friend kills
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
  ;  ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
  ;  ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
 ;   ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
  ;  ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
  ;  ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
  ;  ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = PhysicsBehavior ModuleTag_04
    Mass  = 100.0
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL
    DestructionDelay = 1000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_FafnirDebris
    FX  = FINAL    FX_GenericTankDeathExplosion 
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_0999
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FireWeaponUpdate ModuleTag_03Shield
    Weapon = FafnirEnergyShieldWeapon
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 48.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45
End

;----------------------------------------------------------------------------------
Object Cybr_AmericaFafnirGunner

  ; *** ART Parameters ***
  Draw       = W3DDependencyModelDraw ModuleTag_01
    AttachToBoneInContainer = FIREPOINT01
    DefaultConditionState
      Model               = fafnirBones
      WeaponFireFXBone    = PRIMARY WEAPONA
      WeaponLaunchBone    = PRIMARY WEAPONA

      WeaponFireFXBone    = SECONDARY WEAPONC01
      WeaponLaunchBone    = SECONDARY WEAPONC01

      WeaponFireFXBone    = TERTIARY WEAPONC02
      WeaponLaunchBone    = TERTIARY WEAPONC02
    End
  End

  Draw       = W3DDependencyModelDraw ModuleTag_02
    AttachToBoneInContainer = FIREPOINT01
    DefaultConditionState
      Model = fafnir_L
    End
  End

  ; ***DESIGN parameters ***
  Side             = AmericaCyberneticGeneral
  EditorSorting    = SYSTEM
  TransportSlotCount = 1

  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY FafnirMissileWeapon
    Weapon     = SECONDARY XpulseLaserCannon1
    Weapon     = TERTIARY XpulseLaserCannon2    
  End
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 350

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceRapidFire  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK CLICK_THROUGH IGNORED_IN_GUI
  
  Body = StructureBody ModuleTag_02A
    MaxHealth       = 100.0
    InitialHealth   = 100.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      TurretPitchRate = 30
      MinPhysicalPitch = -60
      AllowsPitch = Yes
      FirePitch             = 1
      ControlledWeaponSlots = PRIMARY 
      ;MinIdleScanInterval   = 550    ; in milliseconds
      ;MaxIdleScanInterval   = 960    ; in milliseconds
      ;MinIdleScanAngle      = -60    ; in degrees off the natural turret angle
      ;MaxIdleScanAngle      = 60     ; in degrees off the natural turret angle
    End
    AltTurret
      TurretTurnRate = 0
      TurretPitchRate = 30
      MinPhysicalPitch = -60
      AllowsPitch = Yes
      ControlledWeaponSlots = SECONDARY TERTIARY 
    End
    AutoAcquireEnemiesWhenIdle = Yes 
  End

  Behavior             = DestroyDie ModuleTag_04
  End

  Geometry            = BOX
  GeometryMajorRadius = 1.0
  GeometryMinorRadius = 1.0
  GeometryHeight      = 1.0
  GeometryIsSmall     = Yes     
End

;--------------------------------------------------------------------------
Object Cybr_DropPodCaller

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = America
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 500.0
    InitialHealth   = 500.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL  ComancheCallerLocomotor
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End
  Behavior = CreateObjectDie ModuleTag_06
    CreationList = Cybr_OCL_DropPod1 
  End
  Behavior = HeightDieUpdate ModuleTag_06A
    TargetHeight = 600.0
    TargetHeightIncludesStructures = No
    ;OnlyWhenMovingDown = Yes
    InitialDelay = 750 ; Can't explode in the first second so we don't explode on the pad
  End
  Behavior = DestroyDie ModuleTag_07A
    DeathTypes = ALL
  End
  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;---------------------------------------------------------------------------------
Object Cybr_DropPod1

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = dp1
      ParticleSysBone = TRAIL01 SpectreContrail
      ParticleSysBone = TRAIL02 SpectreContrail
      ParticleSysBone = TRAIL03 SpectreContrail
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = America
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  SoundAmbient = DropPodAmbientLoop

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 500.0
    InitialHealth   = 500.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL DropPodFastLocomotor2

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 40.0
  End

  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes       = ALL
    DestructionDelay = 1
    FX               = INITIAL FX_DropPod2
    OCL              = INITIAL Cybr_OCL_DropPod2
  End

  Behavior = HeightDieUpdate ModuleTag_06
    TargetHeight = 70.0
    TargetHeightIncludesStructures = No
    OnlyWhenMovingDown = Yes
    InitialDelay = 100 ; Can't explode in the first second so we don't explode on the pad
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;---------------------------------------------------------------------------------
Object Cybr_DropPod2
  ;art for DropPod falling fast, needs smoke/wind trail, no thrusters

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = dp1
      ParticleSysBone = FLARE01 SpectreEngineFlare2
      ParticleSysBone = FLARE02 SpectreEngineFlare2
      ParticleSysBone = FLARE03 SpectreEngineFlare2
      ParticleSysBone = BURN01 DozerSmokeLight
      ParticleSysBone = BURN02 DozerSmokeLight
      ParticleSysBone = BURN03 DozerSmokeLight
      ParticleSysBone = BURN04 DozerSmokeLight
      ParticleSysBone = BURN05 DozerSmokeLight
      ParticleSysBone = BURN06 DozerSmokeLight
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  SoundAmbient = DropPodAmbientLoop

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 500.0
    InitialHealth   = 500.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL  DropPodBreakingLocomotor
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End
  Behavior = CreateObjectDie ModuleTag_06
    CreationList = Cybr_OCL_DropPod3 
  End
  Behavior = HeightDieUpdate ModuleTag_06A
    TargetHeight = 1.0
    TargetHeightIncludesStructures = No
    OnlyWhenMovingDown = Yes
    InitialDelay = 100 ; Can't explode in the first second so we don't explode on the pad
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
    DeathWeapon   = DropPodBlast
    StartsActive  = Yes
  End
  Behavior = DestroyDie ModuleTag_07A
    DeathTypes = ALL
  End
  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;---------------------------------------------------------------------------------
Object Cybr_DropPod3
  ;art for DropPod breaking.  needs thrusters.  some trail fx but much less, for sure no fire trail

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = dp1
      ParticleSysBone = SMOKE01 DozerSmokeHeavy
      ParticleSysBone = SMOKE02 DozerSmokeHeavy
      ParticleSysBone = SMOKE03 DozerSmokeHeavy
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  SoundAmbient = DropPodAmbientLoop

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 250.0
    InitialHealth   = 250.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End
  Behavior = LifetimeUpdate ModuleTag_03A
    MinLifetime = 1000   ; min lifetime in msec  ;should equal door opening time
    MaxLifetime = 1000   ; max lifetime in msec
  End
  Behavior = CreateObjectDie ModuleTag_06
    CreationList = Cybr_OCL_DropPodFinal
  End
  Behavior = DestroyDie ModuleTag_07A
    DeathTypes = ALL
  End
  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;---------------------------------------------------------------------------------
Object Cybr_DropPodFinal
  ;art for doors opening.  all other fx have stopped

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = dpo
      Animation       = dpo.dpo
      AnimationMode   = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL  DropPodFastLocomotor3

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = LifetimeUpdate ModuleTag_05
    MinLifetime = 2000   ; min lifetime in msec
    MaxLifetime = 2000   ; max lifetime in msec
  End

  Behavior = CreateObjectDie ModuleTag_06
    CreationList = Cybr_OCL_DropPodCrew
  End

  Behavior = SlowDeathBehavior ModuleTag_08
    SinkDelay = 6000
    SinkRate = 2     ; in Dist/Sec
    DestructionDelay = 20000
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaParticleCannonUplink

  ; *** ART Parameters ***
  SelectPortrait         = SAUplink_L
  ButtonImage            = SAUplink

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  Draw = W3DModelDraw ModuleTag_01
    ExtraPublicBone        = FX01
    ExtraPublicBone        = FX02
    ExtraPublicBone        = FX03
    ExtraPublicBone        = FX04
    ExtraPublicBone        = FX05
    OkToChangeModelColor = Yes
    
    ; day **************************************
    ConditionState       = NONE
      Model              = ABSDILink
      Animation          = ABSDILink.ABSDILink
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = DAMAGED
      Model              = ABSDILink_D
      Animation          = ABSDILink_D.ABSDILink_D
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = ABSDILink_E
      Animation          = ABSDILink_E.ABSDILink_E
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End

    ; night *************************************
    ConditionState       = NIGHT
      Model              = ABSDILink_N
      Animation          = ABSDILink_N.ABSDILink_N
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = DAMAGED NIGHT
      Model              = ABSDILink_DN
      Animation          = ABSDILink_DN.ABSDILink_DN
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABSDILink_EN
      Animation          = ABSDILink_EN.ABSDILink_EN
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ; day snow **************************************
    ConditionState       = SNOW
      Model              = ABSDILink_S
      Animation          = ABSDILink_S.ABSDILink_S
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = DAMAGED SNOW
      Model              = ABSDILink_DS
      Animation          = ABSDILink_DS.ABSDILink_DS
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = ABSDILink_ES
      Animation          = ABSDILink_ES.ABSDILink_ES
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End

    ; night snow *************************************
    ConditionState       = NIGHT SNOW
      Model              = ABSDILink_NS
      Animation          = ABSDILink_NS.ABSDILink_NS
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ABSDILink_DNS
      Animation          = ABSDILink_DNS.ABSDILink_DNS
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ABSDILink_ENS
      Animation          = ABSDILink_ENS.ABSDILink_ENS
      AnimationMode      = LOOP
      Flags              = MAINTAIN_FRAME_ACROSS_STATES
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABSDILink
      Animation          = ABSDILink.ABSDILink
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABSDILink_D
      Animation          = ABSDILink_D.ABSDILink_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = ABSDILink_E
      Animation          = ABSDILink_E.ABSDILink_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = ABSDILink_N
      Animation          = ABSDILink_N.ABSDILink_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = ABSDILink_DN
      Animation          = ABSDILink_DN.ABSDILink_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = ABSDILink_EN
      Animation          = ABSDILink_EN.ABSDILink_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = ABSDILink_S
      Animation          = ABSDILink_S.ABSDILink_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = ABSDILink_DS
      Animation          = ABSDILink_DS.ABSDILink_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = ABSDILink_ES
      Animation          = ABSDILink_ES.ABSDILink_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = ABSDILink_NS
      Animation          = ABSDILink_NS.ABSDILink_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = ABSDILink_DNS
      Animation          = ABSDILink_DNS.ABSDILink_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = ABSDILink_ENS
      Animation          = ABSDILink_ENS.ABSDILink_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

  End

  ;------------ the cannon section (hatch, dish animations) -----------
  Draw = W3DModelDraw ModuleTag_02
    ExtraPublicBone        = FXConnector
    ExtraPublicBone        = FXMain
    OkToChangeModelColor = Yes
    ; day **************************************
    ConditionState       = NONE
      Model              = ABSDILink_A1
      Animation          = ABSDILink_A1.ABSDILink_A1
      AnimationMode      = MANUAL
      Flags              = START_FRAME_FIRST
    End
    AliasConditionState  = NIGHT 
    AliasConditionState  = NIGHT SNOW
    AliasConditionState  = SNOW
    
    ConditionState       = DAMAGED
      Model              = ABSDILink_A1D
      Animation          = ABSDILink_A1D.ABSDILink_A1D
      AnimationMode      = MANUAL
      Flags              = START_FRAME_FIRST
    End
    AliasConditionState  = NIGHT DAMAGED
    AliasConditionState  = NIGHT SNOW DAMAGED
    AliasConditionState  = SNOW DAMAGED
    
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = ABSDILink_A1E
      Animation          = ABSDILink_A1E.ABSDILink_A1E
      AnimationMode      = MANUAL
      Flags              = START_FRAME_FIRST
    End
    AliasConditionState  = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState  = NIGHT SNOW REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE
    
    ConditionState       = AWAITING_CONSTRUCTION
      Model              = None
    End
    AliasConditionState  = NIGHT AWAITING_CONSTRUCTION
    AliasConditionState  = NIGHT SNOW AWAITING_CONSTRUCTION
    AliasConditionState  = SNOW AWAITING_CONSTRUCTION
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = ABSDILink_A1
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = NIGHT SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = ABSDILink_A1D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = NIGHT SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
      Model              = ABSDILink_A1E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
    AliasConditionState  = NIGHT SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE

    ;Preparing to fire!
    ConditionState       = UNPACKING
      Model              = ABSDILink_A1
      Animation          = ABSDILink_A1.ABSDILink_A1
      AnimationMode      = ONCE
      Flags              = MAINTAIN_FRAME_ACROSS_STATES2
    End
    AliasConditionState  = NIGHT UNPACKING
    AliasConditionState  = NIGHT SNOW UNPACKING
    AliasConditionState  = SNOW UNPACKING
    
    ConditionState       = UNPACKING DAMAGED
      Model              = ABSDILink_A1D
      Animation          = ABSDILink_A1D.ABSDILink_A1D
      AnimationMode      = ONCE
      Flags              = MAINTAIN_FRAME_ACROSS_STATES2
    End
    AliasConditionState  = NIGHT UNPACKING DAMAGED
    AliasConditionState  = NIGHT SNOW UNPACKING DAMAGED
    AliasConditionState  = SNOW UNPACKING DAMAGED
    
    ConditionState       = UNPACKING REALLYDAMAGED RUBBLE
      Model              = ABSDILink_A1E
      Animation          = ABSDILink_A1E.ABSDILink_A1E
      AnimationMode      = ONCE
      Flags              = MAINTAIN_FRAME_ACROSS_STATES2
    End
    AliasConditionState  = NIGHT UNPACKING REALLYDAMAGED RUBBLE
    AliasConditionState  = NIGHT SNOW UNPACKING REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW UNPACKING REALLYDAMAGED RUBBLE

    ;Ready to fire -- or firing!
    ConditionState       = DEPLOYED
      Model              = ABSDILink_A1
      Animation          = ABSDILink_A1.ABSDILink_A1
      AnimationMode      = MANUAL
      Flags              = START_FRAME_LAST
      ParticleSysBone    = FXMain Lazr_ParticleUplinkCannon_LaserBaseReadyToFire
    End
    AliasConditionState  = NIGHT DEPLOYED
    AliasConditionState  = NIGHT SNOW DEPLOYED
    AliasConditionState  = SNOW DEPLOYED
    
    ConditionState       = DEPLOYED DAMAGED
      Model              = ABSDILink_A1D
      Animation          = ABSDILink_A1D.ABSDILink_A1D
      AnimationMode      = MANUAL
      Flags              = START_FRAME_LAST
      ParticleSysBone    = FXMain Lazr_ParticleUplinkCannon_LaserBaseReadyToFire
    End
    AliasConditionState  = NIGHT DEPLOYED DAMAGED
    AliasConditionState  = NIGHT SNOW DEPLOYED DAMAGED
    AliasConditionState  = SNOW DEPLOYED DAMAGED
    
    ConditionState       = DEPLOYED REALLYDAMAGED RUBBLE
      Model              = ABSDILink_A1E
      Animation          = ABSDILink_A1E.ABSDILink_A1E
      AnimationMode      = MANUAL
      Flags              = START_FRAME_LAST
      ParticleSysBone    = FXMain Lazr_ParticleUplinkCannon_LaserBaseReadyToFire
    End
    AliasConditionState  = NIGHT DEPLOYED REALLYDAMAGED RUBBLE
    AliasConditionState  = NIGHT SNOW DEPLOYED REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW DEPLOYED REALLYDAMAGED RUBBLE
   
    ;Packing up (recharging for new attack)
    ConditionState       = PACKING
      Model              = ABSDILink_A1
      Animation          = ABSDILink_A1.ABSDILink_A1
      AnimationMode      = ONCE_BACKWARDS
      Flags              = MAINTAIN_FRAME_ACROSS_STATES3
    End
    AliasConditionState  = NIGHT PACKING
    AliasConditionState  = NIGHT SNOW PACKING
    AliasConditionState  = SNOW PACKING
    
    ConditionState       = PACKING DAMAGED
      Model              = ABSDILink_A1D
      Animation          = ABSDILink_A1D.ABSDILink_A1D
      AnimationMode      = ONCE_BACKWARDS
      Flags              = MAINTAIN_FRAME_ACROSS_STATES3
    End
    AliasConditionState  = NIGHT PACKING DAMAGED
    AliasConditionState  = NIGHT SNOW PACKING DAMAGED
    AliasConditionState  = SNOW PACKING DAMAGED
    
    ConditionState       = PACKING REALLYDAMAGED RUBBLE
      Model              = ABSDILink_A1E
      Animation          = ABSDILink_A1E.ABSDILink_A1E
      AnimationMode      = ONCE_BACKWARDS
      Flags              = MAINTAIN_FRAME_ACROSS_STATES3
    End
    AliasConditionState  = NIGHT PACKING REALLYDAMAGED RUBBLE
    AliasConditionState  = NIGHT SNOW PACKING REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW PACKING REALLYDAMAGED RUBBLE
   
    ConditionState       = SOLD DEPLOYED
      Model              = NONE
    End     
    ConditionState       = SOLD SNOW DEPLOYED
       Model             = NONE
    End   
    ConditionState       = SOLD NIGHT DEPLOYED
       Model             = NONE
    End    
    ConditionState       = SOLD NIGHT SNOW DEPLOYED
       Model             = NONE
    End   
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSDILink_A4
      Animation       = ABSDILink_A4.ABSDILink_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSDILink_A4N
      Animation       = ABSDILink_A4N.ABSDILink_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSDILink_A4S
      Animation       = ABSDILink_A4S.ABSDILink_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSDILink_A4SN
      Animation       = ABSDILink_A4SN.ABSDILink_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = ABSDILink_A4
      Animation       = ABSDILink_A4.ABSDILink_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = ABSDILink_A4N
      Animation       = ABSDILink_A4N.ABSDILink_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = ABSDILink_A4S
      Animation       = ABSDILink_A4S.ABSDILink_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = ABSDILink_A4SN
      Animation       = ABSDILink_A4SN.ABSDILink_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABSDILink_A4
      Animation       = ABSDILink_A4.ABSDILink_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABSDILink_A4N
      Animation       = ABSDILink_A4N.ABSDILink_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABSDILink_A4S
      Animation       = ABSDILink_A4S.ABSDILink_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABSDILink_A4SN
      Animation       = ABSDILink_A4SN.ABSDILink_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = ABSDILink_A6
      Animation       = ABSDILink_A6.ABSDILink_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABSDILink_A6N
      Animation       = ABSDILink_A6N.ABSDILink_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = ABSDILink_A6S
      Animation       = ABSDILink_A6S.ABSDILink_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = ABSDILink_A6SN
      Animation       = ABSDILink_A6SN.ABSDILink_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = ABSDILink_A6
      Animation       = ABSDILink_A6.ABSDILink_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = ABSDILink_A6N
      Animation       = ABSDILink_A6N.ABSDILink_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = ABSDILink_A6S
      Animation       = ABSDILink_A6S.ABSDILink_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = ABSDILink_A6SN
      Animation       = ABSDILink_A6SN.ABSDILink_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = ABSDILink_A6
      Animation       = ABSDILink_A6.ABSDILink_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = ABSDILink_A6N
      Animation       = ABSDILink_A6N.ABSDILink_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = ABSDILink_A6S
      Animation       = ABSDILink_A6S.ABSDILink_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = ABSDILink_A6SN
      Animation       = ABSDILink_A6SN.ABSDILink_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSDILink_A5
      Animation       = ABSDILink_A5.ABSDILink_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSDILink_A5N
      Animation       = ABSDILink_A5N.ABSDILink_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSDILink_A5S
      Animation       = ABSDILink_A5S.ABSDILink_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = ABSDILink_A5SN
      Animation       = ABSDILink_A5SN.ABSDILink_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = ABSDILink_AB
      Animation       = ABSDILink_AB.ABSDILink_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = ABSDILink_ABN
      Animation       = ABSDILink_ABN.ABSDILink_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = ABSDILink_ABS
      Animation       = ABSDILink_ABS.ABSDILink_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = ABSDILink_ABSN
      Animation       = ABSDILink_ABSN.ABSDILink_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = ABSDILink_AB
      Animation       = ABSDILink_AB.ABSDILink_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = ABSDILink_ABN
      Animation       = ABSDILink_ABN.ABSDILink_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = ABSDILink_ABS
      Animation       = ABSDILink_ABS.ABSDILink_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = ABSDILink_ABSN
      Animation       = ABSDILink_ABSN.ABSDILink_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:ParticleCannon 
  Side          = AmericaCyberneticGeneral
  EditorSorting = STRUCTURE
  BuildCost        = 5000
  BuildTime        = 100.0
  EnergyProduction = -10
  VisionRange     = 200.0
  ShroudRevealToAllRange = 60

  ShroudClearingRange = 200

  Prerequisites
    Object = Cybr_AmericaStrategyCenter
    Science = SCIENCE_CYBR SCIENCE_LAZR SCIENCE_SUPW
    Science = SCIENCE_Rank5
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = StructureArmorToughCybrUpgraded
    DamageFX        = StructureDamageFXNoShake
  End

  CommandSet        = Cybr_AmericaParticleUplinkCannonCommandSet
  ExperienceValue   = 191 277 404 580

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType

  ; *** AUDIO Parameters ***
  VoiceSelect = ParticleCannonSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE

  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_TECHNOLOGY POWERED MP_COUNT_FOR_VICTORY FS_SUPERWEAPON CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT

  Body            = StructureBody ModuleTag_06
    MaxHealth       = 4000.0
    InitialHealth   = 4000.0
    SubdualDamageCap = 4200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = BaseRegenerateUpdate ModuleTag_07
  End

  Behavior = SpecialPowerCreate ModuleTag_16
  End

  Behavior = SpecialAbility ModuleTag_11
    SpecialPowerTemplate = SuperweaponParticleUplinkCannon
    UpdateModuleStartsAttack = Yes
  End

  Behavior = ParticleUplinkCannonUpdate ModuleTag_12
    SpecialPowerTemplate            = SuperweaponParticleUplinkCannon
    BeginChargeTime                 = 5000 ;The outer nodes begin to charge.
    RaiseAntennaTime                = 4667 ;The hatch opens and raises antenna (matches animation speed)
    ReadyDelayTime                  = 2000 ;The time after antenna is raised prior to being ready to fire.

    ;***NOTE -- these values effect gameplay*****
    TotalFiringTime                 = 10000     ;The total ground contact time of the beam
    DamagePerSecond                 = 60        ;Amount of damage inflicted per second
    TotalDamagePulses               = 40        ;The total number of damage pulses -- less means more damage per pulse, but less accurate
    WidthGrowTime                   = 2000      ;The amount of time it takes for the beam to reach full diameter (same value used for shrinking)
    BeamTravelTime                  = 2500      ;How long it takes for the beam to hit the ground after leaving the firing dish.
    DamageType                      = PARTICLE_BEAM ;Type of damage inflicted.
    DamageRadiusScalar              = 3.4       ;Multiplies the radius (relative to beam diameter) so that things close to the beam can get hit too!
    RevealRange                     = 50.0      ;Grants gratuitous vision for the player launching the target as the beam cuts it's swath of death.
    ;********************************************

    ;Bone names for required elements
    OuterEffectBoneName             = FX          ;The base name for the outer node bones.
    OuterEffectNumBones             = 5           ;The number of outer nodes.
    ConnectorBoneName               = FXConnector ;The name of the bone where the connector lasers meet.
    FireBoneName                    = FXMain      ;The name of the bone where the main beam is fired from.

    ;These are particle systems tied to the outer nodes in varying intensities.
    OuterNodesLightFlareParticleSystem    = Lazr_ParticleUplinkCannon_OuterNodeLightFlare
    OuterNodesMediumFlareParticleSystem   = Lazr_ParticleUplinkCannon_OuterNodeMediumFlare
    OuterNodesIntenseFlareParticleSystem  = Lazr_ParticleUplinkCannon_OuterNodeIntenseFlare

    ;The connectors system connects each of the outer nodes to the central node that receives
    ;the lasers from outside.
    ConnectorMediumLaserName        = Lazr_ParticleUplinkCannon_MediumConnectorLaser
    ConnectorIntenseLaserName       = Lazr_ParticleUplinkCannon_IntenseConnectorLaser

    ;This is the name of the bone on the building where the beam is fired from
    LaserBaseLightFlareParticleSystemName = GreenParticleBeamField ;;Lazr_ParticleUplinkCannon_LaserBaseReadyToFire
    ParticleBeamLaserName           = Lazr_ParticleUplinkCannon_OrbitalLaser
    GroundHitFX                     = FX_GreenParticleUplinkCannon_BeamHitsGround

    ;The flare fxlist that is played over and over during the beam firing process. Be
    ;mindful of the delay because that effects both art and sound.
    BeamLaunchFX                   = FX_ParticleUplinkCannon_GreenBeamLaunchIteration

    DelayBetweenLaunchFX           = 1000
    TotalScorchMarks               = 20
    ScorchMarkScalar               = 2.4

    ;***NOTE -- these values effect gameplay***
    SwathOfDeathDistance           = 200.0
    SwathOfDeathAmplitude          = 50.0

    ManualDrivingSpeed             = 20
    ManualFastDrivingSpeed         = 35
    DoubleClickToFastDriveDelay    = 500

    ;***SOUNDS!****
    PoweringUpSoundLoop            = ParticleUplinkCannon_PowerupSoundLoop
    UnpackToIdleSoundLoop          = ParticleUplinkCannon_UnpackToIdleSoundLoop
    FiringToPackSoundLoop          = ParticleUplinkCannon_FiringToPackSoundLoop
    GroundAnnihilationSoundLoop    = ParticleUplinkCannon_GroundAnnihilationSoundLoop

    DamagePulseRemnantObjectName   = ParticleUplinkCannonTrailRemnant
  End
  
  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = ProductionUpdate ModuleTag_15A
  End

  ; Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    ; UpgradeObject = OCL_AmericanBuildingBattleDrone
    ; TriggeredBy   = Upgrade_AmericaBattleDrone
    ; ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  ; End
  ; Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    ; UpgradeObject = OCL_AmericanBuildingScoutDrone
    ; TriggeredBy   = Upgrade_AmericaScoutDrone
    ; ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  ; End
  ; Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    ; UpgradeObject = OCL_AmericanBuildingHellfireDrone
    ; TriggeredBy   = Upgrade_AmericaHellfireDrone
    ; ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  ; End
  ; Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    ; UpgradeObject = OCL_AmericanBuildingPointDefenceDrone
    ; TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ; ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  ; End
  ; Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    ; UpgradeObject = OCL_AmericanBuildingStingerDrone
    ; TriggeredBy   = Upgrade_AmericaStingerDrone
    ; ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  ; End
  ; Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    ; UpgradeObject = OCL_AmericanBuildingMinigunDrone
    ; TriggeredBy   = Upgrade_AmericaMinigunDrone
    ; ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  ; End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = SlowDeathBehavior ModuleTag_18
    ExemptStatus   = UNDER_CONSTRUCTION
    DestructionDelay = 2000
    FX             = INITIAL FX_ParticleUplinkDeathInitialGreen
    OCL            = INITIAL OCL_SDILinkLasersGreen
    FX             = FINAL   FX_ParticleUplinkDeathFinalGreen
    OCL            = FINAL   OCL_ParticleUplinkDeathFinal
    Weapon         = INITIAL Lazr_AuroraBombPreDetonationWeapon
    Weapon         = FINAL   Lazr_AuroraBombDetonationWeapon
  End

  Behavior = InstantDeathBehavior ModuleTag_19
    RequiredStatus = UNDER_CONSTRUCTION
    OCL            = OCL_ABPowerPlantExplode
    FX             = FX_StructureMediumDeath
  End

  Geometry            = BOX
  GeometryMajorRadius = 64.0
  GeometryMinorRadius = 38.0
  GeometryHeight      = 38.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Cybr_AmericaInfantryAndroid

  ; *** ART Parameters ***
  SelectPortrait         = SAAndroid_L
  ButtonImage            = SAAndroid

  Draw = W3DModelDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes
    ExtraPublicBone = ATTACH
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model          = ST_legs_idle1
      Animation      = ST_legs_idle1.ST_legs_idle1
      AnimationMode  = ONCE
    End
    AliasConditionState = ATTACKING

    ConditionState   = MOVING
      Model          = ST_legs_walk1
      Animation      = ST_legs_walk1.ST_legs_walk1
      AnimationSpeedFactorRange = 1.5 1.5
      AnimationMode  = LOOP
    End
    AliasConditionState = MOVING ATTACKING

    ConditionState = DYING 
      Model         = ST_legs_die1
      Animation     = ST_legs_die1.ST_legs_die1
      AnimationMode = ONCE
    End
  End

  Draw = W3DModelDraw ModuleTag_Draw02
    OkToChangeModelColor = Yes
    AttachToBoneInAnotherModule = ATTACH
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model            = ST_torso_idle2
      Animation        = ST_torso_idle2.ST_torso_idle2
      AnimationMode    = ONCE
      WeaponFireFXBone = PRIMARY WEAPONFX
      WeaponLaunchBone = PRIMARY WEAPONA
      WeaponMuzzleFlash = PRIMARY WEAPONFX
      WeaponFireFXBone = SECONDARY WEAPONFX
      WeaponLaunchBone = SECONDARY WEAPONA
      Turret = TURRET
      TurretPitch = TURRETEL
      TransitionKey = TRANS_stand
    End

    ConditionState      = MOVING
      Model             = ST_torso_idle1
      Animation         = ST_torso_idle1.ST_torso_idle1
      AnimationMode     = LOOP
      TransitionKey = TRANS_stand
    End

    ConditionState      = USING_WEAPON_A 
      Model             = ST_torso_atk1
      Animation         = ST_torso_atk1.ST_torso_atk1
      AnimationMode     = ONCE
      TransitionKey = TRANS_attack
    End
    AliasConditionState = MOVING USING_WEAPON_A 
    AliasConditionState = USING_WEAPON_B
    AliasConditionState = MOVING USING_WEAPON_B

    TransitionState TRANS_stand TRANS_attack
      Model         = ST_torso_trans1
      Animation     = ST_torso_trans1.ST_torso_trans1
      AnimationMode = ONCE
    End

    TransitionState TRANS_attack TRANS_stand
      Model         = ST_torso_trans1
      Animation     = ST_torso_trans1.ST_torso_trans1
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = DYING 
      Model = NONE
    End
  End
  Scale = 1.05

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Android
  Side               = AmericaCyberneticGeneral
  EditorSorting      = INFANTRY
  TransportSlotCount = 1
  BuildCost          = 800
  BuildTime          = 8.0
  ExperienceValue    = 26 35 46 62
  ExperienceRequired = 0 20000 40000 60000
  IsTrainable        = Yes
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = Cybr_AmericaGenericCommandSet
  VisionRange         = 200
  ShroudClearingRange = 250

  WeaponSet
    Conditions = None
    Weapon = PRIMARY StormTrooperGunAI
    PreferredAgainst = PRIMARY INFANTRY
  End

  ArmorSet
    Conditions = None
    Armor      = AndroidArmor2
    DamageFX   = TankDamageFX
  End

  Prerequisites
    Object = Cybr_AmericaBarracks
    Object = Cybr_AmericaStrategyCenter
  End

  ; *** AUDIO Parameters ***
  VoiceSelect           = StormTrooperVoiceSelect
  VoiceMove             = StormTrooperVoiceMove
  VoiceGuard            = StormTrooperVoiceMove
  VoiceAttack           = StormTrooperVoiceAttack
  UnitSpecificSounds
    VoiceCreate         = StormTrooperVoiceCreate
    TurretMoveStart     = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS DRONE SCORE VEHICLE SALVAGER

  Body = ActiveBody ModuleTag_03
    MaxHealth     = 650.0
    InitialHealth = 650.0
  End

  Behavior = AIUpdateInterface ModuleTag_06
    AutoAcquireEnemiesWhenIdle = Yes
    Turret
      TurretTurnRate  = 180
      TurretPitchRate = 180
      ControlledWeaponSlots = PRIMARY SECONDARY
      RecenterTime     = 500
      MinPhysicalPitch = -60
      AllowsPitch      = Yes
    End
  End

  Locomotor = SET_NORMAL BasicHumanLocomotor SaboteurCliffLocomotor

  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 10.0
  End

  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes       = ALL
    SinkDelay        = 3000
    SinkRate         = 0.1
    DestructionDelay = 30000
    FX               = INITIAL FX_GenericTankDeathExplosion
    OCL              = INITIAL OCL_AndroidExplode
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End
	
	Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2000
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  ExperienceRequired  = 0 20000 40000 60000

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 13.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleAMOS

  ; *** ART Parameters ***
  SelectPortrait         = SAAMOS_L
  ButtonImage            = SAAMOS
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVAMOS
      Turret = TURRET
      TurretPitch = HOUSECOLOR02
      WeaponFireFXBone  = PRIMARY MUZZLE
      WeaponRecoilBone  = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone  = PRIMARY MUZZLE
    End
    ConditionState = REALLYDAMAGED
      Model = AVAMOS_D
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      Model = AVAMOS
      ParticleSysBone = SMOKE01 TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model = AVAMOS_D
      ParticleSysBone = SMOKE01 TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    ; PowerslideSpray = RocketBuggyDirtPowerSlide doesn't powerslide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    RightFrontTireBone    = Wheel01
    MidRightFrontTireBone = Wheel02
    MidRightRearTireBone  = Wheel03
    RightRearTireBone     = Wheel04
    LeftFrontTireBone     = Wheel05
    MidLeftFrontTireBone  = Wheel06
    MidLeftRearTireBone   = Wheel07
    LeftRearTireBone      = Wheel08

    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AMOS
  Side             = AmericaCyberneticGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3
  BuildCost       = 800
  BuildTime       = 9.5
  VisionRange         = 175
  ShroudClearingRange = 175

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY AMOSMortarWeapon
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
  End

  ExperienceValue     = 31 41 54 73
  ExperienceRequired  = 0 92 122 163
  IsTrainable         = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Cybr_AmericaVehicleAMOSCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = AmosVoiceSelect
  VoiceMove = AmosVoiceMove
  VoiceGuard = AmosVoiceMove
  VoiceAttack = AmosVoiceAttack
  SoundMoveStart = TroopCrawlerMoveStart
  SoundMoveStartDamaged = TroopCrawlerMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    VoiceCreate     = AmosVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    VoiceEnter = AmosVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE HEAL_PAD
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 800
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End


  Behavior = DeployStyleAIUpdate ModuleTag_04
    Turret
      TurretTurnRate = 100
      TurretPitchRate = 100
      AllowsPitch = Yes
      FirePitch = 60
      ControlledWeaponSlots = PRIMARY SECONDARY
      InitiallyDisabled = yes
    End
    AutoAcquireEnemiesWhenIdle = Yes
    PackTime = 100
    UnpackTime = 100
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
  End

  Locomotor = SET_NORMAL TroopCrawlerLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = TransportContain ModuleTag_06
    Slots                 = 2
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 10%
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 1
    FX  = FINAL FX_SupplyTruckExplosionOneFinal
    OCL = FINAL OCL_AMOSDebris
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL OCL_AMOSDeathEffectSimple
  End

  Behavior  = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_09E
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 14.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleSpider

  ; *** ART Parameters ***
  SelectPortrait         = SASpider_L
  ButtonImage            = SASpider

  UpgradeCameo1 = Upgrade_AmericaTransmitionCodes

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVSpider
      Turret = TURRET
      Animation = AVSpider.AVSpider
      AnimationMode = ONCE
      WeaponFireFXBone    = PRIMARY CANNONA
      WeaponRecoilBone    = PRIMARY BARRELA
      WeaponLaunchBone    = PRIMARY CANNONA
    End

    ConditionState = MOVING
      Model = AVSpider
      Animation = AVSpider.AVSpider
      AnimationSpeedFactorRange = 3 3
      AnimationMode = LOOP
    End

    ConditionState = REALLYDAMAGED
      Model = AVSpider_D
      Animation = AVSpider_D.AVSpider_D
      AnimationMode = ONCE
    End

    ConditionState = REALLYDAMAGED MOVING
      Model = AVSpider_D
      Animation = AVSpider_D.AVSpider_D
      AnimationSpeedFactorRange = 3 3
      AnimationMode = LOOP
    End

    ConditionState = AFLAME
      Model = AVSpider
      Animation = AVSpider.AVSpider
      AnimationMode = ONCE
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = MOVING AFLAME
      Model = AVSpider
      Animation = AVSpider.AVSpider
      AnimationSpeedFactorRange = 3 3
      AnimationMode = LOOP
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = REALLYDAMAGED AFLAME
      Model = AVSpider_D
      Animation = AVSpider_D.AVSpider_D
      AnimationMode = ONCE
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = REALLYDAMAGED MOVING AFLAME
      Model = AVSpider_D
      Animation = AVSpider_D.AVSpider_D
      AnimationSpeedFactorRange = 3 3
      AnimationMode = LOOP
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = RIDER2
      Model = EXEffect
      ParticleSysBone = EFFECT01 TeleportTrail
    End
    AliasConditionState = MOVING RIDER2
    AliasConditionState = REALLYDAMAGED RIDER2
    AliasConditionState = REALLYDAMAGED MOVING RIDER2
    AliasConditionState = AFLAME RIDER2
    AliasConditionState = MOVING AFLAME RIDER2
    AliasConditionState = REALLYDAMAGED AFLAME RIDER2
    AliasConditionState = REALLYDAMAGED MOVING AFLAME RIDER2
  End
  Scale = 0.75

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Spider
  Side               = AmericaCyberneticGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 3
  BuildCost           = 1100
  BuildTime           = 11
  VisionRange         = 200
  ShroudClearingRange = 300
  ExperienceValue     = 34 49 72 103
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes

  WeaponSet
    Conditions = WEAPON_RIDER1
    Weapon     = PRIMARY SpiderAntiTankGun
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon     = SECONDARY TeleportWeapon
  End

  ArmorSet
    Conditions = None
    Armor      = RoboticTankArmor
    DamageFX   = TankDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = RoboticTankArmorCybrUpgraded
    DamageFX   = SmallTankDamageFX
  End

  Prerequisites
    Object = Cybr_AmericaWarFactory
    Object = Cybr_AmericaStrategyCenter
  End

  CrusherLevel   = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = Cybr_AmericaSpiderMechGenericCommandSet
  
  ; *** AUDIO Parameters ***
  VoiceSelect           = FafnirVoiceSelect
  VoiceMove             = FafnirVoiceMove
  VoiceGuard            = FafnirVoiceMove
  VoiceAttack           = FafnirVoiceMove
  SoundMoveStart        = NoSound
  SoundMoveStartDamaged = NoSound
  UnitSpecificSounds
    VoiceCreate         = FafnirVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf        = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SCORE DRONE VEHICLE SALVAGER
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 650
    InitialHealth   = 650
    SubdualDamageCap = 1300
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate  = 180
      TurretPitchRate = 90
      MinPhysicalPitch = -60
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY 
      MinIdleScanInterval   = 550
      MaxIdleScanInterval   = 960
      MinIdleScanAngle      = -60
      MaxIdleScanAngle      = 60
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate      = 60
  End

  Locomotor = SET_NORMAL SpiderLocomotor SpiderCliffLocomotor
  Locomotor = SET_SLUGGISH TeleportLocomotor

  Behavior = RiderChangeContain ModuleTag_88
    Rider1 = CybrGroundMoveModeObject  RIDER1 WEAPON_RIDER1 STATUS_RIDER1 Cybr_AmericaSpiderMechGenericCommandSet SET_NORMAL
    Rider2 = CybrSpecialModeObject RIDER2 WEAPON_RIDER2 STATUS_RIDER2 Cybr_AmericaSpiderMechGenericCommandSet2 SET_SLUGGISH
    Slots                = 1
    InitialPayload       = CybrGroundMoveModeObject 1
    ScatterNearbyOnExit  = No
    HealthRegen%PerSec   = 0
    DamagePercentToUnits = 100%
    BurnedDeathToUnits   = No
    AllowInsideKindOf    = INFANTRY PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    ExitDelay         = 1
    NumberOfExitPaths = 1
    GoAggressiveOnExit = No
    DoorOpenTime = 0
  End

  Behavior = FireOCLAfterWeaponCooldownUpdate ModuleTag_13aa
    WeaponSlot          = SECONDARY
    OCL                 = OCL_CybrGroundMoveModeObject
    MinShotsToCreateOCL = 1
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityTeleport
    OCL                  = OCL_TeleportAbility
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower02
    SpecialPowerTemplate = SpecialAbilityTeleport2
    OCL                  = OCL_CybrGroundMoveModeObject
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1
  End
	
	Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 100.0
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL
    DestructionDelay = 100
    DestructionDelayVariance = 50
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_SpiderDebris
    FX  = FINAL    FX_GenericTankDeathExplosion 
  End
  
  Behavior = TransitionDamageFX ModuleTag_0999
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_Aflame
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_DataUpload
    StartsActive = Yes
    ReactionWeaponPristine = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponDamaged = Cybr_LevelUpCrateCreationWeapon
    ReactionWeaponReallyDamaged = Cybr_LevelUpCrateCreationWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 1
  End

  Geometry = BOX
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 12.0
  GeometryHeight      = 16.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Cybr_AmericaInfantryCyborgComando

  ; *** ART Parameters ***
  SelectPortrait         = SACybCom_L
  ButtonImage            = SACybCom

  Draw = W3DModelDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes
    ExtraPublicBone = WEAPONA01

    DefaultConditionState
      Model            = STC_idle2
      Animation        = STC_idle2.STC_idle2
      AnimationMode    = ONCE
      WeaponFireFXBone = PRIMARY WEAPONA
      WeaponLaunchBone = PRIMARY WEAPONA
      WeaponFireFXBone = SECONDARY WEAPONA
      WeaponLaunchBone = SECONDARY WEAPONA
      WeaponFireFXBone = TERTIARY WEAPONB
      WeaponLaunchBone = TERTIARY WEAPONB
      TransitionKey = TRANS_stand
      Turret = TURRET
      TurretPitch = TURRETEL
    End

    ConditionState = MOVING
      Model            = STC_idle1
      Animation        = STC_idle1.STC_idle1
      AnimationMode    = LOOP
    End

    ConditionState = PREATTACK_A
      Model         = STC_trans1
      Animation     = STC_trans1.STC_trans1
      AnimationMode = ONCE
      TransitionKey = TRANS_attack
    End

    ConditionState      = PREATTACK_C
      Model             = STC_atk2
      Animation         = STC_atk2.STC_atk2
      AnimationMode     = ONCE
      TransitionKey = TRANS_stand
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Model             = STC_Flash
      Animation         = STC_Flash.STC_Flash
      AnimationMode     = ONCE
      TransitionKey = TRANS_attack
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_C
      Model             = STC_atk3
      Animation         = STC_atk3.STC_atk3
      AnimationMode     = ONCE
      TransitionKey = TRANS_stand
    End
    AliasConditionState = FIRING_C
    AliasConditionState = RELOADING_C

    TransitionState TRANS_stand TRANS_attack
      Model         = STC_trans1
      Animation     = STC_trans1.STC_trans1
      AnimationMode = ONCE
    End

    TransitionState TRANS_attack TRANS_stand
      Model         = STC_trans1
      Animation     = STC_trans1.STC_trans1
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = DYING 
      Model = NONE
    End
  End
  Scale = 1.6

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CybCom
  Side                = AmericaCyberneticGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1
  BuildCost = 5000
  BuildTime = 50.0
  IsTrainable    = No
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = Cybr_AmericaCyborgComandoCommandSet1
  VisionRange = 200
  ShroudClearingRange = 250

  WeaponSet
    Conditions = WEAPON_RIDER1
    Weapon = PRIMARY StormTrooperBossWeapon
    Weapon            = SECONDARY DummyWeapon
    AutoChooseSources = PRIMARY   FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    WeaponLockSharedAcrossSets = Yes
    ShareWeaponReloadTime = Yes
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY StormTrooperBossWeapon
    Weapon            = SECONDARY DummyWeapon
    AutoChooseSources = PRIMARY   FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    WeaponLockSharedAcrossSets = Yes
    ShareWeaponReloadTime = Yes
  End

  ArmorSet
    Conditions = None
    Armor      = AndroidArmor
    DamageFX   = TankDamageFX
  End

  Prerequisites
    Object = Cybr_AmericaBarracks
    Object = Cybr_AmericaStrategyCenter
  End

  ; *** AUDIO Parameters ***
  VoiceSelect           = StormTrooperVoiceSelect
  VoiceMove             = StormTrooperVoiceMove
  VoiceGuard            = StormTrooperVoiceMove
  VoiceAttack           = StormTrooperVoiceAttack
  UnitSpecificSounds
    VoiceCreate         = StormTrooperVoiceCreate
    TurretMoveStart     = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS DRONE SCORE HERO VEHICLE SALVAGER

  Body = ActiveBody ModuleTag_03
    MaxHealth     = 1650.0
    InitialHealth = 1650.0
  End

  Behavior = AIUpdateInterface ModuleTag_06
    AutoAcquireEnemiesWhenIdle = Yes
    Turret
      TurretTurnRate           = 180
      TurretPitchRate          = 180
      AllowsPitch              = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      RecenterTime             = 100
    End
  End

  Locomotor = SET_NORMAL StormTrooperBossLocomotor
  Locomotor = SET_SLUGGISH BattleDroneLocomotor

  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 10.0
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = Cybr_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = Cybr_OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = Cybr_OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone04
    UpgradeObject = Cybr_OCL_AmericanPointDefenceDrone
    TriggeredBy   = Upgrade_AmericaPointDefenseDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaStingerDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = Cybr_OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaMinigunDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone06
    UpgradeObject = Cybr_OCL_AmericanMinigunDrone
    TriggeredBy   = Upgrade_AmericaMinigunDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone Upgrade_AmericaStingerDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1
  End

  Behavior = RiderChangeContain ModuleTag_88
    Rider1 = CybComGroundMoveModeObject RIDER1 WEAPON_RIDER1 STATUS_RIDER1 Cybr_AmericaCyborgComandoCommandSet1 SET_NORMAL
    Rider2 = CybComAirMoveModeObject    RIDER2 WEAPON_RIDER2 STATUS_RIDER2 Cybr_AmericaCyborgComandoCommandSet2 SET_SLUGGISH
    Slots                = 1
    InitialPayload       = CybComGroundMoveModeObject 1
    ScatterNearbyOnExit  = No
    HealthRegen%PerSec   = 0
    DamagePercentToUnits = 100%
    BurnedDeathToUnits   = No
    AllowInsideKindOf    = PORTABLE_STRUCTURE
    ForbidInsideKindOf   = INFANTRY
    ExitDelay         = 1
    NumberOfExitPaths = 1
    GoAggressiveOnExit = No
    DoorOpenTime = 0
  End

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate   = 500
    DetectionRange  = 150
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
  End

  Behavior = StealthUpdate ModuleTag_Stealth
    StealthDelay                          = 1000
    StealthForbiddenConditions            = ATTACKING
    FriendlyOpacityMin                    = 50.0%
    FriendlyOpacityMax                    = 100.0%
    InnateStealth                         = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityTakeOff
    OCL                  = OCL_CybComAirMoveModeObject
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower02
    SpecialPowerTemplate = SpecialAbilityLand
    OCL                  = OCL_CybComGroundMoveModeObject
  End

  Behavior = InstantDeathBehavior ModuleTag_Death01
    DeathTypes = ALL
    FX         = FX_GenericTankDeathExplosion
    OCL        = OCL_AndroidExplode
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 13.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;--------------------------------------------------------------------------
Object Cybr_GreenDropPodCaller

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = America
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 500.0
    InitialHealth   = 500.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ComancheCallerLocomotor
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End
  Behavior = CreateObjectDie ModuleTag_06
    CreationList = Cybr_OCL_GreenDropPod1
  End
  Behavior = HeightDieUpdate ModuleTag_06A
    TargetHeight = 600.0
    TargetHeightIncludesStructures = No
    ;OnlyWhenMovingDown = Yes
    InitialDelay = 750 ; Can't explode in the first second so we don't explode on the pad
  End
  Behavior = DestroyDie ModuleTag_07A
    DeathTypes = ALL
  End
  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;---------------------------------------------------------------------------------
Object Cybr_GreenDropPod1

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = dp1g
      ParticleSysBone = TRAIL01 SpectreContrail
      ParticleSysBone = TRAIL02 SpectreContrail
      ParticleSysBone = TRAIL03 SpectreContrail
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = America
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  SoundAmbient = DropPodAmbientLoop

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 500.0
    InitialHealth   = 500.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL DropPodFastLocomotor2

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 40.0
  End

  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes       = ALL
    DestructionDelay = 1
    FX               = INITIAL FX_DropPod2
    OCL              = INITIAL Cybr_OCL_GreenDropPod2
  End

  Behavior = HeightDieUpdate ModuleTag_06
    TargetHeight = 70.0
    TargetHeightIncludesStructures = No
    OnlyWhenMovingDown = Yes
    InitialDelay = 100 ; Can't explode in the first second so we don't explode on the pad
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;---------------------------------------------------------------------------------
Object Cybr_GreenDropPod2
  ;art for DropPod falling fast, needs smoke/wind trail, no thrusters

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = dp1g
      ParticleSysBone = FLARE01 SpectreEngineFlare2
      ParticleSysBone = FLARE02 SpectreEngineFlare2
      ParticleSysBone = FLARE03 SpectreEngineFlare2
      ParticleSysBone = BURN01 DozerSmokeLight
      ParticleSysBone = BURN02 DozerSmokeLight
      ParticleSysBone = BURN03 DozerSmokeLight
      ParticleSysBone = BURN04 DozerSmokeLight
      ParticleSysBone = BURN05 DozerSmokeLight
      ParticleSysBone = BURN06 DozerSmokeLight
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  SoundAmbient = DropPodAmbientLoop

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 500.0
    InitialHealth   = 500.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL  DropPodBreakingLocomotor
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End
  Behavior = CreateObjectDie ModuleTag_06
    CreationList = Cybr_OCL_GreenDropPod3 
  End
  Behavior = HeightDieUpdate ModuleTag_06A
    TargetHeight = 1.0
    TargetHeightIncludesStructures = No
    OnlyWhenMovingDown = Yes
    InitialDelay = 100 ; Can't explode in the first second so we don't explode on the pad
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
    DeathWeapon   = DropPodBlast
    StartsActive  = Yes
  End
  Behavior = DestroyDie ModuleTag_07A
    DeathTypes = ALL
  End
  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;---------------------------------------------------------------------------------
Object Cybr_GreenDropPod3
  ;art for DropPod breaking.  needs thrusters.  some trail fx but much less, for sure no fire trail

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = dp1g
      ParticleSysBone = SMOKE01 DozerSmokeHeavy
      ParticleSysBone = SMOKE02 DozerSmokeHeavy
      ParticleSysBone = SMOKE03 DozerSmokeHeavy
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  SoundAmbient = DropPodAmbientLoop

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 250.0
    InitialHealth   = 250.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End
  Behavior = LifetimeUpdate ModuleTag_03A
    MinLifetime = 1000   ; min lifetime in msec  ;should equal door opening time
    MaxLifetime = 1000   ; max lifetime in msec
  End
  Behavior = CreateObjectDie ModuleTag_06
    CreationList = Cybr_OCL_GreenDropPodFinal
  End
  Behavior = DestroyDie ModuleTag_07A
    DeathTypes = ALL
  End
  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;---------------------------------------------------------------------------------
Object Cybr_GreenDropPodFinal
  ;art for doors opening.  all other fx have stopped

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = dpog
      Animation       = dpog.dpog
      AnimationMode   = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DropPod
  EditorSorting       = SYSTEM
  Side                = AmericaCyberneticGeneral
  TransportSlotCount  = 0
  VisionRange         = 200.0 
  ShroudClearingRange = 400

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD IGNORED_IN_GUI

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor
  End

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL  DropPodFastLocomotor3

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = LifetimeUpdate ModuleTag_05
    MinLifetime = 2000   ; min lifetime in msec
    MaxLifetime = 2000   ; max lifetime in msec
  End

  Behavior = CreateObjectDie ModuleTag_06
    CreationList = Cybr_OCL_GreenDropPodCrew
  End

  Behavior = SlowDeathBehavior ModuleTag_08
    SinkDelay = 6000
    SinkRate = 2     ; in Dist/Sec
    DestructionDelay = 20000
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 3.0
  GeometryHeight = 25.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaOrcaTurret

  ; *** ART Parameters ***
  Draw       = W3DDependencyModelDraw ModuleTag_01
    AttachToBoneInContainer = FIREPOINT01

    DefaultConditionState
      Model             = AVOrca_T
      WeaponFireFXBone  = PRIMARY MUZZLE01
      WeaponLaunchBone  = PRIMARY Launch01
      WeaponMuzzleFlash = PRIMARY Box01
      Turret      = TURRET
      TurretPitch = TURRETEL
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model             = AVOrca_TD
    End

  End

  ; ***DESIGN parameters ***
  Side             = America
  EditorSorting    = SYSTEM
  TransportSlotCount = 1

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY Comanche20mmCannonWeapon
    PreferredAgainst    = PRIMARY INFANTRY
  End

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceRapidFire  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK CLICK_THROUGH IGNORED_IN_GUI
  
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY 
      TurretTurnRate      = 180
      TurretPitchRate     = 180
      MinPhysicalPitch    = -90
      AllowsPitch         = Yes
    End
    AutoAcquireEnemiesWhenIdle = Yes 
  End

  Behavior             = DestroyDie ModuleTag_04
  End

  Geometry            = BOX
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleScoutDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAScout_L
  ButtonImage            = SAScout
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = AVScoutDr
      Animation = AVScoutDr.AVScoutDr
      AnimationMode = LOOP
    End

    ConditionState = REALLYDAMAGED
      Model = AVScoutDr_d
      Animation = AVScoutDr_d.AVScoutDr_d
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ScoutDrone
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 0

  WeaponSet
    Conditions = NONE 
    Weapon = PRIMARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = ScoutDroneArmor
    DamageFX        = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = ScoutDroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost       = 200
  BuildTime       = 5.0
  VisionRange     = 150
  ShroudClearingRange = 400
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  VoiceMove = NoSound
  VoiceAttack = NoSound
  SoundMoveStart = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE DRONE NO_SELECT CAN_ATTACK
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate  = 360
      TurretPitchRate = 360
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL Cybr_DroneLocomotor

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = StealthDetectorUpdate ModuleTag_04 ;+
    DetectionRate   = 500
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraForbiddenKindOf     = AIRCRAFT MINE DEMOTRAP
  End
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 30.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = SlavedUpdate ModuleTag_06
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 50.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaScoutDroneExplode
  End
  Behavior                 = FXListDie ModuleTag_10
    DeathTypes = ALL
    DeathFX           = FX_AmericaScoutDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = UpgradeDie  ModuleTag_12
   ;This frees the object based upgrade for the producer object.
   DeathTypes = ALL
   UpgradeToRemove      = Upgrade_AmericaScoutDrone ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleStingerDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAStingerDrone_L
  ButtonImage            = SAStingerDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVStingDR
      Animation = AVStingDR.AVStingDR
      AnimationMode = LOOP
      WeaponFireFXBone = PRIMARY Firepoint
      WeaponLaunchBone = PRIMARY Firepoint
    End

    ConditionState = REALLYDAMAGED
      Model = AVStingDR_D
      Animation = AVStingDR_D.AVStingDR_D
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = UPGRADE:StingerDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0
  
  Prerequisites
    Object = Cybr_AmericaWarFactory
  End  
  
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY StingerDroneMissileWeaponAir
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 300
  BuildTime           = 5
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      MinPhysicalPitch      = -75 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End
  Locomotor = SET_NORMAL Cybr_BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor   ;used for repairing master (zippy)

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaStingerDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_AmericaStingerDrone ;;ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleBattleDrone

  ; *** ART Parameters ***
  SelectPortrait         = SABattleDrone_L
  ButtonImage            = SABattleDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR
      Animation = AVBATTLEDR.AVBATTLEDR
      AnimationMode = LOOP
      Turret = Turret01
      TurretPitch = TurretEL01
      WeaponMuzzleFlash = PRIMARY TurretFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = REALLYDAMAGED
      Model = AVBATTLEDR_D
      Animation = AVBATTLEDR_D.AVBATTLEDR_D
      AnimationMode = LOOP
    End
  End

  ;EXTENDING ARM (FOR REPAIRING)
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR_A
    End

    ;Unloading the arm (before starting to repair)
    ConditionState = UNPACKING
      Animation = AVBATTLEDR_A1.AVBATTLEDR_A1
      AnimationMode = ONCE
    End

    ;Loading the arm (after reparing complete)
    ConditionState = PACKING
      Animation = AVBATTLEDR_A1.AVBATTLEDR_A1
      AnimationMode = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End

    ;Repair extending animation 1 (using bogus condition states -- doesn't justify making a whole new set)
    ConditionState = FIRING_B
      Animation = AVBATTLEDR_A2.AVBATTLEDR_A2
      AnimationMode = ONCE
    End


    ;Repair retracting animation 1 (using bogus condition states -- doesn't justify making a whole new set)
    ConditionState = FIRING_C
      Animation = AVBATTLEDR_A2.AVBATTLEDR_A2
      AnimationMode = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BattleDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 300
  BuildTime           = 5.0
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE DRONE NO_SELECT

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
  End

  Locomotor = SET_NORMAL Cybr_BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 25      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 25   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 25        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 150 ;How far I'm allowed to wander from target.
    ScoutRange = 25         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 150  ;How far I'm allowed to wander from scout point.
    RepairRange = 8         ;How far I can zip around while repair (only moves when he stops welding)
    RepairMinAltitude = 18.0  ;My minimum repair hover altitude.
    RepairMaxAltitude = 24.0  ;My maximum repair hover altitude.
    RepairRatePerSecond = 10.0 ;How many health points can I repair per second.
    RepairWhenBelowHealth% = 99 ;How low should my master's health be (in %) before I should prioritize repairing.
    RepairMinReadyTime = 0
    RepairMaxReadyTime = 1
    RepairMinWeldTime = 100
    RepairMaxWeldTime = 500
    RepairWeldingSys = BlueSparks
    RepairWeldingFXBone = Muzzle02
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaBattleDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_AmericaBattleDrone ;;ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleHellfireDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAHellfire_L
  ButtonImage            = SAHellfire
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVHellDrone
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = AVHellDrone_d
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:HellfireDrone
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 0

  ArmorSet
    Conditions      = None
    Armor           = DroneArmor
    DamageFX        = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost       = 500
  BuildTime       = 5.0
  VisionRange     = 150
  ShroudClearingRange = 150
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  VoiceMove = NoSound
  VoiceAttack = NoSound
  SoundMoveStart = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff

  WeaponSet
    Conditions = NONE 
    Weapon = PRIMARY HellfireMissileWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY HellfireMissileWeaponUpgraded
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_AmericaMissileAI
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL Cybr_DroneLocomotor

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End
  Behavior = SlavedUpdate ModuleTag_06
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaScoutDroneExplode
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = ALL
    DeathFX = FX_AmericaScoutDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = UpgradeDie  ModuleTag_12
   DeathTypes = ALL
   UpgradeToRemove      = Upgrade_AmericaHellfireDrone ;;ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehiclePointDefenseDrone

  ; *** ART Parameters ***
  SelectPortrait         = SADefenceDrone_L
  ButtonImage            = SADefenceDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVSoloDrn
      Animation = AVSoloDrn.AVSoloDrn
      AnimationMode = LOOP
      Turret = Turret01
      TurretPitch = TurretEL01
      WeaponMuzzleFlash = PRIMARY TurretFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = REALLYDAMAGED
      Model = AVSoloDrn
      Animation = AVSoloDrn.AVSoloDrn
      AnimationMode = LOOP
    End
  End

  ;EXTENDING ARM (FOR REPAIRING)
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR_A
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenceDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY none
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 500
  BuildTime           = 8.0
  VisionRange         = 150
  ShroudClearingRange = 150
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT POWERED

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      MinPhysicalPitch      = -75
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL Cybr_BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor   ;used for repairing master (zippy)

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaBattleDroneExplode
  End
  
  Behavior               = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior                 = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX           = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_AmericaPointDefenseDrone ;;ModuleTag_12
  End

  Behavior = PointDefenseLaserUpdate ModuleTag_14
    WeaponTemplate        = SupW_PointDefenseDroneLaserWeapon
    PrimaryTargetTypes    = BALLISTIC_MISSILE SMALL_MISSILE
    ScanRate              = 60
    ScanRange             = 100.0
    PredictTargetVelocityFactor = 3.0
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object Cybr_AmericaVehicleMinigunDrone

  ; *** ART Parameters ***
  SelectPortrait       = SAMGD_L
  ButtonImage          = SAMGD
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVMGDrone
      Turret = Turret
      TurretPitch = TurretEL
      WeaponFireFXBone = PRIMARY FIREPOINT
      WeaponLaunchBone = PRIMARY FIREPOINT
    End

    ConditionState = REALLYDAMAGED
      Model = AVMGDrone_D
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MinigunDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  Prerequisites
    Object = Cybr_AmericaWarFactory
  End 

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY MinigunDroneMachineGun
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 350
  BuildTime           = 10.0
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      MinPhysicalPitch      = -90
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
      FiresWhileTurning   = Yes
    End
    MoodAttackCheckRate = 100
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL Cybr_DroneLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 75  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 25   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior       = CreateObjectDie  ModuleTag_09
    DeathTypes   = ALL
    CreationList = OCL_AmericaMGDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior     = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX    = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove  = Upgrade_AmericaMinigunDrone
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleBuildingStingerDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAStingerDrone_L
  ButtonImage            = SAStingerDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVStingDR
      Animation = AVStingDR.AVStingDR
      AnimationMode = LOOP
      WeaponFireFXBone = PRIMARY Firepoint
      WeaponLaunchBone = PRIMARY Firepoint
    End

    ConditionState = REALLYDAMAGED
      Model = AVStingDR_D
      Animation = AVStingDR_D.AVStingDR_D
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = UPGRADE:StingerDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY StingerDroneMissileWeaponAir
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 300
  BuildTime           = 5
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      MinPhysicalPitch      = -75
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End
  Locomotor = SET_NORMAL Cybr_BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor   ;used for repairing master (zippy)

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07S
    GuardMaxRange = 100     ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 100  ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 100       ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 25  ;How far I'm allowed to wander from target.
    ScoutRange = 100        ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 25   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaStingerDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_AmericaStingerDrone ;;ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleBuildingBattleDrone

  ; *** ART Parameters ***
  SelectPortrait         = SABattleDrone_L
  ButtonImage            = SABattleDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR
      Animation = AVBATTLEDR.AVBATTLEDR
      AnimationMode = LOOP
      Turret = Turret01
      TurretPitch = TurretEL01
      WeaponMuzzleFlash = PRIMARY TurretFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = REALLYDAMAGED
      Model = AVBATTLEDR_D
      Animation = AVBATTLEDR_D.AVBATTLEDR_D
      AnimationMode = LOOP
    End
  End

  ;EXTENDING ARM (FOR REPAIRING)
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR_A
    End

    ;Unloading the arm (before starting to repair)
    ConditionState = UNPACKING
      Animation = AVBATTLEDR_A1.AVBATTLEDR_A1
      AnimationMode = ONCE
    End

    ;Loading the arm (after reparing complete)
    ConditionState = PACKING
      Animation = AVBATTLEDR_A1.AVBATTLEDR_A1
      AnimationMode = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End

    ;Repair extending animation 1 (using bogus condition states -- doesn't justify making a whole new set)
    ConditionState = FIRING_B
      Animation = AVBATTLEDR_A2.AVBATTLEDR_A2
      AnimationMode = ONCE
    End


    ;Repair retracting animation 1 (using bogus condition states -- doesn't justify making a whole new set)
    ConditionState = FIRING_C
      Animation = AVBATTLEDR_A2.AVBATTLEDR_A2
      AnimationMode = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BattleDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 300
  BuildTime           = 5.0
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE DRONE NO_SELECT

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
  End

  Locomotor = SET_NORMAL Cybr_BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07S
    GuardMaxRange = 25      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 25   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 25        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 150 ;How far I'm allowed to wander from target.
    ScoutRange = 25         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 150  ;How far I'm allowed to wander from scout point.
    RepairRange = 8         ;How far I can zip around while repair (only moves when he stops welding)
    RepairMinAltitude = 18.0  ;My minimum repair hover altitude.
    RepairMaxAltitude = 24.0  ;My maximum repair hover altitude.
    RepairRatePerSecond = 10.0 ;How many health points can I repair per second.
    RepairWhenBelowHealth% = 99 ;How low should my master's health be (in %) before I should prioritize repairing.
    RepairMinReadyTime = 0
    RepairMaxReadyTime = 1
    RepairMinWeldTime = 100
    RepairMaxWeldTime = 500
    RepairWeldingSys = BlueSparks
    RepairWeldingFXBone = Muzzle02
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaBattleDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior                 = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX           = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_AmericaBattleDrone ;;ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleBuildingScoutDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAScout_L
  ButtonImage            = SAScout
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = AVScoutDr
      Animation = AVScoutDr.AVScoutDr
      AnimationMode = LOOP
    End

    ConditionState = REALLYDAMAGED
      Model = AVScoutDr_d
      Animation = AVScoutDr_d.AVScoutDr_d
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ScoutDrone
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 0

  ArmorSet
    Conditions      = None
    Armor           = ScoutDroneArmor
    DamageFX        = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = ScoutDroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost       = 200
  BuildTime       = 5.0
  VisionRange     = 150
  ShroudClearingRange = 400
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  VoiceMove = NoSound
  VoiceAttack = NoSound
  SoundMoveStart = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE DRONE NO_SELECT CAN_ATTACK
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate  = 360
      TurretPitchRate = 360
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL Cybr_DroneLocomotor

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = StealthDetectorUpdate ModuleTag_04
    DetectionRate   = 500
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraForbiddenKindOf     = AIRCRAFT MINE DEMOTRAP
  End
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 30.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = SlavedUpdate ModuleTag_07S
    GuardMaxRange = 100     ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 100  ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 100       ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 25  ;How far I'm allowed to wander from target.
    ScoutRange = 100        ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 25   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 50.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaScoutDroneExplode
  End
  Behavior                 = FXListDie ModuleTag_10
    DeathTypes = ALL
    DeathFX           = FX_AmericaScoutDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = UpgradeDie  ModuleTag_12
   ;This frees the object based upgrade for the producer object.
   DeathTypes = ALL
   UpgradeToRemove      = Upgrade_AmericaScoutDrone ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleBuildingHellfireDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAHellfire_L
  ButtonImage            = SAHellfire
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVHellDrone
      WeaponLaunchBone = PRIMARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = AVHellDrone_d
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:HellfireDrone
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 0

  ArmorSet
    Conditions      = None
    Armor           = DroneArmor
    DamageFX        = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost       = 500
  BuildTime       = 5.0
  VisionRange     = 150
  ShroudClearingRange = 150
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  VoiceMove = NoSound
  VoiceAttack = NoSound
  SoundMoveStart = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff

  WeaponSet
    Conditions = NONE 
    Weapon = PRIMARY HellfireMissileWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY HellfireMissileWeaponUpgraded
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_AmericaMissileAI
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL Cybr_DroneLocomotor

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = SlavedUpdate ModuleTag_07S
    GuardMaxRange = 100     ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 100  ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 100       ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 25  ;How far I'm allowed to wander from target.
    ScoutRange = 100        ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 25   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaScoutDroneExplode
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = ALL
    DeathFX    = FX_AmericaScoutDroneExplode
  End
  
  Behavior = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = UpgradeDie  ModuleTag_12
   DeathTypes = ALL
   UpgradeToRemove = Upgrade_AmericaHellfireDrone
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleBuildingPointDefenseDrone

  ; *** ART Parameters ***
  SelectPortrait         = SADefenceDrone_L
  ButtonImage            = SADefenceDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVSoloDrn
      Animation = AVSoloDrn.AVSoloDrn
      AnimationMode = LOOP
      Turret = Turret01
      TurretPitch = TurretEL01
      WeaponMuzzleFlash = PRIMARY TurretFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = REALLYDAMAGED
      Model = AVSoloDrn
      Animation = AVSoloDrn.AVSoloDrn
      AnimationMode = LOOP
    End
  End

  ;EXTENDING ARM (FOR REPAIRING)
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR_A
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenceDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY none
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 500
  BuildTime           = 8.0
  VisionRange         = 150
  ShroudClearingRange = 150
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT POWERED

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      MinPhysicalPitch      = -75
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL Cybr_BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor   ;used for repairing master (zippy)

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07S
    GuardMaxRange = 100     ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 100  ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 100       ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 25  ;How far I'm allowed to wander from target.
    ScoutRange = 100        ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 25   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaBattleDroneExplode
  End
  
  Behavior               = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior                 = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX           = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_AmericaPointDefenseDrone ;;ModuleTag_12
  End

  Behavior = PointDefenseLaserUpdate ModuleTag_14
    WeaponTemplate        = SupW_PointDefenseDroneLaserWeapon
    PrimaryTargetTypes    = BALLISTIC_MISSILE SMALL_MISSILE
    ScanRate              = 60
    ScanRange             = 100.0
    PredictTargetVelocityFactor = 3.0
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleBuildingMinigunDrone

  ; *** ART Parameters ***
  SelectPortrait       = SAMGD_L
  ButtonImage          = SAMGD
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVMGDrone
      Turret = Turret
      TurretPitch = TurretEL
      WeaponFireFXBone = PRIMARY FIREPOINT
      WeaponLaunchBone = PRIMARY FIREPOINT
    End

    ConditionState = REALLYDAMAGED
      Model = AVMGDrone_D
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MinigunDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY MinigunDroneMachineGun
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 350
  BuildTime           = 10.0
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      MinPhysicalPitch      = -90
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
      FiresWhileTurning   = Yes
    End
    MoodAttackCheckRate = 100
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL Cybr_DroneLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 100     ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 100  ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 100       ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 75  ;How far I'm allowed to wander from target.
    ScoutRange = 100        ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 25   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior       = CreateObjectDie  ModuleTag_09
    DeathTypes   = ALL
    CreationList = OCL_AmericaMGDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior     = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX    = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove  = Upgrade_AmericaMinigunDrone
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End
