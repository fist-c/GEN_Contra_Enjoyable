;------------------------------------------------------------------------------
Object AmericaVehicleStingerDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAStingerDrone_L
  ButtonImage            = SAStingerDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVStingDR
      Animation = AVStingDR.AVStingDR
      AnimationMode = LOOP
      WeaponFireFXBone = PRIMARY Firepoint
      WeaponLaunchBone = PRIMARY Firepoint
    End

    ConditionState = REALLYDAMAGED
      Model = AVStingDR_D
      Animation = AVStingDR_D.AVStingDR_D
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = UPGRADE:StingerDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY StingerDroneMissileWeaponAir
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 300
  BuildTime           = 5
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      MinPhysicalPitch      = -75
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End
  Locomotor = SET_NORMAL BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaStingerDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_AmericaStingerDrone ;;ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleBattleDrone

  ; *** ART Parameters ***
  SelectPortrait         = SABattleDrone_L
  ButtonImage            = SABattleDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR
      Animation = AVBATTLEDR.AVBATTLEDR
      AnimationMode = LOOP
      Turret = Turret01
      TurretPitch = TurretEL01
      WeaponMuzzleFlash = PRIMARY TurretFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = REALLYDAMAGED
      Model = AVBATTLEDR_D
      Animation = AVBATTLEDR_D.AVBATTLEDR_D
      AnimationMode = LOOP
    End
  End

  ;EXTENDING ARM (FOR REPAIRING)
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR_A
    End

    ConditionState = UNPACKING
      Animation = AVBATTLEDR_A1.AVBATTLEDR_A1
      AnimationMode = ONCE
    End

    ConditionState = PACKING
      Animation = AVBATTLEDR_A1.AVBATTLEDR_A1
      AnimationMode = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End

    ConditionState = FIRING_B
      Animation = AVBATTLEDR_A2.AVBATTLEDR_A2
      AnimationMode = ONCE
    End

    ConditionState = FIRING_C
      Animation = AVBATTLEDR_A2.AVBATTLEDR_A2
      AnimationMode = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BattleDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 300
  BuildTime           = 5.0
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE DRONE NO_SELECT
  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
  End

  Locomotor = SET_NORMAL BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor   ;used for repairing master (zippy)

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 25      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 25   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 25        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 150 ;How far I'm allowed to wander from target.
    ScoutRange = 25         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 150  ;How far I'm allowed to wander from scout point.
    RepairRange = 8         ;How far I can zip around while repair (only moves when he stops welding)
    RepairMinAltitude = 18.0  ;My minimum repair hover altitude.
    RepairMaxAltitude = 24.0  ;My maximum repair hover altitude.
    RepairRatePerSecond = 10.0 ;How many health points can I repair per second.
    RepairWhenBelowHealth% = 99 ;How low should my master's health be (in %) before I should prioritize repairing.
    RepairMinReadyTime = 0
    RepairMaxReadyTime = 1
    RepairMinWeldTime = 100
    RepairMaxWeldTime = 500
    RepairWeldingSys = BlueSparks
    RepairWeldingFXBone = Muzzle02
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaBattleDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior                 = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX           = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_AmericaBattleDrone ;;ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleScoutDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAScout_L
  ButtonImage            = SAScout
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = AVScoutDr
      Animation = AVScoutDr.AVScoutDr
      AnimationMode = LOOP
    End

    ConditionState = REALLYDAMAGED
      Model = AVScoutDr_d
      Animation = AVScoutDr_d.AVScoutDr_d
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ScoutDrone
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 0

  WeaponSet
    Conditions = NONE 
    Weapon = PRIMARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = ScoutDroneArmor
    DamageFX        = SmallTankDamageFX
  End

  BuildCost       = 200
  BuildTime       = 5.0
  VisionRange     = 150
  ShroudClearingRange = 400
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  VoiceMove = NoSound
  VoiceAttack = NoSound
  SoundMoveStart = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE DRONE NO_SELECT CAN_ATTACK
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End

  Locomotor = SET_NORMAL DroneLocomotor

  Behavior = StealthDetectorUpdate ModuleTag_StealthDetector ;+
    DetectionRate   = 500
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraForbiddenKindOf     = AIRCRAFT MINE DEMOTRAP
  End
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 30.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = SlavedUpdate ModuleTag_06
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 50.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaScoutDroneExplode
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = ALL
    DeathFX = FX_AmericaScoutDroneExplode
  End
  
  Behavior = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = UpgradeDie  ModuleTag_12
   DeathTypes = ALL
   UpgradeToRemove = Upgrade_AmericaScoutDrone ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleHellfireDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAHellfire_L
  ButtonImage            = SAHellfire
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVHellDrone
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = AVHellDrone_d
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:HellfireDrone
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 0

  ArmorSet
    Conditions      = None
    Armor           = DroneArmor
    DamageFX        = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost       = 500
  BuildTime       = 5.0
  VisionRange     = 150
  ShroudClearingRange = 150
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 40000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  VoiceMove = NoSound
  VoiceAttack = NoSound
  SoundMoveStart = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  WeaponSet
    Conditions = NONE 
    Weapon = PRIMARY HellfireMissileWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY HellfireMissileWeaponUpgraded
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_AmericaMissileAI
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL DroneLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End
  Behavior = SlavedUpdate ModuleTag_06
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaScoutDroneExplode
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = ALL
    DeathFX = FX_AmericaScoutDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = UpgradeDie  ModuleTag_12
   DeathTypes = ALL
   UpgradeToRemove      = Upgrade_AmericaHellfireDrone ;;ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89

End

;------------------------------------------------------------------------------
Object AmericaVehiclePointDefenseDrone

  ; *** ART Parameters ***
  SelectPortrait         = SADefenceDrone_L
  ButtonImage            = SADefenceDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVSoloDrn
      Animation = AVSoloDrn.AVSoloDrn
      AnimationMode = LOOP
      Turret = Turret01
      TurretPitch = TurretEL01
      WeaponMuzzleFlash = PRIMARY TurretFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = REALLYDAMAGED
      Model = AVSoloDrn
      Animation = AVSoloDrn.AVSoloDrn
      AnimationMode = LOOP
    End
  End

  ;EXTENDING ARM (FOR REPAIRING)
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVBATTLEDR_A
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenceDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY none
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 500
  BuildTime           = 8.0
  VisionRange         = 150
  ShroudClearingRange = 150
  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT POWERED

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      MinPhysicalPitch      = -75
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor   ;used for repairing master (zippy)

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 2
    HealingDelay = 1000  ;msec
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaBattleDroneExplode
  End
  
  Behavior               = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_AmericaPointDefenseDrone ;;ModuleTag_12
  End

  Behavior = PointDefenseLaserUpdate ModuleTag_14
    WeaponTemplate        = SupW_PointDefenseDroneLaserWeapon
    PrimaryTargetTypes    = BALLISTIC_MISSILE SMALL_MISSILE
    ScanRate              = 60
    ScanRange             = 100.0
    PredictTargetVelocityFactor = 3.0
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000
    AflameDamageAmount = 3
    AflameDamageDelay = 500
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleSpyDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAScout_L
  ButtonImage            = SAScout
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = AVSpyDrone
      Animation = AVSpyDrone.AVSpyDrone
      AnimationMode = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SpyDrone
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 0
  ArmorSet
    Conditions      = None
    Armor           = AirplaneArmorWithRadar
    DamageFX        = SmallTankDamageFX
  End
  VisionRange     = 250
  ShroudClearingRange = 0; Dynamic range below

  ExperienceValue = 0 0 0 0 
  IsTrainable     = No 
  
  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  VoiceMove = NoSound
  VoiceAttack = NoSound
  SoundMoveStart = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE SCORE DRONE INERT NO_SELECT AIRCRAFT
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
  End

  Locomotor = SET_NORMAL SpyDroneLocomtor

  Behavior = DynamicShroudClearingRangeUpdate ModuleTag_04
    FinalVision = 250.0
    ChangeInterval = 50
    ShrinkDelay = 2000
    ShrinkTime = 1000
    GrowDelay = 0
    GrowTime = 1000
    GrowInterval = 10 ; Faster than most

    GridDecalTemplate
      Texture           = EXGrid
      Style             = SHADOW_ADDITIVE_DECAL
      OpacityMin        = 50%
      OpacityMax        = 100%
      OpacityThrobTime  = 500
      Color             = R:32 G:64 B:128 A:0 //dim blue, additive
    End
  End

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 50.0
  End

  Behavior = DestroyDie ModuleTag_07
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = ALL
    CreationList = OCL_AmericaScoutDroneExplode
  End
  Behavior = StealthUpdate ModuleTag_09
    StealthDelay                = 0 ; msec
    StealthForbiddenConditions  = NONE
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = MaxHealthUpgrade ModuleTag_10
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaTankAvengerLaserTurret ; Seperate turret object so it can attack independantly

  ; *** ART Parameters ***
  Draw                    = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    ExtraPublicBone = TurretFX01
    ExtraPublicBone = TurretFX02
    ExtraPublicBone = TURRET01
    ExtraPublicBone = TURRETEL
    ExtraPublicBone = TURRETEL01

    AttachToBoneInContainer = FIREPOINT01

    DefaultConditionState 
      Model         = AVAVNGER_G
      Turret              = TURRET01
      TurretPitch         = TURRETEL01
    End

    ConditionState = REALLYDAMAGED
      Model         = AVAVNGER_GD
      Turret              = TURRET01
      TurretPitch         = TURRETEL01
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = America
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY AvengerAirLaserOne
    Weapon = SECONDARY AvengerAirLaserTwo
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY AvengerAirLaserOneUpgraded
    Weapon = SECONDARY AvengerAirLaserTwoUpgraded
  End

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Avenger with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
   TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI

  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 360
      TurretPitchRate     = 360
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 45
    End
    AutoAcquireEnemiesWhenIdle = Yes 
    MoodAttackCheckRate = 250
  End

  Behavior             = DestroyDie ModuleTag_05
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_AmericaArgonLasers
  End

  Geometry            = BOX
  GeometryMajorRadius = 6.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 10.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object AmericaTankAvengerRailgunTurret

  ; *** ART Parameters ***
  Draw                    = W3DDependencyModelDraw ModuleTag_Draw01
    OkToChangeModelColor  = Yes

    AttachToBoneInContainer = FIREPOINT01

    DefaultConditionState 
      Model         = AVAvngr_r
      Turret        = TURRET01
      TurretPitch   = BARREL
      WeaponFireFXBone    = PRIMARY FIREPOINT
      WeaponLaunchBone    = PRIMARY FIREPOINT
    End

    ConditionState = REALLYDAMAGED
      Model         = AVAvngr_rd
      Turret        = TURRET01
      TurretPitch   = BARREL
      WeaponFireFXBone    = PRIMARY FIREPOINT
      WeaponLaunchBone    = PRIMARY FIREPOINT
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = AmericaAirForceGeneral
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY AvengerRailgunWeapon
    PreferredAgainst = PRIMARY AIRCRAFT
  End

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Avenger with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
   TurretMoveStart = NoSound
   TurretMoveLoop  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 360
      TurretPitchRate     = 360
      AllowsPitch         = Yes
    End
    AutoAcquireEnemiesWhenIdle = Yes 
    MoodAttackCheckRate = 500 ; default is 2000
  End

  Behavior             = DestroyDie ModuleTag_05
  End

  Geometry            = BOX
  GeometryMajorRadius = 6.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 10.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object SupW_AmericaTankAvengerLaserTurret

  ; *** ART Parameters ***
  Draw                    = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    ExtraPublicBone = TurretFX01
    ExtraPublicBone = TurretFX02
    ExtraPublicBone = TURRET01
    ExtraPublicBone = TURRETEL
    ExtraPublicBone = TURRETEL01

    AttachToBoneInContainer = FIREPOINT01

    DefaultConditionState 
      Model         = AVAVNGER_G
      Turret              = TURRET01
      TurretPitch         = TURRETEL01
    End

    ConditionState = REALLYDAMAGED
      Model         = AVAVNGER_GD
      Turret              = TURRET01
      TurretPitch         = TURRETEL01
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = America
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY SupW_AvengerAirLaserOne
    Weapon = SECONDARY SupW_AvengerAirLaserTwo
  End

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Avenger with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
   TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 360
      TurretPitchRate     = 360
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
    End
    AutoAcquireEnemiesWhenIdle = Yes 
    MoodAttackCheckRate = 250
  End

  Behavior             = DestroyDie ModuleTag_05
  End

  Geometry            = BOX
  GeometryMajorRadius = 6.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 10.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object AmericaComancheTurret

  ; *** ART Parameters ***
  Draw       = W3DDependencyModelDraw ModuleTag_01
    AttachToBoneInContainer = FIREPOINT01
    ExtraPublicBone = MUZZLE01

    DefaultConditionState
      Model             = AVComanchT
      WeaponFireFXBone  = PRIMARY MUZZLE01
      WeaponLaunchBone  = PRIMARY MUZZLE01
      WeaponMuzzleFlash = PRIMARY TURRETFX01
      Turret            = TURRET
      TurretPitch       = TURRETEL
    End
  End

  ; ***DESIGN parameters ***
  Side             = America
  EditorSorting    = SYSTEM
  TransportSlotCount = 1

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY Comanche20mmCannonWeapon
    PreferredAgainst    = PRIMARY INFANTRY
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE
    Weapon              = PRIMARY ComancheCarbonLaserWeapon
    PreferredAgainst    = PRIMARY INFANTRY
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_AmericaCarbonLasers
  End

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceRapidFire  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK CLICK_THROUGH IGNORED_IN_GUI
  
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY 
      TurretTurnRate      = 180
      TurretPitchRate     = 180
      MinPhysicalPitch    = -90
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
    End
    MoodAttackCheckRate = 100
    AutoAcquireEnemiesWhenIdle = Yes 
  End

  Behavior             = DestroyDie ModuleTag_04
  End

  Geometry            = BOX
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleArtillerySpyDrone

  ; *** ART Parameters ***
  SelectPortrait         = SAScout_L
  ButtonImage            = SAScout
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ExtraPublicBone = TurretFX03
    ConditionState = NONE
      Model = AVSpyDrone
      Animation = AVSpyDrone.AVSpyDrone
      AnimationMode = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SpyDrone
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 0
  ArmorSet
    Conditions      = None
    Armor           = AirplaneArmorWithRadar
    DamageFX        = SmallTankDamageFX
  End
  VisionRange     = 250
  ShroudClearingRange = 250

  ExperienceValue = 0 0 0 0 
  IsTrainable     = No 
  
  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  VoiceMove = NoSound
  VoiceAttack = NoSound
  SoundMoveStart = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff

  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE DRONE INERT NO_SELECT CAN_ATTACK AIRCRAFT

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY AvengerTargetDesignator
  End

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate        = 360
      TurretPitchRate       = 360
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL SpyDroneLocomtor

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate  = 500
    DetectionRange = 150
    ExtraForbiddenKindOf = AIRCRAFT MINE DEMOTRAP
  End

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 50.0
  End

  Behavior = DestroyDie ModuleTag_07
    DeathTypes = ALL
  End
  Behavior          = CreateObjectDie ModuleTag_08
    DeathTypes = ALL
    CreationList      = OCL_AmericaScoutDroneExplode
  End
  Behavior = StealthUpdate ModuleTag_09
    StealthDelay                = 0 ; msec
    StealthForbiddenConditions  = NONE
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = MaxHealthUpgrade ModuleTag_10
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000        ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500      ; this often.
  End

  Behavior = LifetimeUpdate ModuleTag_333
    MinLifetime = 45000 ; min lifetime in msec
    MaxLifetime = 45000 ; max lifetime in msec
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaTankSLIDTurret

  ; *** ART Parameters ***
  Draw                    = W3DDependencyModelDraw ModuleTag_Draw01
    OkToChangeModelColor  = Yes

    AttachToBoneInContainer = FIREPOINT01

    DefaultConditionState 
      Model         = AVSLID
      Turret        = TURRET
      TurretPitch   = TURRETEL
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponLaunchBone = PRIMARY LAUNCH
    End

    ConditionState = REALLYDAMAGED
      Model         = AVSLID_D
      Turret        = TURRET
      TurretPitch   = TURRETEL
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponLaunchBone = PRIMARY LAUNCH
    End
  End

  Draw = W3DModelDraw ModuleTag_Draw02
    DefaultConditionState
      Model = EXDecalR150
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = AmericaAirForceGeneral
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY SLIDWeapon
  End

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Avenger with his damage module
  End
  VisionRange     = 175

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
   TurretMoveStart = NoSound
   TurretMoveLoop  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI

  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 720
      TurretPitchRate     = 720
      AllowsPitch         = Yes
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY
      FiresWhileTurning   = Yes
    End
    MoodAttackCheckRate = 100
    AutoAcquireEnemiesWhenIdle = Yes 
  End

  Behavior             = DestroyDie ModuleTag_05
  End

  Geometry            = BOX
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No      
  Shadow = SHADOW_DECAL
  ShadowSizeX = 320
  ShadowSizeY = 320
  ShadowTexture = decal_defense
End

;------------------------------------------------------------------------------
Object AmericaVehicleSquidDrone

  ; *** ART Parameters ***
  SelectPortrait         = SASquidDrone_L
  ButtonImage            = SASquidDrone
  
  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVSquid
      WeaponFireFXBone = PRIMARY FIREPOINT01
      Turret = belly
      TurretPitch = head
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SquidDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY SquidDroneLaserWeapon
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE
    Weapon            = PRIMARY SquidDroneLaserWeaponUpgraded
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_AmericaArgonLasers
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End

  BuildCost           = 500
  BuildTime           = 5.0
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT
  
  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 360   // turn rate, in degrees per sec
      TurretPitchRate       = 360
      MinPhysicalPitch      = -75 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End
  Locomotor = SET_NORMAL BattleDroneLocomotor
  Locomotor = SET_PANIC BattleDronePanicLocomotor   ;used for repairing master (zippy)

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 10  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 10   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_AmericaBattleDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior  = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX           = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove   = Upgrade_AmericaSquidDrone
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_StealthCovering
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaTankCrusader

  ; *** ART Parameters ***
  SelectPortrait = SACLeopard_L
  ButtonImage    = SACLeopard

  UpgradeCameo1 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo2 = Upgrade_AmericaCompositeArmor
 
  Draw = W3DTankDraw ModuleTag_01
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model             = AVLeopard
      Turret            = Turret
      WeaponFireFXBone  = PRIMARY TurretMS
      WeaponRecoilBone  = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY TurretFX
      WeaponLaunchBone  = PRIMARY TurretMS
      TransitionKey     = TRANS_default
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT

    ConditionState  = PREATTACK_A
      TransitionKey = TRANS_firing
    End
    AliasConditionState = SNOW PREATTACK_A
    AliasConditionState = NIGHT PREATTACK_A
    AliasConditionState = SNOW NIGHT PREATTACK_A

    TransitionState = TRANS_firing TRANS_default
      ParticleSysBone = TURRETMS01 TankCannonSmokeSmall
    End

    ConditionState  = REALLYDAMAGED RUBBLE
      Model         = AVLeopard_D
      TransitionKey = TRANS_default_d
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE

    ConditionState  = REALLYDAMAGED RUBBLE PREATTACK_A
      Model         = AVLeopard_D
      TransitionKey = TRANS_firing_d
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE PREATTACK_A
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE PREATTACK_A
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE PREATTACK_A

    TransitionState = TRANS_firing_d TRANS_default_d
      Model         = AVLeopard_D
      ParticleSysBone = TURRETMS01 TankCannonSmokeSmall
    End

    ;-----------------------------
    ConditionState = AFLAME
      TransitionKey   = TRANS_default_aflame
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = SNOW AFLAME
    AliasConditionState = NIGHT AFLAME
    AliasConditionState = SNOW NIGHT AFLAME

    ConditionState  = PREATTACK_A AFLAME
      TransitionKey = TRANS_firing_aflame
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = SNOW PREATTACK_A AFLAME
    AliasConditionState = NIGHT PREATTACK_A AFLAME
    AliasConditionState = SNOW NIGHT PREATTACK_A AFLAME

    TransitionState = TRANS_firing_aflame TRANS_default_aflame
      ParticleSysBone = TURRETMS01 TankCannonSmokeSmall
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState  = REALLYDAMAGED RUBBLE AFLAME
      Model         = AVLeopard_D
      TransitionKey = TRANS_default_d_aflame
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE AFLAME
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE AFLAME
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE AFLAME

    ConditionState  = REALLYDAMAGED RUBBLE PREATTACK_A AFLAME
      Model         = AVLeopard_D
      TransitionKey = TRANS_firing_d_aflame
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE PREATTACK_A AFLAME
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE PREATTACK_A AFLAME
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE PREATTACK_A AFLAME

    TransitionState = TRANS_firing_d_aflame TRANS_default_d_aflame
      Model         = AVLeopard_D
      ParticleSysBone = TURRETMS01 TankCannonSmokeSmall
      ParticleSysBone = Turret TankFireContinious
    End

    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
    OkToChangeModelColor    = Yes
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Crusader
  Side               = America
  EditorSorting      = VEHICLE
  TransportSlotCount = 3

  WeaponSet
    Conditions       = None
    Weapon           = PRIMARY CrusaderTankGun
  End

  ArmorSet
    Conditions       = None
    Armor            = TankArmor
    DamageFX         = TankDamageFX
  End

  BuildCost           = 900
  BuildTime           = 10
  VisionRange         = 150
  ShroudClearingRange = 300

  ExperienceValue     = 34 49 72 103
  ExperienceRequired  = 0 102 147 216
  IsTrainable         = Yes

  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = AmericaCrusaderCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = CrusaderTankVoiceSelect
  VoiceMove             = CrusaderTankVoiceMove
  VoiceGuard            = CrusaderTankVoiceMove
  VoiceAttack           = CrusaderTankVoiceAttack
  SoundMoveStart        = CrusaderTankMoveStart
  SoundMoveStartDamaged = CrusaderTankMoveStart
  UnitSpecificSounds
    VoiceCreate         = CrusaderTankVoiceCreate
    VoiceEnter             = CrusaderTankVoiceMove
    TurretMoveStart     = NoSound
    TurretMoveLoop      = TurretMoveLoop
    SoundEject          = PilotSoundEject
    VoiceEject          = PilotVoiceEject
    VoiceCrush          = CrusaderTankVoiceCrush
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_06A
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0
  End

  Behavior = MaxHealthUpgrade ModuleTag_18
    TriggeredBy   = Upgrade_AmericaCompositeArmor
    AddMaxHealth  = 100.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE DRONE
  
  Body                   = ActiveBody ModuleTag_02
    MaxHealth       = 500
    InitialHealth   = 500
    SubdualDamageCap = 960
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate       = 180
      ControlledWeaponSlots= PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL CrusaderLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Drone01
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone02
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone03
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaStingerDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Drone05
    UpgradeObject = OCL_AmericanStingerDrone
    TriggeredBy   = Upgrade_AmericaStingerDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone Upgrade_AmericaPointDefenseDrone Upgrade_AmericaBattleDrone
  End

  Behavior = ProductionUpdate ModuleTag_Drone07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = SlowDeathBehavior ModuleTag_10
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_GenericTankDeathEffect
    FX  = FINAL    FX_GenericTankDeathExplosion
    OCL = FINAL    OCL_CrusaderTurret
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = FXListDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_15
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
   CrateData = SalvageCrateData
  End

  Behavior = FlammableUpdate ModuleTag_Aflame
    AflameDuration = 8000
    AflameDamageAmount = 5
    AflameDamageDelay = 500
  End

  Geometry               = BOX
  GeometryMajorRadius    = 15.0
  GeometryMinorRadius    = 10.0
  GeometryHeight         = 10.0     
  GeometryIsSmall        = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object AmericaBuildingDefenseGun

  ; *** ART Parameters ***
  SelectPortrait         = SABuildingDefense
  ButtonImage            = SABuildingDefense

  ;------------ Security turret ------------------
  Draw = W3DModelDraw ModuleTag_Draw0X
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = ABDefense
      Turret = TurretUp01
      TurretPitch = TurretEL
      WeaponFireFXBone = PRIMARY MuzzleUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponLaunchBone = PRIMARY MuzzleUp
      WeaponFireFXBone = SECONDARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB
      WeaponLaunchBone = TERTIARY WeaponB
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = UPGRADE:BuildingDefense
  Side                = America
  EditorSorting       = STRUCTURE

  WeaponSet
    Conditions        = None 
    Weapon           = PRIMARY    BuildingSecurityGun
    Weapon           = SECONDARY  BuildingSecurityMissileWeapon
    Weapon           = TERTIARY   StingerDroneMissileWeaponAir
    PreferredAgainst = TERTIARY   AIRCRAFT
    ShareWeaponReloadTime = Yes
  End

  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End

  BuildCost           = 750
  BuildTime           = 15
  VisionRange         = 175
  ShroudClearingRange = 175
  CommandSet = StopOnlyGenericCommandSet

  ExperienceValue     = 29 29 29 29
  IsTrainable         = No
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = NOT_ON_RADAR
  KindOf        = PRELOAD VEHICLE DRONE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    Turret
      TurretTurnRate = 180
      TurretPitchRate = 180
      FiresWhileTurning = Yes
      AllowsPitch       = Yes
      MinPhysicalPitch  = -90
      RecenterTime = 5000
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      MinIdleScanInterval = 250    ; in milliseconds
      MaxIdleScanInterval = 250    ; in milliseconds
      MinIdleScanAngle    = 0      ; in degrees off the natural turret angle
      MaxIdleScanAngle    = 360    ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 200
  End
  
  Locomotor = SET_NORMAL BuildingSecurityLocomotor
  
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5000.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
    PitchRollYawFactor = 0
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  
  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior   = CreateObjectDie ModuleTag_13
    CreationList = OCL_TinyStructureDebris
  End

  Behavior   = FXListDie ModuleTag_14
    DeathFX      = FX_GenericTankDeathExplosion 
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_USABuildingDefense
  End

  Behavior = AutoHealBehavior ModuleTag_SelfHealing
    HealingAmount = 10
    HealingDelay = 833
    StartHealingDelay = 5000
    StartsActive = Yes
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000
    AflameDamageAmount = 3
    AflameDamageDelay = 500
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 40.0
  GeometryIsSmall = Yes 
;  Shadow = SHADOW_VOLUME
;  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaBuildingDefenseLaser

  ; *** ART Parameters ***
  SelectPortrait         = SABuildingDefense
  ButtonImage            = SABuildingDefense

  ;------------ Security turret ------------------
  Draw = W3DModelDraw ModuleTag_Draw0X
    OkToChangeModelColor = Yes
    ExtraPublicBone = LaserSpot01

    DefaultConditionState
      Model = ABDefenseL
      Turret = TurretUp01
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = UPGRADE:BuildingDefense
  Side                = America
  EditorSorting       = STRUCTURE

  WeaponSet
    Conditions        = None 
    Weapon      = PRIMARY AvengerPointDefenseLaserOne
    Weapon      = SECONDARY BuildingAntiInfantryLaser
  End

  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End

  BuildCost           = 500
  BuildTime           = 15
  VisionRange         = 175
  ShroudClearingRange = 175
  CommandSet = StopOnlyGenericCommandSet

  ExperienceValue     = 29 29 29 29
  IsTrainable         = No
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = NOT_ON_RADAR
  KindOf        = PRELOAD VEHICLE DRONE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE

  Body = StructureBody ModuleTag_03
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    Turret
      TurretTurnRate = 180
      RecenterTime = 5000
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      MinIdleScanInterval   = 250    ; in milliseconds
      MaxIdleScanInterval   = 250    ; in milliseconds
      MinIdleScanAngle      = 0      ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 360    ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End

  Locomotor = SET_NORMAL BuildingSecurityLocomotor
  
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5000.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
    PitchRollYawFactor = 0
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  
  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior = CreateObjectDie ModuleTag_13
    CreationList = OCL_TinyStructureDebris
  End

  Behavior = FXListDie ModuleTag_14
    DeathFX = FX_GenericTankDeathExplosion 
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_USABuildingDefense
  End

  Behavior = BaseRegenerateUpdate ModuleTag_BR
  End

  Behavior = AutoHealBehavior ModuleTag_SelfHealing
    HealingAmount = 10
    HealingDelay = 833
    StartHealingDelay = 5000
    StartsActive = Yes
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000
    AflameDamageAmount = 3
    AflameDamageDelay = 500
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 40.0
  GeometryIsSmall = Yes 
;  Shadow = SHADOW_VOLUME
;  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaBuildingDefenseGunHigh

  ; *** ART Parameters ***
  SelectPortrait         = SABuildingDefense
  ButtonImage            = SABuildingDefense

  ;------------ Security turret ------------------
  Draw = W3DModelDraw ModuleTag_Draw0X
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = ABDefenseH
      Turret = TurretUp01
      TurretPitch = TurretEL
      WeaponFireFXBone = PRIMARY MuzzleUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponLaunchBone = PRIMARY MuzzleUp
      WeaponFireFXBone = SECONDARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB
      WeaponLaunchBone = TERTIARY WeaponB
    End
  End

  ; ***DESIGN parameters ***
  DisplayName        = UPGRADE:BuildingDefense
  Side               = America
  EditorSorting      = STRUCTURE

  WeaponSet
    Conditions       = None 
    Weapon           = PRIMARY    BuildingSecurityGun
    Weapon           = SECONDARY  BuildingSecurityMissileWeapon
    Weapon           = TERTIARY   StingerDroneMissileWeaponAir
    PreferredAgainst = PRIMARY    INFANTRY
    PreferredAgainst = SECONDARY  VEHICLE STRUCTURE 
    PreferredAgainst = TERTIARY   AIRCRAFT
    ShareWeaponReloadTime = Yes
  End

  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End

  BuildCost           = 750
  BuildTime           = 15
  VisionRange         = 175
  ShroudClearingRange = 175
  CommandSet = StopOnlyGenericCommandSet

  ExperienceValue     = 29 29 29 29
  IsTrainable         = No
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = NOT_ON_RADAR
  KindOf        = PRELOAD VEHICLE DRONE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE

  Body = StructureBody ModuleTag_03
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    Turret
      TurretTurnRate = 180
      TurretPitchRate = 180
      FiresWhileTurning = Yes
      AllowsPitch       = Yes
      MinPhysicalPitch  = -90
      RecenterTime = 5000
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      MinIdleScanInterval   = 250    ; in milliseconds
      MaxIdleScanInterval   = 250    ; in milliseconds
      MinIdleScanAngle      = 0      ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 360    ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End

  Locomotor = SET_NORMAL BuildingSecurityLocomotor
  
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5000.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
    PitchRollYawFactor = 0
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  
  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior   = CreateObjectDie ModuleTag_13
    CreationList = OCL_TinyStructureDebris
  End

  Behavior   = FXListDie ModuleTag_14
    DeathFX      = FX_GenericTankDeathExplosion 
  End

  Behavior = BaseRegenerateUpdate ModuleTag_BR
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_USABuildingDefense
  End

  Behavior = AutoHealBehavior ModuleTag_SelfHealing
    HealingAmount = 10
    HealingDelay = 833
    StartHealingDelay = 5000
    StartsActive = Yes
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000
    AflameDamageAmount = 3
    AflameDamageDelay = 500
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 70.0
  GeometryIsSmall = Yes 
;  Shadow = SHADOW_VOLUME
;  ShadowSizeX = 89
End

;------------------------------------------------------------------------------
Object AmericaVehicleMinigunDrone

  ; *** ART Parameters ***
  SelectPortrait       = SAMGD_L
  ButtonImage          = SAMGD
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = AVMGDrone
      Turret = Turret
      TurretPitch = TurretEL
      WeaponFireFXBone = PRIMARY FIREPOINT
      WeaponLaunchBone = PRIMARY FIREPOINT
    End

    ConditionState = REALLYDAMAGED
      Model = AVMGDrone_D
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MinigunDrone
  Side                = America
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY MinigunDroneMachineGun
  End

  ArmorSet
    Conditions        = None
    Armor             = DroneArmor
    DamageFX          = SmallTankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DroneArmorCybrUpgraded
    DamageFX          = SmallTankDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor02
    TriggeredBy = Upgrade_AmericaTransmitionCodes
  End

  BuildCost           = 200
  BuildTime           = 8.0
  VisionRange         = 150
  ShroudClearingRange = 150

  ExperienceValue     = 0 0 0 0
  ExperienceRequired  = 0 20000 50000 60000
  IsTrainable         = Yes
  
  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS VEHICLE CAN_ATTACK DRONE NO_SELECT

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 720
      TurretPitchRate       = 720
      MinPhysicalPitch      = -90
      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
      FiresWhileTurning   = Yes
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate = 100
  End

  Locomotor = SET_NORMAL BattleDroneLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_06
    TriggeredBy   = Upgrade_AmericaDroneArmor
    AddMaxHealth  = 60.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 35      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 35   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 75        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 75  ;How far I'm allowed to wander from target.
    ScoutRange = 75         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 25   ;How far I'm allowed to wander from scout point.
    StayOnSameLayerAsMaster = Yes
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior       = CreateObjectDie  ModuleTag_09
    DeathTypes   = ALL
    CreationList = OCL_AmericaMGDroneExplode
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  
  Behavior     = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX    = FX_AmericaBattleDroneExplode
  End

  Behavior = UpgradeDie  ModuleTag_12
    DeathTypes = ALL
    UpgradeToRemove  = Upgrade_AmericaMinigunDrone
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000
    AflameDamageAmount = 3
    AflameDamageDelay = 500
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = ELITE
    ScienceRequired = SCIENCE_AdvancedAI
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89
End
