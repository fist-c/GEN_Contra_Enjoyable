;------------------------------------------------------------------------------
Object Chem_GLACommandCenter

  ; *** ART Parameters ***
  SelectPortrait         = SUHeadquarters_L
  ButtonImage            = SUHeadquarters

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  ; ----- The actual command center
  Draw                   = W3DModelDraw ModuleTag_01
     
    OkToChangeModelColor = Yes
    
    ; day
    ConditionState       = NONE
      Model              = UBCmdHQC
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQC.UBCmdHQC
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = UBCmdHQC_D
      Animation          = UBCmdHQC_D.UBCmdHQC_D
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = UBCmdHQC_E
      Animation          = UBCmdHQC_E.UBCmdHQC_E
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBCmdHQCE
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE.UBCmdHQCE
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBCmdHQCE_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_D.UBCmdHQCE_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBCmdHQCE_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_E.UBCmdHQCE_E
      AnimationMode        = LOOP
    End

    ; night    
    ConditionState       = NIGHT
      Model              = UBCmdHQC_N
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQC_N.UBCmdHQC_N
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT
      Model              = UBCmdHQC_DN
      Animation          = UBCmdHQC_DN.UBCmdHQC_DN
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = UBCmdHQC_EN
      Animation          = UBCmdHQC_EN.UBCmdHQC_EN
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBCmdHQCE_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_N.UBCmdHQCE_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBCmdHQCE_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_DN.UBCmdHQCE_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBCmdHQCE_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_EN.UBCmdHQCE_EN
      AnimationMode        = LOOP
    End

    ; day snow
    ConditionState       = SNOW
      Model              = UBCmdHQC_S
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQC_S.UBCmdHQC_S
      AnimationMode      = LOOP
    End   
    ConditionState       = DAMAGED SNOW
      Model              = UBCmdHQC_DS
      Animation          = UBCmdHQC_DS.UBCmdHQC_DS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = UBCmdHQC_ES
      Animation          = UBCmdHQC_ES.UBCmdHQC_ES
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBCmdHQCE_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_S.UBCmdHQCE_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBCmdHQCE_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_DS.UBCmdHQCE_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBCmdHQCE_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_ES.UBCmdHQCE_ES
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState       = NIGHT SNOW
      Model              = UBCmdHQC_NS
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQC_NS.UBCmdHQC_NS
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBCmdHQC_DNS
      Animation          = UBCmdHQC_DNS.UBCmdHQC_DNS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = UBCmdHQC_ENS
      Animation          = UBCmdHQC_ENS.UBCmdHQC_ENS
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBCmdHQCE_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_NS.UBCmdHQCE_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQCE_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_DNS.UBCmdHQCE_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQCE_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQCE_ENS.UBCmdHQCE_ENS
      AnimationMode        = LOOP
    End

    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBCmdHQC
      Animation          = UBCmdHQC.UBCmdHQC
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBCmdHQC_D
      Animation          = UBCmdHQC_D.UBCmdHQC_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBCmdHQC_E
      Animation          = UBCmdHQC_E.UBCmdHQC_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBCmdHQC_N
      Animation          = UBCmdHQC_N.UBCmdHQC_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBCmdHQC_DN
      Animation          = UBCmdHQC_DN.UBCmdHQC_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBCmdHQC_EN
      Animation          = UBCmdHQC_EN.UBCmdHQC_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBCmdHQC_S
      Animation          = UBCmdHQC_S.UBCmdHQC_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBCmdHQC_DS
      Animation          = UBCmdHQC_DS.UBCmdHQC_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBCmdHQC_ES
      Animation          = UBCmdHQC_ES.UBCmdHQC_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBCmdHQC_NS
      Animation          = UBCmdHQC_NS.UBCmdHQC_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBCmdHQC_DNS
      Animation          = UBCmdHQC_DNS.UBCmdHQC_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBCmdHQC_ENS
      Animation          = UBCmdHQC_ENS.UBCmdHQC_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED

  End

  PlacementViewAngle = -135

  ; ------------ construction done flashing lights ----------
;  Draw = W3DModelDraw
;    DefaultConditionState
;      Model           = None
;    End
;    ConditionState    = SOLD
;      Model           = NONE
;    End    
;    ConditionState    = CONSTRUCTION_COMPLETE
;      Model           = ABWarFact_A2
;      Animation       = ABWarFact_A2.ABWarFact_A2
;      AnimationMode   = LOOP
;      Flags           = START_FRAME_FIRST
;    End  
;  End
    
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CommandCenter
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 2000
  BuildTime           = 40.0
  EnergyProduction    = 0
  CommandSet          = Chem_GLACommandCenterCommandSet
  VisionRange         = 300
  ShroudClearingRange = 300

  Prerequisites
    Science = SCIENCE_CHEM
  End

  ArmorSet
    Conditions        = None
    Armor             = StructureArmorTough
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmorTough
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = CommandCenterGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE COMMANDCENTER
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 5000.0
    InitialHealth     = 5000.0
    SubdualDamageCap = 5200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = ProductionUpdate ModuleTag_05P
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_06
    UnitCreatePoint   = X: 25.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 65.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior             = RebuildHoleExposeDie ModuleTag_07
    HoleName      = GLAHoleCommandCenter
    HoleMaxHealth = 800.0
  End

  Behavior             = DestroyDie ModuleTag_08
  End  

  Behavior             = CreateObjectDie ModuleTag_09
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior             = FXListDie ModuleTag_10
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SuperweaponRebelAmbush
    UpgradeOCL           = SCIENCE_RebelAmbush3 Chem_SUPERWEAPON_RebelAmbush3
    UpgradeOCL           = SCIENCE_RebelAmbush2 Chem_SUPERWEAPON_RebelAmbush2
    OCL                  = Chem_SUPERWEAPON_RebelAmbush1
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower02
    SpecialPowerTemplate = SuperweaponAnthraxBomb
    OCL                  = SUPERWEAPON_AnthraxBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower03
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairEverything3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairEverything2
    OCL                  = SUPERWEAPON_RepairEverything1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower04
    SpecialPowerTemplate = SuperweaponSneakAttack
    OCL                  = OCL_CreateSneakAttackTunnelStart
    CreateLocation       = CREATE_AT_LOCATION
    ReferenceObject      = GLASneakAttackTunnelNetwork ;So we know what the final product is for script placement calculations
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower05
    SpecialPowerTemplate = SuperweaponGPSScrambler
    OCL                  = SUPERWEAPON_GPSScrambler
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower06
    SpecialPowerTemplate = SuperweaponCarpetBomb
    OCL                  = SUPERWEAPON_AcidCarpetBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End 
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower07
    SpecialPowerTemplate = SuperweaponSalvageDrop
    UpgradeOCL           = SCIENCE_SalvageDrop3 SUPERWEAPON_SalvageDrop3
    UpgradeOCL           = SCIENCE_SalvageDrop2 SUPERWEAPON_SalvageDrop2
    OCL                  = SUPERWEAPON_SalvageDrop1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower09
    SpecialPowerTemplate = SuperweaponKamikazePlane
    OCL                  = SUPERWEAPON_KamikazePlane
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower10
    SpecialPowerTemplate = SuperweaponHealInfantry
    OCL                  = SUPERWEAPON_HealInfantry
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = CashBountyPower ModuleTag_SpecialPower12
    SpecialPowerTemplate    = SpecialAbilityCashBounty1
    Bounty                  = 5%
  End
  Behavior = CashBountyPower ModuleTag_SpecialPower13
    SpecialPowerTemplate    = SpecialAbilityCashBounty2
    Bounty                  = 10%
  End
  Behavior = CashBountyPower ModuleTag_SpecialPower14
    SpecialPowerTemplate    = SpecialAbilityCashBounty3
    Bounty                  = 20%
  End
 
  Behavior = FlammableUpdate ModuleTag_19
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = GrantUpgradeCreate ModuleTag_Upgrade03
    UpgradeToGrant = Upgrade_GLAAnthraxBeta
  End
  Behavior = GrantUpgradeCreate ModuleTag_Upgrade04
    UpgradeToGrant = Upgrade_GLABombTruckBioBomb
  End
  Behavior = GrantUpgradeCreate ModuleTag_Upgrade05
    UpgradeToGrant = Upgrade_GLAToxinShells
  End

  Geometry            = BOX
  GeometryMajorRadius = 65.0
  GeometryMinorRadius = 65.0
  GeometryHeight      = 54.0
  FactoryExitWidth    = 25 
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLABlackMarket

  ; *** ART Parameters ***
  SelectPortrait         = SUBlackMarket_L
  ButtonImage            = SUBlackMarket

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState    = NONE
      Model           = UBBlackMkt
      Animation       = UBBlackMkt.UBBlackMkt
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED
      Model           = UBBlackMkt_D
      Animation       = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBBlackMkt_E
      Animation       = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED
      Model                = UBBlkMktEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG.UBBlkMktEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBlkMktEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_D.UBBlkMktEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBlkMktEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_E.UBBlkMktEG_E
      AnimationMode        = LOOP
    End

    ; day snow
    ConditionState    = SNOW
      Model           = UBBlackMkt_S
      Animation       = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED SNOW
      Model           = UBBlackMkt_DS
      Animation       = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBBlackMkt_ES
      Animation       = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBlkMktEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_S.UBBlkMktEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DS.UBBlkMktEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_ES.UBBlkMktEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT 
      Model           = UBBlackMkt_N
      Animation       = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBBlackMkt_DN
      Animation       = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBBlackMkt_EN
      Animation       = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBlkMktEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_N.UBBlkMktEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DN.UBBlkMktEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_EN.UBBlkMktEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBBlackMkt_NS
      Animation       = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBBlackMkt_DNS
      Animation       = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBBlackMkt_ENS
      Animation       = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_NS.UBBlkMktEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DNS.UBBlkMktEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_ENS.UBBlkMktEG_ENS
      AnimationMode        = LOOP
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBlackMkt
      Animation          = UBBlackMkt.UBBlackMkt
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBlackMkt_D
      Animation          = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBlackMkt_E
      Animation          = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBlackMkt_N
      Animation          = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBlackMkt_DN
      Animation          = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBlackMkt_EN
      Animation          = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBlackMkt_S
      Animation          = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBlackMkt_DS
      Animation          = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ES
      Animation          = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBlackMkt_NS
      Animation          = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBlackMkt_DNS
      Animation          = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ENS
      Animation          = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End  

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT

    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End   
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End   
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw      = W3DModelDraw ModuleTag_Draw05
    DefaultConditionState
      Model = UBBlackMkt_B
    End
  End

  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackMarket
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 2500
  BuildTime           = 50
  EnergyProduction    = 0
  CommandSet          = Chem_GLABlackMarketCommandSet
  VisionRange         = 200
  ShroudClearingRange = 200
  ExperienceValue    = 75 75 75 75

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect         = BlackMarketSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf  = PRELOAD STRUCTURE SELECTABLE IMMOBILE GARRISONABLE_UNTIL_DESTROYED IMMUNE_TO_CAPTURE FS_ADVANCED_TECH MP_COUNT_FOR_VICTORY SCORE_CREATE FS_BLACK_MARKET

  Body                = StructureBody ModuleTag_04
    MaxHealth         = 1250.0
    InitialHealth     = 1250.0
    SubdualDamageCap = 2500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = AutoDepositUpdate ModuleTag_05
    DepositTiming       = 2400   ; in milliseconds
    DepositAmount       = 20   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End

  Behavior = ProductionUpdate ModuleTag_06
  End

  Behavior = DestroyDie ModuleTag_07
  End

  Behavior = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleBlackMarket
    HoleMaxHealth = 800.0
  End 

  Behavior = CreateObjectDie ModuleTag_09
    CreationList  = OCL_ABPowerPlantExplode
  End

  Behavior = FXListDie ModuleTag_10
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = GarrisonContain ModuleTag_10G
    DamagePercentToUnits          = 5%
    ContainMax                    = 5
    EnterSound                    = GarrisonEnter
    ExitSound                     = GarrisonExit
    ImmuneToClearBuildingAttacks  = Yes
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityContaminationOnOff
    OCL                  = OCL_BuildingContaminationPoisonFieldSelector
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_CleanToxins
    DeathWeapon   = HazardFieldCoreWeapon
    StartsActive  = Yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 35.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_FakeGLABlackMarket

  ; *** ART Parameters ***
  SelectPortrait         = SUBlackMarket_L
  ButtonImage            = SUBlackMarket

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState    = NONE
      Model           = UBBlackMkt
      Animation       = UBBlackMkt.UBBlackMkt
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED
      Model           = UBBlackMkt_D
      Animation       = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBBlackMkt_E
      Animation       = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED
      Model                = UBBlkMktEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG.UBBlkMktEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBlkMktEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_D.UBBlkMktEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBlkMktEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_E.UBBlkMktEG_E
      AnimationMode        = LOOP
    End

    ; day snow
    ConditionState    = SNOW
      Model           = UBBlackMkt_S
      Animation       = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED SNOW
      Model           = UBBlackMkt_DS
      Animation       = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBBlackMkt_ES
      Animation       = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBlkMktEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_S.UBBlkMktEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DS.UBBlkMktEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_ES.UBBlkMktEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT 
      Model           = UBBlackMkt_N
      Animation       = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBBlackMkt_DN
      Animation       = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBBlackMkt_EN
      Animation       = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBlkMktEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_N.UBBlkMktEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DN.UBBlkMktEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_EN.UBBlkMktEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBBlackMkt_NS
      Animation       = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBBlackMkt_DNS
      Animation       = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBBlackMkt_ENS
      Animation       = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_NS.UBBlkMktEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DNS.UBBlkMktEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_ENS.UBBlkMktEG_ENS
      AnimationMode        = LOOP
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBlackMkt
      Animation          = UBBlackMkt.UBBlackMkt
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBlackMkt_D
      Animation          = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBlackMkt_E
      Animation          = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBlackMkt_N
      Animation          = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBlackMkt_DN
      Animation          = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBlackMkt_EN
      Animation          = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBlackMkt_S
      Animation          = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBlackMkt_DS
      Animation          = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ES
      Animation          = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBlackMkt_NS
      Animation          = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBlackMkt_DNS
      Animation          = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ENS
      Animation          = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED

    
  End  

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT

    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End   
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End   
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackMarket
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 500
  BuildTime           = 10.0
  EnergyProduction    = 0
  CommandSet          = FakeGLABlackMarketCommandSet
  VisionRange         = 200.0
  ShroudClearingRange = 200

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions        = None
    Armor             = FakeStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 0 0 0 0

  ; *** AUDIO Parameters ***
  VoiceSelect         = BlackMarketSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 500.0
    InitialHealth     = 500.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_05
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = ProductionUpdate ModuleTag_06
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeaponArmsDealer
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_08
    ReplaceObject = Chem_GLABlackMarket
    TriggeredBy = Upgrade_BecomeRealGLABlackMarket
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior                 = CreateObjectDie ModuleTag_09
    CreationList      = OCL_ABPowerPlantExplode
  End
  Behavior                 = FXListDie ModuleTag_10
    DeathFX           = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = AutoDepositUpdate ModuleTag_FakeMoney
    DepositTiming       = 2400   ; in milliseconds
    DepositAmount       = 20   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
    ActualMoney = No ; Display only so I look like a BlackMarket
  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 35.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 108
  ShadowSizeY = 96
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLAScudStorm

  ; *** ART Parameters ***
  SelectPortrait         = SUScudStorm_L
  ButtonImage            = SUScudStorm

  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo2 = Upgrade_GLASulfurAcid
  UpgradeCameo3 = Upgrade_GLANeutralizers

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    ; day
    ConditionState = NONE ; lying around
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY Trans_ATTACKING ; from lying around to straight up
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2
      Animation     = UBScudStrm_A2.UBScudStrm_A2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B

    TransitionState = Trans_ATTACKING Trans_READY ; empty arms going underground, coming up with presents for bad people
      Model         = UBScudStrm_A3
      Animation     = UBScudStrm_A3.UBScudStrm_A3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ; day
    ConditionState = DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED Trans_ATTACKING_DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED Trans_READY_DAMAGED
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED Trans_ATTACKING_REALLYDAMAGED
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED Trans_READY_REALLYDAMAGED
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
        ;-------------------------------------------------------------------------------------------------------------------------
        ;  SNOW
    ConditionState =  SNOW ; from underground to lying around
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_SNOW Trans_ATTACKING_SNOW
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING  SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2S
      Animation     = UBScudStrm_A2S.UBScudStrm_A2S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B  SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B  SNOW

    TransitionState = Trans_ATTACKING_SNOW Trans_READY_SNOW ; empty arms going underground
      Model         = UBScudStrm_A3S
      Animation     = UBScudStrm_A3S.UBScudStrm_A3S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED  SNOW
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED  SNOW
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED  SNOW
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_SNOW Trans_ATTACKING_DAMAGED_SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED SNOW
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_SNOW Trans_READY_DAMAGED_SNOW
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_SNOW Trans_ATTACKING_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_SNOW Trans_READY_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
    ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT
    ConditionState = NIGHT ; from underground to lying around
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHT Trans_ATTACKING_NIGHT
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING NIGHT  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2
      Animation     = UBScudStrm_A2.UBScudStrm_A2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT

    TransitionState = Trans_ATTACKING_NIGHT Trans_READY_NIGHT ; empty arms going underground
      Model         = UBScudStrm_A3
      Animation     = UBScudStrm_A3.UBScudStrm_A3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHT Trans_ATTACKING_DAMAGED_NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED NIGHT
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHT Trans_READY_DAMAGED_NIGHT
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHT Trans_ATTACKING_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHT Trans_READY_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
        ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT SNOW
    ConditionState = NIGHT SNOW ; from underground to lying around
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHTSNOW Trans_ATTACKING_NIGHTSNOW
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING NIGHT SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2NS
      Animation     = UBScudStrm_A2NS.UBScudStrm_A2NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT SNOW

    TransitionState = Trans_ATTACKING_NIGHTSNOW Trans_READY_NIGHTSNOW ; empty arms going underground
      Model         = UBScudStrm_A3NS
      Animation     = UBScudStrm_A3NS.UBScudStrm_A3NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHTSNOW Trans_ATTACKING_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHTSNOW Trans_READY_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHTSNOW Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW Trans_READY_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
    
    ConditionState       = SOLD
      Model              = NONE
    End    
    AliasConditionState       = SOLD DAMAGED
    AliasConditionState       = SOLD REALLYDAMAGED
    AliasConditionState       = SOLD SNOW
    AliasConditionState       = SOLD DAMAGED SNOW
    AliasConditionState       = SOLD REALLYDAMAGED SNOW
    AliasConditionState       = SOLD NIGHT
    AliasConditionState       = SOLD DAMAGED NIGHT
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT
    AliasConditionState       = SOLD NIGHT SNOW
    AliasConditionState       = SOLD DAMAGED NIGHT SNOW
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT SNOW
  End

  ;-------------------------------------------------------------------------------------------------------------------------
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
  
    ConditionState = None
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End

    ConditionState       = SOLD
      Model              = NONE
    End    
    ConditionState       = SOLD SNOW
       Model             = NONE
    End   
    ConditionState       = SOLD NIGHT
       Model             = NONE
    End    
    ConditionState       = SOLD NIGHT SNOW
       Model             = NONE
    End  
  
    ConditionState = PREATTACK_B ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End
    
    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState =  DAMAGED
    ;  Model         = UBScudStrm_DA5
    ;  Animation     = UBScudStrm_DA5.UBScudStrm_DA5
    ;  AnimationMode = MANUAL
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState = PREATTACK_B ATTACKING DAMAGED
    ;  Model         = UBScudStrm_DA5
    ;  Animation     = UBScudStrm_DA5.UBScudStrm_DA5
    ;  AnimationMode = LOOP
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState = ATTACKING DAMAGED
    ;  Model         = UBScudStrm_DA5
    ;  Animation     = UBScudStrm_DA5.UBScudStrm_DA5
    ;  AnimationMode = LOOP
    ;  Flags         = START_FRAME_FIRST
    ;End
    
    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState =  REALLYDAMAGED
    ;  Model         = UBScudStrm_EA5
    ;  Animation     = UBScudStrm_EA5.UBScudStrm_EA5
    ;  AnimationMode = MANUAL
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState = PREATTACK_B ATTACKING REALLYDAMAGED
    ;  Model         = UBScudStrm_EA5
    ;  Animation     = UBScudStrm_EA5.UBScudStrm_EA5
    ;  AnimationMode = LOOP
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState = ATTACKING REALLYDAMAGED
    ;  Model         = UBScudStrm_EA5
    ;  Animation     = UBScudStrm_EA5.UBScudStrm_EA5
    ;  AnimationMode = LOOP
    ;  Flags         = START_FRAME_FIRST
    ;End
    
  End

  Draw = W3DModelDraw ModuleTag_03
    OkToChangeModelColor = Yes
  
    ConditionState = None
      Model         = UBScudStrm_A6
      Animation     = UBScudStrm_A6.UBScudStrm_A6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  DAMAGED
      Model         = UBScudStrm_DA6
      Animation     = UBScudStrm_DA6.UBScudStrm_DA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA6
      Animation     = UBScudStrm_EA6.UBScudStrm_EA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm_A6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED

      Model              = UBScudStrm_DA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
      Model              = UBScudStrm_EA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = SOLD
      Model              = NONE
    End    
    ConditionState       = SOLD SNOW
       Model             = NONE
    End   
    ConditionState       = SOLD NIGHT
       Model             = NONE
    End    
    ConditionState       = SOLD NIGHT SNOW
       Model             = NONE
    End  
    
  End

  Draw = W3DModelDraw ModuleTag_04
    OkToChangeModelColor = Yes
  
    ConditionState = None
      Model         = UBScudStrm_F
      Animation     = UBScudStrm_F.UBScudStrm_F
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  DAMAGED
      Model         = UBScudStrm_DF
      Animation     = UBScudStrm_DF.UBScudStrm_DF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EF
      Animation     = UBScudStrm_EF.UBScudStrm_EF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState       = SOLD
      Model              = NONE
    End    
    AliasConditionState       = SOLD DAMAGED
    AliasConditionState       = SOLD REALLYDAMAGED
    AliasConditionState       = SOLD SNOW
    AliasConditionState       = SOLD DAMAGED SNOW
    AliasConditionState       = SOLD REALLYDAMAGED SNOW
    AliasConditionState       = SOLD NIGHT
    AliasConditionState       = SOLD DAMAGED NIGHT
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT
    AliasConditionState       = SOLD NIGHT SNOW
    AliasConditionState       = SOLD DAMAGED NIGHT SNOW
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT SNOW
  End
   
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End    
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End   
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:ScudStorm
  Side          = GLAToxinGeneral
  EditorSorting = STRUCTURE

  BuildCost        = 5000
  BuildTime        = 100.0
  EnergyProduction = 0
  CommandSet       = Chem_GLAScudStormCommandSet
  VisionRange      = 200.0
  ShroudClearingRange = 200
  ShroudRevealToAllRange = 60

  Prerequisites
    Object = Chem_GLAPalace
    Science = SCIENCE_CHEM SCIENCE_DEMO SCIENCE_SLTH
    Science = SCIENCE_Rank5
  End

  WeaponSet
    Conditions = None 
    Weapon = SECONDARY Chem_ScudStormWeapon
    AutoChooseSources = SECONDARY NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End

  ExperienceValue     = 175 254 371 533
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction 
  MaxSimultaneousLinkKey = Superweapon

  ; *** AUDIO Parameters ***
  VoiceSelect = ScudStormSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = NoSound ;These aren't playing properly, will revisit (mp) TurretMoveLoopLoud
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY SCORE_CREATE FS_SUPERWEAPON

  Body            = StructureBody ModuleTag_07
    MaxHealth       = 4000.0
    InitialHealth   = 4000.0
    SubdualDamageCap = 4200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleScudStorm
    HoleMaxHealth = 800.0
  End 

  Behavior = AIUpdateInterface ModuleTag_09
  End

  Behavior    = OCLSpecialPower ModuleTag_10
    SpecialPowerTemplate = SuperweaponScudStorm
    OCL                  = SUPERWEAPON_ScudStorm
  End

  Behavior = SpecialPowerCreate ModuleTag_11
  End

  Behavior = DestroyDie ModuleTag_12
  End

  Behavior        = CreateObjectDie ModuleTag_13
    CreationList  = OCL_PoisonFieldMedium
    ExemptStatus  = UNDER_CONSTRUCTION
  End

  Behavior        = FXListDie ModuleTag_14
    DeathFX       = WeaponFX_BombTruckHighExplosiveBioBombDetonation
    ExemptStatus  = UNDER_CONSTRUCTION
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = RadiusDecalUpdate ModuleTag_17
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = FXListDie ModuleTag_19
    DeathFX = FX_BuildingDie
  End

  Behavior = ProductionUpdate ModuleTag_05P
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityContaminationOnOff
    OCL                  = OCL_BuildingContaminationPoisonFieldSelector
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12A
    DeathWeapon   = BombTruckBioBombEffect
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLAAnthraxBeta Chem_Upgrade_GLAAnthraxGamma
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13A
    DeathWeapon   = BombTruckAnthraxBombEffect
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAAnthraxBeta
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_14A
    DeathWeapon   = BombTruckAnthraxGammaBombEffect
    StartsActive  = No
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma
    ConflictsWith =  Upgrade_GLANeutralizers
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15A
    DeathWeapon   = BombTruckAnthraxBombEffectSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAAnthraxBeta Upgrade_GLANeutralizers
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    RequiresAllTriggers = yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16A
    DeathWeapon   = BombTruckAnthraxGammaBombEffectSafe
    StartsActive  = No
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = yes
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_CleanToxins
    DeathWeapon   = HazardFieldCoreWeapon
    StartsActive  = Yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 71.0
  GeometryMinorRadius = 67.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLAPalace

  ; *** ART Parameters ***
  SelectPortrait         = SUPalace_L
  ButtonImage            = SUPalace

  UpgradeCameo1 = Upgrade_GLASpies
  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    
    ; day  
    ConditionState         = NONE
      Model                = UBPalace
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace.UBPalace
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED
      Model                = UBPalace_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_D.UBPalace_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBPalace_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED
      Model                = UBPalace_G
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_G.UBPalace_G
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1
      Model                = UBPalaceEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG.UBPalaceEG
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 GARRISONED
      Model                = UBPalaceEGX
      ParticleSysBone      = Smoke01 SmolderingSmoke
       Animation            = UBPalaceEGX.UBPalaceEGX
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBPalace_DG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DG.UBPalace_DG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1
      Model                = UBPalaceEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_D.UBPalaceEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 GARRISONED
     Model                = UBPalaceEGX_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_D.UBPalaceEGX_D
      AnimationMode        = LOOP
    End
    
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBPalace_EG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1
      Model                = UBPalaceEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 GARRISONED
      Model                = UBPalaceEGX_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ; day snow
    ConditionState         = SNOW
      Model                = UBPalace_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_S.UBPalace_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED SNOW
      Model                = UBPalace_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DS.UBPalace_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED RUBBLE SNOW
      Model                = UBPalace_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED SNOW
      Model                = UBPalace_SG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_SG.UBPalace_SG
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 SNOW
      Model                = UBPalaceEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_S.UBPalaceEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 SNOW GARRISONED
      Model                = UBPalaceEGX_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_S.UBPalaceEGX_S
      AnimationMode        = LOOP
    End
    
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBPalace_DSG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DSG.UBPalace_DSG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 SNOW
      Model                = UBPalaceEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_DS.UBPalaceEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 SNOW GARRISONED
      Model                = UBPalaceEGX_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_DSG.UBPalaceEGX_DS
      AnimationMode        = LOOP
    End
        
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBPalace_ESG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW
      Model                = UBPalaceEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 GARRISONED SNOW
      Model                = UBPalaceEGX_ES
     ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ; night  
    ConditionState         = NIGHT
      Model                = UBPalace_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_N.UBPalace_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED NIGHT
      Model                = UBPalace_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DN.UBPalace_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED RUBBLE NIGHT
      Model                = UBPalace_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
        
    ConditionState         = GARRISONED NIGHT
      Model                = UBPalace_NG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_NG.UBPalace_NG
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 NIGHT
      Model                = UBPalaceEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_N.UBPalaceEG_N
      AnimationMode        = LOOP
    End
    ; commented out until we get the right state (garrison + elite guard)
    ConditionState         = USER_1 NIGHT GARRISONED
      Model                = UBPalaceEGX_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_N.UBPalaceEGX_N
      AnimationMode        = LOOP
    End
        
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBPalace_DGN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DGN.UBPalace_DGN
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 NIGHT
      Model                = UBPalaceEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_DN.UBPalaceEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 NIGHT GARRISONED
      Model                = UBPalaceEGX_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_DN.UBPalaceEGX_DN
      AnimationMode        = LOOP
    End    
    
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBPalace_ENG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 NIGHT
      Model                = UBPalaceEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 NIGHT GARRISONED
      Model                = UBPalaceEGX_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ; night snow
    ConditionState         = SNOW NIGHT
      Model                = UBPalace_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_NS.UBPalace_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED SNOW NIGHT
      Model                = UBPalace_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DNS.UBPalace_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model                = UBPalace_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED SNOW NIGHT
      Model                = UBPalace_GNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_GNS.UBPalace_GNS
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 SNOW NIGHT
      Model                = UBPalaceEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_NS.UBPalaceEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalaceEGX_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_NS.UBPalaceEGX_NS
      AnimationMode        = LOOP
    End

    ConditionState         = DAMAGED GARRISONED SNOW NIGHT
      Model                = UBPalace_DGNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DGNS.UBPalace_DGNS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 SNOW NIGHT
      Model                = UBPalaceEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_DNS.UBPalaceEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalaceEGX_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_DNS.UBPalaceEGX_DNS
      AnimationMode        = LOOP
    End    
    
    ConditionState         = REALLYDAMAGED GARRISONED SNOW NIGHT
      Model                = UBPalace_ENSG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW NIGHT
      Model                = UBPalaceEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalaceEGX_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPalace
      Animation          = UBPalace.UBPalace
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPalace_D
      Animation          = UBPalace_D.UBPalace_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPalace_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPalace_N
      Animation          = UBPalace_N.UBPalace_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPalace_DN
      Animation          = UBPalace_DN.UBPalace_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPalace_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPalace_S
      Animation          = UBPalace_S.UBPalace_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBPalace_DS
      Animation          = UBPalace_DS.UBPalace_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBPalace_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBPalace_NS
      Animation          = UBPalace_NS.UBPalace_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBPalace_DNS
      Animation          = UBPalace_DNS.UBPalace_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBPalace_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED USER_1
    AliasConditionState  = SOLD USER_1
    AliasConditionState  = SOLD DAMAGED USER_1
    AliasConditionState  = SOLD REALLYDAMAGED USER_1
    AliasConditionState  = SOLD NIGHT USER_1
    AliasConditionState  = SOLD NIGHT DAMAGED USER_1
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = SOLD SNOW USER_1
    AliasConditionState  = SOLD SNOW DAMAGED USER_1
    AliasConditionState  = SOLD SNOW REALLYDAMAGED USER_1
    AliasConditionState  = SOLD NIGHT SNOW USER_1
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD USER_1
    AliasConditionState  = GARRISONED SOLD DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD SNOW USER_1
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED USER_1
  End
  PlacementViewAngle = -45

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:Palace
  Side          = GLAToxinGeneral
  EditorSorting = STRUCTURE
  BuildCost        = 2000
  BuildTime        = 40
  EnergyProduction = 0
  VisionRange      = 300
  ShroudClearingRange = 300
  ExperienceValue  = 75 75 75 75

  Prerequisites
    Object = Chem_GLAArmsDealer
    Science = SCIENCE_Rank3
  End

  ArmorSet
    Conditions = None
    Armor      = StructureArmor
    DamageFX   = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = GLAUpgradedStructureArmor
    DamageFX   = StructureDamageFXNoShake
  End
  CommandSet = Chem_GLAPalaceCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = PalaceSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = STRUCTURE
  KindOf        = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY SCORE_CREATE FS_ADVANCED_TECH

  Body          = StructureBody ModuleTag_04
    MaxHealth        = 4000.0
    InitialHealth    = 4000.0
    SubdualDamageCap = 4000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  
  Behavior = GarrisonContain ModuleTag_GARRISON
    ContainMax     = 6
    EnterSound     = GarrisonEnter
    ExitSound      = GarrisonExit
    ImmuneToClearBuildingAttacks  = Yes
  End  
  
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End
  
  Behavior = ProductionUpdate ModuleTag_05
  End

  Behavior = CreateObjectDie ModuleTag_08
    CreationList  = OCL_SmallStructureDebris
  End

  Behavior = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHolePalace
    HoleMaxHealth = 800.0
  End

  Behavior = DestroyDie ModuleTag_07
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior         = SpyVisionUpdate ModuleTag_Spies
    NeedsUpgrade  = Yes
    SelfPowered   = Yes
    SpyOnKindof   = FS_SUPPLY_CENTER
    TriggeredBy   = Upgrade_GLASpies
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityContaminationOnOff
    OCL                  = OCL_BuildingContaminationPoisonFieldSelector
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_CleanToxins
    DeathWeapon   = HazardFieldCoreWeapon
    StartsActive  = Yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 43.0
  GeometryMinorRadius = 58.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
;GLA Barracks
Object Chem_GLABarracks

  ; *** ART Parameters ***
  SelectPortrait         = SUBarracks_L
  ButtonImage            = SUBarracks

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState = NONE
      Model = UBBARRACKS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks.UBBarracks
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBBarracks_D
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_D.UBBarracks_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBBarracks_E
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      Animation     = UBBarracks_E.UBBarracks_E
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBBarrksEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG.UBBarrksEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBarrksEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_D.UBBarrksEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBarrksEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_E.UBBarrksEG_E
      AnimationMode        = LOOP
    End
        
        ; day
    ConditionState = SNOW
      Model = UBBARRACKS_S
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_S.UBBarracks_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBBarracks_DS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_DS.UBBarracks_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBBarracks_ES
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      Animation     = UBBarracks_ES.UBBarracks_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBarrksEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_S.UBBarrksEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DS.UBBarrksEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ES.UBBarrksEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBBARRACKS_N
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_N.UBBarracks_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBBarracks_DN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DN.UBBarracks_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBBarracks_EN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_EN.UBBarracks_EN
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBarrksEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_N.UBBarrksEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DN.UBBarrksEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_EN.UBBarrksEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBBARRACKS_NS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_NS.UBBarracks_NS
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBBarracks_DNS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBBarracks_ENS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_NS.UBBarrksEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DNS.UBBarrksEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ENS.UBBarrksEG_ENS
      AnimationMode        = LOOP
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBarracks
      Animation          = UBBarracks.UBBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBarracks_D
      Animation          = UBBarracks_D.UBBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBarracks_E
      Animation          = UBBarracks_E.UBBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBarracks_N
      Animation          = UBBarracks_N.UBBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBarracks_DN
      Animation          = UBBarracks_DN.UBBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBarracks_EN
      Animation          = UBBarracks_EN.UBBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBarracks_S
      Animation          = UBBarracks_S.UBBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBarracks_DS
      Animation          = UBBarracks_DS.UBBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBarracks_ES
      Animation          = UBBarracks_ES.UBBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBarracks_NS
      Animation          = UBBarracks_NS.UBBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBarracks_DNS
      Animation          = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBarracks_ENS
      Animation          = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED

  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Barracks
  Side             = GLAToxinGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 800
  BuildTime        = 16
  EnergyProduction = 0
  CommandSet       = Chem_GLABarracksCommandSet
  VisionRange      = 200
  ShroudClearingRange = 200
  ExperienceValue  = 75 75 75 75

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = GLAUpgradedStructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE HEAL_PAD CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE FS_BARRACKS

  Body            = StructureBody ModuleTag_04
    MaxHealth     = 1600.0
    InitialHealth = 1600.0
    SubdualDamageCap = 1600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = HealContain ModuleTag_05
    ContainMax          = 10 ;way bigger than the # of objects we can have  
    TimeForFullHeal     = 2000   ;(in milliseconds)
    AllowInsideKindOf   = INFANTRY
    AllowAlliesInside   = Yes
    AllowNeutralInside  = No
    AllowEnemiesInside  = No
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHoleBarracks
    HoleMaxHealth = 800.0
  End

  Behavior = DestroyDie ModuleTag_07
  End

  Behavior        = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior        = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 42.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ;-------------DESIGNED FOR SMALL MEDIUM FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityContaminationOnOff
    OCL                  = OCL_BuildingContaminationPoisonFieldSelector
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_CleanToxins
    DeathWeapon   = HazardFieldCoreWeapon
    StartsActive  = Yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 42.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_FakeGLABarracks

  ; *** ART Parameters ***
  SelectPortrait         = SUBarracks_L
  ButtonImage            = SUBarracks

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState = NONE
      Model = UBBARRACKS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks.UBBarracks
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBBarracks_D
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_D.UBBarracks_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBBarracks_E
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_E.UBBarracks_E
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBBarrksEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG.UBBarrksEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBarrksEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_D.UBBarrksEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBarrksEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_E.UBBarrksEG_E
      AnimationMode        = LOOP
    End
        
        ; day
    ConditionState = SNOW
      Model = UBBARRACKS_S
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_S.UBBarracks_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBBarracks_DS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_DS.UBBarracks_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBBarracks_ES
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_ES.UBBarracks_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBarrksEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_S.UBBarrksEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DS.UBBarrksEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ES.UBBarrksEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBBARRACKS_N
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_N.UBBarracks_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBBarracks_DN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DN.UBBarracks_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBBarracks_EN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_EN.UBBarracks_EN
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBarrksEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_N.UBBarrksEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DN.UBBarrksEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_EN.UBBarrksEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBBARRACKS_NS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_NS.UBBarracks_NS
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBBarracks_DNS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBBarracks_ENS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_NS.UBBarrksEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DNS.UBBarrksEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ENS.UBBarrksEG_ENS
      AnimationMode        = LOOP
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBarracks
      Animation          = UBBarracks.UBBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBarracks_D
      Animation          = UBBarracks_D.UBBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBarracks_E
      Animation          = UBBarracks_E.UBBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBarracks_N
      Animation          = UBBarracks_N.UBBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBarracks_DN
      Animation          = UBBarracks_DN.UBBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBarracks_EN
      Animation          = UBBarracks_EN.UBBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBarracks_S
      Animation          = UBBarracks_S.UBBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBarracks_DS
      Animation          = UBBarracks_DS.UBBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBarracks_ES
      Animation          = UBBarracks_ES.UBBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBarracks_NS
      Animation          = UBBarracks_NS.UBBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBarracks_DNS
      Animation          = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBarracks_ENS
      Animation          = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED

  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Barracks
  Side             = GLAToxinGeneral
  EditorSorting    = STRUCTURE

  BuildCost        = 200
  BuildTime        = 5.0
  EnergyProduction = 0
  CommandSet       = FakeGLABarracksCommandSet
  VisionRange      = 200.0
  ShroudClearingRange = 200

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions      = None
    Armor           = FakeStructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue   = 0 0 0 0

  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE

  Body            = StructureBody ModuleTag_04
    MaxHealth     = 125.0
    InitialHealth = 125.0
    SubdualDamageCap = 325
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_06
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior        = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior        = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ;-------------DESIGNED FOR SMALL MEDIUM FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = SlowDeathBehavior ModuleTag_13
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeaponBarracks
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_14
    ReplaceObject = Chem_GLABarracks
    TriggeredBy = Upgrade_BecomeRealGLABarracks
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Geometry            = BOX
  GeometryMajorRadius = 42.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 120
  ShadowSizeY = 110
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLAArmsDealer

  ; *** ART Parameters ***
  SelectPortrait         = SUArmsDealer_L
  ButtonImage            = SUArmsDealer

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  ; ----------------- Main Building -------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState       = NONE
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED
      Model           = UBArmDeal_D
      Animation       = UBArmDeal_D.UBArmDeal_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_E
      Animation       = UBArmDeal_E.UBArmDeal_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
     End
    ConditionState         = GARRISONED
      Model                = UBArmDlEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG.UBArmDlEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBArmDlEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_D.UBArmDlEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBArmDlEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_E.UBArmDlEG_E
      AnimationMode        = LOOP
    End

    ; snow
    ConditionState       = SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED SNOW
      Model           = UBArmDeal_DS
      Animation       = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBArmDeal_ES
      Animation       = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
     End
    ConditionState         = GARRISONED SNOW
      Model                = UBArmDlEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_S.UBArmDlEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DS.UBArmDlEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ES.UBArmDlEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT
      Model           = UBArmDeal_N
      Animation       = UBArmDeal_N.UBArmDeal_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBArmDeal_DN
      Animation       = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBArmDeal_EN
      Animation       = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBArmDlEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_N.UBArmDlEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DN.UBArmDlEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_EN.UBArmDlEG_EN
      AnimationMode        = LOOP
    End
     
     ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBArmDeal_NS
      Animation       = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBArmDeal_DNS
      Animation       = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBArmDeal_ENS
      Animation       = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_NS.UBArmDlEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DNS.UBArmDlEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ENS.UBArmDlEG_ENS
      AnimationMode        = LOOP
    End
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_D
      Animation          = UBArmDeal_D.UBArmDeal_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_E
      Animation          = UBArmDeal_E.UBArmDeal_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBArmDeal_N
      Animation          = UBArmDeal_N.UBArmDeal_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBArmDeal_DN
      Animation          = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBArmDeal_EN
      Animation          = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBArmDeal_DS
      Animation          = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBArmDeal_ES
      Animation          = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBArmDeal_NS
      Animation          = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBArmDeal_DNS
      Animation          = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBArmDeal_ENS
      Animation          = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ----------------- the door -----------------------
  Draw = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_CLOSING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
       

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End
  
  PlacementViewAngle  = -135
  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ArmsDealer
  Side             = GLAToxinGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 2000
  BuildTime        = 40
  EnergyProduction = 0
  CommandSet       = Chem_GLAArmsDealerCommandSet
  VisionRange     = 200
  ShroudClearingRange = 200
  ExperienceValue  = 100 100 100 100

  Prerequisites
    Object = Chem_GLABarracks
  End

  ArmorSet
    Conditions          = None
    Armor               = StructureArmor
    DamageFX            = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD CAPTURABLE FS_TECHNOLOGY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FACTORY FS_WARFACTORY

  Body              = StructureBody ModuleTag_05
    MaxHealth       = 5000.0
    InitialHealth   = 5000.0
    SubdualDamageCap = 5000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHoleArmsDealer
    HoleMaxHealth = 800.0
  End 

  Behavior             = DestroyDie ModuleTag_07
  End

  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
    NumDoorAnimations            = 1
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X: -20.0  Y:-15.0   Z:0.0
    NaturalRallyPoint = X: 40.0  Y:-15.0   Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = RepairDockUpdate ModuleTag_12
    TimeForFullHeal   = 5000   ;(in milliseconds)     
    NumberApproachPositions = 5
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityContaminationOnOff
    OCL                  = OCL_BuildingContaminationPoisonFieldSelector
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_CleanToxins
    DeathWeapon   = HazardFieldCoreWeapon
    StartsActive  = Yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 62.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_FakeGLAArmsDealer

  ; *** ART Parameters ***
  SelectPortrait         = SUArmsDealer_L
  ButtonImage            = SUArmsDealer

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  ; ----------------- Main Building -------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState       = NONE
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED
      Model           = UBArmDeal_D
      Animation       = UBArmDeal_D.UBArmDeal_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_E
      Animation       = UBArmDeal_E.UBArmDeal_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
     End
    ConditionState         = GARRISONED
      Model                = UBArmDlEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG.UBArmDlEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBArmDlEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_D.UBArmDlEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBArmDlEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_E.UBArmDlEG_E
      AnimationMode        = LOOP
    End

    ; snow
    ConditionState       = SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED SNOW
      Model           = UBArmDeal_DS
      Animation       = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBArmDeal_ES
      Animation       = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
     End
    ConditionState         = GARRISONED SNOW
      Model                = UBArmDlEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_S.UBArmDlEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DS.UBArmDlEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ES.UBArmDlEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT
      Model           = UBArmDeal_N
      Animation       = UBArmDeal_N.UBArmDeal_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBArmDeal_DN
      Animation       = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBArmDeal_EN
      Animation       = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBArmDlEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_N.UBArmDlEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DN.UBArmDlEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_EN.UBArmDlEG_EN
      AnimationMode        = LOOP
    End
     
     ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBArmDeal_NS
      Animation       = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBArmDeal_DNS
      Animation       = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBArmDeal_ENS
      Animation       = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_NS.UBArmDlEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DNS.UBArmDlEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ENS.UBArmDlEG_ENS
      AnimationMode        = LOOP
    End
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_D
      Animation          = UBArmDeal_D.UBArmDeal_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_E
      Animation          = UBArmDeal_E.UBArmDeal_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBArmDeal_N
      Animation          = UBArmDeal_N.UBArmDeal_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBArmDeal_DN
      Animation          = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBArmDeal_EN
      Animation          = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBArmDeal_DS
      Animation          = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBArmDeal_ES
      Animation          = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBArmDeal_NS
      Animation          = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBArmDeal_DNS
      Animation          = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBArmDeal_ENS
      Animation          = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED

    
 
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ----------------- the door -----------------------
  Draw = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_CLOSING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
       

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End
  
  PlacementViewAngle  = -135
  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ArmsDealer
  Side             = GLAToxinGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 500
  BuildTime        = 10.0
  EnergyProduction = 0
  CommandSet       = FakeGLAArmsDealerCommandSet
  VisionRange     = 200.0
  ShroudClearingRange = 200

  Prerequisites
    Object = Chem_GLABarracks
  End

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions          = None
    Armor               = FakeStructureArmor
    DamageFX            = StructureDamageFXNoShake
  End

  ExperienceValue     = 0 0 0 0

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 500.0
    InitialHealth   = 500.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  
  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End
  Behavior = AIUpdateInterface ModuleTag_10
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = ProductionUpdate ModuleTag_11
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeaponArmsDealer
  End

  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = Chem_GLAArmsDealer
    TriggeredBy = Upgrade_BecomeRealGLAArmsDealer
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 62.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 127
  ShadowSizeY = 144
  BuildCompletion     = PLACED_BY_PLAYER
End

;----------------------------------------------------------------------------
Object Chem_GLAInfantryJarmenKell

  ; *** ART Parameters ***
  SelectPortrait  = SUJermanKell1_L
  ButtonImage     = SUJermanKell1
  
  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo2 = Upgrade_GLANeutralizers  

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; --- idle
    DefaultConditionState
      Model             = UIHERO_SKN
      IdleAnimation     = UIHERO_SKL.UIHERO_STA 0 21
      IdleAnimation     = UIHERO_SKL.UIHERO_IDA
      IdleAnimation     = UIHERO_SKL.UIHERO_IDB
      AnimationMode     = ONCE
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey     = TRANS_Stand
    End

    ConditionState      = REALLYDAMAGED
      IdleAnimation     = UIHERO_SKL.UIHERO_ISTA 0 30
      IdleAnimation     = UIHERO_SKL.UIHERO_IIDA
      IdleAnimation     = UIHERO_SKL.UIHERO_IIDB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = UIHERO_SKL.UIHERO_ISTAHIT
      AnimationMode     = ONCE
    End

    ; --- attack

    ConditionState      = FIRING_A 
      Animation         = UIHERO_SKL.UIHERO_ATA 
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringA
      AnimationSpeedFactorRange = 1.5 1.5
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = UIHERO_SKL.UIHERO_STA
      AnimationMode     = ONCE
      WaitForStateToFinishIfPossible = TRANS_FiringA
    End
    AliasConditionState = RELOADING_A
  
    ConditionState      = FIRING_A REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IATA2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringAInjured
      AnimationSpeedFactorRange = 1.5 1.5
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IATA2
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      WaitForStateToFinishIfPossible = TRANS_FiringAInjured
    End
    AliasConditionState = RELOADING_A REALLYDAMAGED

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = UIHERO_SKL.UIHERO_IATAHIT
      AnimationMode     = ONCE
    End

    ; --- moving
    ConditionState      = MOVING
      Animation         = UIHERO_SKL.UIHERO_RNA2 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ConditionState      = MOVING REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IRNA 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING FIRING_A REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_A REALLYDAMAGED
    
    ; --- cheering
    ConditionState      = SPECIAL_CHEERING
      Animation         = UIHERO_SKL.UIHERO_CHA
      AnimationMode     = LOOP
    End

    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_ICHA
      AnimationMode     = LOOP
    End
    
    ; --- dying
    ConditionState      = DYING
      Animation         = UIHERO_SKL.UIHERO_DTA
      Animation         = UIHERO_SKL.UIHERO_DTB
      Animation         = UIHERO_SKL.UIHERO_IDTA
      Animation         = UIHERO_SKL.UIHERO_IDTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = UIHERO_SKL.UIHERO_ADTG21
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = UIHERO_SKL.UIHERO_ADTG22
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = UIHERO_SKL.UIHERO_ADTG23
      AnimationMode     = ONCE
      TransitionKey     = None
      ParticleSysBone   = None BloodPoolGrowing00
    End
    
    ; --- falling
    ConditionState      = FREEFALL
      Animation         = UIHERO_SKL.UIHERO_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = UIHERO_SKL.UIHERO_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = UIHERO_SKL.UIHERO_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = UIHERO_SKL.UIHERO_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = UIHERO_SKL.UIHERO_PTD
      AnimationMode     = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:JarmenKell
  Side                  = GLAToxinGeneral
  EditorSorting         = INFANTRY
  TransportSlotCount    = 1
  MaxSimultaneousOfType = 1

  VisionRange         = 200
  ShroudClearingRange = 300
  BuildCost = 2000
  BuildTime = 20.0

  Prerequisites
    Object = Chem_GLABarracks
    Object = Chem_GLAPalace
    Science = SCIENCE_CHEM SCIENCE_DEMO SCIENCE_ASLT SCIENCE_SLTH
  End

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GLAJarmenKellRifleBeta
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    AutoChooseSources = SECONDARY NONE
    PreferredAgainst = SECONDARY HUGE_VEHICLE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY GLAJarmenKellRifleGamma
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    AutoChooseSources = SECONDARY NONE
    PreferredAgainst = SECONDARY HUGE_VEHICLE
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End

  ExperienceValue     = 52 69 92 122
  ExperienceRequired  = 0 155 206 275
  IsTrainable         = Yes
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Chem_GLAInfantryJarmenKellCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = JarmenKellVoiceSelect
  VoiceMove = JarmenKellVoiceMove
  VoiceGuard = JarmenKellVoiceMove
  VoiceAttack = JarmenKellVoiceAttack
  VoiceFear = JarmenKellVoiceFear
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate          = JarmenKellVoiceCreate
    VoiceSnipePilot      = JarmenKellVoiceSnipe
    VoiceGarrison = JarmenKellVoiceGarrison
    VoiceEnter = JarmenKellVoiceMove
    VoiceEnterHostile = JarmenKellVoiceMove
    VoiceGetHealed      = JarmenKellVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER STEALTH_GARRISON SCORE HERO CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL JarmenKellLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 24.0
  End
  Behavior = StealthUpdate ModuleTag_06
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = ATTACKING
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent      = EnemyJarmenKellDetected
    OwnDetectionEvaEvent        = OwnJarmenKellDetected
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_07 ; allows use of command button hunt script with this unit. 
  End

  ; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_JarmenKellDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_JarmenKellDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantryGLA
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_JarmenKellDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = SpecialAbility ModuleTag_Ability07
    SpecialPowerTemplate = SpecialAbilityColonelBurtonTimedCharges
    UpdateModuleStartsAttack = Yes
  End
  Behavior = SpecialAbilityUpdate ModuleTag_Ability08
    SpecialPowerTemplate = SpecialAbilityColonelBurtonTimedCharges
    StartAbilityRange = 0.0
    PreparationTime = 0
    SpecialObject = TimedToxinCharge
    MaxSpecialObjects = 10
    SpecialObjectsPersistWhenOwnerDies = Yes 
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
    UnpackTime              = 5500          ;NOTE: Modifying this value will require modifying the delay for ColonelBurtonPlantCharge
    FlipOwnerAfterUnpacking = Yes
    FleeRangeAfterCompletion = 100.0         ;Runs away after finishing ability
    UnpackSound               = ColonelBurtonPlantCharge
    LoseStealthOnTrigger      = Yes
    PreTriggerUnstealthTime   = 5000 ; in milliseconds
    AwardXPForTriggering  = 25
  End
  Behavior = SpecialAbility ModuleTag_Ability07A
    SpecialPowerTemplate = Demo_SpecialAbilityDemoKellTimedCharges
    UpdateModuleStartsAttack = Yes
  End
  Behavior = SpecialAbilityUpdate ModuleTag_Ability08A
    SpecialPowerTemplate = Demo_SpecialAbilityDemoKellTimedCharges
    StartAbilityRange = 0.0
    PreparationTime = 0
    SpecialObject = TimedAcidCharge
    MaxSpecialObjects = 10
    SpecialObjectsPersistWhenOwnerDies = Yes 
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
    UnpackTime              = 5500          ;NOTE: Modifying this value will require modifying the delay for ColonelBurtonPlantCharge
    FlipOwnerAfterUnpacking = Yes
    FleeRangeAfterCompletion = 100.0         ;Runs away after finishing ability
    UnpackSound               = ColonelBurtonPlantCharge
    LoseStealthOnTrigger      = Yes
    PreTriggerUnstealthTime   = 5000 ; in milliseconds
    AwardXPForTriggering  = 25
  End

  Behavior = WeaponSetUpgrade UpgradeTag_Weapon01
    TriggeredBy = Chem_Upgrade_GLAAnthraxGamma
  End

  Behavior = OCLSpecialPower ModuleTag_Salvage1
    SpecialPowerTemplate = SpecialPowerJKSalvage
    OCL   = SUPERWEAPON_JKSalvage
    CreateLocation  = CREATE_AT_LOCATION
  End
 
  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Chem_GLAInfantryTunnelDefender

  ; *** ART Parameters ***
  SelectPortrait  = SUToxinRPG_L
  ButtonImage     = SUToxinRPG

  UpgradeCameo1 = Upgrade_GLAChemicalWarheads
  UpgradeCameo2 = Upgrade_GLASulfurAcid
  UpgradeCameo3 = Upgrade_GLANeutralizers

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UITunF_SKN
      IdleAnimation = UITunF_SKL.UITunF_STA 0 20
      IdleAnimation = UITunF_SKL.UITunF_IDA 
      IdleAnimation = UITunF_SKL.UITunF_IDB 
      IdleAnimation = UITunF_SKL.UITunF_IDC 
      AnimationMode = ONCE
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponFireFXBone = SECONDARY Muzzle
      WeaponLaunchBone = SECONDARY Muzzle
    End

    ConditionState = MOVING
      Animation = UITunF_SKL.UITunF_WKA 16
      Animation = UITunF_SKL.UITunF_WKB 30
      Animation = UITunF_SKL.UITunF_WKC 30
      Animation = UITunF_SKL.UITunF_RNA 15
      Animation = UITunF_SKL.UITunF_RNB 25   
      AnimationMode = LOOP
      ParticleSysBone   = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = UITunF_SKL.UITunF_DTA 
      Animation = UITunF_SKL.UITunF_DTB 
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UITunF_SKL.UITunF_ADTA1
      Animation = UITunF_SKL.UITunF_ADTE1
      Animation = UITunF_SKL.UITunF_ADTF1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UITunF_SKL.UITunF_ADTA2
      Animation = UITunF_SKL.UITunF_ADTE2
      Animation = UITunF_SKL.UITunF_ADTF2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UITunF_SKL.UITunF_ADTA3
      Animation = UITunF_SKL.UITunF_ADTE3
      Animation = UITunF_SKL.UITunF_ADTF3
      AnimationMode = ONCE
      TransitionKey = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ConditionState = FIRING_A 
      Animation = UITunF_SKL.UITunF_ATA 
      AnimationMode = ONCE
      TransitionKey = TRANS_START_FIRING
    End
    AliasConditionState = FIRING_B
    ConditionState = BETWEEN_FIRING_SHOTS_A
      Animation = UITunF_SKL.UITunF_STA
      AnimationMode = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_B
    AliasConditionState = RELOADING_A
    AliasConditionState = RELOADING_B

    ConditionState = SPECIAL_CHEERING
      Animation = UITUNF_SKL.UITUNF_CHA
      AnimationMode = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelDefender
  Side = GLAToxinGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1
  VisionRange         = 190
  ShroudClearingRange = 200
  BuildCost = 300
  BuildTime = 3.0

  WeaponSet
    Conditions  = None 
    Weapon      = PRIMARY  Chem_TunnelDefenderRocketWeapon
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End

  ExperienceValue    = 13 18 27 38
  ExperienceRequired = 0 38 55 80
  IsTrainable = Yes
  CrushableLevel  = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ToxinRPGTrooperVoiceSelect
  VoiceMove = RPGTrooperVoiceMove
  VoiceGuard = RPGTrooperVoiceMove
  VoiceAttack = ToxinRPGTrooperVoiceAttack
  VoiceFear = RPGTrooperVoiceFear
  UnitSpecificSounds
    VoiceCreate       = ToxinRPGTrooperVoiceCreate
    VoiceGarrison     = RPGTrooperVoiceGarrison
    VoiceEnter        = RPGTrooperVoiceMove
    VoiceEnterHostile = RPGTrooperVoiceMove
    VoiceGetHealed    = RPGTrooperVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 24.0
  End
 
  Behavior = SquishCollide ModuleTag_06
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_RPGTrooperDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_RPGTrooperDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantryGLA
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_RPGTrooperDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_12
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = WeaponBonusUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_GLAChemicalWarheads
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Chem_GLAInfantryStingerSoldier

  ; *** ART Parameters ***
  SelectPortrait = SUStingrSold_L
  ButtonImage    = SUStingrSold

  UpgradeCameo1 = Upgrade_GLAChemicalWarheads
  UpgradeCameo2 = Upgrade_SiliconWarheads
  UpgradeCameo3 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo4 = Upgrade_GLANeutralizers
  UpgradeCameo5 = Upgrade_GLACamouflage

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UISmsd_SKN
      IdleAnimation = UISmsd_SKL.UISmsd_STA 0 45
      IdleAnimation = UISmsd_SKL.UISmsd_IDA 
      IdleAnimation = UISmsd_SKL.UISmsd_IDB 
      IdleAnimation = UISmsd_SKL.UISmsd_IDC 
      IdleAnimation = UISmsd_SKL.UISmsd_IDD 
      AnimationMode = ONCE
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = PRIMARY Exhaust
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY Exhaust
      WeaponLaunchBone = SECONDARY Muzzle
    End

    ConditionState = MOVING
      Animation = UISmsd_SKL.UISmsd_WKB 25
      AnimationMode = LOOP
      ParticleSysBone   = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = UISmsd_SKL.UISmsd_DTA 
      Animation = UISmsd_SKL.UISmsd_DTB 
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UISmsd_SKL.UISmsd_ADTF1
      Animation = UISmsd_SKL.UISmsd_ADTG21
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UISmsd_SKL.UISmsd_ADTF2
      Animation = UISmsd_SKL.UISmsd_ADTG22
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UISmsd_SKL.UISmsd_ADTF3
      Animation = UISmsd_SKL.UISmsd_ADTG23
      AnimationMode = ONCE
      TransitionKey = None
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ConditionState = FIRING_A 
      Animation = UISmsd_SKL.UISmsd_ATA
      AnimationMode = ONCE
      TransitionKey = TRANS_START_FIRING
    End
    ConditionState = BETWEEN_FIRING_SHOTS_A
      Animation = UISmsd_SKL.UISmsd_STA
      AnimationMode = ONCE
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = RELOADING_A

    ConditionState = SPECIAL_CHEERING
      Animation = UISMSD_SKL.UISMSD_CHA
      AnimationMode = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:StingerSoldier
  Side = GLAToxinGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1
  BuildCost = 300
  BuildTime = 3.0

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY   StingerSoldierMissileWeapon
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    Weapon              = SECONDARY StingerMissileWeaponAir
    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End

  VisionRange = 250.0
  ShroudClearingRange = 250

  Prerequisites
    Object = Chem_GLABarracks
  End

  ExperienceValue    = 13 18 27 38
  ExperienceRequired = 0 38 55 80
  IsTrainable = Yes
  CrushableLevel  = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  CommandSet      = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RPGTrooperVoiceSelect
  VoiceMove = RPGTrooperVoiceMove
  VoiceGuard = RPGTrooperVoiceMove
  VoiceAttack = RPGTrooperVoiceAttack
  VoiceFear = RPGTrooperVoiceFear
  UnitSpecificSounds
    VoiceCreate          = RPGTrooperVoiceCreate
    VoiceGarrison = RPGTrooperVoiceGarrison
    VoiceEnter = RPGTrooperVoiceMove
    VoiceEnterHostile = RPGTrooperVoiceMove
    VoiceGetHealed      = RPGTrooperVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 24.0
  End
 
  Behavior = SquishCollide ModuleTag_06
  End

  ; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_StingerSoldierDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_StingerSoldierDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantryGLA
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_StingerSoldierDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100
    PoisonDuration = 3000
  End

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate     = 500
    DetectionRange   =  150
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraRequiredKindOf = AIRCRAFT
  End
  
  Behavior = StealthUpdate ModuleTag_Stealth
    StealthDelay                = 5000
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End
  Behavior = StealthUpgrade ModuleTag_Camo
    TriggeredBy = Upgrade_GLACamouflage
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Chem_GLAInfantryTerrorist

  ; *** ART Parameters ***
  SelectPortrait  = SUTerrorist_L
  ButtonImage     = SUTerrorist
   
  UpgradeCameo1 = Upgrade_GLABombTruckBioBomb
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Upgrade_GLANeutralizers

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = UITRST_SKN
      IdleAnimation = UITRST_SKL.UITRST_STA 0 25
      ;Regular spice animations
      IdleAnimation = UITRST_SKL.UITRST_IDA
      IdleAnimation = UITRST_SKL.UITRST_IDB
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End

    ConditionState = REALLYDAMAGED
      Animation = UITRST_SKL.UITRST_STA
      AnimationMode = LOOP
      TransitionKey = TRANS_Stand
    End

    ConditionState = FREEFALL
      Animation = UITRST_SKL.UITRST_PFL
      AnimationMode = LOOP
      TransitionKey = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState = PARACHUTING
      Animation = UITRST_SKL.UITRST_PHG
      AnimationMode = LOOP
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    ConditionState = MOVING
      Animation = UITRST_SKL.UITRST_RNA 15
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING REALLYDAMAGED

    ConditionState = ATTACKING MOVING
      Animation = UITRST_SKL.UITRST_RNB 10
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
    End
    AliasConditionState = ATTACKING MOVING REALLYDAMAGED

    ConditionState = PREATTACK_A
      Animation = UITRST_SKL.UITRST_ATA
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A MOVING
 
    ConditionState = DYING
      Animation = UITRST_SKL.UITRST_DTA
      Animation = UITRST_SKL.UITRST_DTC
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UITRST_SKL.UITRST_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UITRST_SKL.UITRST_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UITRST_SKL.UITRST_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ConditionState = SPECIAL_CHEERING
      Animation = UITRST_SKL.UITRST_CHA
      AnimationMode = LOOP
    End

    TransitionState = TRANS_Falling TRANS_Chute
      Animation = UITRST_SKL.UITRST_POP
      AnimationMode = ONCE
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME
    End

    TransitionState = TRANS_Chute TRANS_Stand
      Animation = UITRST_SKL.UITRST_PTD
      AnimationMode = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Terrorist
  Side = GLAToxinGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1
  VisionRange = 150
  ShroudClearingRange = 200
  BuildCost = 225
  BuildTime = 2.25

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TerroristSuicideWeapon 
    Weapon = TERTIARY TerroristForceDesignationWeapon
    PreferredAgainst = TERTIARY INFANTRY VEHICLE
  End

  ArmorSet
    Conditions      = None
    Armor           = ChemReb_HumanArmor
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Chem_GLABarracks
  End

  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAInfantryTerroristCommandSet

  ExperienceValue = 8 12 18 25
  IsTrainable = No

  ; *** AUDIO Parameters ***
  VoiceSelect = TerroristVoiceSelect
  VoiceMove = TerroristVoiceMove
  VoiceAttack = TerroristVoiceAttack
  VoiceFear = TerroristVoiceFear
  VoiceGuard = TerroristVoiceMove
  UnitSpecificSounds
    VoiceGarrison      = TerroristVoiceMove
    VoiceCreate        = TerroristVoiceCreate
    VoiceEnter         = TerroristVoiceEnter
    VoiceEnterHostile  = TerroristVoiceEnterHostile
    VoiceGetHealed     = TerroristVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
    SubdualDamageCap = 120
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 20
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate = 100
  End
  Behavior = CommandButtonHuntUpdate  ModuleTag_CBH01
  End

  Locomotor = SET_NORMAL FastHumanLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 24.0
  End

  Behavior = ConvertToCarBombCrateCollide ModuleTag_06
    RequiredKindOf    = VEHICLE
    FXList            = FX_MakeCarBombSuccess
  End
 
  Behavior = SquishCollide ModuleTag_07
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL  -SUICIDED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1
    DestructionDelay    = 20000
    FX                  = INITIAL FX_TerroristDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_TerroristDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End

  ; -------- Deaths:
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
    DeathWeapon   = SuicideDynamitePack
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLABombTruckBioBomb
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = Chem_SuicideWeapon
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb
    ConflictsWith = Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13
    DeathWeapon   = Chem_SuicideWeaponBeta
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLAAnthraxBeta
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_14
    DeathWeapon   = Chem_SuicideWeaponGamma
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Chem_Upgrade_GLAAnthraxGamma
    ConflictsWith = Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15
    DeathWeapon   = Chem_SuicideWeaponBetaSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLAAnthraxBeta Upgrade_GLANeutralizers
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
    DeathWeapon   = Chem_SuicideWeaponGammaSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_20
    PoisonDamageInterval = 100
    PoisonDuration = 3000
  End
 
  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Chem_GLAInfantryAngryMobNexus

  ;**** ART Parameters **************************
  SelectPortrait         = SUAngryMob_L
  ButtonImage            = SUAngryMob
  
  UpgradeCameo1 = Upgrade_GLAArmTheMob
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = None
    End
  End

  ;****DESIGN parameters **************************
  DisplayName      = OBJECT:AngryMobNexus
  Side = GLAToxinGeneral
  RadarPriority       = NOT_ON_RADAR
  EditorSorting   = INFANTRY
  TransportSlotCount = 0
  BuildCost       = 800
  BuildTime       = 8.0
  VisionRange     = 150
  ShroudClearingRange = 0

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GLAAngryMobNexusHarmlessWeapon
    Weapon = SECONDARY GLAAngryMobNexusHarmlessWeapon
    Weapon = TERTIARY GLAAngryMobNexusHarmlessWeapon
  End

  ArmorSet
    Conditions      = None
    Armor           = InvulnerableAllArmor
    DamageFX        = None
  End

  Prerequisites
    Object = Chem_GLABarracks
    Object = Chem_GLAPalace
  End

  ExperienceValue    = 5 5 5 5 ;Experience point value at each level
  IsTrainable     = No

  CommandSet    = GenericCommandSet

  ;**** AUDIO Parameters *****************************
  VoiceSelect = AngryMobVoiceSelect
  VoiceMove = AngryMobVoiceMove
  VoiceGuard = AngryMobVoiceMove
  VoiceAttack = AngryMobVoiceAttack
  SoundMoveStart = NoSound
  SoundAmbient = AngryMobAmbientLoop
  SoundAmbientRubble = NoSound
  UnitSpecificSounds
    VoiceCreate          = AngryMobVoiceCreate
  End


;**** ENGINEERING Parameters ******************************

  RadarPriority = UNIT
  KindOf = PRELOAD CAN_ATTACK INFANTRY MOB_NEXUS ATTACK_NEEDS_LINE_OF_SIGHT NO_COLLIDE SELECTABLE SCORE
  Body = ImmortalBody ModuleTag_02
    MaxHealth       = 99999.0
    InitialHealth   = 99999.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!
  Locomotor = SET_WANDER AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!
  Locomotor = SET_PANIC AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior            = SpawnBehavior ModuleTag_05
    SpawnNumber       = 10
    SpawnReplaceDelay = 30000 ; 30 seconds

        SpawnTemplateName = GLAInfantryAngryMobPistol01 ; Aladdin
        SpawnTemplateName = GLAInfantryAngryMobRock02 ; Woman in the Gypsy Costume
        SpawnTemplateName = GLAInfantryAngryMobMolotov02 ; The Lady with the hot sauce
        SpawnTemplateName = GLAInfantryAngryMobPistol03 ; Skinny Guy with the Green Beret
        SpawnTemplateName = GLAInfantryAngryMobRock04 ; Fat guy with the tank top
        SpawnTemplateName = GLAInfantryAngryMobMolotov02 ; The Lady with the hot sauce
        SpawnTemplateName = GLAInfantryAngryMobPistol05 ; The robed dude with the Man-Veil

    ExitByBudding = Yes;!

    InitialBurst = 5 ; the first set of 5 will not delay
    OneShot     = No
    AggregateHealth = Yes
    SlavesHaveFreeWill = No
  End

  Behavior = QueueProductionExitUpdate ModuleTag_06
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 0.0  Y:  0.0   Z:0.0
    ExitDelay     = 5000 ; 5 sec
    InitialBurst = 5 ; the first set of 5 will not delay
  End

  Behavior = DestroyDie ModuleTag_07
    DeathTypes = ALL
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 1.0
  GeometryMinorRadius = 1.0
  GeometryHeight = 1.0     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object Chem_GLAInfantryWorker

  ; *** ART Parameters ***
  SelectPortrait = SUWorker_L
  ButtonImage    = SUWorker
  
  UpgradeCameo1 = Upgrade_GLAWorkerShoes
  UpgradeCameo2 = Upgrade_GLANeutralizers

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model         = UIWRKR_SKN
      IdleAnimation = UIWRKR_SKL.UIWRKR_STA 0 9
      IdleAnimation = UIWRKR_SKL.UIWRKR_IDA
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End

    ConditionState  = MOVING
      Animation     = UIWRKR_SKL.UIWRKR_RNA 16
      AnimationMode = LOOP
      Flags         = RANDOMSTART
      TransitionKey = TRANS_Moving
      ParticleSysBone = None InfantryDustTrails
    End
    ; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
    ; since we flip the bit once we get pretty close to the target. but it looks
    ; funky to do the construction animation while moving. 
    ; so just use the normal move animation in that case.
    AliasConditionState = ACTIVELY_CONSTRUCTING MOVING

    ConditionState = ATTACKING
      ShowSubObject = MINED_SKIN
      Animation = UIWRKR_SKL.UIWRKR_MS
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_MetalDetector_Standing
    End

    ConditionState = MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation = UIWRKR_SKL.UIWRKR_MSW 50
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_MetalDetector_Moving
      ParticleSysBone = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING CARRYING

    TransitionState = TRANS_Stand TRANS_MetalDetector_Standing    ;STANDING -> ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Stand    ;ATTACKING -> STANDING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away standing
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Carry TRANS_MetalDetector_Standing    ;CARRYING -> ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Carry    ;ATTACKING -> CARRYING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_Carry TRANS_MetalDetector_Moving      ;CARRYING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_MetalDetector_Moving TRANS_Stand      ;MOVING ATTACKING -> STANDING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away moving
      AnimationMode = ONCE
    End
    TransitionState = TRANS_Stand TRANS_MetalDetector_Moving      ;STANDING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_Moving TRANS_MetalDetector_Standing   ;MOVING -> ATTACKING [STANDING]
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Moving   ;ATTACKING [STANDING] -> MOVING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_Moving TRANS_MetalDetector_Moving     ;MOVING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End
    TransitionState = TRANS_MetalDetector_Moving TRANS_Moving     ;MOVING ATTACKING -> MOVING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End


    ConditionState = MOVING CARRYING
      ShowSubObject = BOX
      Animation = UIWRKR_SKL.UIWRKR_CARY 12
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Carry
      ParticleSysBone = None InfantryDustTrails
    End
    ; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
    ; since we flip the bit once we get pretty close to the target. but it looks
    ; funky to do the construction animation while moving. 
    ; so just use the normal move animation in that case.
    AliasConditionState = ACTIVELY_CONSTRUCTING MOVING CARRYING

    ConditionState = CARRYING
      ShowSubObject = BOX
      Animation = UIWRKR_SKL.UIWRKR_CARST 30 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Carry
    End

    ConditionState = DYING
      Animation = UIWRKR_SKL.UIWRKR_DTA
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End
    AliasConditionState = DYING CARRYING

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIWRKR_SKL.UIWRKR_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIWRKR_SKL.UIWRKR_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIWRKR_SKL.UIWRKR_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ConditionState  = SPECIAL_CHEERING
      Animation     = UIWRKR_SKL.UIWRKR_CHA
      AnimationMode = ONCE
    End
    
    ConditionState  = ACTIVELY_CONSTRUCTING
      Animation     = UIWRKR_SKL.UIWRKR_BDA
      AnimationMode = LOOP
      TransitionKey = TRANS_Constructing
    End
    AliasConditionState = ACTIVELY_CONSTRUCTING CARRYING

    ; --------------------

    TransitionState = TRANS_Stand TRANS_Carry
      ShowSubObject = BOX
      Animation     = UIWRKR_SKL.UIWRKR_PIK
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Carry TRANS_Stand
      ShowSubObject = BOX
      Animation     = UIWRKR_SKL.UIWRKR_PIK
      AnimationMode = ONCE_BACKWARDS
      Flags         = START_FRAME_LAST
    End
    
    TransitionState = TRANS_Stand TRANS_Constructing
      Animation     = UIWRKR_SKL.UIWRKR_TRA1
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Constructing TRANS_Stand
      Animation     = UIWRKR_SKL.UIWRKR_TRA2
      AnimationMode = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:Worker
  Side = GLAToxinGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1
  VisionRange = 100
  ShroudClearingRange = 200
  BuildCost = 200
  BuildTime = 4.0

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End

  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = Chem_GLAWorkerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = WorkerVoiceSelect
  VoiceMove = WorkerVoiceMove
  VoiceAttack = WorkerVoiceMove
  VoiceGuard = WorkerVoiceMove
  VoiceFear = WorkerVoiceFear
  VoiceTaskComplete = WorkerVoiceBuildComplete
  UnitSpecificSounds
    VoiceEnter        = WorkerVoiceMoveUpgraded
    VoiceEnterHostile = WorkerVoiceMoveUpgraded
    VoiceGarrison     = WorkerVoiceGarrison
    VoiceCreate       = WorkerVoiceCreate
    VoiceSupply       = WorkerVoiceSupply
    VoiceNoBuild      = WorkerVoiceBuildNot
    VoiceRepair       = WorkerVoiceRepair
    VoiceDisarm       = WorkerVoiceClearMine
    VoiceBuildResponse = WorkerVoiceBuild
    VoiceGetHealed    = WorkerVoiceMoveUpgraded
    VoiceMoveUpgraded = WorkerVoiceMoveUpgraded
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SALVAGER HARVESTER SCORE DOZER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = WorkerAIUpdate ModuleTag_03
    RepairHealthPercentPerSecond  = 2%    ; % of max health to repair each second
    BoredTime                     = 5000  ; in milliseconds
    BoredRange                    = 150   ; when bored, we look this far away to do something 
    MaxBoxes                      = 1
    UpgradedSupplyBoost           = 8 ; gives this much more cash for every box collected
    SupplyCenterActionDelay       = 150 ;400 ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay    = 150 ;400 ;ms per box (many small transactions)
    SupplyWarehouseScanDistance   = 700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    SuppliesDepletedVoice = WorkerVoiceSuppliesDepleted
    ; the only "enemies" that workers can acquire are mines, to be disarmed...
    AutoAcquireEnemiesWhenIdle    = Yes
  End

  Locomotor = SET_NORMAL FastHumanLocomotor
  Locomotor = SET_NORMAL_UPGRADED WorkerShoesLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 24.0
  End
 
  Behavior = SquishCollide ModuleTag_06
  End

  Behavior = LocomotorSetUpgrade ModuleTag_07
    TriggeredBy = Upgrade_GLAWorkerShoes
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_WorkerDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_WorkerDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantryGLA
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_WorkerDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = CommandSetUpgrade ModuleTag_14
    TriggeredBy = Upgrade_SwitchCommandSet
    RemovesUpgrades = Upgrade_SwitchBackCommandSet
    CommandSet = Chem_GLAWorkerFakeBuildingsCommandSet
  End
 
  Behavior = CommandSetUpgrade ModuleTag_15
    TriggeredBy = Upgrade_SwitchBackCommandSet
    RemovesUpgrades = Upgrade_SwitchCommandSet Upgrade_SwitchBackCommandSet
    CommandSet = Chem_GLAWorkerCommandSet
  End

  Behavior = ProductionUpdate ModuleTag_38
    MaxQueueEntries = 1; For the command set switching upgrade
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Chem_GLATankScorpion

  ; *** ART Parameters ***
  SelectPortrait         = SUScorpion_L
  ButtonImage            = SUScorpion
  
  UpgradeCameo1 = Upgrade_GLAToxinShells
  UpgradeCameo2 = Upgrade_GLAScorpionRocket
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = Upgrade_GLANeutralizers

  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY
 
    DefaultConditionState
      Model = UVLiteTank
      Turret = Turret
      ShowSubObject = Turret01
      HideSubObject = MissleRack01 MissleRack02 TurretUP01
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState = REALLYDAMAGED
      Model = UVLiteTank_d
    End
    AliasConditionState = RUBBLE
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      ShowSubObject = TurretUP01
      HideSubObject = MissleRack01 MissleRack02 Turret01
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = TurretUP01
      HideSubObject = MissleRack01 MissleRack02 Turret01
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      ShowSubObject = MissleRack01 Turret01
      HideSubObject = MissleRack02 TurretUP01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 Turret01
      HideSubObject = MissleRack02 TurretUP01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      ShowSubObject = MissleRack01 TurretUP01
      HideSubObject = MissleRack02 Turret01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 TurretUP01
      HideSubObject = MissleRack02 Turret01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      ShowSubObject = MissleRack01 MissleRack02 TurretUP01
      HideSubObject = Turret01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 MissleRack02 TurretUP01
      HideSubObject = Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = AFLAME
      Model = UVLiteTank
      ShowSubObject = Turret01
      HideSubObject = MissleRack01 MissleRack02 TurretUP01
      ParticleSysBone = TURRET TankFireContinious
    End

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVLiteTank_d
      ParticleSysBone = TURRET TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE AFLAME
      ShowSubObject = TurretUP01
      HideSubObject = MissleRack01 MissleRack02 Turret01
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED AFLAME
      Model = UVLiteTank_d
      ShowSubObject = TurretUP01
      HideSubObject = MissleRack01 MissleRack02 Turret01
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED AFLAME

    ConditionState = WEAPONSET_PLAYER_UPGRADE AFLAME
      ShowSubObject = MissleRack01 Turret01
      HideSubObject = MissleRack02 TurretUP01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone = TURRET TankFireContinious
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED AFLAME
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 Turret01
      HideSubObject = MissleRack02 TurretUP01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone = TURRET TankFireContinious
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE AFLAME
      ShowSubObject = MissleRack01 TurretUP01
      HideSubObject = MissleRack02 Turret01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone = TURRET TankFireContinious
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED AFLAME
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 TurretUP01
      HideSubObject = MissleRack02 Turret01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone = TURRET TankFireContinious
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO AFLAME
      ShowSubObject = MissleRack01 MissleRack02 TurretUP01
      HideSubObject = Turret01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone = TURRET TankFireContinious
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED AFLAME
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 MissleRack02 TurretUP01
      HideSubObject = Turret01
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone = TURRET TankFireContinious
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 4.0
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Scorpion
  Side                  = GLAToxinGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 3
  BuildCost     = 525
  BuildTime     = 5.25
  VisionRange   = 125
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY ScorpionTankGun
    Weapon = SECONDARY None
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGun
    Weapon = SECONDARY ScorpionMissileWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY ScorpionTankGunPlusOne
    Weapon = SECONDARY None
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGunPlusOne
    Weapon = SECONDARY ScorpionMissileWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY ScorpionTankGunPlusOne
    Weapon = SECONDARY None
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGunPlusOne
    Weapon = SECONDARY ScorpionMissileWeaponPlusTwo
  End

  ArmorSet
    Conditions  = None
    Armor       = TankArmor
    DamageFX    = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue    = 25 36 52 75
  ExperienceRequired = 0 74 108 157
  IsTrainable = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ScorpionTankVoiceSelect
  VoiceMove = ScorpionTankVoiceMove
  VoiceAttack = ScorpionTankVoiceAttack
  SoundMoveStart = ScorpionTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  VoiceGuard = ScorpionTankVoiceMove

  UnitSpecificSounds
    VoiceCreate    = ScorpionTankVoiceCreate
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = ScorpionTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 350.0
    InitialHealth   = 350.0
    SubdualDamageCap = 740
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 120
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ScorpionLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_ScorpionTankDeathEffect 
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_ScorpionTankDeathEffectSimple
  End
  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_GLAScorpionRocket
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10.5    
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleRocketBuggy

  ; *** ART Parameters ***
  SelectPortrait         = SUMort_L
  ButtonImage            = SUMort
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLAChemicalWarheads
  UpgradeCameo3 = Upgrade_GLASulfurAcid
  UpgradeCameo4 = Upgrade_GLAGasGrenades
  UpgradeCameo5 = Upgrade_GLANeutralizers
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVMort
      Turret = TURRET
      WeaponMuzzleFlash = PRIMARY MUZZLEFX01
      WeaponFireFXBone = PRIMARY MUZZLE
      WeaponLaunchBone = PRIMARY MUZZLE
      WeaponFireFXBone = SECONDARY MUZZLE
      WeaponLaunchBone = SECONDARY MUZZLE
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVMort_D
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      Model = UVMort
      ParticleSysBone = CHASSIS TankFireContinious
    End
    
    ConditionState = REALLYDAMAGED AFLAME
      Model = UVMort_D
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    TrackMarks = EXTireTrack.tga

    Dust                        = RocketBuggyDust
    DirtSpray                   = RocketBuggyDirtSpray
    PowerslideSpray             = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    LeftRearTireBone            = Tire03
    RightRearTireBone           = Tire04
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MobileMortar
  Side                = GLAToxinGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3
  BuildCost       = 700
  BuildTime       = 7.0
  VisionRange         = 175
  ShroudClearingRange = 175

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY MortarGun
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY MortarGun
    Weapon = SECONDARY GasMortarGun
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    WeaponLockSharedAcrossSets = Yes
    ShareWeaponReloadTime = yes
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue    = 27 40 58 83
  ExperienceRequired = 0 82 119 174
  IsTrainable        = Yes
  CrusherLevel       = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = Chem_GLAVehicleRocketBuggyCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RocketBuggyVoiceSelect
  VoiceMove = RocketBuggyVoiceMove
  VoiceAttack = RocketBuggyVoiceAttack
  SoundMoveStart = RocketBuggyMoveStart
  SoundMoveStartDamaged = RocketBuggyMoveStart
  VoiceGuard = RocketBuggyVoiceMove

  UnitSpecificSounds
    VoiceCreate          = RocketBuggyVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceCrush      = RocketBuggyVoiceCrush
    VoiceEnter = RocketBuggyVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200
    InitialHealth   = 200
    SubdualDamageCap = 300
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate        = 360
      AllowsPitch           = No
      RecenterTime          = 2000
      ControlledWeaponSlots = PRIMARY SECONDARY
      NaturalTurretAngle    = 0
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL RocketBuggyLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_RocketBuggyAirDeathStart
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_RocketBuggyDeathEffectSimple
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End
  
  Behavior = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = VeterancyGainCreate ModuleTag_Vet01
    StartingLevel = VETERAN
    ScienceRequired =  SCIENCE_TechnicalTraining
  End

  Behavior = WeaponSetUpgrade ModuleTag_W10
    TriggeredBy = Upgrade_GLAGasGrenades
  End

  Behavior = LockWeaponCreate ModuleTag_W21
    SlotToLock = PRIMARY
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleWasp

  ; *** ART Parameters ***
  SelectPortrait         = SUQCCG_L
  ButtonImage            = SUQCCG
  
  UpgradeCameo1 = Upgrade_GLAChemicalWarheads
  UpgradeCameo2 = Upgrade_SiliconWarheads
  UpgradeCameo3 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo4 = Upgrade_GLAJunkRepair
  UpgradeCameo5 = Upgrade_GLANeutralizers
  
  Draw = W3DTankTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVQCCG
      Turret = TURRETPOD
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   WeaponFX
      WeaponFireFXBone  = SECONDARY WeaponFX
      WeaponLaunchBone  = PRIMARY   WeaponA
      WeaponLaunchBone  = SECONDARY WeaponA
      HideSubObject = UP01 RADAR
    End
      
    ConditionState = REALLYDAMAGED
      Model = UVQCCG_D
      HideSubObject = UP01 RADAR
    End
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      ShowSubObject = HOUSECOLOR01 UP01
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVQCCG_D
      ShowSubObject = HOUSECOLOR01 UP01
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Animation = UVQCCG.UVQCCG
      AnimationMode = LOOP
      ShowSubObject = HOUSECOLOR01 UP01 RADAR
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVQCCG_D
      Animation = UVQCCG_D.UVQCCG_D
      AnimationMode = LOOP
      ShowSubObject = HOUSECOLOR01 UP01 RADAR
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE

    ConditionState = AFLAME
      Model = UVQCCG
      Turret = TURRETPOD
      TurretPitch = TURRETEL
      HideSubObject = UP01 RADAR
      ParticleSysBone = TURRETPOD TankFireContinious
    End
      
    ConditionState = REALLYDAMAGED AFLAME
      Model = UVQCCG_D
      HideSubObject = UP01 RADAR
      ParticleSysBone = TURRETPOD TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE AFLAME
      ShowSubObject = UP01
      ParticleSysBone = TURRETPOD TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED AFLAME
      Model = UVQCCG_D
      ShowSubObject = UP01
      ParticleSysBone = TURRETPOD TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO AFLAME
      Animation = UVQCCG.UVQCCG
      AnimationMode = LOOP
      ShowSubObject = UP01 RADAR
      ParticleSysBone = TURRETPOD TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED AFLAME
      Model = UVQCCG_D
      Animation = UVQCCG_D.UVQCCG_D
      AnimationMode = LOOP
      ShowSubObject = UP01 RADAR
      ParticleSysBone = TURRETPOD TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE AFLAME

    TrackMarks = EXTnkTrack.tga

    TreadAnimationRate = 4.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
 
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0   ; This unit doesn't powerslide.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Chem_QuadCannon
  Side = GLAToxinGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3
  BuildCost       = 800
  BuildTime       = 8.0
  VisionRange     = 250
  ShroudClearingRange = 300

  WeaponSet
    Conditions       = None 
    Weapon = PRIMARY   QuadCannonRocketLauncher
    Weapon = SECONDARY QuadCannonRocketLauncherAir
    PreferredAgainst = SECONDARY AIRCRAFT
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY   QuadCannonRocketLauncherPlusOne
    Weapon = SECONDARY QuadCannonRocketLauncherAirPlusOne
    PreferredAgainst = SECONDARY AIRCRAFT
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY   QuadCannonRocketLauncherPlusTwo
    Weapon = SECONDARY QuadCannonRocketLauncherAirPlusTwo
    PreferredAgainst = SECONDARY AIRCRAFT
  End

  ArmorSet
    Conditions      = None
    Armor           = AntiAirVehicle
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  CommandSet = GenericCommandSet

  ExperienceValue    = 33 47 69 99
  ExperienceRequired = 0 98 142 207
  IsTrainable = Yes
  CrusherLevel    = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect           = QuadCannonVoiceSelect
  VoiceMove             = QuadCannonVoiceMove
  VoiceAttack           = QuadCannonVoiceAttack
  VoiceAttackAir        = QuadCannonVoiceAttackAir
  SoundMoveStart        = QuadCannonMoveStart
  SoundMoveStartDamaged = QuadCannonMoveStart
  VoiceGuard             = QuadCannonVoiceMove
  UnitSpecificSounds
   VoiceCreate         = QuadCannonVoiceCreate
   TurretMoveStart      = NoSound
   TurretMoveLoop       = TurretMoveLoop
   TruckLandingSound    = NoSound
   TruckPowerslideSound = NoSound
   VoiceSalvage         = QuadCannonVoiceSalvage
   VoiceCrush           = QuadCannonVoiceCrush
   VoiceEnter             = QuadCannonVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 440
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 360
      TurretPitchRate = 360
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate        = 250
  End
  
  Locomotor = SET_NORMAL QuadCannonLocomotor
  
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 40.0
  End
  
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 150
    DestructionDelayVariance = 250
    OCL = FINAL    OCL_ChemQuadCannonDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL    OCL_ChemQuadCannonDeathEffectSimple
  End
  
  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
  End

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleToxinTruck

  ; *** ART Parameters ***
  SelectPortrait         = SUChemTractor_L
  ButtonImage            = SUChemTractor

  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Upgrade_GLATankCamouflage
  UpgradeCameo4 = Upgrade_GLAMineSweeper

  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState 
      Model = UVChemToxTnk
      Turret = Turret
      TurretPitch = TurretEL
      ShowSubObject = Turret
      HideSubObject = TurretUP01 TurretUP02 TOXTANKS01 TOXTANKS02 HOUSECOLOR01 HOUSECOLOR02
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE

    ConditionState = REALLYDAMAGED
      Model = UVChemToxTnk_D
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
    AliasConditionState RUBBLE
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01 TOXTANKS01 HOUSECOLOR01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVChemToxTnk_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01 TOXTANKS01 HOUSECOLOR01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS01 HOUSECOLOR01 TOXTANKS02 HOUSECOLOR02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVChemToxTnk_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS01 HOUSECOLOR01 TOXTANKS02 HOUSECOLOR02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = AFLAME
      Model = UVChemToxTnk
      Turret = Turret
      TurretPitch = TurretEL
      ShowSubObject = Turret
      HideSubObject = TurretUP01 TurretUP02 TOXTANKS01 TOXTANKS02 HOUSECOLOR01 HOUSECOLOR02
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE AFLAME

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVChemToxTnk_D
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE AFLAME
    AliasConditionState RUBBLE AFLAME
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE AFLAME
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01 TOXTANKS01 HOUSECOLOR01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE AFLAME

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE AFLAME
      Model = UVChemToxTnk_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01 TOXTANKS01 HOUSECOLOR01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE AFLAME
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_ONE AFLAME
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_ONE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO AFLAME
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS01 HOUSECOLOR01 TOXTANKS02 HOUSECOLOR02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO AFLAME

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO AFLAME
      Model = UVChemToxTnk_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS01 HOUSECOLOR01 TOXTANKS02 HOUSECOLOR02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO AFLAME
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_TWO AFLAME
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_TWO AFLAME

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 3.0
  End

  Draw = W3DModelDraw ModuleTag_01A
    ConditionState = NONE
      Model = NONE
    End
    ConditionState = MOVING
      Model = NONE
    End

    ConditionState = USER_1
      Model = UVMineSweep
    End
    ConditionState = USER_1 MOVING
      Model = UVMineSweep
      ParticleSysBone = MINEFX01 RocketBuggyDirtSpray
      ParticleSysBone = MINEFX02 RocketBuggyDirtSpray
    End
  End

  Draw = W3DModelDraw ModuleTag_01B
    ConditionState = NONE
      Model = NONE
    End
    AliasConditionState = SNOW
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = REALLYDAMAGED SNOW

    ConditionState = USER_2
      Model = UVToxTrk_C
    End
    ConditionState = USER_2 SNOW
      Model = UVToxTrk_CS
    End
    ConditionState = USER_2 REALLYDAMAGED RUBBLE
      Model = UVToxTrk_CD
    End
    ConditionState = USER_2 SNOW REALLYDAMAGED RUBBLE
      Model = UVToxTrk_CDS
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:HeavyToxinTruck
  Side                = GLAToxinGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3
  BuildCost           = 800
  BuildTime           = 9.5
  VisionRange         = 100
  ShroudClearingRange = 300

  WeaponSet 
    Conditions        = None 
    Weapon            = PRIMARY     ToxinTruckGunUpgraded
    Weapon            = SECONDARY   ToxinTruckSprayer
    AutoChooseSources = SECONDARY   NONE
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE 
    Weapon            = PRIMARY     Chem_ToxinTruckGunGamma
    Weapon            = SECONDARY   ToxinTruckSprayer
    AutoChooseSources = SECONDARY   NONE
  End
  WeaponSet 
    Conditions        = CRATEUPGRADE_ONE 
    Weapon            = PRIMARY     ToxinTruckGunUpgradedPlusOne
    Weapon            = SECONDARY   ToxinTruckSprayer
    AutoChooseSources = SECONDARY   NONE
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_ONE PLAYER_UPGRADE 
    Weapon            = PRIMARY     Chem_ToxinTruckGunGammaPlusOne
    Weapon            = SECONDARY   ToxinTruckSprayer
    AutoChooseSources = SECONDARY   NONE
  End
  WeaponSet 
    Conditions        = CRATEUPGRADE_TWO 
    Weapon            = PRIMARY     ToxinTruckGunUpgradedPlusTwo
    Weapon            = SECONDARY   ToxinTruckSprayer
    AutoChooseSources = SECONDARY   NONE
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_TWO PLAYER_UPGRADE 
    Weapon            = PRIMARY     Chem_ToxinTruckGunGammaPlusTwo
    Weapon            = SECONDARY   ToxinTruckSprayer
    AutoChooseSources = SECONDARY   NONE
  End

  ArmorSet
    Conditions        = None
    Armor             = ToxinTruckArmor
    DamageFX          = TruckDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = ToxinTruckArmorMineProof
    DamageFX          = TruckDamageFX
  End

  Behavior = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy = Upgrade_GLAMineSweeper
  End

  Behavior = ModelConditionUpgrade ModuleTag_Armor02
    ConditionFlag = USER_1
    TriggeredBy = Upgrade_GLAMineSweeper
  End

  Behavior = ModelConditionUpgrade ModuleTag_Armor03
    ConditionFlag = USER_2
    TriggeredBy = Upgrade_GLATankCamouflage
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue    = 47 68 99 143
  ExperienceRequired = 0 141 204 298
  IsTrainable        = Yes
  CrusherLevel    = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GLAVehicleToxinTruckBetaCommandSet

  Behavior = CommandSetUpgrade ModuleTag_ComSet01
    CommandSet = GLAVehicleToxinTruckGammaCommandSet
    TriggeredBy = Chem_Upgrade_GLAAnthraxGamma
  End

  ; *** AUDIO Parameters ***
  VoiceSelect         = ToxinTractorVoiceSelect
  VoiceMove           = ToxinTractorVoiceMove
  VoiceGuard          = ToxinTractorVoiceMove
  VoiceAttack         = ToxinTractorVoiceAttack
  SoundMoveStart      = ToxinTractorMoveStart
  SoundMoveStartDamaged = ToxinTractorMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff

  UnitSpecificSounds
    VoiceCreate         = ToxinTractorVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = TurretMoveLoop
    TruckLandingSound    = NoSound
    TruckPowerslideSound = NoSound
    VoiceCrush      = ToxinTractorVoiceCrush
    VoiceEnter           = ToxinTractorVoiceMove
    VoicePoisonLocation = ToxinTractorVoiceAttackContam
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority         = UNIT
  KindOf                = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth        = 450.0
    InitialHealth    = 450.0
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate            = 180
      TurretPitchRate           = 180
      AllowsPitch               = Yes
      MinPhysicalPitch          = -20
      ControlledWeaponSlots = PRIMARY
      FiresWhileTurning   = Yes
    End
    MoodAttackCheckRate        = 100
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL ScorpionLocomotor

  Behavior   = PhysicsBehavior ModuleTag_04
    Mass     = 50.0
  End

  Behavior                   = SlowDeathBehavior  ModuleTag_05
    DeathTypes               = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay         = 0
    DestructionDelayVariance = 200
    FX                       = INITIAL FX_ToxinTractorDie
    OCL                      = INITIAL OCL_HeavyToxinTractorDeathEffect
    FX                       = FINAL FX_ToxinTruckExplosionOneFinal
  End
  Behavior                   = InstantDeathBehavior  ModuleTag_06
    DeathTypes               = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    FX                       = FX_CarCrush
    OCL                      = OCL_HeavyToxinTractorDeathEffectSimple
  End
    
  Behavior = CreateCrateDie ModuleTag_07
    CrateData   = SalvageCrateData
  End

  Behavior = WeaponSetUpgrade ModuleTag_08
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma
  End
  
  Behavior                        = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1  = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1          = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  Behavior = AutoHealBehavior ModuleTag_12
    HealingAmount   = 2
    HealingDelay    = 1000 ; msec
    TriggeredBy     = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15
    DeathWeapon   = ToxinTractorExplosionWeaponBeta
    StartsActive  = Yes
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
    DeathWeapon  = ToxinTractorExplosionWeaponGamma
    StartsActive = No   
    TriggeredBy  = Chem_Upgrade_GLAAnthraxGamma
    ConflictsWith = Upgrade_GLANeutralizers
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_17
    DeathWeapon   = ToxinTractorExplosionWeaponBetaSafe
    StartsActive  = No
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    TriggeredBy = Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_18
    DeathWeapon  = ToxinTractorExplosionWeaponGammaSafe
    StartsActive = No
    TriggeredBy  = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = yes
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ChemicTraining
  End

  Behavior = StealthUpdate ModuleTag_S07
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_S10
    TriggeredBy = Upgrade_GLATankCamouflage
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10.0
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleBombTruck

  ; *** ART Parameters ***
  SelectPortrait         = SUBombTruck_L
  ButtonImage            = SUBombTruck
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLABombTruckBioBomb
  UpgradeCameo3 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo4 = Upgrade_GLANeutralizers
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga
    
    DefaultConditionState
      Model = UVBMBTRUK
      Animation = UVBMBTRUK.UVBMBTRUK
      AnimationMode = LOOP
      ShowSubObject = Bombload02 
      HideSubObject = Bombload01 Bombload03 Bombload04
    End

    ConditionState = REALLYDAMAGED
      Model = UVBMBTRUK_D
      Animation = UVBMBTRUK_D.UVBMBTRUK_D
      AnimationMode = LOOP
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      Model = UVBMBTRUK
      Animation = UVBMBTRUK.UVBMBTRUK
      AnimationMode = LOOP
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVBMBTRUK_D
      Animation = UVBMBTRUK_D.UVBMBTRUK_D
      AnimationMode = LOOP
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    MidLeftFrontTireBone = Tire03
    MidRightFrontTireBone = Tire04
    LeftRearTireBone = Tire05
    RightRearTireBone = Tire06
    TireRotationMultiplier = 0.2   ; this * speed = rotation.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BombTruck
  Side = GLAToxinGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3
  BuildCost       = 1000
  BuildTime       = 10.0
  VisionRange     = 150
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY SuicideWeapon 
    Weapon = TERTIARY TerroristForceDesignationWeapon
    PreferredAgainst = TERTIARY INFANTRY VEHICLE
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TruckDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
    Object = Chem_GLAPalace
  End

  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAVehicleBombTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BombTruckVoiceSelect
  VoiceMove = BombTruckVoiceMove
  VoiceGuard = BombTruckVoiceMove
  VoiceAttack = BombTruckVoiceAttack
  SoundMoveStart = BombTruckMoveStart
  SoundMoveStartDamaged = BombTruckMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate                   = BombTruckVoiceCreate
    TurretMoveStart               = NoSound
    TurretMoveLoop                = NoSound
    TruckLandingSound             = RocketBuggyLand
    TruckPowerslideSound          = NoSound
    VoiceEnter = BombTruckVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 225.0
    InitialHealth   = 225.0
    SubdualDamageCap = 450
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  ExperienceValue = 37 54 79 113
  IsTrainable = No

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No ATTACK_BUILDINGS
    MoodAttackCheckRate = 100
  End

  Locomotor = SET_NORMAL BombTruckLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = ProductionUpdate ModuleTag_07
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_09
    DeathWeapon   = BombTruckDefaultBombDamage
    StartsActive  = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
    DeathWeapon   = BombTruckDefaultBombEffect
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLABombTruckBioBomb
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = BombTruckBioBombEffect
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb
    ConflictsWith = Upgrade_GLAAnthraxBeta Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13
    DeathWeapon   = BombTruckAnthraxBombEffect
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLAAnthraxBeta
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_14
    DeathWeapon   = BombTruckAnthraxGammaBombEffect
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Chem_Upgrade_GLAAnthraxGamma
    ConflictsWith = Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12B
    DeathWeapon   = DemoChargeAcidDetonation
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAChemicalWarheads
    ConflictsWith = Upgrade_GLASulfurAcid Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13B
    DeathWeapon   = DemoChargeSulfurAcidDetonation
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAChemicalWarheads Upgrade_GLASulfurAcid
    ConflictsWith = Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13X
    DeathWeapon   = BombTruckAnthraxBombEffectSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLAAnthraxBeta Upgrade_GLANeutralizers
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_14X
    DeathWeapon   = BombTruckAnthraxGammaBombEffectSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12BX
    DeathWeapon   = DemoChargeAcidDetonationSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAChemicalWarheads Upgrade_GLANeutralizers
    ConflictsWith = Upgrade_GLASulfurAcid
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13BX
    DeathWeapon   = DemoChargeSulfurAcidDetonationSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAChemicalWarheads Upgrade_GLASulfurAcid Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End

  Behavior = SlowDeathBehavior  ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_BombTruckDeathEffect
  End

  Behavior = CreateObjectDie ModuleTag_26
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_BombTruckDeathEffectSimple
  End

  Behavior = DestroyDie ModuleTag_30
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End

  Behavior = StealthUpdate ModuleStealth_24
    StealthDelay                = 2500
    StealthForbiddenConditions  = TAKING_DAMAGE
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End

  Behavior = CreateCrateDie ModuleTag_27
    CrateData = SalvageCrateData
  End
  
  Behavior = TransitionDamageFX ModuleTag_28
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_29
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Geometry = BOX
  GeometryMajorRadius = 19.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleScudLauncher

  ; *** ART Parameters ***
  SelectPortrait   = SULuna_L
  ButtonImage      = SULuna

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLAChemicalWarheads
  UpgradeCameo3 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo4 = Upgrade_GLASulfurAcid
  UpgradeCameo5 = Upgrade_GLANeutralizers

  Draw = W3DTruckDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = PRIMARY SECONDARY
    IgnoreConditionStates = RELOADING_A BETWEEN_FIRING_SHOTS_A RELOADING_A BETWEEN_FIRING_SHOTS_B PACKING UNPACKING DEPLOYED MOVING

    ; **************************************
    ConditionState = NONE
      Model = UVLuna
      TransitionKey = Trans_Idle
      HideSubObject = UPGRADE01 UPGRADE02
    End

    ConditionState = PREATTACK_A
      Model = UVLuna_U
      TransitionKey = Trans_Up
      HideSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = PREATTACK_B

    ConditionState = FIRING_A
      Model = UVLuna_U
      WeaponLaunchBone = PRIMARY LAUNCH
      WeaponLaunchBone = SECONDARY LAUNCH
      TransitionKey = Trans_Reload
      HideSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = FIRING_B

    ; **************************************
    TransitionState   = Trans_Idle Trans_Up
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      HideSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_Up Trans_Idle
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_Reload Trans_Up
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      HideSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_Reload Trans_Idle
      Model = UVLuna_A2
      Animation = UVLuna_A2.UVLuna_A2
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      HideSubObject = UPGRADE01 UPGRADE02
    End

    ; **************************************
    ConditionState = REALLYDAMAGED
      Model = UVLuna_D
      TransitionKey = Trans_IdleD
      HideSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = RUBBLE

    ConditionState = PREATTACK_A REALLYDAMAGED
      Model = UVLuna_UD
      TransitionKey = Trans_UpD
      HideSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = PREATTACK_B REALLYDAMAGED
    AliasConditionState = PREATTACK_A RUBBLE
    AliasConditionState = PREATTACK_B RUBBLE

    ConditionState = FIRING_A REALLYDAMAGED
      Model = UVLuna_UD
      WeaponLaunchBone = PRIMARY LAUNCH
      WeaponLaunchBone = SECONDARY LAUNCH
      TransitionKey = Trans_ReloadD
      HideSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = FIRING_B REALLYDAMAGED
    AliasConditionState = FIRING_A RUBBLE
    AliasConditionState = FIRING_B RUBBLE

    ; **************************************
    TransitionState   = Trans_IdleD Trans_UpD
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      HideSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_UpD Trans_IdleD
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_ReloadD Trans_UpD
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      HideSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_ReloadD Trans_IdleD
      Model = UVLuna_A2D
      Animation = UVLuna_A2D.UVLuna_A2D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      HideSubObject = UPGRADE01 UPGRADE02
    End

    ; **************************************
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVLuna
      TransitionKey = Trans_IdleCU1
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    ConditionState = PREATTACK_A WEAPONSET_CRATEUPGRADE_ONE
      Model = UVLuna_U
      TransitionKey = Trans_UpCU1
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End
    AliasConditionState = PREATTACK_B WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = FIRING_A WEAPONSET_CRATEUPGRADE_ONE
      Model = UVLuna_U
      WeaponLaunchBone = PRIMARY LAUNCH
      WeaponLaunchBone = SECONDARY LAUNCH
      TransitionKey = Trans_ReloadCU1
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End
    AliasConditionState = FIRING_B WEAPONSET_CRATEUPGRADE_ONE

    ; **************************************
    TransitionState   = Trans_IdleCU1 Trans_UpCU1
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    TransitionState   = Trans_UpCU1 Trans_IdleCU1
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    TransitionState   = Trans_ReloadCU1 Trans_UpCU1
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    TransitionState   = Trans_ReloadCU1 Trans_IdleCU1
      Model = UVLuna_A2
      Animation = UVLuna_A2.UVLuna_A2
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    ; **************************************
    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVLuna_D
      TransitionKey = Trans_IdleDCU1
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End
    AliasConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = PREATTACK_A REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVLuna_UD
      TransitionKey = Trans_UpDCU1
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End
    AliasConditionState = PREATTACK_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState = PREATTACK_A RUBBLE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState = PREATTACK_B RUBBLE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = FIRING_A REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVLuna_UD
      WeaponLaunchBone = PRIMARY LAUNCH
      WeaponLaunchBone = SECONDARY LAUNCH
      TransitionKey = Trans_ReloadDCU1
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End
    AliasConditionState = FIRING_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState = FIRING_A RUBBLE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState = FIRING_B RUBBLE WEAPONSET_CRATEUPGRADE_ONE

    ; **************************************
    TransitionState   = Trans_IdleDCU1 Trans_UpDCU1
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    TransitionState   = Trans_UpDCU1 Trans_IdleDCU1
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    TransitionState   = Trans_ReloadDCU1 Trans_UpDCU1
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    TransitionState   = Trans_ReloadDCU1 Trans_IdleDCU1
      Model = UVLuna_A2D
      Animation = UVLuna_A2D.UVLuna_A2D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01
      HideSubObject = UPGRADE02
    End

    ; **************************************
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVLuna
      TransitionKey = Trans_IdleCU2
      ShowSubObject = UPGRADE01 UPGRADE02
    End

    ConditionState = PREATTACK_A WEAPONSET_CRATEUPGRADE_TWO
      Model = UVLuna_U
      TransitionKey = Trans_UpCU2
      ShowSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = PREATTACK_B WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = FIRING_A WEAPONSET_CRATEUPGRADE_TWO
      Model = UVLuna_U
      WeaponLaunchBone = PRIMARY LAUNCH
      WeaponLaunchBone = SECONDARY LAUNCH
      TransitionKey = Trans_ReloadCU2
      ShowSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = FIRING_B WEAPONSET_CRATEUPGRADE_TWO

    ; **************************************
    TransitionState   = Trans_IdleCU2 Trans_UpCU2
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01 UPGRADE02 
    End

    TransitionState   = Trans_UpCU2 Trans_IdleCU2
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      ShowSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_ReloadCU2 Trans_UpCU2
      Model = UVLuna_A1
      Animation = UVLuna_A1.UVLuna_A1
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_ReloadCU2 Trans_IdleCU2
      Model = UVLuna_A2
      Animation = UVLuna_A2.UVLuna_A2
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01 UPGRADE02
    End

    ; **************************************
    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVLuna_D
      TransitionKey = Trans_IdleDCU2
      ShowSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = PREATTACK_A REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVLuna_UD
      TransitionKey = Trans_UpDCU2
      ShowSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = PREATTACK_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState = PREATTACK_A RUBBLE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState = PREATTACK_B RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = FIRING_A REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVLuna_UD
      WeaponLaunchBone = PRIMARY LAUNCH
      WeaponLaunchBone = SECONDARY LAUNCH
      TransitionKey = Trans_ReloadDCU2
      ShowSubObject = UPGRADE01 UPGRADE02
    End
    AliasConditionState = FIRING_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState = FIRING_A RUBBLE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState = FIRING_B RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    ; **************************************
    TransitionState   = Trans_IdleDCU2 Trans_UpDCU2
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_UpDCU2 Trans_IdleDCU2
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      ShowSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_ReloadDCU2 Trans_UpDCU2
      Model = UVLuna_A1D
      Animation = UVLuna_A1D.UVLuna_A1D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01 UPGRADE02
    End

    TransitionState   = Trans_ReloadDCU2 Trans_IdleDCU2
      Model = UVLuna_A2D
      Animation = UVLuna_A2D.UVLuna_A2D
      AnimationMode = ONCE
      Flags           = START_FRAME_FIRST
      ShowSubObject = UPGRADE01 UPGRADE02
    End
    ; **************************************

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide
    LeftFrontTireBone = WHEEL01
    RightFrontTireBone = WHEEL08
    LeftRearTireBone = WHEEL04
    RightRearTireBone = WHEEL07
    MidLeftFrontTireBone = WHEEL02
    MidRightFrontTireBone = WHEEL05
    MidLeftRearTireBone = WHEEL03
    MidRightRearTireBone = WHEEL06
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_Draw02

    DefaultConditionState
      Model = UVLuna_LA
      Animation = NONE
    End

    ConditionState = UNPACKING
      Model = UVLuna_LA
      Animation = UVLuna_LA.UVLuna_LA
      AnimationMode = ONCE
    End

    ConditionState = PACKING
      Model = UVLuna_LA
      Animation = UVLuna_LA.UVLuna_LA
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = DEPLOYED
      Model = UVLuna_L
    End

  End

  Draw = W3DModelDraw ModuleTag_Draw03

    DefaultConditionState
      Model = UVLuna_B
    End

    ConditionState = AFLAME
      Model = UVLuna_B
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE02 TankFireContinious
    End
  End

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:LunaLauncher
  Side          = GLAToxinGeneral
  EditorSorting = VEHICLE
  TransportSlotCount = 0
  BuildCost    = 1400
  BuildTime    = 14.0
  VisionRange         = 175
  ShroudClearingRange = 175

  WeaponSet
    Weapon = PRIMARY SCUDLauncherGunToxin
    Weapon = SECONDARY SCUDLauncherGunAcid
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY SCUDLauncherGunToxinPlusOne
    Weapon = SECONDARY SCUDLauncherGunAcidPlusOne
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY SCUDLauncherGunToxinPlusTwo
    Weapon = SECONDARY SCUDLauncherGunAcidPlusTwo
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes
  End

  ArmorSet
    Conditions = None
    Armor      = TruckArmor
    DamageFX   = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
    Object = Chem_GLAPalace
  End

  ExperienceValue    = 37 54 79 113
  ExperienceRequired = 0 11 161 236
  IsTrainable = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = Chem_GLAVehicleScudLauncherCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ScudLauncherVoiceSelect
  VoiceMove = ScudLauncherVoiceMove
  VoiceGuard = ScudLauncherVoiceMove
  VoiceAttack = ScudLauncherVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    VoiceCreate       = ScudLauncherVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound
    TruckPowerslideSound = NoSound
    VoiceCrush = ScudLauncherVoiceCrush
    VoiceEnter = ScudLauncherVoiceMove
    VoicePrimaryWeaponMode = ScudLauncherVoiceModeHiEx
    VoiceSecondaryWeaponMode = ScudLauncherVoiceModeAnthrax
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE WEAPON_SALVAGER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DeployStyleAIUpdate ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
    PackTime = 3333
    UnpackTime = 333
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_04
  End

  Locomotor = SET_NORMAL ScudLauncherLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 80.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  Behavior = SlowDeathBehavior ModuleTag_09
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_LunaLauncherDeathEffect
    FX  = FINAL    FX_ScudLauncherExplosionOneFinal
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_LunaLauncherDeathEffectSimple
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End

  Geometry = BOX
  GeometryMajorRadius = 25.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45 
End

;----------------------------------------------------------------------------
Object Chem_GLAVehicleTechnical

  ; *** ART Parameters ***
  SelectPortrait         = SUTechnical_L 
  ButtonImage            = SUTechnical

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLANeutralizers

  ; *** ART Parameters ***
  Draw = W3DTruckDraw ModuleTag_Draw01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      WeaponLaunchBone =  PRIMARY   BarrelMS
      ShowSubObject = TURRETEL
      HideSubObject = TURRETEL01 TURRETEL02
    End
 
    ConditionState = REALLYDAMAGED
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      WeaponLaunchBone =  PRIMARY   BarrelMS
      ShowSubObject = TURRETEL
      HideSubObject = TURRETEL01 TURRETEL02
    End
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETEL01
      HideSubObject = TURRETEL TURRETEL02
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETEL01
      HideSubObject = TURRETEL TURRETEL02
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETEL02
      HideSubObject = TURRETEL01 TURRETEL
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETEL02
      HideSubObject = TURRETEL01 TURRETEL
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE

    ConditionState = USING_WEAPON_B
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponLaunchBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRETEL
      HideSubObject = TURRETEL01 TURRETEL02
    End
 
    ConditionState = REALLYDAMAGED USING_WEAPON_B
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponLaunchBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRETEL
      HideSubObject = TURRETEL01 TURRETEL02
    End
    AliasConditionState = RUBBLE USING_WEAPON_B

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE USING_WEAPON_B
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponLaunchBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETEL01
      HideSubObject = TURRETEL TURRETEL02
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED USING_WEAPON_B
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponLaunchBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETEL01
      HideSubObject = TURRETEL TURRETEL02
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE USING_WEAPON_B

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_B
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponLaunchBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETEL02
      HideSubObject = TURRETEL01 TURRETEL
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED USING_WEAPON_B
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponLaunchBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETEL02
      HideSubObject = TURRETEL01 TURRETEL
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE USING_WEAPON_B

    ConditionState = AFLAME
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponLaunchBone  = SECONDARY BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      ShowSubObject = TURRETEL
      HideSubObject = TURRETEL01 TURRETEL02
      ParticleSysBone = Turret TankFireContinious
    End
 
    ConditionState = REALLYDAMAGED AFLAME
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponLaunchBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      ShowSubObject = TURRETEL
      HideSubObject = TURRETEL01 TURRETEL02
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE AFLAME
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETEL01
      HideSubObject = TURRETEL TURRETEL02
      ParticleSysBone = Turret TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED AFLAME
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETEL01
      HideSubObject = TURRETEL TURRETEL02
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO AFLAME
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETEL02
      HideSubObject = TURRETEL01 TURRETEL
      ParticleSysBone = Turret TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED AFLAME
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETEL02
      HideSubObject = TURRETEL01 TURRETEL
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE AFLAME

    ConditionState = USING_WEAPON_B AFLAME
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponLaunchBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRETEL
      HideSubObject = TURRETEL01 TURRETEL02
      ParticleSysBone = Turret TankFireContinious
    End
 
    ConditionState = REALLYDAMAGED USING_WEAPON_B AFLAME
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponLaunchBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRETEL
      HideSubObject = TURRETEL01 TURRETEL02
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = RUBBLE USING_WEAPON_B AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE USING_WEAPON_B AFLAME
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponLaunchBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETEL01
      HideSubObject = TURRETEL TURRETEL02
      ParticleSysBone = Turret TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED USING_WEAPON_B AFLAME
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponLaunchBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETEL01
      HideSubObject = TURRETEL TURRETEL02
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE USING_WEAPON_B AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_B AFLAME
      Model = UVTechQuad
      Turret = TURRET
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponLaunchBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETEL02
      HideSubObject = TURRETEL01 TURRETEL
      ParticleSysBone = Turret TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED USING_WEAPON_B AFLAME
      Model = UVTechQuad_D
      Turret = TURRET
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponLaunchBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETEL02
      HideSubObject = TURRETEL01 TURRETEL
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE USING_WEAPON_B AFLAME

    TrackMarks = EXTireTrack.tga
    Dust = TechnicalDust
    PowerslideSpray = RocketBuggyDirtPowerSlide
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition = 2.5    ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Technical
  Side               = GLAToxinGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 2
  BuildCost          = 500
  BuildTime          = 5.0
  VisionRange         = 150
  ShroudClearingRange = 400

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY Chem_TechnicalMachineGunWeapon
    Weapon = SECONDARY Chem_TechnicalMachineGunWeaponAir
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY Chem_TechnicalMachineGunWeaponPlusOne
    Weapon = SECONDARY Chem_TechnicalMachineGunWeaponAirPlusOne
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY Chem_TechnicalMachineGunWeaponPlusTwo
    Weapon = SECONDARY Chem_TechnicalMachineGunWeaponAirPlusTwo
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TruckDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue    = 22 32 47 68
  ExperienceRequired = 0 67 97 142
  IsTrainable        = Yes
  CrusherLevel       = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = GLAVehicleTechnicalCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TechnicalVoiceSelect
  VoiceMove = TechnicalVoiceMove
  VoiceGuard = TechnicalVoiceMove
  VoiceAttack = TechnicalVoiceAttack
  SoundMoveStart = TechnicalMoveStart
  SoundMoveStartDamaged = TechnicalMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit

  UnitSpecificSounds
    VoiceCreate          = TechnicalVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceSalvage = TechnicalVoiceSalvage
    VoiceCrush   = TechnicalVoiceCrush
    VoiceUnload  = TechnicalVoiceUnload
    VoiceEnter = TechnicalVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE TRANSPORT

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_TechnicalTraining
  End

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 200
    InitialHealth   = 200
    SubdualDamageCap = 450
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_05
    Turret
      TurretTurnRate = 240
      TurretPitchRate = 240
      AllowsPitch = yes
      FiresWhileTurning = Yes
      MinPhysicalPitch = -5
      MinIdleScanAngle = 30
      MaxIdleScanAngle = 60
      MinIdleScanInterval = 5000
      MaxIdleScanInterval = 10000
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL TechnicalLocomotor
  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 40.0
  End
  Behavior = AutoHealBehavior ModuleTag_07
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED 
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_TechnicalJeep_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End

  Behavior = SlowDeathBehavior ModuleTag_15
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 500
    DestructionDelayVariance = 1500
    OCL = INITIAL OCL_TechnicalAirDeathStart
    FX = INITIAL FX_TechnicalAirDeathGroundPart
    OCL = FINAL OCL_RocketBuggyAirDeath
    FX = FINAL FX_RocketBuggyAirDeathAirPart
  End

  Behavior = TransportContain ModuleTag_16
    Slots = 5
    AllowInsideKindOf   = INFANTRY
    DamagePercentToUnits = 10%
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 7.5     
  GeometryIsSmall = No    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleRadarVan

  ; *** ART Parameters ***
  SelectPortrait         = SURadarVan_L
  ButtonImage            = SURadarVan
  
  UpgradeCameo1 = Upgrade_GLARadarVanScan
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Upgrade_GLACamoNetting
  UpgradeCameo4 = Upgrade_GLANeutralizers
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVRadarVan
      Animation = UVRadarVan.UVRadarVan
      AnimationMode = LOOP
      HideSubObject = RADARUPGRADE LIGHT02 LIGHT03
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
      HideSubObject = RADARUPGRADE LIGHT02 LIGHT03
    End
    AliasConditionState = RUBBLE

    ConditionState = USER_1
      Model = UVRadarVan
      Animation = UVRadarVan.UVRadarVan
      AnimationMode = LOOP
      ShowSubObject = RADARUPGRADE LIGHT02 LIGHT03
    End
    
    ConditionState = USER_1 REALLYDAMAGED
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
      ShowSubObject = RADARUPGRADE LIGHT02 LIGHT03
    End
    AliasConditionState = USER_1 RUBBLE

    ConditionState = AFLAME
      Model = UVRadarVan
      Animation = UVRadarVan.UVRadarVan
      AnimationMode = LOOP
      HideSubObject = RADARUPGRADE LIGHT02 LIGHT03
      ParticleSysBone = CHASSIS TankFireContinious
    End
    
    ConditionState = REALLYDAMAGED AFLAME
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
      HideSubObject = RADARUPGRADE LIGHT02 LIGHT03
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    ConditionState = USER_1 AFLAME
      Model = UVRadarVan
      Animation = UVRadarVan.UVRadarVan
      AnimationMode = LOOP
      ShowSubObject = RADARUPGRADE LIGHT02 LIGHT03
      ParticleSysBone = CHASSIS TankFireContinious
    End
    
    ConditionState = USER_1 REALLYDAMAGED AFLAME
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
      ShowSubObject = RADARUPGRADE LIGHT02 LIGHT03
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = USER_1 RUBBLE AFLAME
    
    TrackMarks = EXTireTrack.tga
    
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_Draw02
    DefaultConditionState
      Model = None
    End
    AliasConditionState = SNOW
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = SNOW REALLYDAMAGED
    AliasConditionState = RUBBLE
    AliasConditionState = SNOW RUBBLE

    ConditionState = USER_2
      Model = UVRadarVan_C
    End
    ConditionState = USER_2 REALLYDAMAGED
      Model = UVRadarVan_CD
    End
    AliasConditionState = USER_2 RUBBLE
    ConditionState = USER_2 SNOW
      Model = UVRadarVan_CS
    End
    ConditionState = USER_2 SNOW REALLYDAMAGED
      Model = UVRadarVan_CDS
    End
    AliasConditionState = USER_2 SNOW RUBBLE
  End    

  Behavior = ModelConditionUpgrade ModuleTag_RadarUpgrade
    ConditionFlag = USER_1
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:RadarVan
  Side            = GLAToxinGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3
  BuildCost       = 500
  BuildTime       = 5.0
  VisionRange     = 200
  ShroudClearingRange = 500

  WeaponSet
    Conditions        = None 
    Weapon            = SECONDARY RadarVanClearFakeUnitsWeapon
    AutoChooseSources = SECONDARY None
  End

  ArmorSet
    Conditions      = None
    Armor           = RadarTruckArmor
    DamageFX        = TankDamageFX
  End

  IsTrainable = No
  CrusherLevel    = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Chem_GLAVehicleRadarVanCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RadarVanVoiceSelect
  VoiceMove = RadarVanVoiceMove
  VoiceAttack = RadarVanVoiceMove
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart

  UnitSpecificSounds
    VoiceCreate     = RadarVanVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush      = RadarVanVoiceCrush
    VoiceEnter = RadarVanVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE IGNORES_SELECT_ALL

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 500
    InitialHealth   = 500
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  ExperienceValue     = 75 75 75 75  ; Experience point value at each level

  Behavior = GrantUpgradeCreate ModuleTag_03
    UpgradeToGrant     = Upgrade_Radar
  End
  Behavior        = RadarUpgrade ModuleTag_05
    TriggeredBy   = Upgrade_Radar
    DisableProof  = Yes ; Won't be disabled by power low
  End

  Behavior           = OCLSpecialPower ModuleTag_06
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    OCL                  = SUPERWEAPON_RadarVanScan
    CreateLocation       = CREATE_AT_LOCATION
    StartsPaused         = Yes ; Unpaused by upgrade module
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_07
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = AIUpdateInterface ModuleTag_09
    Turret
      TurretTurnRate = 100
      ControlledWeaponSlots = PRIMARY
    End
  End
  Locomotor = SET_NORMAL RadarVanLocomotor

  Behavior = PhysicsBehavior ModuleTag_10
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior  ModuleTag_11
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_RadarVanDeathEffect
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = DestroyDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = CreateCrateDie ModuleTag_15
    CrateData = SalvageCrateData
  End

  Behavior = StealthDetectorUpdate ModuleTag_16 ;+
    DetectionRate   = 500
    DetectionRange  = 300
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraForbiddenKindOf     = AIRCRAFT MINE DEMOTRAP
  End

  Behavior = FXListDie ModuleTag_17
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_18
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_RadarVanDeathEffectSimple
  End

  Behavior = TransitionDamageFX ModuleTag_19
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_CrusaderDamageTransition
  End

  Behavior = StealthUpdate ModuleStealth_Camo1
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_Camo2
    TriggeredBy = Upgrade_GLACamoNetting
  END

  Behavior        = ModelConditionUpgrade ModuleTag_Camo3
    ConditionFlag = USER_2
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_GLATraining
  End
  
  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 12.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  
End

;----------------------------------------------------------------------
Object Chem_GLATunnelNetwork

  ; *** ART Parameters ***
  SelectPortrait         = SUToxicTunnel_L
  ButtonImage            = SUToxicTunnel

  UpgradeCameo1 = Upgrade_GLACamoNetting
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    DefaultConditionState
      Model             = UBToxTunn
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponLaunchBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    ConditionState      = DAMAGED
      Model             = UBToxTunn_D
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponLaunchBone  = PRIMARY BarrelMS

    End
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UBToxTunn_E
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponLaunchBone  = PRIMARY BarrelMS
      ParticleSysBone   = Steam01 SteamVent
    End
        
    ConditionState      = SNOW
      Model             = UBToxTunn_S
    End
    ConditionState      = DAMAGED SNOW
      Model             = UBToxTunn_DS
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = UBToxTunn_ES
      ParticleSysBone   = Steam01 SteamVent
    End
    
    ConditionState      = NIGHT
      Model             = UBToxTunn_N
    End
    ConditionState      = DAMAGED NIGHT
      Model             = UBToxTunn_DN
    End
    ConditionState      = REALLYDAMAGED RUBBLE NIGHT
      Model             = UBToxTunn_EN
      ParticleSysBone   = Steam01 SteamVent
    End
    
   
    ConditionState      = SNOW NIGHT
      Model             = UBToxTunn_NS
    End
    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBToxTunn_DNS
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model             = UBToxTunn_ENS
      ParticleSysBone   = Steam01 SteamVent
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBToxTunn
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBToxTunn_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBToxTunn_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBToxTunn_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBToxTunn_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBToxTunn_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBToxTunn_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBToxTunn_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBToxTunn_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBToxTunn_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBToxTunn_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBToxTunn_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    =  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT  PARTIALLY_CONSTRUCTED 
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ----------------- camouflage -----------------------
  Draw = W3DModelDraw ModuleTag_Camo

    DefaultConditionState
      Model           = None
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = DAMAGED
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED
    AliasConditionState = SNOW REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION 
                           
    ConditionState = USER_2
      Model           = UBUndTunn_C
    End
    AliasConditionState = USER_1 NIGHT

    ConditionState = USER_2 SNOW
      Model           = UBUndTunn_CS
    End
    AliasConditionState = USER_1 NIGHT SNOW

    ConditionState = USER_2 DAMAGED
      Model           = UBUndTunn_CD
    End
    AliasConditionState = USER_2 NIGHT DAMAGED

    ConditionState = USER_2 DAMAGED SNOW
      Model           = UBUndTunn_CDS
    End
    AliasConditionState = USER_2 NIGHT DAMAGED SNOW

    ConditionState = USER_2 REALLYDAMAGED RUBBLE
      Model           = UBUndTunn_CE
    End
    AliasConditionState = USER_1 NIGHT REALLYDAMAGED RUBBLE

    ConditionState = USER_2 REALLYDAMAGED SNOW RUBBLE
      Model           = UBUndTunn_CES
    End
    AliasConditionState = USER_2 NIGHT REALLYDAMAGED SNOW RUBBLE
  End

  Behavior = ModelConditionUpgrade ModuleTag_Weapon02
    ConditionFlag = USER_2
    TriggeredBy = Upgrade_GLACamoNetting
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:Chem_TunnelNetwork
  Side          = GLAToxinGeneral
  EditorSorting = STRUCTURE

  BuildCost   = 900
  RefundValue = 100
  BuildTime   = 18
  EnergyProduction = 0
  VisionRange = 200
  ShroudClearingRange = 200

  ArmorSet
    Conditions = None
    Armor      = StructureArmor
    DamageFX   = StructureDamageFXNoShake
  End

  WeaponSet 
    Conditions        = None 
    Weapon            = PRIMARY TunnelNetworkGunBeta
    Weapon            = SECONDARY DummyWeapon
    AutoChooseSources = PRIMARY   FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE
    Weapon            = PRIMARY TunnelNetworkGunGamma
    Weapon            = SECONDARY DummyWeapon
    AutoChooseSources = PRIMARY   FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
  End

  CommandSet      = Chem_GLATunnelNetworkCommandSet
  ExperienceValue = 78 113 165 236

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
    TurretMoveLoop        = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SCORE_CREATE AUTO_RALLYPOINT
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior = WeaponSetUpgrade ModuleTag_08
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma
  End

  Behavior = AIUpdateInterface ModuleTag_16
    Turret
      TurretTurnRate        = 180
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ;ATTACK_BUILDINGS; defensive weapon
  End
  Behavior = TunnelContain ModuleTag_05
    TimeForFullHeal     = 5000   ;(in milliseconds)
  End

  Behavior            = SpawnBehavior ModuleTag_07
    SpawnNumber       = 2
    SpawnReplaceDelay = 9999
    SpawnTemplateName = Chem_GLAInfantryTunnelDefender
    OneShot           = Yes
    CanReclaimOrphans = No
    SlavesHaveFreeWill = Yes
  End
  Behavior             = RebuildHoleExposeDie ModuleTag_09
    HoleName      = GLAHoleTunnelNetwork
    HoleMaxHealth = 800.0
  End
  Behavior = DestroyDie ModuleTag_10
  End

  Behavior             = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABTunnelNetworkDebris
  End

  Behavior             = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = ProductionUpdate ModuleTag_18
  End

  Behavior = CommandSetUpgrade ModuleTag_ComSet01
    CommandSet = Slth_GLATunnelNetworkCommandSet
    TriggeredBy = Upgrade_GLACamoNetting
  End
  Behavior = LockWeaponCreate ModuleTag_Lock
    SlotToLock = PRIMARY
  End

  Behavior = StealthUpdate ModuleTag_Stealth01
    StealthDelay = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed     = 3
    InnateStealth     = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_Stealth02
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower04
    SpecialPowerTemplate = SuperweaponSneakAttack
    OCL   = OCL_CreateSneakAttackTunnelStart
    ReferenceObject = GLASneakAttackTunnelNetwork
    CreateLocation  = CREATE_AT_LOCATION
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight = 20.0    
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;----------------------------------------------------------------------
Object Chem_GLAInfantryRebel

  ; *** ART Parameters ***
  SelectPortrait  = SUToxinRebel_L
  ButtonImage     = SUToxinRebel

  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo2 = Upgrade_InfantryCaptureBuilding
  UpgradeCameo3 = Upgrade_GLACamouflage
  UpgradeCameo4 = Upgrade_GLANeutralizers

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
  ParticlesAttachedToAnimatedBones = Yes
    
    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

    ; ---- standing
    DefaultConditionState
      Model               = UIRGrdTOX_SKN
      IdleAnimation       = UIRGrd_SKL.UIRGrd_STN 0 35
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDA 
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDB 
      AnimationMode       = ONCE
      WeaponFireFXBone    = PRIMARY Muzzle01
      WeaponLaunchBone    = PRIMARY Muzzle01
      HideSubObject       = MuzzleFX01
      TransitionKey       = TRANS_Standing
    End

    ConditionState        = REALLYDAMAGED
      IdleAnimation       = UIRGrd_SKL.UIRGrd_STB 0 35
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDC
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDD 
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandingHurt
    End

    ; ---- moving
    ConditionState        = MOVING
      Animation           = UIRGrd_SKL.UIRGrd_RNA 15
      AnimationMode       = LOOP
      TransitionKey       = TRANS_Walking
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState   = MOVING ATTACKING

    ConditionState        = MOVING REALLYDAMAGED
      Animation           = UIRGrd_SKL.UIRGrd_RNB 25
      AnimationMode       = LOOP
      TransitionKey       = TRANS_WalkingHurt
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState   = MOVING ATTACKING REALLYDAMAGED
    
    ; ---- dying 
    ConditionState        = DYING
      Animation           = UIRGrd_SKL.UIRGrd_DTA 
      Animation           = UIRGrd_SKL.UIRGrd_DTB 
      AnimationMode       = ONCE
      TransitionKey       = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIRGrd_SKL.UIRGrd_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIRGrd_SKL.UIRGrd_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIRGrd_SKL.UIRGrd_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
      ParticleSysBone   = None BloodPoolGrowing00
    End
    
    ConditionState = SPECIAL_CHEERING
      Animation = UIRGrd_SKL.UIRGrd_IDB
    End

    ; ---- firing
    ConditionState = USING_WEAPON_A
      Animation = UIRGrd_SKL.UIRGrd_ATA3
      AnimationMode = LOOP
      TransitionKey = TRANS_Firing
    End

    ConditionState = USING_WEAPON_A REALLYDAMAGED
      Animation = UIRGrd_SKL.UIRGrd_ATA2
      AnimationMode = LOOP
      TransitionKey = TRANS_FiringHurt
    End

    TransitionState = TRANS_Standing TRANS_Firing
      Animation = UIRGrd_SKL.UIRGrd_ATAST
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Firing TRANS_Standing
      Animation = UIRGrd_SKL.UIRGrd_ATAED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_StandingHurt TRANS_FiringHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE_BACKWARDS
    End

    TransitionState = TRANS_FiringHurt TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Standing TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    ; ------- Bldg-capture
    ConditionState = UNPACKING
      Model             = UIRGrdTOXF_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState = RAISING_FLAG
      Model             = UIRGrdTOXF_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState = PACKING
      Model             = UIRGrdTOXF_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState = TRANS_Raising TRANS_Packing
      Model             = UIRGrdTOXF_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP2
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Chem_Rebel
  Side                = GLAToxinGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1
  VisionRange         = 150
  ShroudClearingRange = 200
  BuildCost           = 300
  BuildTime           = 3.0
 
  WeaponSet
    Conditions        = None
    Weapon            = PRIMARY GLARebelGunBeta
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE 
    Weapon            = PRIMARY GLARebelGunGamma
  End

  ArmorSet
    Conditions      = None
    Armor           = ChemReb_HumanArmor
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Chem_GLABarracks Chem_GLAVehicleCommandTruck
  End

  ExperienceValue    = 15 22 32 46
  ExperienceRequired = 0 45 66 96
  IsTrainable        = Yes
  CrushableLevel     = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = Chem_GLAInfantryRebelCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ToxinRebelVoiceSelect
  VoiceMove = RebelVoiceMove
  VoiceGuard = RebelVoiceMove
  VoiceAttack = ToxinRebelVoiceAttack
  VoiceFear = RebelVoiceFear
  VoiceTaskComplete = RebelVoiceCaptureComplete
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate = ToxinRebelVoiceCreate
    VoiceSubdue = RebelVoiceSubdue
    VoiceGarrison = RebelVoiceGarrison
    VoiceEnter = RebelVoiceMove
    VoiceEnterHostile = RebelVoiceMove
    VoiceGetHealed      = RebelVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE 

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 125.0
    InitialHealth   = 125.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_04
  End

  Locomotor = SET_NORMAL BasicHumanLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 24.0
  End

  Behavior = WeaponSetUpgrade ModuleTag_08
    TriggeredBy = Chem_Upgrade_GLAAnthraxGamma
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ChemicTraining
  End
 
  Behavior = SquishCollide ModuleTag_11
  End

  ClientUpdate = AnimatedParticleSysBoneClientUpdate ModuleTag_12 
  End
  
; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_RebelDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_RebelDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantryGLA
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_RebelDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_16
    PoisonDamageInterval = 100
    PoisonDuration = 3000
  End

  Behavior = SpecialAbility ModuleTag_17
    SpecialPowerTemplate     = SpecialAbilityInfantryCaptureBuilding
    UpdateModuleStartsAttack = Yes
    StartsPaused             = Yes
    InitiateSound            = RebelVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_18
    SpecialPowerTemplate  = SpecialAbilityInfantryCaptureBuilding
    StartAbilityRange     = 5.0
    UnpackTime            = 3000
    PreparationTime       = 20000
    PackTime              = 2000
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 8
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_19
    SpecialPowerTemplate = SpecialAbilityInfantryCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End

  Behavior = StealthUpdate ModuleTag_Stealth
    StealthDelay                = 5000
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End
  Behavior = StealthUpgrade ModuleTag_S10
    TriggeredBy = Upgrade_GLACamouflage
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Chem_GLAChemicalBunker

  ; *** ART Parameters ***
  SelectPortrait = SSChemBunk_L
  ButtonImage    = SSChemBunk_L

  UpgradeCameo1 = Upgrade_GLAAnthraxBeta
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Upgrade_GLANeutralizers

  Draw = W3DModelDraw ModuleTag_01
  OkToChangeModelColor = Yes
  
    ; day
    ConditionState = NONE
      Model        = CBChemBunk
    End
    ConditionState = DAMAGED
      Model        = CBChemBunk_D
    End
    ConditionState = REALLYDAMAGED
      Model        = CBChemBunk_E
    End
    ConditionState = RUBBLE
      Model        = CBChemBunk_R
    End

    ; night
    ConditionState = NIGHT
      Model        = CBChemBunk_N
    End
    ConditionState = DAMAGED NIGHT
      Model        = CBChemBunk_DN
    End
    ConditionState = REALLYDAMAGED NIGHT
      Model        = CBChemBunk_EN
    End
    ConditionState = RUBBLE NIGHT
      Model        = CBChemBunk_RN
    End
    
    ; Snow
    ConditionState = SNOW
      Model        = CBChemBunk_S
    End
    ConditionState = DAMAGED SNOW
      Model        = CBChemBunk_DS
    End
    ConditionState = REALLYDAMAGED SNOW
      Model        = CBChemBunk_ES
    End
    ConditionState = RUBBLE SNOW
      Model        = CBChemBunk_RS
    End

    ; night snow
    ConditionState = SNOW NIGHT
      Model        = CBChemBunk_SN
    End
    ConditionState = DAMAGED SNOW NIGHT
      Model        = CBChemBunk_DSN
    End
    ConditionState = REALLYDAMAGED SNOW NIGHT
      Model        = CBChemBunk_ESN
    End
    ConditionState = RUBBLE SNOW NIGHT
      Model        = CBChemBunk_RSN
    End

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = CBChemBunk
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = CBChemBunk_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = CBChemBunk_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = CBChemBunk_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = CBChemBunk_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = CBChemBunk_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = CBChemBunk_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = CBChemBunk_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = CBChemBunk_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBToxTunn_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = CBChemBunk_DSN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = CBChemBunk_ESN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Bunker
  EditorSorting   = STRUCTURE
  VisionRange     = 150
  ShroudClearingRange = 200
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 1200
  BuildTime           = 24.0

  ExperienceValue     = 108 157 230 330

  Prerequisites
    Science = SCIENCE_Rank3
  End

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = SECONDARY  DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = TERTIARY   DummyWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   NONE
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY  NONE
  End

  ; ***AUDIO parameters ***
  SoundAmbientDamaged = ChemBunkerDamagedAmbientLoop
  SoundAmbientReallyDamaged = ChemBunkerDamagedAmbientLoop
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff

  ; *** ENGINEERING Parameters ***  
  KindOf     = PRELOAD STRUCTURE SELECTABLE IMMOBILE IMMUNE_TO_CAPTURE DEMOTRAP 
  CommandSet = ChemicalBunkerCommandSet

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 1200.0
    InitialHealth   = 1200.0
  End
  ArmorSet
    Conditions      = None
    Armor           = ChemicalBunkerArmor
    DamageFX        = StructureDamageFXNoShake
  End

  Behavior = FireWeaponWhenDeadBehavior  ModuleTag_Death01
    ExemptStatus = UNDER_CONSTRUCTION
    DeathWeapon   = AnthraxBombWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLAAnthraxBeta Chem_Upgrade_GLAAnthraxGamma
  End
  Behavior = FireWeaponWhenDeadBehavior  ModuleTag_Death02
    ExemptStatus = UNDER_CONSTRUCTION
    DeathWeapon   = AnthraxBombWeaponBeta
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAAnthraxBeta
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior  ModuleTag_Death03
    ExemptStatus = UNDER_CONSTRUCTION
    DeathWeapon   = AnthraxBombWeaponGamma
    StartsActive  = No
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma
    ConflictsWith = Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior  ModuleTag_Death04
    ExemptStatus = UNDER_CONSTRUCTION
    DeathWeapon   = AnthraxBombWeaponBetaSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAAnthraxBeta Upgrade_GLANeutralizers
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    RequiresAllTriggers = yes
  End
  Behavior = FireWeaponWhenDeadBehavior  ModuleTag_Death05
    ExemptStatus = UNDER_CONSTRUCTION
    DeathWeapon   = AnthraxBombWeaponGammaSafe
    StartsActive  = No
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = yes
  End

  Behavior = TransitionDamageFX ModuleTag_06
    DamagedFXList1       = Loc: X:0 Y:0 Z:0 FXList:FX_ToxicBunkerDamageTransition
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ToxicBunkerDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_07
    FlameDamageLimit = 20         ;Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ;in a span of this long
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5        ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DemoTrapUpdate ModuleTag_08
    DefaultProximityMode      = Yes       ;If yes, defaults to proximity mode, otherwise defaults to manual.
    DetonationWeaponSlot      = PRIMARY   ;The slot the weapon is in when it detonates.
    ProximityModeWeaponSlot   = SECONDARY ;The slot proximity mode is determined by (bogus weapon)
    ManualModeWeaponSlot      = TERTIARY  ;The slot manual mode is determined by (bogus weapon)
    TriggerDetonationRange    = 100.0     ;Detonation range when in proximity mode (and must be on ground)
    IgnoreTargetTypes         = PROJECTILE UNATTACKABLE
    AutoDetonationWithFriendsInvolved = Yes
    DetonateWhenKilled        = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_09
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 1000
    FX = INITIAL FX_GLADemoTrapWarning
  End

  Behavior = StealthUpdate ModuleTag_03A
    StealthDelay = 0 ; msec
    StealthForbiddenConditions = NONE
    FriendlyOpacityMin = 50.0%
    FriendlyOpacityMax = 80.0%
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = InstantDeathBehavior ModuleTag_10
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = CreateObjectDie ModuleTag_11
    CreationList = OCL_ChemicalBunkerDead
  End

  Behavior = FXListDie ModuleTag_13
    DeathFX = FX_StructureSmallDeath
  End

  Behavior = TunnelContain ModuleTag_15
    TimeForFullHeal = 5000
  End

  BuildCompletion = PLACED_BY_PLAYER
  Geometry            = BOX
  GeometryMajorRadius = 28.0
  GeometryMinorRadius = 36.0
  GeometryHeight      = 22.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
End

;------------------------------------------------------------------------------
Object Chem_GLATankAcid

  ; *** ART Parameters ***
  SelectPortrait         = SUTankAcid_L
  ButtonImage            = SUTankAcid
  
  UpgradeCameo1 = Upgrade_GLASulfurAcid
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Upgrade_GLATankCamouflage
  UpgradeCameo4 = Upgrade_GLANeutralizers
 
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState 
      Model = UVWeevil
      Turret = BASHKA
      WeaponFireFXBone = PRIMARY WeaponA01
      WeaponLaunchBone = PRIMARY WeaponA01
      HideSubObject = UP01 UP02 HOUSECOLOR02 HOUSECOLOR03
    End
    ConditionState = REALLYDAMAGED
      Model = UVWeevil_d
      HideSubObject = UP01 UP02 HOUSECOLOR02 HOUSECOLOR03
    End
    AliasConditionState RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVWeevil
      HideSubObject = UP01 UP02 
      ShowSubObject = HOUSECOLOR02 HOUSECOLOR03
    End
    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVWeevil_d
      HideSubObject = UP01 UP02 
      ShowSubObject = HOUSECOLOR02 HOUSECOLOR03
    End
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVWeevil
      ShowSubObject = UP01 UP02 HOUSECOLOR02 HOUSECOLOR03
    End
    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVWeevil_d
      ShowSubObject = UP01 UP02 HOUSECOLOR02 HOUSECOLOR03
    End
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = AFLAME
      Model = UVWeevil
      HideSubObject = UP01 UP02 HOUSECOLOR02 HOUSECOLOR03
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = BASHKA TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model = UVWeevil_d
      HideSubObject = UP01 UP02 HOUSECOLOR02 HOUSECOLOR03
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = BASHKA TankFireContinious
    End
    AliasConditionState RUBBLE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE AFLAME
      Model = UVWeevil
      HideSubObject = UP01 UP02 
      ShowSubObject = HOUSECOLOR02 HOUSECOLOR03
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = BASHKA TankFireContinious
    End
    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE AFLAME
      Model = UVWeevil_d
      HideSubObject = UP01 UP02 
      ShowSubObject = HOUSECOLOR02 HOUSECOLOR03
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = BASHKA TankFireContinious
    End
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_ONE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO AFLAME
      Model = UVWeevil
      ShowSubObject = UP01 UP02 HOUSECOLOR02 HOUSECOLOR03
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = BASHKA TankFireContinious
    End
    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO AFLAME
      Model = UVWeevil_d
      ShowSubObject = UP01 UP02 HOUSECOLOR02 HOUSECOLOR03
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = BASHKA TankFireContinious
    End
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_TWO AFLAME
    
    TrackMarks = EXTireTrack.tga

    MidLeftFrontTireBone       = KOLESO05
    MidRightFrontTireBone      = KOLESO03
    LeftFrontTireBone          = KOLESO04
    RightFrontTireBone         = KOLESO01
    LeftRearTireBone           = KOLESO06
    RightRearTireBone          = KOLESO02
    TireRotationMultiplier     = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.

    Dust             = RocketBuggyDust
    DirtSpray        = RocketBuggyDirtSpray
    PowerslideSpray  = RocketBuggyDirtPowerSlide
  End

  Draw = W3DModelDraw ModuleTag_01A
    DefaultConditionState
      Model = NONE
      Turret = Plane02
    End
    AliasConditionState = SNOW
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = REALLYDAMAGED SNOW

    ConditionState = USER_2
      Model = UVWeev_C
    End
    ConditionState = USER_2 SNOW
      Model = UVWeev_CS
    End
    ConditionState = USER_2 REALLYDAMAGED RUBBLE
      Model = UVWeev_CD
    End
    ConditionState = USER_2 SNOW REALLYDAMAGED RUBBLE
      Model = UVWeev_CDS
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AcidTank
  Side = GLAToxinGeneral
  EditorSorting    = VEHICLE
  TransportSlotCount = 2
  BuildCost       = 900
  BuildTime       = 9.0
  VisionRange     = 125
  ShroudClearingRange = 300

  WeaponSet 
    Conditions        = None 
    Weapon            = PRIMARY     AcidTankGun
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE 
    Weapon            = PRIMARY     AcidTankGunUpgraded
  End
  WeaponSet 
    Conditions        = CRATEUPGRADE_ONE 
    Weapon            = PRIMARY     AcidTankGunPlusOne
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_ONE PLAYER_UPGRADE 
    Weapon            = PRIMARY     AcidTankGunUpgradedPlusOne
  End
  WeaponSet 
    Conditions        = CRATEUPGRADE_TWO 
    Weapon            = PRIMARY     AcidTankGunPlusTwo
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_TWO PLAYER_UPGRADE 
    Weapon            = PRIMARY     AcidTankGunUpgradedPlusTwo
  End

  ArmorSet
    Conditions      = None
    Armor           = AcidTankArmor
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
    Object = Chem_GLAPalace
  End

  ExperienceValue    = 46 61 81 108
  ExperienceRequired = 0 137 182 242
  IsTrainable = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = GLAVehicleAcidTankCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = MarauderTankVoiceSelect
  VoiceMove = MarauderTankVoiceMove
  VoiceGuard = MarauderTankVoiceMove
  VoiceAttack = MarauderTankVoiceAttack
  SoundMoveStart = MarauderTankMoveStart
  SoundMoveStartDamaged = MarauderTankMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate     = MarauderTankVoiceCreate
    TurretMoveLoop = TurretMoveLoop
    VoiceSalvage = MarauderTankVoiceSalvage      
    VoiceCrush = MarauderTankVoiceCrush
    VoiceEnter = MarauderTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 500.0
    InitialHealth   = 500.0
    SubdualDamageCap = 900
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 180
      RecenterTime = 5000
      AllowsPitch              = Yes
      MinPhysicalPitch         = -20
      TurretFireAngleSweep     = PRIMARY 8
      TurretSweepSpeedModifier = PRIMARY 0.4
      TurretFireAngleSweep     = SECONDARY 45
      TurretSweepSpeedModifier = SECONDARY 2.0
      ControlledWeaponSlots = PRIMARY SECONDARY
      FiresWhileTurning   = Yes
    End
    MoodAttackCheckRate        = 100
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL AvengerLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 80.0
  End

  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_AcidTankDeathEffectSimple
  End
  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_AcidTankDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = AutoHealBehavior ModuleTag_25
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = WeaponSetUpgrade ModuleTag_26
    TriggeredBy = Upgrade_GLASulfurAcid
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_27
    DeathWeapon   = AcidShellWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLASulfurAcid Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_28
    DeathWeapon   = AcidShellWeaponUpgraded
    StartsActive  = No   
    TriggeredBy   = Upgrade_GLASulfurAcid
    ConflictsWith = Upgrade_GLANeutralizers
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_29
    DeathWeapon   = AcidShellWeaponSafe
    StartsActive  = No
    ConflictsWith = Upgrade_GLASulfurAcid
    TriggeredBy   = Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_30
    DeathWeapon   = AcidShellWeaponUpgradedSafe
    StartsActive  = No   
    TriggeredBy   = Upgrade_GLASulfurAcid Upgrade_GLANeutralizers
    RequiresAllTriggers = yes
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ChemicTraining
  End

  Behavior = StealthUpdate ModuleTag_S07
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_S10
    TriggeredBy = Upgrade_GLATankCamouflage
  End
  Behavior = ModelConditionUpgrade ModuleTag_S13
    ConditionFlag = USER_2
    TriggeredBy = Upgrade_GLATankCamouflage
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 15.0
  GeometryHeight = 10
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAFactory

  ; *** ART Parameters ***
  SelectPortrait         = SUPrison_L
  ButtonImage            = SUPrison

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  ;----------------------------------------------------------
  Draw = W3DModelDraw ModuleTag_00
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model = UBPrison_AF
      Animation     = UBPrison_AF.UBPrison_AF
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    AliasConditionState = GARRISONED
    AliasConditionState = DAMAGED GARRISONED
    AliasConditionState = REALLYDAMAGED GARRISONED
    AliasConditionState = SNOW
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = GARRISONED SNOW
    AliasConditionState = DAMAGED GARRISONED SNOW
    AliasConditionState = REALLYDAMAGED GARRISONED SNOW
    AliasConditionState = NIGHT
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = GARRISONED NIGHT
    AliasConditionState = DAMAGED GARRISONED NIGHT
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = DAMAGED NIGHT SNOW
    AliasConditionState = GARRISONED NIGHT SNOW
    AliasConditionState = DAMAGED GARRISONED NIGHT SNOW
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT SNOW

    ConditionState = REALLYDAMAGED RUBBLE
      Model = NONE
    End
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT

    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model    = UBPrison_AF
      Animation     = UBPrison_AF.UBPrison_AF
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState  = AWAITING_CONSTRUCTION 
      Model    = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model = UBPrison
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison.UBPrison
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBPrison_D
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_D.UBPrison_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBPrison_E
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_E.UBPrison_E
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBPrison
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison.UBPrison
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBPrison_D
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_D.UBPrison_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBPrison_E
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_E.UBPrison_E
      AnimationMode        = LOOP
    End
        
    ; Snow
    ConditionState = SNOW
      Model = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPris_S.UBPris_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPriso_SD.UBPriso_SD
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPriso_ES.UBPriso_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPris_S.UBPris_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPriso_SD.UBPriso_SD
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPriso_ES.UBPriso_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBPrison_N
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_N.UBPrison_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBPrison_DN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBPrison_DN.UBPrison_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBPrison_EN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBPrison_EN.UBPrison_EN
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBPrison_N
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_N.UBPrison_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBPrison_DN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_DN.UBPrison_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBPrison_EN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_EN.UBPrison_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPris_S.UBPris_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBPriso_SD.UBPriso_SD
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBPriso_ES.UBPriso_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPris_S.UBPris_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPriso_SD.UBPriso_SD
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPriso_ES.UBPriso_ES
      AnimationMode        = LOOP
    End


    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPrison
      Animation          = UBPrison.UBPrison
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPrison_D
      Animation          = UBPrison_D.UBPrison_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPrison_E
      Animation          = UBPrison_E.UBPrison_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPrison_N
      Animation          = UBPrison_N.UBPrison_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPrison_DN
      Animation          = UBPrison_DN.UBPrison_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPrison_EN
      Animation          = UBPrison_EN.UBPrison_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPris_S
      Animation          = UBPris_S.UBPris_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBPriso_SD
      Animation          = UBPriso_SD.UBPriso_SD
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBPriso_ES
      Animation          = UBPriso_ES.UBPriso_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBPris_S
      Animation          = UBPris_S.UBPris_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBPriso_SD
      Animation          = UBPriso_SD.UBPriso_SD
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBPriso_ES
      Animation          = UBPriso_ES.UBPriso_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED

  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; --------------- The Factory Door -----------------
  Draw                = W3DModelDraw ModuleTag_04

    ConditionState    = NONE
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPrison_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPrison_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT DAMAGED
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPrison_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW NIGHT
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED

    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

    ConditionState    = DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
        
    ConditionState    = DOOR_1_OPENING
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING

    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED

    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_CLOSING
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED

    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN

    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED

    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
  End

  ;-------------FORTIFIED STATE----------------
  Draw = W3DModelDraw ModuleTag_Draw05
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = none
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = NIGHT
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = DAMAGED NIGHT SNOW
    AliasConditionState = REALLYDAMAGED NIGHT SNOW

    ; day
    ConditionState = GARRISONED
      Model = UBPrisonEG
    End
    AliasConditionState = GARRISONED NIGHT

    ConditionState = DAMAGED GARRISONED
      Model = UBPrisonEG_D
    End
    AliasConditionState = DAMAGED GARRISONED NIGHT

    ConditionState = REALLYDAMAGED GARRISONED
      Model = UBPrisonEG_E
    End
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT
        
    ; Snow
    ConditionState = GARRISONED SNOW
      Model = UBPrisonEG_S
    End
    AliasConditionState = GARRISONED NIGHT SNOW

    ConditionState = DAMAGED GARRISONED SNOW
      Model = UBPrisonEG_DS
    End
    AliasConditionState = DAMAGED GARRISONED NIGHT SNOW

    ConditionState = REALLYDAMAGED GARRISONED SNOW
      Model = UBPrisonEG_ES
    End
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT SNOW


    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPrisonEG
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPrisonEG_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPrisonEG_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPrisonEG
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPrisonEG_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPrisonEG_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPrisonEG_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBPrisonEG_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBPrisonEG_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBPrisonEG_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBPrison_SD
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBPrison_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:GLAFactory
  Side             = GLAToxinGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 1000
  BuildTime        = 20
  EnergyProduction = 0
  CommandSet       = Chem_GLAFactoryCommandSet
  VisionRange      = 200
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None 
    Weapon = SECONDARY GLACleanupWeapon
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = GLAUpgradedStructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 75 75 75 75

  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf        = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE COMMANDCENTER CAN_ATTACK CASH_GENERATOR

  Body            = StructureBody ModuleTag_05
    MaxHealth     = 2400.0
    InitialHealth = 2400.0
    SubdualDamageCap = 4800
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

;  Behavior        = RebuildHoleExposeDie ModuleTag_06
;    HoleName      = GLAHoleBarracks
;    HoleMaxHealth = 800.0
;  End

  Behavior = DestroyDie ModuleTag_07
  End

  Behavior        = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior        = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
    NumDoorAnimations            = 1
    DoorOpeningTime              = 2000
    DoorWaitOpenTime             = 2000
    DoorCloseTime                = 2000
    ConstructionCompleteDuration = 0
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:-20.0  Y: 15.0   Z:0.0
    NaturalRallyPoint = X:-20.0  Y: 50.0   Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ;-------------DESIGNED FOR SMALL MEDIUM FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = GrantUpgradeCreate ModuleTag_Upgrade03
    UpgradeToGrant = Upgrade_GLAAnthraxBeta
  End
  Behavior = GrantUpgradeCreate ModuleTag_Upgrade04
    UpgradeToGrant = Upgrade_GLABombTruckBioBomb
  End
  Behavior = GrantUpgradeCreate ModuleTag_Upgrade05
    UpgradeToGrant = Upgrade_GLAToxinShells
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = No
  End
  
   Behavior = OverchargeBehavior ModuleTag_Selfd
    HealthPercentToDrainPerSecond    = 5%
    NotAllowedWhenHealthBelowPercent = 0%
  End 

  Behavior = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityContaminationOnOff
    OCL                  = OCL_BuildingContaminationPoisonFieldSelector
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_CleanToxins
    DeathWeapon   = HazardFieldCoreWeapon
    StartsActive  = Yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 45.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;----------------------------------------------------------------------------
Object Chem_GLAVehicleCommandTruck

  ; *** ART Parameters ***
  SelectPortrait         = SUPOWTruck_L
  ButtonImage            = SUPOWTruck

  UpgradeCameo1 = Upgrade_ImproovedCommandTruck
  UpgradeCameo2 = Upgrade_GLANeutralizers

  Draw = W3DOverlordTruckDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVComTruckC
      Animation = UVComTruckC.UVComTruckC
      AnimationMode = LOOP
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WEAPONA
      WeaponLaunchBone = PRIMARY WEAPONA
      ParticleSysBone  = EXHAUST01 DozerSmokeLight
      ParticleSysBone  = EXHAUST02 DozerSmokeLight
      HideSubObject = TURRET
    End

    ConditionState  = MOVING
      Model = UVComTruckC
      ParticleSysBone  = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone  = EXHAUST02 DozerSmokeHeavy
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVComTruckC_D
      Animation = UVComTruckC_D.UVComTruckC_D
      AnimationMode = LOOP
    End
    AliasConditionState = RUBBLE

    ConditionState  = MOVING REALLYDAMAGED
      Model = UVComTruckC_D
      ParticleSysBone  = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone  = EXHAUST02 DozerSmokeHeavy
    End
    AliasConditionState = MOVING RUBBLE

    ConditionState = AFLAME
      Model = UVComTruckC
      Animation = UVComTruckC.UVComTruckC
      AnimationMode = LOOP
      ParticleSysBone  = EXHAUST01 DozerSmokeLight
      ParticleSysBone  = EXHAUST02 DozerSmokeLight
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = TURRETB01 TankFireContinious
    End

    ConditionState  = MOVING AFLAME
      Model = UVComTruckC
      ParticleSysBone  = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone  = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = TURRETB01 TankFireContinious
    End
    
    ConditionState = REALLYDAMAGED AFLAME
      Model = UVComTruckC_D
      Animation = UVComTruckC_D.UVComTruckC_D
      AnimationMode = LOOP
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = TURRETB01 TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    ConditionState  = MOVING REALLYDAMAGED AFLAME
      Model = UVComTruckC_D
      ParticleSysBone  = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone  = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = TURRETB01 TankFireContinious
    End
    AliasConditionState = MOVING RUBBLE AFLAME

    ;***************************************

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = UVComTruckC
      Animation = UVComTruckC.UVComTruckC
      AnimationMode = LOOP
      ParticleSysBone  = EXHAUST01 DozerSmokeLight
      ParticleSysBone  = EXHAUST02 DozerSmokeLight
      ShowSubObject = TURRET
    End

    ConditionState  = MOVING WEAPONSET_PLAYER_UPGRADE
      Model = UVComTruckC
      ParticleSysBone  = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone  = EXHAUST02 DozerSmokeHeavy
      ShowSubObject = TURRET
    End
    
    ConditionState = REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
      Model = UVComTruckC_D
      Animation = UVComTruckC_D.UVComTruckC_D
      AnimationMode = LOOP
      ShowSubObject = TURRET
    End
    AliasConditionState = RUBBLE WEAPONSET_PLAYER_UPGRADE

    ConditionState  = MOVING REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
      Model = UVComTruckC_D
      ParticleSysBone  = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone  = EXHAUST02 DozerSmokeHeavy
      ShowSubObject = TURRET
    End
    AliasConditionState = MOVING RUBBLE WEAPONSET_PLAYER_UPGRADE

    ConditionState = AFLAME WEAPONSET_PLAYER_UPGRADE
      Model = UVComTruckC
      Animation = UVComTruckC.UVComTruckC
      AnimationMode = LOOP
      ParticleSysBone  = EXHAUST01 DozerSmokeLight
      ParticleSysBone  = EXHAUST02 DozerSmokeLight
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = TURRETB01 TankFireContinious
      ShowSubObject = TURRET
    End

    ConditionState  = MOVING AFLAME WEAPONSET_PLAYER_UPGRADE
      Model = UVComTruckC
      ParticleSysBone  = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone  = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = TURRETB01 TankFireContinious
      ShowSubObject = TURRET
    End
    
    ConditionState = REALLYDAMAGED AFLAME WEAPONSET_PLAYER_UPGRADE
      Model = UVComTruckC_D
      Animation = UVComTruckC_D.UVComTruckC_D
      AnimationMode = LOOP
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = TURRETB01 TankFireContinious
      ShowSubObject = TURRET
    End
    AliasConditionState = RUBBLE AFLAME WEAPONSET_PLAYER_UPGRADE

    ConditionState  = MOVING REALLYDAMAGED AFLAME WEAPONSET_PLAYER_UPGRADE
      Model = UVComTruckC_D
      ParticleSysBone  = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone  = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = TURRET TankFireContinious
      ParticleSysBone = TURRETB01 TankFireContinious
      ShowSubObject = TURRET
    End
    AliasConditionState = MOVING RUBBLE AFLAME WEAPONSET_PLAYER_UPGRADE
    
    TrackMarks = EXTireTrack.tga
    
    LeftFrontTireBone    = Tire01
    RightFrontTireBone   = Tire02
    MidLeftRearTireBone  = Tire03
    MidRightRearTireBone = Tire04
    LeftRearTireBone     = Tire05
    RightRearTireBone    = Tire06

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_Draw03
    OkToChangeModelColor = No
    DefaultConditionState 
      Model = Logo_Chem
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:CommandTruck
  Side = GLAToxinGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 6
  BuildCost       = 1500
  BuildTime       = 15
  VisionRange     = 200
  ShroudClearingRange = 300

  Prerequisites
    Science = SCIENCE_CHEM
  End

  WeaponSet 
    Conditions        = None 
    Weapon            = PRIMARY NONE
  End
  WeaponSet 
    Conditions        = PLAYER_UPGRADE
    Weapon            = PRIMARY Chem_CommandTruckWeapon
  End

  ArmorSet
    Conditions = None
    Armor      = SuperTruckArmor
    DamageFX   = TankDamageFX
  End

  ExperienceValue  = 100 100 100 100
  IsTrainable    = No
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = Chem_GLAVehicleCommandTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RadarVanVoiceSelect
  VoiceMove = RadarVanVoiceMove
  VoiceAttack = RadarVanVoiceMove
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart

  UnitSpecificSounds
    VoiceCreate     = RadarVanVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
    TruckLandingSound = NoSound
    TruckPowerslideSound = NoSound
    VoiceCrush      = RadarVanVoiceCrush
    VoiceEnter = RadarVanVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE IGNORES_SELECT_ALL ATTACK_NEEDS_LINE_OF_SIGHT MP_COUNT_FOR_VICTORY SCORE_CREATE HEAL_PAD DRONE

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 1500
    InitialHealth   = 1500
    SubdualDamageCap = 1500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_09
    Turret
      TurretTurnRate = 120
      TurretPitchRate = 120
      AllowsPitch = Yes
      FirePitch = 45
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL POWTruckLocomotor

  Behavior = PhysicsBehavior ModuleTag_10
    Mass = 100.0
  End

  Behavior = WeaponSetUpgrade ModuleTag_W
    TriggeredBy = Upgrade_ImproovedCommandTruck
  End

  Behavior = SlowDeathBehavior  ModuleTag_11
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_CommandTruckDeathEffect
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 0
    OCL = FINAL OCL_CommandTruckDeathEffectSimple
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = CreateCrateDie ModuleTag_15
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_19
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_CrusaderDamageTransition
  End
  
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SuperweaponRebelAmbush
    UpgradeOCL           = SCIENCE_RebelAmbush3 Chem_SUPERWEAPON_RebelAmbush3
    UpgradeOCL           = SCIENCE_RebelAmbush2 Chem_SUPERWEAPON_RebelAmbush2
    OCL                  = Chem_SUPERWEAPON_RebelAmbush1
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower02
    SpecialPowerTemplate = SuperweaponAnthraxBomb
    OCL                  = SUPERWEAPON_AnthraxBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower03
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairEverything3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairEverything2
    OCL                  = SUPERWEAPON_RepairEverything1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower05
    SpecialPowerTemplate = SuperweaponGPSScrambler
    OCL                  = SUPERWEAPON_GPSScrambler
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower06
    SpecialPowerTemplate = SuperweaponCarpetBomb
    OCL                  = SUPERWEAPON_AcidCarpetBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End 
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower07
    SpecialPowerTemplate = SuperweaponSalvageDrop
    UpgradeOCL           = SCIENCE_SalvageDrop3 SUPERWEAPON_SalvageDrop3
    UpgradeOCL           = SCIENCE_SalvageDrop2 SUPERWEAPON_SalvageDrop2
    OCL                  = SUPERWEAPON_SalvageDrop1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower10
    SpecialPowerTemplate = SuperweaponHealInfantry
    OCL                  = SUPERWEAPON_HealInfantry
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = CashBountyPower ModuleTag_SpecialPower12
    SpecialPowerTemplate    = SpecialAbilityCashBounty1
    Bounty                  = 5%
  End
  Behavior = CashBountyPower ModuleTag_SpecialPower13
    SpecialPowerTemplate    = SpecialAbilityCashBounty2
    Bounty                  = 10%
  End
  Behavior = CashBountyPower ModuleTag_SpecialPower14
    SpecialPowerTemplate    = SpecialAbilityCashBounty3
    Bounty                  = 20%
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower15
    SpecialPowerTemplate = SuperweaponPollution
    OCL                  = OCL_PoisonFieldUpgradedMedium
    UpgradeOCL           = SCIENCE_Pollution2 OCL_PoisonFieldGammaMedium2
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = GrantScienceUpgrade ModuleTag_Science01
    GrantScience = SCIENCE_Pollution2
    TriggeredBy = Chem_Upgrade_GLAAnthraxGamma
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_Exit
    UnitCreatePoint   = X:0.0  Y:-10.0   Z:0.0
    NaturalRallyPoint = X:0.0  Y:-20.0   Z:0.0
  End

  Behavior = OverlordContain ModuleTag_Decal
    Slots  = 1
    DamagePercentToUnits  = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PayloadTemplateName   = CommandDecalObject
  End

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount     = 8
    HealingDelay      = 1000
    Radius            = 100
    StartsActive      = Yes
    KindOf            = VEHICLE INFANTRY
  End

  Behavior = SpecialAbility ModuleTag_CL01
    SpecialPowerTemplate = SpecialAbilityCommandTruckCleanToxins
    UpdateModuleStartsAttack = Yes
    StartsPaused             = No
  End
  Behavior = SpecialAbilityUpdate ModuleTag_CL02
    SpecialPowerTemplate  = SpecialAbilityCommandTruckCleanToxins
    StartAbilityRange     = 3.0
    UnpackTime            = 0
    PackTime              = 0
    PreparationTime       = 0
    SpecialObject = GLACommandTruckCleaner
    MaxSpecialObjects = 1
    SpecialObjectsPersistWhenOwnerDies = Yes 
    SpecialObjectsPersistent = Yes
    UniqueSpecialObjectTargets = No
    FlipOwnerAfterUnpacking  = No
    FleeRangeAfterCompletion = 0.0
    LoseStealthOnTrigger     = Yes
    ApproachRequiresLOS       = No
    NeedToFaceTarget          = No
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 12.0
  GeometryHeight = 16.0     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  
End

;------------------------------------------------------------------------------
Object Chem_GLASupplyStash

  ; *** ART Parameters ***
  SelectPortrait         = SNPOWTruck_L
  ButtonImage            = SNPOWTruck

  UpgradeCameo1 = Upgrade_GLAJunkRepair

  Draw = W3DTruckDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    ExtraPublicBone = SMOKE03

    ConditionState = NONE
      Model = NVPowTrck
      Animation     = NONE
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    AliasConditionState = DAMAGED 
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = DAMAGED NIGHT SNOW
    
    ConditionState = REALLYDAMAGED
      Model = NVPowTrck_D
      Animation     = NONE
    End
    AliasConditionState = NIGHT REALLYDAMAGED
    AliasConditionState = SNOW REALLYDAMAGED
    AliasConditionState = NIGHT SNOW REALLYDAMAGED
    AliasConditionState = RUBBLE
    AliasConditionState = NIGHT RUBBLE
    AliasConditionState = SNOW RUBBLE
    AliasConditionState = NIGHT SNOW RUBBLE

    ConditionState = AFLAME
      Model = NVPowTrck
      ParticleSysBone = HOUSECOLOR02 TankFireContinious
      ParticleSysBone = SMOKE01 TankFireContinious
      Animation     = NONE
    End
    AliasConditionState = NIGHT AFLAME
    AliasConditionState = SNOW AFLAME
    AliasConditionState = NIGHT SNOW AFLAME
    AliasConditionState = DAMAGED AFLAME
    AliasConditionState = DAMAGED NIGHT AFLAME
    AliasConditionState = DAMAGED SNOW AFLAME
    AliasConditionState = DAMAGED NIGHT SNOW AFLAME
    
    ConditionState = REALLYDAMAGED AFLAME
      Model = NVPowTrck_D
      ParticleSysBone = HOUSECOLOR02 TankFireContinious
      ParticleSysBone = SMOKE01 TankFireContinious
      Animation     = NONE
    End
    AliasConditionState = NIGHT REALLYDAMAGED AFLAME
    AliasConditionState = SNOW REALLYDAMAGED AFLAME
    AliasConditionState = NIGHT SNOW REALLYDAMAGED AFLAME
    AliasConditionState = RUBBLE AFLAME
    AliasConditionState = NIGHT RUBBLE AFLAME
    AliasConditionState = SNOW RUBBLE AFLAME
    AliasConditionState = NIGHT SNOW RUBBLE AFLAME

    ConditionState = DOCKING_ACTIVE
      Model = NVPowTrck
      Animation = NVPowTrck.NVPowTrck
      AnimationMode = ONCE
    End
    AliasConditionState = NIGHT DOCKING_ACTIVE
    AliasConditionState = SNOW DOCKING_ACTIVE
    AliasConditionState = NIGHT SNOW DOCKING_ACTIVE

    ConditionState = DAMAGED REALLYDAMAGED RUBBLE DOCKING_ACTIVE
      Model = NVPowTrck_D
      Animation = NVPowTrck_D.NVPowTrck_D
      AnimationMode = ONCE
    End
    AliasConditionState = DAMAGED REALLYDAMAGED RUBBLE NIGHT DOCKING_ACTIVE
    AliasConditionState = DAMAGED REALLYDAMAGED RUBBLE SNOW DOCKING_ACTIVE
    AliasConditionState = DAMAGED REALLYDAMAGED RUBBLE NIGHT SNOW DOCKING_ACTIVE

    ConditionState = DOCKING_ACTIVE AFLAME
      Model = NVPowTrck
      Animation = NVPowTrck.NVPowTrck
      AnimationMode = ONCE
      ParticleSysBone = HOUSECOLOR02 TankFireContinious
      ParticleSysBone = SMOKE01 TankFireContinious
    End
    AliasConditionState = NIGHT DOCKING_ACTIVE AFLAME
    AliasConditionState = SNOW DOCKING_ACTIVE AFLAME
    AliasConditionState = NIGHT SNOW DOCKING_ACTIVE AFLAME

    ConditionState = DAMAGED REALLYDAMAGED RUBBLE DOCKING_ACTIVE AFLAME
      Model = NVPowTrck_D
      Animation = NVPowTrck_D.NVPowTrck_D
      AnimationMode = ONCE
      ParticleSysBone = HOUSECOLOR02 TankFireContinious
      ParticleSysBone = SMOKE01 TankFireContinious
    End
    AliasConditionState = DAMAGED REALLYDAMAGED RUBBLE NIGHT DOCKING_ACTIVE AFLAME
    AliasConditionState = DAMAGED REALLYDAMAGED RUBBLE SNOW DOCKING_ACTIVE AFLAME
    AliasConditionState = DAMAGED REALLYDAMAGED RUBBLE NIGHT SNOW DOCKING_ACTIVE AFLAME
    
    LeftFrontTireBone    = Tire01
    RightFrontTireBone   = Tire02
    MidLeftFrontTireBone  = Tire05
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone  = Tire07
    MidRightRearTireBone = Tire08
    LeftRearTireBone     = Tire03
    RightRearTireBone    = Tire04
    TrackMarks = EXTireTrack.tga
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:StashTruck
  Side = GLAToxinGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 6
  BuildCost       = 1300
  BuildTime       = 13.0    ;in seconds
  VisionRange     = 100
  ShroudClearingRange = 200
  ExperienceValue  = 75 75 75 75
  
  WeaponSet
    Conditions = None
  End

  ArmorSet
    Conditions      = None
    Armor           = SuperTruckArmor
    DamageFX        = TankDamageFX
  End

  IsTrainable = No
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GLAVehicleStashTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = SupplyTruckVoiceSelect
  VoiceMove             = SupplyTruckVoiceMove
  VoiceAttack           = NoSound
  SoundMoveStart        = SupplyTruckMoveStart
  SoundMoveStartDamaged = SupplyTruckMoveStart
  UnitSpecificSounds
    VoiceCreate          = SupplyTruckVoiceCreate
    TruckLandingSound    = NoSound
    TruckPowerslideSound = NoSound
    VoiceSupply          = SupplyTruckVoiceSupply
    VoiceCrush           = SupplyTruckVoiceCrush
    VoiceEnter           = SupplyTruckVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE IGNORES_SELECT_ALL CASH_GENERATOR FS_SUPPLY_CENTER MP_COUNT_FOR_VICTORY HEAL_PAD DRONE

  Behavior = SupplyCenterCreate ModuleTag_05
  End

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 1200
    InitialHealth   = 1200
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = AIUpdateInterface ModuleTag_09
  End

  Locomotor = SET_NORMAL POWTruckLocomotor

  Behavior = PhysicsBehavior ModuleTag_10
    Mass = 100.0
  End

  Behavior = SlowDeathBehavior  ModuleTag_11
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_StashTruckDeathEffect
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 0
    OCL = FINAL OCL_StashTruckDeathEffectSimple
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = CreateCrateDie ModuleTag_15
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_19
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_CrusaderDamageTransition
  End
  
  Behavior = SupplyCenterDockUpdate ModuleTag_25
    AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
    NumberApproachPositions = -1 ; This is a Boneless dock, so this means infinite can approach
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Behavior = SupplyCenterProductionExitUpdate ModuleTag_Exit
    UnitCreatePoint   = X:-25.0  Y:0.0   Z:0.0
    NaturalRallyPoint = X:-40.0  Y:0.0   Z:0.0
  End

  Behavior = RepairDockUpdate ModuleTag_12B
    TimeForFullHeal = 10000
    NumberApproachPositions = 5
  End

  Behavior = FireWeaponWhenDamagedBehavior ModuleTag_BeaconRemoval
    StartsActive = Yes
    ReactionWeaponPristine = GLGSupplyTruckBeaconRemovalWeapon
    ReactionWeaponDamaged = GLGSupplyTruckBeaconRemovalWeapon
    ReactionWeaponReallyDamaged = GLGSupplyTruckBeaconRemovalWeapon
    DamageTypes = NONE +HACK
    DamageAmount = 0.0001
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 15.0
  GeometryHeight = 20.0     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  
End

;------------------------------------------------------------------------------
Object Chem_FakeGLAScudStorm

  ; *** ART Parameters ***
  SelectPortrait         = SUScudStorm_L
  ButtonImage            = SUScudStorm

  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo2 = Upgrade_GLASulfurAcid
  UpgradeCameo3 = Upgrade_GLANeutralizers

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = PRIMARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    ; day
    ConditionState = NONE ; lying around
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY Trans_ATTACKING ; from lying around to straight up
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2
      Animation     = UBScudStrm_A2.UBScudStrm_A2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A

    TransitionState = Trans_ATTACKING Trans_READY ; empty arms going underground, coming up with presents for bad people
      Model         = UBScudStrm_A3
      Animation     = UBScudStrm_A3.UBScudStrm_A3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ; day
    ConditionState = DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED Trans_ATTACKING_DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED Trans_READY_DAMAGED
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED Trans_ATTACKING_REALLYDAMAGED
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED Trans_READY_REALLYDAMAGED
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
        ;-------------------------------------------------------------------------------------------------------------------------
        ;  SNOW
    ConditionState =  SNOW ; from underground to lying around
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_SNOW Trans_ATTACKING_SNOW
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING  SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2S
      Animation     = UBScudStrm_A2S.UBScudStrm_A2S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A  SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A  SNOW

    TransitionState = Trans_ATTACKING_SNOW Trans_READY_SNOW ; empty arms going underground
      Model         = UBScudStrm_A3S
      Animation     = UBScudStrm_A3S.UBScudStrm_A3S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED  SNOW
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED  SNOW
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED  SNOW
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_SNOW Trans_ATTACKING_DAMAGED_SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED SNOW
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_SNOW Trans_READY_DAMAGED_SNOW
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_SNOW Trans_ATTACKING_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_SNOW Trans_READY_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
    ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT
    ConditionState = NIGHT ; from underground to lying around
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHT Trans_ATTACKING_NIGHT
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING NIGHT  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2
      Animation     = UBScudStrm_A2.UBScudStrm_A2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A NIGHT
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A NIGHT

    TransitionState = Trans_ATTACKING_NIGHT Trans_READY_NIGHT ; empty arms going underground
      Model         = UBScudStrm_A3
      Animation     = UBScudStrm_A3.UBScudStrm_A3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHT Trans_ATTACKING_DAMAGED_NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED NIGHT
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A NIGHT DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A NIGHT DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHT Trans_READY_DAMAGED_NIGHT
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHT Trans_ATTACKING_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A NIGHT REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHT Trans_READY_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
        ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT SNOW
    ConditionState = NIGHT SNOW ; from underground to lying around
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHTSNOW Trans_ATTACKING_NIGHTSNOW
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING NIGHT SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2NS
      Animation     = UBScudStrm_A2NS.UBScudStrm_A2NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A NIGHT SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A NIGHT SNOW

    TransitionState = Trans_ATTACKING_NIGHTSNOW Trans_READY_NIGHTSNOW ; empty arms going underground
      Model         = UBScudStrm_A3NS
      Animation     = UBScudStrm_A3NS.UBScudStrm_A3NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHTSNOW Trans_ATTACKING_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A NIGHT DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A NIGHT DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHTSNOW Trans_READY_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
       
    ;-------------------------------------------------------------------------------------------------------------------------
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHTSNOW Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = PRIMARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = PRIMARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_A NIGHT REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_A NIGHT REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW Trans_READY_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    
    ConditionState       = SOLD
      Model              = NONE
    End    
    AliasConditionState       = SOLD DAMAGED
    AliasConditionState       = SOLD REALLYDAMAGED
    AliasConditionState       = SOLD SNOW
    AliasConditionState       = SOLD DAMAGED SNOW
    AliasConditionState       = SOLD REALLYDAMAGED SNOW
    AliasConditionState       = SOLD NIGHT
    AliasConditionState       = SOLD DAMAGED NIGHT
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT
    AliasConditionState       = SOLD NIGHT SNOW
    AliasConditionState       = SOLD DAMAGED NIGHT SNOW
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT SNOW
  End

  ;-------------------------------------------------------------------------------------------------------------------------
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
  
    ConditionState = None
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End

    ConditionState       = SOLD
      Model              = NONE
    End    
    ConditionState       = SOLD SNOW
       Model             = NONE
    End   
    ConditionState       = SOLD NIGHT
       Model             = NONE
    End    
    ConditionState       = SOLD NIGHT SNOW
       Model             = NONE
    End  
  
    ConditionState = PREATTACK_A ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End
  End

  Draw = W3DModelDraw ModuleTag_03
    OkToChangeModelColor = Yes
  
    ConditionState = None
      Model         = UBScudStrm_A6
      Animation     = UBScudStrm_A6.UBScudStrm_A6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  DAMAGED
      Model         = UBScudStrm_DA6
      Animation     = UBScudStrm_DA6.UBScudStrm_DA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA6
      Animation     = UBScudStrm_EA6.UBScudStrm_EA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm_A6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED

      Model              = UBScudStrm_DA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
      Model              = UBScudStrm_EA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = SOLD
      Model              = NONE
    End    
    ConditionState       = SOLD SNOW
       Model             = NONE
    End   
    ConditionState       = SOLD NIGHT
       Model             = NONE
    End    
    ConditionState       = SOLD NIGHT SNOW
       Model             = NONE
    End  
    
  End

  Draw = W3DModelDraw ModuleTag_04
    OkToChangeModelColor = Yes
  
    ConditionState = None
      Model         = UBScudStrm_F
      Animation     = UBScudStrm_F.UBScudStrm_F
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  DAMAGED
      Model         = UBScudStrm_DF
      Animation     = UBScudStrm_DF.UBScudStrm_DF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState =  REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EF
      Animation     = UBScudStrm_EF.UBScudStrm_EF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    
    ConditionState       = SOLD
      Model              = NONE
    End    
    AliasConditionState       = SOLD DAMAGED
    AliasConditionState       = SOLD REALLYDAMAGED
    AliasConditionState       = SOLD SNOW
    AliasConditionState       = SOLD DAMAGED SNOW
    AliasConditionState       = SOLD REALLYDAMAGED SNOW
    AliasConditionState       = SOLD NIGHT
    AliasConditionState       = SOLD DAMAGED NIGHT
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT
    AliasConditionState       = SOLD NIGHT SNOW
    AliasConditionState       = SOLD DAMAGED NIGHT SNOW
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT SNOW
  End
   
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End    
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End   
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ScudStorm
  Side = GLAToxinGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 1000
  BuildTime        = 20
  VisionRange      = 300
  ShroudClearingRange = 300

  Prerequisites
    Object = Chem_GLAPalace
    Science = SCIENCE_CHEM SCIENCE_ASLT SCIENCE_SLTH SCIENCE_DEMO
    Science = SCIENCE_Rank5
  End

  EnergyProduction = 0
  CommandSet       = FakeGLAScudStormCommandSet
  ShroudRevealToAllRange = 60  ; Reveals shroud to all players at a specific amount which can be different. 

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions      = None
    Armor           = FakeStructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ExperienceValue   = 0 0 0 0

  ; *** AUDIO Parameters ***
  VoiceSelect           = FakeBuildingSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE FS_SUPERWEAPON
  Body               = StructureBody ModuleTag_07
    MaxHealth        = 1000.0
    InitialHealth    = 1000.0
    SubdualDamageCap = 1000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = ProductionUpdate ModuleTag_08
  End

  Behavior = AIUpdateInterface ModuleTag_09
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = CreateObjectDie ModuleTag_10
    CreationList = OCL_LargeStructureDebris
  End
  Behavior = FXListDie ModuleTag_11
    DeathFX = FX_StructureMediumDeath
  End

  Behavior = DestroyDie ModuleTag_15
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15DW
    ExemptStatus = UNDER_CONSTRUCTION
    DeathWeapon   = FakeStructureDetonationWeapon
    StartsActive  = Yes
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_16
    ReplaceObject = Chem_GLAScudStorm
    TriggeredBy = Upgrade_BecomeRealGLAScudStorm
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_18
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = RadiusDecalUpdate ModuleTag_17
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior        = FXListDie ModuleTag_19
    DeathFX       = FX_BuildingDie
  End

  Geometry            = BOX
  GeometryMajorRadius = 71.0
  GeometryMinorRadius = 67.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
  FactoryExitWidth    = 25 
  ShadowTexture       = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 200
  ShadowSizeY = 148
End

;------------------------------------------------------------------------------
Object Chem_GLAStingerSite ;; Defense site

  ; *** ART Parameters ***
  SelectPortrait         = SUDefenseSite_L
  ButtonImage            = SUDefenseSite

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02
    End
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02
    End

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02
    End
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02
    End
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02
    End
    
    ; night  **********************************
    ConditionState       = NIGHT 
      Model              = UBStingerS
      HideSubObject = TURRETUP02
    End
    ConditionState       = DAMAGED NIGHT 
      Model              = UBStingerS_D
      HideSubObject = TURRETUP02
    End
    ConditionState       = REALLYDAMAGED NIGHT  RUBBLE
      Model              = UBStingerS_E
      HideSubObject = TURRETUP02
    End
       
    ; night snow **********************************
    ConditionState       = NIGHT SNOW
      Model              = UBStingerS_S
      HideSubObject = TURRETUP02
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBStingerS_DS
      HideSubObject = TURRETUP02
    End
    ConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE
      Model              = UBStingerS_ES
      HideSubObject = TURRETUP02
    End

    ; day ************************************
    ConditionState = USER_1
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE02
    End
    ConditionState = DAMAGED USER_1
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE02
    End
    ConditionState = REALLYDAMAGED RUBBLE USER_1
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE02
    End

    ; day snow ************************************
    ConditionState = SNOW USER_1
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE02
    End
    ConditionState = DAMAGED SNOW USER_1
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE02
    End
    ConditionState = REALLYDAMAGED SNOW RUBBLE USER_1
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE02
    End
    
    ; night  **********************************
    ConditionState       = NIGHT USER_1
      Model              = UBStingerS
      HideSubObject = TURRETUP02 PLANE02
    End
    ConditionState       = DAMAGED NIGHT USER_1
      Model              = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE02
    End
    ConditionState       = REALLYDAMAGED NIGHT RUBBLE USER_1
      Model              = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE02
    End
       
    ; night snow **********************************
    ConditionState       = NIGHT SNOW USER_1
      Model              = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE02
    End
    ConditionState       = DAMAGED NIGHT SNOW USER_1
      Model              = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE02
    End
    ConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE USER_1
      Model              = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE02
    End

    ; day ************************************
    ConditionState = USER_2
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE01
    End
    ConditionState = DAMAGED USER_2
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE01
    End
    ConditionState = REALLYDAMAGED RUBBLE USER_2
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE01
    End

    ; day snow ************************************
    ConditionState = SNOW USER_2
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE01
    End
    ConditionState = DAMAGED SNOW USER_2
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE01
    End
    ConditionState = REALLYDAMAGED SNOW RUBBLE USER_2
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE01
    End
    
    ; night  **********************************
    ConditionState       = NIGHT USER_2
      Model              = UBStingerS
      HideSubObject = TURRETUP02 PLANE01
    End
    ConditionState       = DAMAGED NIGHT USER_2
      Model              = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE01
    End
    ConditionState       = REALLYDAMAGED NIGHT RUBBLE USER_2
      Model              = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE01
    End
       
    ; night snow **********************************
    ConditionState       = NIGHT SNOW USER_2
      Model              = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE01
    End
    ConditionState       = DAMAGED NIGHT SNOW USER_2
      Model              = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE01
    End
    ConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE USER_2
      Model              = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE01
    End
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBStingerS_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBStingerS_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBStingerS_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBStingerS_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBStingerS_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBStingerS_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSite
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 500
  BuildTime           = 10
  EnergyProduction    = 0
  VisionRange         = 350
  ShroudClearingRange = 350

  Prerequisites
    Object  = Chem_GLABarracks
  End

  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End

  CommandSet      = Chem_GLADefenseSiteCommandSet
  ExperienceValue = 91 132 194 278

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body                 = StructureBody ModuleTag_04
    MaxHealth          = 900.0
    InitialHealth      = 900.0
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End
  Behavior        = DestroyDie ModuleTag_09
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End
  Behavior        = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = StingerSiteDeathConcussion
    StartsActive  = Yes
  End

  Behavior = ProductionUpdate ModuleTag_15
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_Addon01
    ReplaceObject = Chem_GLADefenseSiteRocketLauncher
    TriggeredBy = Upgrade_GLADefenseSiteRocketLauncher
  End
  Behavior = ReplaceObjectUpgrade ModuleTag_Addon02
    ReplaceObject = Chem_GLADefenseSiteAntiTankCannon
    TriggeredBy = Upgrade_GLADefenseSiteTankCannon
  End
  Behavior = ReplaceObjectUpgrade ModuleTag_Addon03
    ReplaceObject = Chem_GLADefenseSiteArtilleryCannon
    TriggeredBy = Upgrade_GLADefenseSiteArtilleryCannon
  End
  Behavior = ReplaceObjectUpgrade ModuleTag_Addon04
    ReplaceObject = Chem_GLADefenseSiteQuadCannon
    TriggeredBy = Upgrade_GLADefenseSiteQuadCannon
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLADefenseSiteQuadCannon

  ; *** ART Parameters ***
  SelectPortrait         = SUDSQuad_L
  ButtonImage            = SUDSQuad_L

  UpgradeCameo1 = Upgrade_GLACamoNetting

  Draw                    = W3DModelDraw ModuleTag_Draw04
    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVStinger_QC
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   Muzzle
      WeaponLaunchBone  = PRIMARY   Muzzle
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED 
    AliasConditionState = REALLYDAMAGED 
    AliasConditionState = RUBBLE
    AliasConditionState = SNOW DAMAGED 
    AliasConditionState = SNOW REALLYDAMAGED 
    AliasConditionState = SNOW RUBBLE
    AliasConditionState = NIGHT DAMAGED 
    AliasConditionState = NIGHT REALLYDAMAGED 
    AliasConditionState = NIGHT RUBBLE
    AliasConditionState = NIGHT SNOW DAMAGED 
    AliasConditionState = NIGHT SNOW REALLYDAMAGED 
    AliasConditionState = NIGHT SNOW RUBBLE

    ConditionState = USING_WEAPON_B
      Model = UVStinger_QC
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
    End
    AliasConditionState = USING_WEAPON_B SNOW
    AliasConditionState = USING_WEAPON_B NIGHT
    AliasConditionState = USING_WEAPON_B SNOW NIGHT
    AliasConditionState = DAMAGED USING_WEAPON_B
    AliasConditionState = REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = RUBBLE USING_WEAPON_B
    AliasConditionState = SNOW DAMAGED USING_WEAPON_B
    AliasConditionState = SNOW REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = SNOW RUBBLE USING_WEAPON_B
    AliasConditionState = NIGHT DAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT RUBBLE USING_WEAPON_B
    AliasConditionState = NIGHT SNOW DAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT SNOW REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT SNOW RUBBLE USING_WEAPON_B

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UVStinger_QC
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
      WeaponFireFXBone  = PRIMARY   Muzzle
      WeaponLaunchBone  = PRIMARY   Muzzle
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;*****************************************************88
  Draw = W3DModelDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_Draw02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_Draw03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSiteQuad
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE

  BuildCost           = 1300
  BuildTime           = 26
  EnergyProduction    = 0
  VisionRange         = 350
  ShroudClearingRange = 350

  WeaponSet
    Conditions       = None 
    Weapon = PRIMARY DefenseSiteQuadCannonGun
    Weapon = SECONDARY DefenseSiteQuadCannonGunAir
    PreferredAgainst = SECONDARY AIRCRAFT
  End

  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End

  CommandSet   = GLAStingerSiteCommandSet

  ExperienceValue     = 79 106 140 188
  ExperienceRequired  = 0  238 317 421
  IsTrainable         = Yes

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body                 = StructureBody ModuleTag_04
    MaxHealth          = 900.0
    InitialHealth      = 900.0
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End

  Behavior = InstantDeathBehavior ModuleTag_10
    RequiredStatus = UNDER_CONSTRUCTION
    FX = FX_StructureSmallDeath
  End

  Behavior = InstantDeathBehavior ModuleTag_10A
    ExemptStatus = UNDER_CONSTRUCTION
    OCL = OCL_ABDefenseSiteDebris1
    FX = FX_DefenseSiteDeath
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 270
      TurretPitchRate     = 270
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 0
      MinPhysicalPitch    = -20
      MinIdleScanInterval = 4000
      MaxIdleScanInterval = 8000
      MinIdleScanAngle    = 0
      MaxIdleScanAngle    = 360
      RecenterTime = 25000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End

  Behavior = ProductionUpdate ModuleTag_05P
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate     = 500
    DetectionRange   =  175
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraRequiredKindOf = AIRCRAFT
  End

  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff

  Behavior = StealthUpdate ModuleTag_13
    StealthDelay = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING TAKING_DAMAGE
    MoveThresholdSpeed = 3
    InnateStealth     = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLADefenseSiteRocketLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SUDSLauncher_L
  ButtonImage            = SUDSLauncher_L

  UpgradeCameo1 = Upgrade_GLAChemicalWarheads
  UpgradeCameo2 = Upgrade_SiliconWarheads
  UpgradeCameo3 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo4 = Upgrade_GLANeutralizers
  UpgradeCameo5 = Upgrade_GLACamoNetting

  Draw                    = W3DModelDraw ModuleTag_Draw04
    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVStinger_SA
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   WeaponFX
      WeaponFireFXBone  = SECONDARY WeaponFX
      WeaponLaunchBone  = PRIMARY   WeaponA
      WeaponLaunchBone  = SECONDARY WeaponA
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED 
    AliasConditionState = REALLYDAMAGED 
    AliasConditionState = RUBBLE
    AliasConditionState = SNOW DAMAGED 
    AliasConditionState = SNOW REALLYDAMAGED 
    AliasConditionState = SNOW RUBBLE
    AliasConditionState = NIGHT DAMAGED 
    AliasConditionState = NIGHT REALLYDAMAGED 
    AliasConditionState = NIGHT RUBBLE
    AliasConditionState = NIGHT SNOW DAMAGED 
    AliasConditionState = NIGHT SNOW REALLYDAMAGED 
    AliasConditionState = NIGHT SNOW RUBBLE

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UVStinger_SA
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;*****************************************************88
  Draw = W3DModelDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_Draw02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_Draw03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSiteLauncher
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE

  BuildCost           = 1300
  BuildTime           = 26
  EnergyProduction    = 0
  VisionRange         = 350
  ShroudClearingRange = 350

  WeaponSet
    Conditions       = None 
    Weapon = PRIMARY   DefenseSiteRocketLauncher
    Weapon = SECONDARY DefenseSiteRocketLauncherAir
    PreferredAgainst = SECONDARY AIRCRAFT
    ShareWeaponReloadTime = Yes
  End

  ArmorSet
    Conditions        = None
    Armor             = BaseDefenseArmor
    DamageFX          = StructureDamageFXNoShake
  End

  CommandSet      = GLAStingerSiteCommandSet
  ExperienceValue     = 79 106 140 188
  ExperienceRequired  = 0  238 317 421
  IsTrainable         = Yes

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body                 = StructureBody ModuleTag_04
    MaxHealth          = 900.0
    InitialHealth      = 900.0
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End

  Behavior = InstantDeathBehavior ModuleTag_10
    RequiredStatus = UNDER_CONSTRUCTION
    FX = FX_StructureSmallDeath
  End

  Behavior = InstantDeathBehavior ModuleTag_10A
    ExemptStatus = UNDER_CONSTRUCTION
    OCL = OCL_ABDefenseSiteDebris1
    FX = FX_DefenseSiteDeath
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 270
      TurretPitchRate     = 270
      AllowsPitch         = Yes
      GroundUnitPitch     = 40
      NaturalTurretPitch  = 45
      MinIdleScanInterval = 4000    ; in milliseconds
      MaxIdleScanInterval = 8000   ; in milliseconds
      MinIdleScanAngle    = 0      ; in degrees off the natural turret angle
      MaxIdleScanAngle    = 360    ; in degrees off the natural turret angle
      RecenterTime = 25000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End

  Behavior = ProductionUpdate ModuleTag_05P
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate     = 500
    DetectionRange   =  175
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraRequiredKindOf = AIRCRAFT
  End

  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff

  Behavior = StealthUpdate ModuleTag_13
    StealthDelay = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING TAKING_DAMAGE
    MoveThresholdSpeed = 3
    InnateStealth     = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLADefenseSiteAntiTankCannon

  ; *** ART Parameters ***
  SelectPortrait         = SUDSAntiTank_L
  ButtonImage            = SUDSAntiTank_L

  UpgradeCameo1 = Upgrade_GLAToxinShells
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Upgrade_GLANeutralizers
  UpgradeCameo4 = Upgrade_GLACamoNetting

  ; *** ART Parameters ***
  Draw                    = W3DModelDraw ModuleTag_Draw04
    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE

    ConditionState = RELOADING_A
      Model = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Animation = UVBS1.UVBS1
      AnimationMode = ONCE
    End
    AliasConditionState = RELOADING_A SNOW
    AliasConditionState = RELOADING_A NIGHT
    AliasConditionState = RELOADING_A SNOW NIGHT
    AliasConditionState = RELOADING_A DAMAGED
    AliasConditionState = RELOADING_A DAMAGED SNOW
    AliasConditionState = RELOADING_A DAMAGED NIGHT
    AliasConditionState = RELOADING_A DAMAGED SNOW NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;******************************************
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSiteAntiTank
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 1050
  BuildTime           = 21
  EnergyProduction    = 0
  VisionRange         = 350
  ShroudClearingRange = 350

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY DefenseSiteTankGun
    PreferredAgainst = PRIMARY VEHICLE
  End
  
  ArmorSet
    Conditions        = None
    Armor             = BaseDefenseArmor
    DamageFX          = StructureDamageFXNoShake
  End

  CommandSet      = GLAStingerSiteCommandSet
  ExperienceValue     = 60 80 106 142
  ExperienceRequired  = 0  180 240 319
  IsTrainable         = Yes

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body            = StructureBody ModuleTag_04
    MaxHealth     = 900.0
    InitialHealth = 900.0
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End

  Behavior = InstantDeathBehavior ModuleTag_10
    RequiredStatus = UNDER_CONSTRUCTION
    FX = FX_StructureSmallDeath
  End

  Behavior = InstantDeathBehavior ModuleTag_10A
    ExemptStatus = UNDER_CONSTRUCTION
    OCL = OCL_ABDefenseSiteDebris2
    FX = FX_DefenseSiteDeath
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    Turret
      ControlledWeaponSlots = PRIMARY
      TurretTurnRate = 90
      AllowsPitch    = No
      RecenterTime   = 1000000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate        = 250
  End

  Behavior = ProductionUpdate ModuleTag_05P
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff

  Behavior = StealthUpdate ModuleTag_13
    StealthDelay = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING TAKING_DAMAGE
    MoveThresholdSpeed = 3
    InnateStealth     = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLADefenseSiteArtilleryCannon

  ; *** ART Parameters ***
  SelectPortrait = SUDSArtillery_L
  ButtonImage    = SUDSArtillery_L

  UpgradeCameo1 = Upgrade_GLAToxinShells
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Upgrade_GLANeutralizers
  UpgradeCameo4 = Upgrade_GLACamoNetting

  Draw                    = W3DModelDraw ModuleTag_Draw04
    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = DAMAGED SNOW NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState = RELOADING_A
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Animation = UVD30.UVD30
      AnimationMode = ONCE
    End
    AliasConditionState = RELOADING_A SNOW
    AliasConditionState = RELOADING_A NIGHT
    AliasConditionState = RELOADING_A SNOW NIGHT
    AliasConditionState = RELOADING_A DAMAGED
    AliasConditionState = RELOADING_A DAMAGED SNOW
    AliasConditionState = RELOADING_A DAMAGED NIGHT
    AliasConditionState = RELOADING_A DAMAGED SNOW NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;*****************************************************
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
 
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSiteArtillery
  Side                = GLAToxinGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 1500
  BuildTime           = 30
  EnergyProduction    = 0
  VisionRange         = 350
  ShroudClearingRange = 350

  WeaponSet
    Conditions     = None 
    Weapon         = PRIMARY FireBaseHowitzerGun
  End

  ArmorSet
    Conditions        = None
    Armor             = BaseDefenseArmor
    DamageFX          = StructureDamageFXNoShake
  End

  CommandSet      = GLAStingerSiteCommandSet
  ExperienceValue     = 101 134 178 238
  ExperienceRequired  = 0 302 402 535
  IsTrainable         = Yes

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body                 = StructureBody ModuleTag_04
    MaxHealth          = 900.0
    InitialHealth      = 900.0
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End

  Behavior = InstantDeathBehavior ModuleTag_10
    RequiredStatus = UNDER_CONSTRUCTION
    FX = FX_StructureSmallDeath
  End

  Behavior = InstantDeathBehavior ModuleTag_10A
    ExemptStatus = UNDER_CONSTRUCTION
    OCL = OCL_ABDefenseSiteDebris2
    FX = FX_DefenseSiteDeath
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate        = 60
      AllowsPitch           = No
      ControlledWeaponSlots = PRIMARY
      RecenterTime   = 1000000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End

  Behavior = ProductionUpdate ModuleTag_05P
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff

  Behavior = StealthUpdate ModuleTag_13
    StealthDelay = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING TAKING_DAMAGE
    MoveThresholdSpeed = 3
    InnateStealth     = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleCombatBike

  ; *** ART Parameters ***
  SelectPortrait  = SUComBike_L
  ButtonImage     = SUComBike
  
  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Upgrade_InfantryCaptureBuilding
  UpgradeCameo4 = Upgrade_GLANeutralizers
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVComBikeG
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY Muzzle_B
      HideSubObject       = MuzzleFX_B01 MuzzleFX_B02
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE
    End
    AliasConditionState = MOVING

    ConditionState = REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState = MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
    End

    ConditionState = MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = AFLAME
      Model = UVComBikeG
      ParticleSysBone = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = MOVING AFLAME

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVComBikeG_d
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = MOVING REALLYDAMAGED AFLAME
  
    ConditionState = MOVING CENTER_TO_LEFT AFLAME
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED AFLAME
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER AFLAME
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT AFLAME
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED AFLAME
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER AFLAME
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide
    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = MOVING
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = MOVING CENTER_TO_LEFT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = MOVING LEFT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLAToxinGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1
  BuildCost       = 400
  BuildTime       = 4.0
  VisionRange     = 180
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None
    Weapon     = PRIMARY     GLARebelGunBeta
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon     = PRIMARY     GLARebelGunGamma
  End

  Behavior = WeaponSetUpgrade ModuleTag_08A
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma
  End

  Prerequisites
    Object = Chem_GLABarracks
    Object = Chem_GLAArmsDealer
  End

  ArmorSet
    Conditions      = None
    Armor           = BikeArmor
    DamageFX        = TankDamageFX
  End

  ExperienceValue    = 20 29 42 60
  ExperienceRequired = 0 59 86 125
  IsTrainable        = Yes
  ;CrusherLevel      = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = Chem_GLAInfantryRebelCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RebelVoiceSelect
  VoiceMove = RebelVoiceMove
  VoiceGuard = RebelVoiceMove
  VoiceAttack = RebelVoiceAttack
  VoiceFear = RebelVoiceFear
  VoiceTaskComplete = RebelVoiceCaptureComplete
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceCreate = RebelVoiceCreate
    VoiceSubdue = RebelVoiceSubdue
    VoiceGarrison = RebelVoiceGarrison
    VoiceEnter = RebelVoiceMove
    VoiceEnterHostile = RebelVoiceMove
    VoiceGetHealed      = RebelVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 180
    InitialHealth   = 180
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End

  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 35.0
  End

  Behavior = SlowDeathBehavior DeathTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_A
    DeathTypes = NONE +POISONED
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_B
    DeathTypes = NONE +POISONED_BETA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryBeta
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_C
    DeathTypes = NONE +POISONED_GAMMA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryGamma
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_D
    DeathTypes = NONE +EXTRA_6
    DestructionDelay = 50
    OCL = INITIAL OCL_RadiationInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED +CRUSHED +SPLATTED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End
  
 Behavior = StealthUpdate ModuleStealth_GLA
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End  

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = SpecialAbility ModuleTag_Capture1
    SpecialPowerTemplate      = SpecialAbilityInfantryCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes
    InitiateSound         = RebelVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_Capture2
    SpecialPowerTemplate  = SpecialAbilityInfantryCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000
    PreparationTime       = 20000
    PackTime              = 2000
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 8
  End
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Capture3
    SpecialPowerTemplate = SpecialAbilityInfantryCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End

  Scale = 0.95
  Geometry = BOX
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleCombatBikeRocket

  ; *** ART Parameters ***
  SelectPortrait  = SUComBikeR_L
  ButtonImage     = SUComBikeR
  
  UpgradeCameo1 = Upgrade_GLAChemicalWarheads
  UpgradeCameo2 = Upgrade_GLASulfurAcid
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = Upgrade_GLANeutralizers
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVComBikeTN
      WeaponFireFXBone  = PRIMARY Muzzle_B
      WeaponLaunchBone  = PRIMARY RocketFX03
      WeaponMuzzleFlash = PRIMARY MuzzleFX_B
      WeaponFireFXBone  = SECONDARY Muzzle_B
      WeaponLaunchBone  = SECONDARY RocketFX03
      WeaponMuzzleFlash = SECONDARY MuzzleFX_B
      ParticleSysBone   = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE
    End
    AliasConditionState = MOVING

    ConditionState = REALLYDAMAGED
      Model = UVComBikeTN_d
    End
    AliasConditionState = MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
    End

    ConditionState = MOVING CENTER_TO_LEFT
      Model = UVComBikeTN
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER
      Model = UVComBikeTN
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UVComBikeTN
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UVComBikeTN
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = AFLAME
      Model = UVComBikeTN
      ParticleSysBone = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = MOVING AFLAME

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = MOVING REALLYDAMAGED AFLAME
  
    ConditionState = MOVING CENTER_TO_LEFT AFLAME
      Model = UVComBikeTN
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER AFLAME
      Model = UVComBikeTN
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT AFLAME
      Model = UVComBikeTN
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER AFLAME
      Model = UVComBikeTN
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = MOVING
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLAToxinGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1
  BuildCost           = 500
  BuildTime           = 5.0
  VisionRange         = 180
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None
    Weapon     = PRIMARY   Chem_TunnelDefenderRocketWeapon2
  End

  Behavior = WeaponBonusUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_GLAChemicalWarheads
  End

  ArmorSet
    Conditions      = None
    Armor           = BikeArmor
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLABarracks
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue    = 21 30 44 64
  ExperienceRequired = 0 63 91 133
  IsTrainable        = Yes
  ;CrusherLevel      = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RPGTrooperVoiceSelect
  VoiceMove = RPGTrooperVoiceMove
  VoiceGuard = RPGTrooperVoiceMove
  VoiceAttack = RPGTrooperVoiceAttack
  VoiceFear = RPGTrooperVoiceFear
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceCreate          = RPGTrooperVoiceCreate
    VoiceGarrison = RPGTrooperVoiceGarrison
    VoiceEnter = RPGTrooperVoiceMove
    VoiceEnterHostile = RPGTrooperVoiceMove
    VoiceGetHealed      = RPGTrooperVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 180
    InitialHealth   = 180
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End

  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 35.0
  End

  Behavior = SlowDeathBehavior DeathTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_A
    DeathTypes = NONE +POISONED
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_B
    DeathTypes = NONE +POISONED_BETA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryBeta
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_C
    DeathTypes = NONE +POISONED_GAMMA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryGamma
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_D
    DeathTypes = NONE +EXTRA_6
    DestructionDelay = 50
    OCL = INITIAL OCL_RadiationInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED +CRUSHED +SPLATTED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Scale = 0.95
  Geometry = BOX
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleCombatBikeStinger

  ; *** ART Parameters ***
  SelectPortrait = SUComBikeSt_L
  ButtonImage    = SUComBikeSt

  UpgradeCameo1 = Upgrade_GLAChemicalWarheads
  UpgradeCameo2 = Upgrade_SiliconWarheads
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = Upgrade_GLANeutralizers
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVComBikeTN
      WeaponFireFXBone  = PRIMARY Muzzle_B
      WeaponLaunchBone  = PRIMARY RocketFX03
      WeaponMuzzleFlash = PRIMARY MuzzleFX_B
      WeaponFireFXBone  = SECONDARY Muzzle_B
      WeaponLaunchBone  = SECONDARY RocketFX03
      WeaponMuzzleFlash = SECONDARY MuzzleFX_B
      ParticleSysBone   = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE
    End
    AliasConditionState = MOVING

    ConditionState = REALLYDAMAGED
      Model = UVComBikeTN_d
    End
    AliasConditionState = MOVING REALLYDAMAGED
  
    ConditionState = MOVING CENTER_TO_LEFT
      Model = UVComBikeTN
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER
      Model = UVComBikeTN
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UVComBikeTN
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UVComBikeTN
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = AFLAME
      Model = UVComBikeTN
      ParticleSysBone = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = MOVING AFLAME

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = MOVING REALLYDAMAGED AFLAME
  
    ConditionState = MOVING CENTER_TO_LEFT AFLAME
      Model = UVComBikeTN
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER AFLAME
      Model = UVComBikeTN
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT AFLAME
      Model = UVComBikeTN
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER AFLAME
      Model = UVComBikeTN
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBikeTN_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UISTNG_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = MOVING
      Model = UISTNG_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = MOVING CENTER_TO_LEFT
      Model = UISTNG_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = MOVING LEFT_TO_CENTER
      Model = UISTNG_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UISTNG_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UISTNG_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLAToxinGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1
  BuildCost           = 400
  BuildTime           = 4.0
  VisionRange         = 180
  ShroudClearingRange = 200

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY   StingerSoldierMissileWeapon
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    Weapon              = SECONDARY StingerMissileWeaponAirForBike
    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End

  ArmorSet
    Conditions      = None
    Armor           = BikeArmor
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLABarracks
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue    = 21 30 44 64
  ExperienceRequired = 0 63 91 133
  IsTrainable        = Yes
  ;CrusherLevel      = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RPGTrooperVoiceSelect
  VoiceMove = RPGTrooperVoiceMove
  VoiceGuard = RPGTrooperVoiceMove
  VoiceAttack = RPGTrooperVoiceAttack
  VoiceFear = RPGTrooperVoiceFear
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceCreate          = RPGTrooperVoiceCreate
    VoiceGarrison = RPGTrooperVoiceGarrison
    VoiceEnter = RPGTrooperVoiceMove
    VoiceEnterHostile = RPGTrooperVoiceMove
    VoiceGetHealed      = RPGTrooperVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 180
    InitialHealth   = 180
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 35.0
  End

  Behavior = SlowDeathBehavior DeathTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_StingerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_A
    DeathTypes = NONE +POISONED
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_B
    DeathTypes = NONE +POISONED_BETA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryBeta
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_C
    DeathTypes = NONE +POISONED_GAMMA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryGamma
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_D
    DeathTypes = NONE +EXTRA_6
    DestructionDelay = 50
    OCL = INITIAL OCL_RadiationInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED +CRUSHED +SPLATTED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate     = 500
    DetectionRange   =  150
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraRequiredKindOf = AIRCRAFT
  End

  Scale = 0.95
  Geometry = BOX
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleCombatBikeTerrorist

  ; *** ART Parameters ***
  SelectPortrait  = SUComBikeT_L
  ButtonImage     = SUComBikeT

  UpgradeCameo1 = Upgrade_GLABombTruckBioBomb
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = Upgrade_dGLANeutralizers
  UpgradeCameo5 = Upgrade_GLATankCamouflage
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
    End
    AliasConditionState = MOVING

    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState = MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED
      Model = UVComBike
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End

    ConditionState = MOVING CENTER_TO_LEFT
      Model = UVComBike
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER
      Model = UVComBike
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UVComBike
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UVComBike
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = AFLAME
      Model = UVComBike
      ParticleSysBone = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = MOVING AFLAME

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVComBike_d
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = MOVING REALLYDAMAGED AFLAME
  
    ConditionState = MOVING CENTER_TO_LEFT AFLAME
      Model = UVComBike
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED AFLAME
      Model = UVComBike_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER AFLAME
      Model = UVComBike
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBike_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT AFLAME
      Model = UVComBike
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED AFLAME
      Model = UVComBike_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER AFLAME
      Model = UVComBike
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBike_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = MOVING
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = MOVING CENTER_TO_LEFT
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = MOVING LEFT_TO_CENTER
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLAToxinGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1
  BuildCost       = 375
  BuildTime       = 3.75
  VisionRange     = 180
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None
    Weapon = PRIMARY TerroristSuicideWeapon 
    Weapon = TERTIARY TerroristForceDesignationWeapon
    PreferredAgainst = TERTIARY INFANTRY VEHICLE
  End

  ArmorSet
    Conditions      = None
    Armor           = BikeArmor
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLABarracks
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue    = 12 18 26 38
  IsTrainable        = No
  ;CrusherLevel      = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = GLAInfantryBikeTerroristCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TerroristVoiceSelect
  VoiceMove = TerroristVoiceMove
  VoiceAttack = TerroristVoiceAttack
  VoiceFear = TerroristVoiceFear
  VoiceGuard = TerroristVoiceMove
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceGarrison         = TerroristVoiceMove
    VoiceCreate           = TerroristVoiceCreate
    VoiceEnter            = TerroristVoiceEnter
    VoiceEnterHostile     = TerroristVoiceEnterHostile
    VoiceGetHealed      = TerroristVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 150
    InitialHealth   = 150
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate = 100
  End

  Locomotor = SET_NORMAL TerrorBikeGroundLocomotor TerrorBikeCliffLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 35.0
  End

  Behavior = SlowDeathBehavior DeathTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TerroristFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_A
    DeathTypes = NONE +POISONED
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_B
    DeathTypes = NONE +POISONED_BETA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryBeta
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_C
    DeathTypes = NONE +POISONED_GAMMA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryGamma
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_D
    DeathTypes = NONE +EXTRA_6
    DestructionDelay = 50
    OCL = INITIAL OCL_RadiationInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED +CRUSHED +SPLATTED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_11D
    DeathWeapon   = SuicideDynamitePack
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLABombTruckBioBomb
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12D
    DeathWeapon   = Chem_SuicideWeapon
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb
    ConflictsWith = Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13D
    DeathWeapon   = Chem_SuicideWeaponBeta
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLAAnthraxBeta
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma  Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_14D
    DeathWeapon   = Chem_SuicideWeaponGamma
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Chem_Upgrade_GLAAnthraxGamma
    ConflictsWith = Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End

  Behavior = StealthUpdate ModuleTag_StealthBabaik
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = NONE
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_S10StealthBabaik
    TriggeredBy = Upgrade_GLACamouflage
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15D
    DeathWeapon   = Chem_SuicideWeaponBetaSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLAAnthraxBeta Upgrade_GLANeutralizers
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    RequiresAllTriggers = Yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16D
    DeathWeapon   = Chem_SuicideWeaponGammaSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = Yes
  End
  ; --- end Death modules ---

  Scale = 0.95
  Geometry = BOX
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
;GLA Combat Bike with Worker
Object Chem_GLAVehicleCombatBikeWorker

  ; *** ART Parameters ***
  SelectPortrait = SUComBikeW_L
  ButtonImage    = SUComBikeW
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLANeutralizers
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE ; Hide from all states except terrorist (rider 5)
    End

    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
  
    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End

    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
    End

    ConditionState = MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = AFLAME
      Model = UVComBike
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVComBike_d
      ParticleSysBone = CHASSIS TankFireContinious
    End
  
    ConditionState = MOVING CENTER_TO_LEFT AFLAME
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_LEFT REALLYDAMAGED AFLAME
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER AFLAME
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING LEFT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT AFLAME
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING CENTER_TO_RIGHT REALLYDAMAGED AFLAME
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER AFLAME
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = MOVING RIGHT_TO_CENTER REALLYDAMAGED AFLAME
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = MOVING
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = MOVING CENTER_TO_LEFT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = MOVING LEFT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = MOVING CENTER_TO_RIGHT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = MOVING RIGHT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLAToxinGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1
  BuildCost       = 400
  BuildTime       = 4.0
  VisionRange     = 180
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None
    Weapon = PRIMARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = BikeArmor
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue       = 0 0 0 0    ;Experience point value at each level
  ;CrusherLevel         = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel        = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet            = Chem_GLAWorkerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = WorkerVoiceSelect
  VoiceMove = WorkerVoiceMove
  VoiceAttack = WorkerVoiceMove
  VoiceGuard = WorkerVoiceMove
  VoiceFear = WorkerVoiceFear
  VoiceTaskComplete = WorkerVoiceBuildComplete
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  UnitSpecificSounds
    VoiceEnter        = WorkerVoiceMoveUpgraded
    VoiceEnterHostile = WorkerVoiceMoveUpgraded
    VoiceGarrison     = WorkerVoiceGarrison
    VoiceCreate       = WorkerVoiceCreate
    VoiceSupply       = WorkerVoiceSupply
    VoiceNoBuild      = WorkerVoiceBuildNot
    VoiceRepair       = WorkerVoiceRepair
    VoiceDisarm       = WorkerVoiceClearMine
    VoiceBuildResponse = WorkerVoiceBuild
    VoiceGetHealed    = WorkerVoiceMoveUpgraded
    VoiceMoveUpgraded = WorkerVoiceMoveUpgraded
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER DOZER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 180
    InitialHealth   = 180
  End

  Behavior = DozerAIUpdate ModuleTag_03W
    RepairHealthPercentPerSecond = 1%
    BoredTime                    = 5000
    BoredRange                   = 150
    AutoAcquireEnemiesWhenIdle   = No
  End

  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 35.0
  End

  Behavior = SlowDeathBehavior DeathTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_WorkerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_A
    DeathTypes = NONE +POISONED
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_B
    DeathTypes = NONE +POISONED_BETA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryBeta
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_C
    DeathTypes = NONE +POISONED_GAMMA
    DestructionDelay = 50
    OCL = INITIAL OCL_ToxicInfantryGamma
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End
  Behavior = SlowDeathBehavior DeathTag_Poisoned_D
    DeathTypes = NONE +EXTRA_6
    DestructionDelay = 50
    OCL = INITIAL OCL_RadiationInfantry
    OCL = FINAL OCL_CombatBike_ToppledHulk
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED +CRUSHED +SPLATTED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = CommandSetUpgrade ModuleTag_14W
    TriggeredBy = Upgrade_SwitchCommandSet
    RemovesUpgrades = Upgrade_SwitchBackCommandSet
    CommandSet = Chem_GLAWorkerFakeBuildingsCommandSet
  End
 
  Behavior = CommandSetUpgrade ModuleTag_15W
    TriggeredBy = Upgrade_SwitchBackCommandSet
    RemovesUpgrades = Upgrade_SwitchCommandSet Upgrade_SwitchBackCommandSet
    CommandSet = Chem_GLAWorkerCommandSet
  End

  Behavior = ProductionUpdate ModuleTag_38W
    MaxQueueEntries = 1; For the command set switching upgrade
  End

  Scale = 0.95
  Geometry = BOX
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End

;----------------------------------------------------------------------
Object Chem_GLADefiler

  ; *** ART Parameters ***
  SelectPortrait         = SUDefiler_L
  ButtonImage            = SUDefiler

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Upgrade_GLASulfurAcid
  UpgradeCameo4 = Upgrade_GLANeutralizers

; ---- the building itself ------
  Draw = W3DModelDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    DefaultConditionState 
      Model             = UBPWRPLANT_N
      Animation         = UBPWRPLANT_N.UBPWRPLANT_N
      AnimationMode     = LOOP
    End
    AliasConditionState  = NIGHT
    AliasConditionState  = SNOW
    AliasConditionState  = NIGHT SNOW

    ConditionState       = DAMAGED
      Model              = UBPWRPLANT_DN
      Animation          = UBPWRPLANT_DN.UBPWRPLANT_DN
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 GLAPowerPlantSmoke
      ParticleSysBone    = Fire01 GLAPowerPlantFlame
    End
    AliasConditionState       = DAMAGED NIGHT
    AliasConditionState       = DAMAGED SNOW
    AliasConditionState       = DAMAGED NIGHT SNOW

    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = UBPWRPLANT_EN
      Animation          = UBPWRPLANT_EN.UBPWRPLANT_EN
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke 
      ParticleSysBone    = Smoke02 GLAPowerPlantSmoke
      ParticleSysBone    = Smoke03 GLAPowerPlantSmoke 
      ParticleSysBone    = Smoke04 GLAPowerPlantSmoke 
      ParticleSysBone    = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone    = Fire01 GLAPowerPlantFlame
      ParticleSysBone    = Fire02 GLAPowerPlantFlame
      ParticleSysBone    = Fire03 GLAPowerPlantFlame
    End
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPWRPLANT_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPWRPLANT_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPWRPLANT_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_Draw02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_Draw03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE

      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ;-----------------------------------------------------------------------
  Draw = W3DModelDraw ModuleTag_Draw04
    DefaultConditionState
      Model             = UVDefilerBones
      WeaponLaunchBone  = PRIMARY   WEAPONB
      WeaponFireFXBone  = PRIMARY   WEAPONB
      WeaponLaunchBone  = SECONDARY WEAPONA
      WeaponFireFXBone  = SECONDARY WEAPONA
      WeaponLaunchBone  = TERTIARY  WEAPONA
      WeaponFireFXBone  = TERTIARY  WEAPONA
    End
  End
 
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Defiler
  Side             = GLAToxinGeneral
  EditorSorting    = STRUCTURE

  BuildCost        = 2500
  BuildTime        = 50
  EnergyProduction = 3
  VisionRange      = 200.0
  ShroudClearingRange = 300

  Prerequisites
    Object = Chem_GLAArmsDealer
    Science = SCIENCE_CHEM
    Science = SCIENCE_Rank3
  End

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY   DefilerMissileWeapon
    Weapon            = SECONDARY DefilerToxinWeapon
    Weapon            = TERTIARY  DefilerAcidWeapon
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY  NONE
  End

  Behavior    = OCLSpecialPower ModuleTag_07A
    SpecialPowerTemplate = Chem_SuperweaponAcidDefiling
    OCL                  = SUPERWEAPON_AcidDefiling
  End
  Behavior    = OCLSpecialPower ModuleTag_07B
    SpecialPowerTemplate = Chem_SuperweaponToxinDefiling
    OCL                  = SUPERWEAPON_ToxinDefiling
  End

  Behavior = SpecialPowerCreate ModuleTag_08A
  End

  ArmorSet
    Conditions = None
    Armor      = DefilerArmor
    DamageFX   = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = GLAUpgradedDefilerArmor
    DamageFX   = StructureDamageFXNoShake
  End

  CommandSet      = Chem_GLADefilerCommandSet
  ExperienceValue = 157 228 333 478

  ; *** AUDIO Parameters ***
  VoiceSelect          = PatriotBatterySelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction  = UnderConstructionLoop
  End

  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = STRUCTURE
  KindOf        = PRELOAD STRUCTURE SELECTABLE CAN_ATTACK IMMOBILE SCORE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY SCORE_CREATE FS_SUPERWEAPON

  Body = StructureBody ModuleTag_04
    MaxHealth     = 3500.0
    InitialHealth = 3500.0
    SubdualDamageCap = 5000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
 
  Behavior = AIUpdateInterface ModuleTag_06
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End

  Behavior = DestroyDie ModuleTag_10
  End

  Behavior = RebuildHoleExposeDie ModuleTag_11
    HoleName      = GLAHole
    HoleMaxHealth = 800.0
  End

  Behavior = CreateObjectDie ModuleTag_DTH01
    CreationList = OCL_SmallStructureDebris
  End
  Behavior = FXListDie ModuleTag_DTH02
    DeathFX      = FX_StructureMediumDeath
  End

  Behavior = ProductionUpdate ModuleTag_14
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_56
    DamagedParticleSystem1 = Bone:SmokeS RandomBone:Yes PSys:SubExplosionSmoke01
    DamagedParticleSystem2 = Bone:SmokeS RandomBone:Yes PSys:GLAPowerPlantSmoke
    DamagedParticleSystem3 = Bone:SmokeS RandomBone:Yes PSys:GLAPowerPlantDamagedExplosion
    DamagedParticleSystem5 = Bone:SmokeS RandomBone:Yes PSys:MammothTankSubExplosionSmoke
    DamagedParticleSystem6 = Bone:SmokeS RandomBone:Yes PSys:StructureExplosionSmoke
    DamagedParticleSystem7 = Bone:SmokeS RandomBone:Yes PSys:GLAPowerPlantDamagedSmoke
    DamagedParticleSystem8 = Bone:None RandomBone:No PSys:SootySmokeColumn02
    DamagedParticleSystem9 = Bone:SmokeS RandomBone:No PSys:StructureExplosionSmoke
    ReallyDamagedParticleSystem1 = Bone:SmokeS RandomBone:Yes PSys:GLAPowerPlantDamagedShockwave
    ReallyDamagedParticleSystem2 = Bone:SmokeS RandomBone:Yes PSys:GLAPowerPlantFlame
    ReallyDamagedParticleSystem4 = Bone:SmokeM RandomBone:Yes PSys:MammothTankSubExplosionSmoke
    ReallyDamagedParticleSystem5 = Bone:SmokeS RandomBone:Yes PSys:CarpetBombExplosionSmoke
    ReallyDamagedParticleSystem6 = Bone:SmokeS RandomBone:Yes PSys:ArmExplosionSmall01
    ReallyDamagedParticleSystem7 = Bone:SmokeS RandomBone:Yes PSys:JetSubExplosion
    ReallyDamagedParticleSystem8 = Bone:None RandomBone:No PSys:SootySmokeColumn03
    ReallyDamagedParticleSystem9 = Bone:SmokeS RandomBone:No PSys:StructureExplosionSmoke
    RubbleParticleSystem1 = Bone:SmokeS RandomBone:Yes PSys:SubExplosionSmoke01
    RubbleParticleSystem2 = Bone:SmokeS RandomBone:Yes PSys:TankStruckSparks
    RubbleParticleSystem3 = Bone:SmokeS RandomBone:Yes PSys:SubExplosionSmoke01
    RubbleParticleSystem4 = Bone:SmokeS RandomBone:Yes PSys:ArmExplosionSmall01
    RubbleParticleSystem5 = Bone:SmokeM RandomBone:Yes PSys:ArmExplosionSmall01
    RubbleParticleSystem8 = Bone:None RandomBone:No PSys:SootySmokeColumn03    
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = RadiusDecalUpdate ModuleTag_17B
  End

  Behavior = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityContaminationOnOff
    OCL                  = OCL_BuildingContaminationPoisonFieldSelector
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_CleanToxins
    DeathWeapon   = HazardFieldCoreWeapon
    StartsActive  = Yes
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death01
    DeathWeapon   = PoisonCloudCreationWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLAAnthraxBeta
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death02
    DeathWeapon   = PoisonCloudCreationWeaponBeta
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAAnthraxBeta
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death03
    DeathWeapon   = PoisonCloudCreationWeaponGamma
    StartsActive  = No
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma
    ConflictsWith = Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death04
    DeathWeapon   = AcidCloudCreationWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLASulfurAcid Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death05
    DeathWeapon   = AcidCloudCreationWeaponSulfur
    StartsActive  = No
    TriggeredBy   = Upgrade_GLASulfurAcid
    ConflictsWith = Upgrade_GLANeutralizers
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death06
    DeathWeapon   = PoisonCloudCreationWeaponBetaSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLAAnthraxBeta Upgrade_GLANeutralizers
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    RequiresAllTriggers = yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death07
    DeathWeapon   = PoisonCloudCreationWeaponGammaSafe
    StartsActive  = No
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = yes
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death08
    DeathWeapon   = AcidCloudCreationWeaponSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLANeutralizers
    ConflictsWith = Upgrade_GLASulfurAcid
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death09
    DeathWeapon   = AcidCloudCreationWeaponSulfurSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLASulfurAcid Upgrade_GLANeutralizers
    RequiresAllTriggers = yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 30.0
  GeometryMinorRadius = 50.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLATankSturm

  ; *** ART Parameters ***
  SelectPortrait         = SUSturm_L
  ButtonImage            = SUSturm
  
  UpgradeCameo1 = Upgrade_GLAChemicalWarheads
  UpgradeCameo2 = Upgrade_GLASulfurAcid
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = Upgrade_GLANeutralizers

  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
 
    DefaultConditionState
      Model = UVSturm
      Turret = Turret
      WeaponFireFXBone = PRIMARY FireFX01
      WeaponLaunchBone = PRIMARY FireMissile01
    End

    ConditionState = REALLYDAMAGED
      Model = UVSturm_D
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      Model = UVSturm
      Turret = Turret
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVSturm_D
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate  = 4.0
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Sturm
  Side                  = GLAToxinGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 3
  BuildCost       = 900
  BuildTime       = 9.0
  VisionRange         = 175
  ShroudClearingRange = 175

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY SturmMissileWeapon
    PreferredAgainst = PRIMARY VEHICLE STRUCTURE
  End

  ArmorSet
    Conditions    = None
    Armor         = TruckArmor
    DamageFX      = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
    Object = Chem_GLAPalace
  End

  ExperienceValue    = 46 67 98 140
  ExperienceRequired = 0 138 201 293
  IsTrainable = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = HeavyArtilleryCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = SturmTankVoiceSelect
  VoiceMove = SturmTankVoiceMove
  VoiceAttack = SturmTankVoiceAttack
  VoiceGuard = SturmTankVoiceMove
  SoundMoveStart = ScorpionTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart

  UnitSpecificSounds
    VoiceCreate   = SturmTankVoiceCreate
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter    = SturmTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DeployStyleAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 120
      RecenterTime = 5000
      ControlledWeaponSlots = PRIMARY SECONDARY
      InitiallyDisabled = yes
    End
    AutoAcquireEnemiesWhenIdle = Yes
    PackTime = 100
    UnpackTime = 100
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
  End

  Locomotor = SET_NORMAL SturmLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_GLASturmDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 10
    OCL = FINAL OCL_GLASturmDeathEffectSimple
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_GLASturmDeathEffectSimple
  End
  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Scale = 0.93
  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 8
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleCropDuster

  ; *** ART Parameters ***
  SelectPortrait         = SUCropDuster_L
  ButtonImage            = SUCropDuster

  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo2 = Upgrade_GLASulfurAcid
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = Upgrade_GLANeutralizers

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVDromader
      Animation      = UVDromader.UVDromader
      AnimationMode = ONCE
      WeaponFireFXBone  = PRIMARY WeaponA
      WeaponLaunchBone  = PRIMARY WeaponA
      HideSubObject = PROPELLER1
      ShowSubObject = PROPELLER2
    End

    ConditionState = REALLYDAMAGED
      Model = UVDromader_D
      Animation     = UVDromader_D.UVDromader_D
      AnimationMode = ONCE
      HideSubObject = PROPELLER1
      ShowSubObject = PROPELLER2
    End

    ConditionState = MOVING
      Model = UVDromader
      Animation      = UVDromader.UVDromader
      AnimationMode  = LOOP
      WeaponFireFXBone  = PRIMARY WeaponA
      WeaponLaunchBone  = PRIMARY WeaponA
      HideSubObject = PROPELLER1
      ShowSubObject = PROPELLER2
    End

    ConditionState = MOVING REALLYDAMAGED
      Model = UVDromader_D
      Animation           = UVDromader_D.UVDromader_D
      AnimationMode       = LOOP
      HideSubObject = PROPELLER1
      ShowSubObject = PROPELLER2
    End

    ConditionState = RUBBLE
      Model = UVDromader_E
    End

    ConditionState = RIDER2
      Model = UVDromader
      Animation      = UVDromader.UVDromader
      AnimationMode  = LOOP
      HideSubObject = PROPELLER2
      ShowSubObject = PROPELLER1
    End

    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVDromader_D
      Animation           = UVDromader_D.UVDromader_D
      AnimationMode       = LOOP
      HideSubObject = PROPELLER2
      ShowSubObject = PROPELLER1
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:CropDuster
  EditorSorting    = VEHICLE
  Side                = GLAToxinGeneral
  BuildCost           = 600
  BuildTime           = 6.0
  EnergyProduction    = 0
  CommandSet          = Chem_CropDusterCommandSet
  VisionRange         = 300
  ShroudClearingRange = 300
  TransportSlotCount  = 0

  Prerequisites
    Object = Chem_GLAPalace
    Object = Chem_GLAArmsDealer
  End
  
  WeaponSet
    Conditions = None
    Weapon = PRIMARY None
  End

  WeaponSet
    Conditions = WEAPON_RIDER1
    Weapon = PRIMARY NONE
    Weapon = SECONDARY NONE
  End

  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY CropDusterSprayerWeapon
    Weapon = SECONDARY CropDusterSprayerWeaponAcid
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    WeaponLockSharedAcrossSets = Yes
    ShareWeaponReloadTime = yes
  End
 
  ArmorSet
    Armor    = AirplaneArmor
    DamageFX = CrushableCarDamageFX
  End

  IsTrainable     = No
  ExperienceValue = 28 37 49 66
  CrusherLevel    = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = ToxinTractorVoiceSelect
  VoiceMove           = ToxinTractorVoiceMove
  VoiceGuard          = ToxinTractorVoiceMove
  VoiceAttack         = ToxinTractorVoiceAttack
  SoundMoveStart      = ToxinPlaneAmbientLoop
  SoundMoveStartDamaged = ToxinPlaneAmbientLoop
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate          = ToxinTractorVoiceCreate
    TruckLandingSound    = NoSound
    TruckPowerslideSound = NoSound
    VoiceCrush           = ToxinTractorVoiceCrush
    VoiceEnter           = ToxinTractorVoiceMove
    VoicePoisonLocation = ToxinTractorVoiceAttackContam
  End

  ; *** ENGINEERING Parameters ***  
  KindOf        = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS SALVAGER VEHICLE AIRCRAFT SCORE
  RadarPriority = UNIT

  Body            = ActiveBody ModuleTag_02
    MaxHealth       = 150.0
    InitialHealth   = 150.0
    SubdualDamageCap = 300
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_09
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL CropDusterGroundLocomotor
  Locomotor = SET_SLUGGISH CropDusterAirLocomotor

  Behavior                          = JetSlowDeathBehavior ModuleTag_Death
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_CropDusterDeathFinalBlowUp
    DestructionDelay                = 99999999; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100% ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%  ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_StealthFighterDeathInitial
    DelaySecondaryFromInitialDeath  = 500  ; in milliseconds
    FXSecondary                     = FX_JetDeathSecondary
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_RaptorDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200 ; in milliseconds
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                  = OCL_CropDusterDeathFinalBlowUp
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    OCL = FINAL OCL_CropDusterDeathFinalBlowUp
  End

  Behavior = PhysicsBehavior ModuleTag_10
    Mass = 100.0
  End

  Behavior = ProductionUpdate ModuleTag_22
  End

  Behavior = RiderChangeContain ModuleTag_88
    Rider1 = ChemGroundMoveModeObject RIDER1 WEAPON_RIDER1 STATUS_RIDER1 Chem_CropDusterCommandSet  SET_NORMAL
    Rider2 = SpecialModeObject        RIDER2 WEAPON_RIDER2 STATUS_RIDER2 Chem_CropDusterCommandSet2 SET_SLUGGISH
    Slots                = 1
    InitialPayload       = ChemGroundMoveModeObject 1
    ScatterNearbyOnExit  = No
    HealthRegen%PerSec   = 0
    DamagePercentToUnits = 100%
    BurnedDeathToUnits   = No
    AllowInsideKindOf    = PORTABLE_STRUCTURE
    ExitDelay         = 1
    NumberOfExitPaths = 1
    GoAggressiveOnExit = No
    DoorOpenTime = 0
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = AutoHealBehavior ModuleTag_23
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityTakeOff
    OCL                  = OCL_SpecialModeObject
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower02
    SpecialPowerTemplate = SpecialAbilityLand
    OCL                  = OCL_ChemGroundMoveModeObject
  End
  
  Behavior = StealthUpdate ModuleTag_19
    UseRiderStealth = Yes
  End

  Geometry        = BOX
  GeometryIsSmall = Yes
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 4.0
  GeometryHeight  = 5.0
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89
End

;----------------------------------------------------
Object Chem_GLATankCobra

  ; *** ART Parameters ***
  SelectPortrait         = SUCobra_L
  ButtonImage            = SUCobra

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Upgrade_GLASulfurAcid
  UpgradeCameo4 = Upgrade_GLATankCamouflage
  UpgradeCameo5 = Upgrade_GLANeutralizers

  Draw = W3DOverlordTankDraw ModuleTag_01
    ParticlesAttachedToAnimatedBones = Yes
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model             = UVST
      Turret            = Turret
      WeaponFireFXBone  = PRIMARY WEAPONB
      WeaponLaunchBone  = PRIMARY WEAPONB
      WeaponFireFXBone  = SECONDARY WEAPONB
      WeaponLaunchBone  = SECONDARY WEAPONB
      WeaponFireFXBone  = TERTIARY FIRESTINGER
      WeaponLaunchBone  = TERTIARY FIRESTINGER
    End
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UVST_D
    End
    ConditionState      = MOVING
      Model             = UVST
      ParticleSysBone = EXHAUST01 DozerSmokeLight
      ParticleSysBone = EXHAUST02 DozerSmokeLight
      ParticleSysBone = EXHAUST03 DozerSmokeLight
      ParticleSysBone = EXHAUST04 DozerSmokeLight
    End
    ConditionState      = MOVING REALLYDAMAGED RUBBLE
      Model             = UVST_D
      ParticleSysBone = EXHAUST01 DozerSmokeLight
      ParticleSysBone = EXHAUST02 DozerSmokeLight
      ParticleSysBone = EXHAUST03 DozerSmokeLight
      ParticleSysBone = EXHAUST04 DozerSmokeLight
    End

    ConditionState      = AFLAME
      Model             = UVST
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
    End
    ConditionState      = REALLYDAMAGED RUBBLE AFLAME
      Model             = UVST_D
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
    End
    ConditionState      = MOVING AFLAME
      Model             = UVST
      ParticleSysBone = EXHAUST01 DozerSmokeLight
      ParticleSysBone = EXHAUST02 DozerSmokeLight
      ParticleSysBone = EXHAUST03 DozerSmokeLight
      ParticleSysBone = EXHAUST04 DozerSmokeLight
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
    End
    ConditionState      = MOVING REALLYDAMAGED RUBBLE AFLAME
      Model             = UVST_D
      ParticleSysBone = EXHAUST01 DozerSmokeLight
      ParticleSysBone = EXHAUST02 DozerSmokeLight
      ParticleSysBone = EXHAUST03 DozerSmokeLight
      ParticleSysBone = EXHAUST04 DozerSmokeLight
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
    End

    TrackMarks          = EXTnkTrack.tga
    TreadAnimationRate  = 4
  End

  Draw = W3DModelDraw ModuleTag_01A
    DefaultConditionState
      Model = NONE
      Turret = Plane02
    End
    AliasConditionState = SNOW
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = REALLYDAMAGED SNOW

    ConditionState = USER_2
      Model = UVST_C
    End
    ConditionState = USER_2 SNOW
      Model = UVST_CS
    End
    ConditionState = USER_2 REALLYDAMAGED RUBBLE
      Model = UVST_CD
    End
    ConditionState = USER_2 SNOW REALLYDAMAGED RUBBLE
      Model = UVST_CDS
    End
  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Cobra
  Side            = GLAToxinGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 0
  BuildCost    = 6000
  BuildTime    = 60.0
  VisionRange         = 300
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GLATankCobraMissileLauncherAcid
    Weapon = SECONDARY GLATankCobraMissileLauncherToxin
    Weapon = TERTIARY AvengerRocketWeapon
    PreferredAgainst = PRIMARY VEHICLE STRUCTURE
    PreferredAgainst = SECONDARY INFANTRY
    PreferredAgainst = TERTIARY AIRCRAFT
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = SECONDARY FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY  FROM_PLAYER FROM_AI FROM_SCRIPT
    ShareWeaponReloadTime = yes
  End

  ArmorSet
    Conditions = None
    Armor      = ChemSuperTankArmor
    DamageFX   = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
    Object = Chem_GLAPalace
    Science = SCIENCE_CHEM
    Science = SCIENCE_Rank5
  End

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games

  ExperienceValue    = 272 362 481 643
  ExperienceRequired = 0 816 1085 1444
  IsTrainable = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Chem_GLATankCobraCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = KarakourtTankVoiceSelect
  VoiceMove             = KarakourtTankVoiceMove
  VoiceGuard            = KarakourtTankVoiceMove
  VoiceAttack           = KarakourtTankVoiceAttack
  SoundMoveStart        = HeavyTankMoveStart
  SoundMoveStartDamaged = HeavyTankMoveStart
  UnitSpecificSounds
    VoiceCreate         = KarakourtTankVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = KarakourtTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS SCORE VEHICLE DRONE SALVAGER

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 2400
    InitialHealth   = 2400
    SubdualDamageCap = 5000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = TransportAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 90
      ControlledWeaponSlots = PRIMARY TERTIARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Locomotor = SET_NORMAL SlowOverlordLocomotor

  Behavior = OverlordContain ModuleTag_07
    Slots                 = 1
    DamagePercentToUnits  = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PassengersInTurret     = Yes
    ExperienceSinkForRider = Yes
    PayloadTemplateName    = Chem_GLATankCobraTurret
  End

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 150.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL OCL_GLACobraTankDeathEffect
    FX  = FINAL FX_OverlordExplosionOneFinal
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = AutoHealBehavior ModuleTag_Repair
    HealingAmount = 8
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower01
    SpecialPowerTemplate = SpecialAbilityTarantulaToxinDefiling 
    OCL                  = OCL_SpecialAbility_TarantulaToxinDefiling
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower02
    SpecialPowerTemplate = SpecialAbilityTarantulaAcidDefiling
    OCL                  = OCL_SpecialAbility_TarantulaAcidDefiling
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = StealthUpdate ModuleTag_S07
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_S10
    TriggeredBy = Upgrade_GLATankCamouflage
  End
  Behavior = ModelConditionUpgrade ModuleTag_S13
    ConditionFlag = USER_2
    TriggeredBy = Upgrade_GLATankCamouflage
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death1
    DeathTypes = ALL
    DeathWeapon   = BombTruckAnthraxBombEffect
    StartsActive  = Yes
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers 
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death2
    DeathTypes = ALL
    DeathWeapon   = BombTruckAnthraxGammaBombEffect
    StartsActive  = No
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma 
    ConflictsWith = Upgrade_GLANeutralizers
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death5
    DeathTypes = ALL
    DeathWeapon   = BombTruckAnthraxBombEffectSafe
    StartsActive  = No
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    TriggeredBy   = Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death6
    DeathTypes = ALL
    DeathWeapon   = BombTruckAnthraxGammaBombEffectSafe
    StartsActive  = No
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma Upgrade_GLANeutralizers
    RequiresAllTriggers = yes
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death3
    DeathTypes = ALL
    DeathWeapon   = CarpetBombAcidDetonation
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLASulfurAcid Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death4
    DeathTypes = ALL
    DeathWeapon   = CarpetBombSulfurAcidDetonation
    StartsActive  = No
    TriggeredBy   = Upgrade_GLASulfurAcid 
    ConflictsWith = Upgrade_GLANeutralizers
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death7
    DeathTypes = ALL
    DeathWeapon   = CarpetBombAcidDetonationSafe
    StartsActive  = No
    ConflictsWith = Upgrade_GLASulfurAcid
    TriggeredBy   = Upgrade_GLANeutralizers
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death8
    DeathTypes = ALL
    DeathWeapon   = CarpetBombSulfurAcidDetonationSafe
    StartsActive  = No
    TriggeredBy   = Upgrade_GLASulfurAcid Upgrade_GLANeutralizers
    RequiresAllTriggers = yes
  End

  Geometry = BOX
  GeometryMajorRadius = 28.0
  GeometryMinorRadius = 15.0
  GeometryHeight = 15.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Chem_GLATankCobraTurret

  ; *** ART Parameters ***
  Draw     = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    AttachToBoneInContainer = FIREPOINT01
    ExtraPublicBone = TIRRET01

    DefaultConditionState
      Model     = UVST_A
      Turret    = TIRRET01
      TurretPitch = TURRETEL01
      HideSubObject = Plane01
      WeaponLaunchBone  = PRIMARY WEAPONA
      WeaponFireFXBone  = PRIMARY WEAPONA
      WeaponLaunchBone  = SECONDARY WEAPONA
      WeaponFireFXBone  = SECONDARY WEAPONA
      WeaponFireFXBone  = TERTIARY WEAPONA
      WeaponLaunchBone  = TERTIARY WEAPONA
    End
    AliasConditionState = SNOW

    ConditionState   = REALLYDAMAGED
      Model     = UVST_AD
      HideSubObject = Plane01
      ParticleSysBone = TIRRET01 SmokeFactionMedium
    End
    AliasConditionState = REALLYDAMAGED SNOW

    ConditionState = USER_2
      Model     = UVST_A
      ShowSubObject = Plane01
    End
    ConditionState = USER_2 SNOW
      Model     = UVST_AS
      ShowSubObject = Plane01
    End
    ConditionState = USER_2 REALLYDAMAGED
      Model     = UVST_AD
      ShowSubObject = Plane01
      ParticleSysBone = TIRRET01 SmokeFactionMedium
    End
    ConditionState = USER_2 SNOW REALLYDAMAGED
      Model     = UVST_ADS
      ShowSubObject = Plane01
      ParticleSysBone = TIRRET01 SmokeFactionMedium
    End
  End

  ; ***DESIGN parameters ***
  Side = GLAToxinGeneral
  EditorSorting    = SYSTEM
  TransportSlotCount = 1

  WeaponSet
    Conditions = None 
    Weapon    = PRIMARY   GLATankCobraSprayerAcid
    Weapon    = SECONDARY GLATankCobraSprayerToxinBeta
    Weapon    = TERTIARY  GLATankCobraSprayerSilicon
    PreferredAgainst = PRIMARY   VEHICLE
    PreferredAgainst = SECONDARY INFANTRY
    PreferredAgainst = TERTIARY  AIRCRAFT
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon    = PRIMARY   GLATankCobraSprayerAcid
    Weapon    = SECONDARY GLATankCobraSprayerToxinGamma
    Weapon    = TERTIARY  GLATankCobraSprayerSilicon
    PreferredAgainst = PRIMARY   VEHICLE
    PreferredAgainst = SECONDARY INFANTRY
    PreferredAgainst = TERTIARY  AIRCRAFT
  End

  Behavior = WeaponSetUpgrade UpgradeTag_Weapon01
    TriggeredBy = Chem_Upgrade_GLAAnthraxGamma
  End

  ArmorSet
    Conditions  = None
    Armor       = InvulnerableAllArmor
  End
  VisionRange   = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceRapidFire  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf = PRELOAD CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS PORTABLE_STRUCTURE CLICK_THROUGH IGNORED_IN_GUI SALVAGER

  Body  = ActiveBody ModuleTag_02
    MaxHealth  = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      TurretTurnRate  = 180
      TurretPitchRate = 180
      MinPhysicalPitch = -60
      AllowsPitch    = Yes
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Behavior   = DestroyDie ModuleTag_04
  End

  Behavior = StealthUpdate ModuleTag_S07
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_S10
    TriggeredBy = Upgrade_GLATankCamouflage
  End
  Behavior = ModelConditionUpgrade ModuleTag_S13
    ConditionFlag = USER_2
    TriggeredBy = Upgrade_GLATankCamouflage
  End

  Geometry  = BOX
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 9.0
  GeometryIsSmall     = No 
  Shadow    = SHADOW_VOLUME
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Chem_FakeGLAFactory

  ; *** ART Parameters ***
  SelectPortrait         = SUPrison_L
  ButtonImage            = SUPrison

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  ;----------------------------------------------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model = UBPrison
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison.UBPrison
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBPrison_D
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_D.UBPrison_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBPrison_E
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_E.UBPrison_E
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBPrison
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison.UBPrison
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBPrison_D
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_D.UBPrison_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBPrison_E
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_E.UBPrison_E
      AnimationMode        = LOOP
    End
        
    ; Snow
    ConditionState = SNOW
      Model = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPris_S.UBPris_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPriso_SD.UBPriso_SD
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPriso_ES.UBPriso_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPris_S.UBPris_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPriso_SD.UBPriso_SD
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPriso_ES.UBPriso_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBPrison_N
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_N.UBPrison_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBPrison_DN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBPrison_DN.UBPrison_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBPrison_EN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBPrison_EN.UBPrison_EN
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBPrison_N
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_N.UBPrison_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBPrison_DN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_DN.UBPrison_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBPrison_EN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPrison_EN.UBPrison_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPris_S.UBPris_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBPriso_SD.UBPriso_SD
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBPriso_ES.UBPriso_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPris_S.UBPris_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPriso_SD.UBPriso_SD
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation            = UBPriso_ES.UBPriso_ES
      AnimationMode        = LOOP
    End


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPrison
      Animation          = UBPrison.UBPrison
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPrison_D
      Animation          = UBPrison_D.UBPrison_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPrison_E
      Animation          = UBPrison_E.UBPrison_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPrison_N
      Animation          = UBPrison_N.UBPrison_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPrison_DN
      Animation          = UBPrison_DN.UBPrison_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPrison_EN
      Animation          = UBPrison_EN.UBPrison_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPris_S
      Animation          = UBPris_S.UBPris_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBPriso_SD
      Animation          = UBPriso_SD.UBPriso_SD
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBPriso_ES
      Animation          = UBPriso_ES.UBPriso_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBPris_S
      Animation          = UBPris_S.UBPris_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBPriso_SD
      Animation          = UBPriso_SD.UBPriso_SD
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBPriso_ES
      Animation          = UBPriso_ES.UBPriso_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End

  Draw = W3DModelDraw ModuleTag_00
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model = UBPrison_AF
      Animation     = UBPrison_AF.UBPrison_AF
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    AliasConditionState = GARRISONED
    AliasConditionState = DAMAGED GARRISONED
    AliasConditionState = REALLYDAMAGED GARRISONED
    AliasConditionState = SNOW
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = GARRISONED SNOW
    AliasConditionState = DAMAGED GARRISONED SNOW
    AliasConditionState = REALLYDAMAGED GARRISONED SNOW
    AliasConditionState = NIGHT
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = GARRISONED NIGHT
    AliasConditionState = DAMAGED GARRISONED NIGHT
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = DAMAGED NIGHT SNOW
    AliasConditionState = GARRISONED NIGHT SNOW
    AliasConditionState = DAMAGED GARRISONED NIGHT SNOW
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT SNOW

    ConditionState = REALLYDAMAGED RUBBLE
      Model = NONE
    End
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT

    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model    = UBPrison_AF
      Animation     = UBPrison_AF.UBPrison_AF
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState  = AWAITING_CONSTRUCTION 
      Model    = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPrison_A4
      Animation       = UBPrison_A4.UBPrison_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPrison_A4N
      Animation       = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPrison_A4S
      Animation       = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPrison_A4SN
      Animation       = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPrison_A6
      Animation       = UBPrison_A6.UBPrison_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPrison_A6N
      Animation       = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPrison_A6S
      Animation       = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPrison_A6SN
      Animation       = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

 ; --------------- The Factory Door -----------------
  Draw                = W3DModelDraw ModuleTag_04

    ConditionState    = NONE
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPrison_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPrison_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT DAMAGED
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPrison_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW NIGHT
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED

    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

    ConditionState    = DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
        
    ConditionState    = DOOR_1_OPENING
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING

    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED

    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_CLOSING
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED

    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBPrison_A8
      Animation       = UBPrison_A8.UBPrison_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN

    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBPrison_A7D
      Animation       = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED

    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBPrison_A7E
      Animation       = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
  End

  ;-------------FORTIFIED STATE----------------
  Draw = W3DModelDraw ModuleTag_Draw05
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = none
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = NIGHT
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = DAMAGED NIGHT SNOW
    AliasConditionState = REALLYDAMAGED NIGHT SNOW

    ; day
    ConditionState = GARRISONED
      Model = UBPrisonEG
    End
    AliasConditionState = GARRISONED NIGHT

    ConditionState = DAMAGED GARRISONED
      Model = UBPrisonEG_D
    End
    AliasConditionState = DAMAGED GARRISONED NIGHT

    ConditionState = REALLYDAMAGED GARRISONED
      Model = UBPrisonEG_E
    End
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT
        
    ; Snow
    ConditionState = GARRISONED SNOW
      Model = UBPrisonEG_S
    End
    AliasConditionState = GARRISONED NIGHT SNOW

    ConditionState = DAMAGED GARRISONED SNOW
      Model = UBPrisonEG_DS
    End
    AliasConditionState = DAMAGED GARRISONED NIGHT SNOW

    ConditionState = REALLYDAMAGED GARRISONED SNOW
      Model = UBPrisonEG_ES
    End
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT SNOW


    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPrisonEG
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPrisonEG_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPrisonEG_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPrisonEG
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPrisonEG_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPrisonEG_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPrisonEG_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBPrisonEG_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBPrisonEG_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBPrisonEG_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBPrison_SD
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBPrison_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End
  
  PlacementViewAngle  = -135
  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:GLAFactory
  Side             = GLAToxinGeneral
  EditorSorting    = STRUCTURE

  BuildCost        = 300
  BuildTime        = 6.0
  EnergyProduction = 0
  CommandSet       = FakeGLAFactoryCommandSet
  VisionRange     = 200.0
  ShroudClearingRange = 200

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions          = None
    Armor               = FakeStructureArmor
    DamageFX            = StructureDamageFXNoShake
  End

  ExperienceValue     = 0 0 0 0

  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = STRUCTURE
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  
  Behavior  = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior  = FXListDie ModuleTag_09
    DeathFX  = FX_StructureMediumDeath
  End
  Behavior = AIUpdateInterface ModuleTag_10
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = ProductionUpdate ModuleTag_11
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeaponFactory
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_14A
    ReplaceObject = Chem_GLAFactory
    TriggeredBy = Upgrade_BecomeRealGLABarracks
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_32
    TriggeredBy = Upgrade_GLACamoNetting
  END

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 45.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
  ShadowTexture = fake_supply
  ShadowSizeX = 120
  ShadowSizeY = 100
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Chem_GLAVehicleBTR50

  ; *** ART Parameters ***
  SelectPortrait         = SUBTR50Rig_L
  ButtonImage            = SUBTR50Rig
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLANeutralizers

  Draw = W3DOverlordTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
 
    DefaultConditionState
      Model = UVBTR50P
      HideSubObject = TENT
      TransitionKey = Zemlya
    End
    AliasConditionState = MOVING

    ConditionState = REALLYDAMAGED
      Model = UVBTR50P_D
      HideSubObject = TENT
      TransitionKey = Zemlya_D
    End
    AliasConditionState = RUBBLE
    AliasConditionState = REALLYDAMAGED MOVING
    AliasConditionState = RUBBLE MOVING

    ConditionState = PREATTACK_B
      Model = UVBTR50P
      Animation = UVBTR50P.UVBTR50P
      AnimationMode = ONCE
      HideSubObject = TENT
      TransitionKey = Zemlya
      ParticleSysBone = NONE RigAttackDirt
    End

    ConditionState = REALLYDAMAGED PREATTACK_B
      Model = UVBTR50P_D
      Animation = UVBTR50P_D.UVBTR50P_D
      AnimationMode = ONCE
      HideSubObject = TENT
      TransitionKey = Zemlya_D
    End

    ConditionState = OVER_WATER
      Model = UVBTR50P_W
      Animation = NONE
      HideSubObject = TENT
      ParticleSysBone = MIST01 AmphibWaveRest
      TransitionKey = Voda
    End

    ConditionState = REALLYDAMAGED OVER_WATER
      Model = UVBTR50P_DW
      Animation = NONE
      HideSubObject = TENT
      ParticleSysBone = MIST01 AmphibWaveRest
      TransitionKey = Voda_D
    End
    AliasConditionState = RUBBLE OVER_WATER

    ConditionState = OVER_WATER MOVING
      Model = UVBTR50P_W
      Animation = NONE
      HideSubObject = TENT
      ParticleSysBone = Mist01 AmphibMist
      ParticleSysBone = WATERFX01 AmphibWave
      ParticleSysBone = WATERFX02 AmphibWave
      TransitionKey = Voda
    End

    ConditionState = REALLYDAMAGED OVER_WATER MOVING
      Model = UVBTR50P_DW
      Animation = NONE
      HideSubObject = TENT
      ParticleSysBone = Mist01 AmphibMist
      ParticleSysBone = WATERFX01 AmphibWave
      ParticleSysBone = WATERFX02 AmphibWave
      TransitionKey = Voda_D
    End
    AliasConditionState = RUBBLE OVER_WATER MOVING

    ConditionState = AFLAME
      Model = UVBTR50P
      HideSubObject = TENT
      ParticleSysBone = CHASSIS TankFireContinious
      TransitionKey = Zemlya
    End
    AliasConditionState = AFLAME MOVING

    ConditionState = REALLYDAMAGED AFLAME
      Model = UVBTR50P_D
      HideSubObject = TENT
      ParticleSysBone = CHASSIS TankFireContinious
      TransitionKey = Zemlya_D
    End
    AliasConditionState = RUBBLE AFLAME
    AliasConditionState = REALLYDAMAGED AFLAME MOVING
    AliasConditionState = RUBBLE AFLAME MOVING

    ConditionState = AFLAME OVER_WATER
      Model = UVBTR50P_W
      Animation = NONE
      HideSubObject = TENT
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = MIST01 AmphibWaveRest
      TransitionKey = Voda
    End

    ConditionState = REALLYDAMAGED AFLAME OVER_WATER
      Model = UVBTR50P_DW
      Animation = NONE
      HideSubObject = TENT
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = MIST01 AmphibWaveRest
      TransitionKey = Voda_D
    End
    AliasConditionState = RUBBLE AFLAME OVER_WATER

    ConditionState = AFLAME OVER_WATER MOVING
      Model = UVBTR50P_W
      Animation = NONE
      HideSubObject = TENT
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = Mist01 AmphibMist
      ParticleSysBone = WATERFX01 AmphibWave
      ParticleSysBone = WATERFX02 AmphibWave
      TransitionKey = Voda
    End

    ConditionState = REALLYDAMAGED AFLAME OVER_WATER MOVING
      Model = UVBTR50P_DW
      Animation = NONE
      HideSubObject = TENT
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = Mist01 AmphibMist
      ParticleSysBone = WATERFX01 AmphibWave
      ParticleSysBone = WATERFX02 AmphibWave
      TransitionKey = Voda_D
    End
    AliasConditionState = RUBBLE AFLAME OVER_WATER MOVING

    TransitionState   = Zemlya Voda
      Model           = UVBTR50P_W
      Animation       = UVBTR50P_W.UVBTR50P_W
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    TransitionState   = Zemlya_D Voda_D
      Model           = UVBTR50P_DW
      Animation       = UVBTR50P_DW.UVBTR50P_DW
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    TransitionState   = Voda Zemlya
      Model           = UVBTR50P_W
      Animation       = UVBTR50P_W.UVBTR50P_W
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = Voda_D Zemlya_D
      Model           = UVBTR50P_DW
      Animation       = UVBTR50P_DW.UVBTR50P_DW
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate  = 4.0
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:BTR50PRig
  Side                  = GLAToxinGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 6
  BuildCost       = 750
  BuildTime       = 7.5
  VisionRange         = 150
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None 
    Weapon = SECONDARY PlaceTunnelWeapon
    AutoChooseSources = SECONDARY NONE
  End

  ArmorSet
    Conditions    = None
    Armor         = TruckArmor
    DamageFX      = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAFactory
    Object = Chem_GLAArmsDealer
  End

  ExperienceValue = 25 25 25 25
  IsTrainable = No
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet     = GLAVehicleRigCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BattleBusVoiceSelect
  VoiceMove = BattleBusVoiceMove
  VoiceGuard = BattleBusVoiceMove
  VoiceAttack = BattleBusVoiceAttack
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  SoundMoveStart = ScorpionTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  UnitSpecificSounds
    VoiceCreate                   = BattleBusVoiceCreate
    TurretMoveStart               = NoSound
    TurretMoveLoop                = NoSound
    TruckLandingSound             = RocketBuggyLand
    TruckPowerslideSound          = RocketBuggyPowerslide
    VoiceUnload                   = BattleBusVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE IGNORES_SELECT_ALL

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_AI
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Locomotor = SET_NORMAL ScorpionLocomotor BasicAmphibiousLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_GLARigExplode
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 10
    OCL = FINAL OCL_GLARigExplodePoisoned
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_GLARigExplodePoisoned
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower04
    SpecialPowerTemplate = SpecialPowerDig
    OCL                  = OCL_SpecialPowerDig
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = StealthDetectorUpdate ModuleTag_MineDetector ;+
    DetectionRate            = 250
    CanDetectWhileGarrisoned = No
    CanDetectWhileContained  = No
    ExtraForbiddenKindOf     = VEHICLE INFANTRY STRUCTURE AIRCRAFT
  End

  Behavior = OverlordContain ModuleTag_Decal
    Slots  = 1
    DamagePercentToUnits  = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PayloadTemplateName   = MineDetonatorDecalObject
  End

  Behavior = FireWeaponUpdate ModuleTag_Detonator
    Weapon = MineDetonationFieldWeapon
  End

  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 8
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45
End

;----------------------------------------
Object Chem_GLAVehicleQuadCannon

  ; *** ART Parameters ***
  SelectPortrait         = SUQuadCannon_L
  ButtonImage            = SUQuadCannon
  
  UpgradeCameo1 = Upgrade_GLANeutralizers
  UpgradeCameo2 = Upgrade_GLAJunkRepair

  
  Draw = W3DTankTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = UVQuadCann
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponLaunchBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04  ; Since we are showing one of three turrets, we need to then hide the subobject muzzleflash
    End
      
    ConditionState = REALLYDAMAGED
      Model = UVQuadCann_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponLaunchBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVQuadCann_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVQuadCann
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVQuadCann_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE

    ConditionState = USING_WEAPON_B
      Model = UVQuadCann
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY   BarrelMS
      WeaponLaunchBone  = SECONDARY   BarrelMS
      WeaponMuzzleFlash = SECONDARY   BarrelFX
      WeaponRecoilBone  = SECONDARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04  ; Since we are showing one of three turrets, we need to then hide the subobject muzzleflash
    End
      
    ConditionState = REALLYDAMAGED USING_WEAPON_B
      Model = UVQuadCann_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY   BarrelMS
      WeaponLaunchBone  = SECONDARY   BarrelMS
      WeaponMuzzleFlash = SECONDARY   BarrelFX
      WeaponRecoilBone  = SECONDARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End
    AliasConditionState = RUBBLE USING_WEAPON_B

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE USING_WEAPON_B
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = SECONDARY   BarrelUp01MS
      WeaponLaunchBone  = SECONDARY   BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY   BarrelUp01FX
      WeaponRecoilBone  = SECONDARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED USING_WEAPON_B
      Model = UVQuadCann_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = SECONDARY   BarrelUp01MS
      WeaponLaunchBone  = SECONDARY   BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY   BarrelUp01FX
      WeaponRecoilBone  = SECONDARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE USING_WEAPON_B

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_B
      Model = UVQuadCann
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = SECONDARY   BarrelUp02MS
      WeaponLaunchBone  = SECONDARY   BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY   BarrelUp02FX
      WeaponRecoilBone  = SECONDARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED USING_WEAPON_B
      Model = UVQuadCann_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = SECONDARY   BarrelUp02MS
      WeaponLaunchBone  = SECONDARY   BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY   BarrelUp02FX
      WeaponRecoilBone  = SECONDARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE USING_WEAPON_B

    ConditionState = AFLAME
      Model = UVQuadCann
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponLaunchBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04  ; Since we are showing one of three turrets, we need to then hide the subobject muzzleflash
      ParticleSysBone = Turret TankFireContinious
    End
      
    ConditionState = REALLYDAMAGED AFLAME
      Model = UVQuadCann_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponLaunchBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE AFLAME
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
      ParticleSysBone = Turret TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED AFLAME
      Model = UVQuadCann_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponLaunchBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO AFLAME
      Model = UVQuadCann
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
      ParticleSysBone = Turret TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED AFLAME
      Model = UVQuadCann_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponLaunchBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE AFLAME

    ConditionState = USING_WEAPON_B AFLAME
      Model = UVQuadCann
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY   BarrelMS
      WeaponLaunchBone  = SECONDARY   BarrelMS
      WeaponMuzzleFlash = SECONDARY   BarrelFX
      WeaponRecoilBone  = SECONDARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04  ; Since we are showing one of three turrets, we need to then hide the subobject muzzleflash
      ParticleSysBone = Turret TankFireContinious
    End
      
    ConditionState = REALLYDAMAGED USING_WEAPON_B AFLAME
      Model = UVQuadCann_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY   BarrelMS
      WeaponLaunchBone  = SECONDARY   BarrelMS
      WeaponMuzzleFlash = SECONDARY   BarrelFX
      WeaponRecoilBone  = SECONDARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = RUBBLE USING_WEAPON_B AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE USING_WEAPON_B AFLAME
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = SECONDARY   BarrelUp01MS
      WeaponLaunchBone  = SECONDARY   BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY   BarrelUp01FX
      WeaponRecoilBone  = SECONDARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
      ParticleSysBone = Turret TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED USING_WEAPON_B AFLAME
      Model = UVQuadCann_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = SECONDARY   BarrelUp01MS
      WeaponLaunchBone  = SECONDARY   BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY   BarrelUp01FX
      WeaponRecoilBone  = SECONDARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE USING_WEAPON_B AFLAME

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_B AFLAME
      Model = UVQuadCann
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = SECONDARY   BarrelUp02MS
      WeaponLaunchBone  = SECONDARY   BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY   BarrelUp02FX
      WeaponRecoilBone  = SECONDARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
      ParticleSysBone = Turret TankFireContinious
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED USING_WEAPON_B AFLAME
      Model = UVQuadCann_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = SECONDARY   BarrelUp02MS
      WeaponLaunchBone  = SECONDARY   BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY   BarrelUp02FX
      WeaponRecoilBone  = SECONDARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE USING_WEAPON_B AFLAME

    TrackMarks = EXTnkTrack.tga

    TreadAnimationRate = 4.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
 
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0   ; This unit doesn't powerslide.
  End


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:QuadCannon
  Side = GLAToxinGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3
  BuildCost   = 800
  BuildTime   = 8.0
  VisionRange = 250
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY QuadCannonGunAir
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY QuadCannonGunUpgradeOne
    Weapon = SECONDARY QuadCannonGunUpgradeOneAir
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY QuadCannonGunUpgradeTwo
    Weapon = SECONDARY QuadCannonGunUpgradeTwoAir
  End

  ArmorSet
    Conditions = None
    Armor      = AntiAirVehicle
    DamageFX   = TankDamageFX
  End

  Prerequisites
    Object = Chem_GLAArmsDealer
  End

  CommandSet = GenericCommandSet

  ExperienceValue    = 33 47 69 99
  ExperienceRequired = 0 98 142 207
  IsTrainable = Yes
  CrusherLevel   = 2 ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2 ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect           = QuadCannonVoiceSelect
  VoiceMove             = QuadCannonVoiceMove
  VoiceAttack           = QuadCannonVoiceAttack
  VoiceAttackAir        = QuadCannonVoiceAttackAir
  SoundMoveStart        = QuadCannonMoveStart
  SoundMoveStartDamaged = QuadCannonMoveStart
  VoiceGuard            = QuadCannonVoiceMove
  UnitSpecificSounds
   VoiceCreate         = QuadCannonVoiceCreate
   TurretMoveStart      = NoSound
   TurretMoveLoop       = TurretMoveLoop
   TruckLandingSound    = NoSound
   TruckPowerslideSound = NoSound
   VoiceSalvage         = QuadCannonVoiceSalvage
   VoiceCrush           = QuadCannonVoiceCrush
   VoiceEnter             = QuadCannonVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 440
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 360
      TurretPitchRate = 360
      AllowsPitch = Yes
      FiresWhileTurning   = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate   = 100
  End
  
  Locomotor = SET_NORMAL QuadCannonLocomotor
  
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 40.0
  End
  
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 250
    DestructionDelayVariance = 150
    OCL = FINAL    OCL_QuadCannonDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL    OCL_QuadCannonDeathEffectSimple
  End
  
  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
  End

 Behavior = WeaponBonusUpgrade ModuleTag_12
   TriggeredBy = Upgrade_APBullets
  End 

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ;Behavior = FireWeaponWhenDeadBehavior ModuleTag_SuicideDeath
    ;DeathWeapon   = Demo_TerroristOnCombatBikeSuicideDynamitePackPlusFire
    ;StartsActive  = No
    ;TriggeredBy   = Demo_Upgrade_SuicideBomb
    ;DeathTypes    = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
  ;End

  Behavior = ProductionUpdate ModuleTag_38
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_Exit
    UnitCreatePoint   = X:0.0  Y:0.0   Z:0.0
    NaturalRallyPoint = X:0.0  Y:0.0   Z:0.0
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End