;----------------------------------------------------------------------------------------------------------
Object Nuke_ChinaVehicleHelix

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeHelix_L
  ButtonImage            = SNNukeHelix
  
  UpgradeCameo1 = Upgrade_ChinaAircraftArmor

  Draw = W3DOverlordAircraftDraw  ModuleTag_01; Works with the dependencyModelDraw of the upgrade portable structures 
    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model = NVHELIX
      Animation = NVHELIX.NVHELIX
      AnimationMode = LOOP
      WeaponFireFXBone    = PRIMARY Muzzle01
      WeaponMuzzleFlash   = PRIMARY TurretFX03
      WeaponLaunchBone    = PRIMARY Launch01
      Turret = TURRET
      TurretPitch = TURRETEL
      HideSubObject       = BombWing
    End

    ConditionState = MOVING
      ParticleSysBone = SMOKE01 HelixExhaust
      ParticleSysBone = SMOKE02 HelixExhaust
      ParticleSysBone = SMOKE01 HeliExhaustHeat
      ParticleSysBone = SMOKE02 HeliExhaustHeat
    End

    ConditionState = REALLYDAMAGED
      Model = NVHELIX_d
      Animation = NVHELIX_d.NVHELIX_d
      AnimationMode = LOOP
      HideSubObject       = BombWing
    End
    AliasConditionState = RUBBLE

    ConditionState = REALLYDAMAGED MOVING
      Model = NVHELIX_d
      Animation = NVHELIX_d.NVHELIX_d
      AnimationMode = LOOP
      ParticleSysBone = SMOKE01 HelixExhaust
      ParticleSysBone = SMOKE02 HelixExhaust
      ParticleSysBone = SMOKE01 HeliExhaustHeat
      ParticleSysBone = SMOKE02 HeliExhaustHeat
      HideSubObject       = BombWing
    End
    AliasConditionState = RUBBLE MOVING

    ConditionState = RUBBLE SPECIAL_DAMAGED
      Model = NVHELIX_d 
      HideSubObject = BombWing
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Helix
  EditorSorting       = VEHICLE
  Side                = ChinaNukeGeneral
  TransportSlotCount  = 0       
  VisionRange         = 200.0 
  ShroudClearingRange = 400
  BuildCost           = 2000
  BuildTime           = 20.0

  Prerequisites
    Object = Nuke_ChinaAirfield
    Object = Nuke_ChinaPropagandaCenter
  End

  ExperienceValue     = 56 81 118 170
  ExperienceRequired  = 0 167 243 355
  IsTrainable         = Yes  
  CommandSet          = Nuke_ChinaVehicleHelixCommandSet

  ArmorSet
    Conditions = None
    Armor      = ChinookArmor
    DamageFX   = None
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = ChinookArmorWithRadar
    DamageFX   = None
  End

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     HelixMinigunWeapon
    PreferredAgainst    = PRIMARY     INFANTRY
    AutoChooseSources   = PRIMARY     FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  ; *** AUDIO Parameters ***
  VoiceSelect     = HelixVoiceSelect
  VoiceMove       = HelixVoiceMove
  VoiceAttack     = HelixVoiceAttack
  SoundAmbient    = HelixAmbientLoop
  SoundEnter      = HumveeEnter
  SoundExit       = HumveeExit
  UnitSpecificSounds
    VoiceCreate         = HelixVoiceCreate
    VoiceUnload         = HelixVoiceUnload
    VoiceGarrison       = HelixVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf          = PRELOAD CAN_CAST_REFLECTIONS SELECTABLE VEHICLE TRANSPORT AIRCRAFT SCORE PRODUCED_AT_HELIPAD CAN_ATTACK 

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 600.0
    InitialHealth   = 600.0
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = FXListDie ModuleTag_05
    DeathFX = FX_HelicopterStartDeath
  End

  Behavior                       = TransitionDamageFX ModuleTag_06
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuousDown
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_ComancheDamageTransition
  End

  Behavior = ChinookAIUpdate ModuleTag_07
    AutoAcquireEnemiesWhenIdle = Yes 
    RotorWashParticleSystem = HelixRotorWashRing
    Turret
      TurretTurnRate = 120
      TurretPitchRate = 120
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      RecenterTime   = 100
      FiresWhileTurning     = Yes
      AllowsPitch           = Yes
      MinPhysicalPitch      = -90
    End
  End
  Locomotor = SET_NORMAL    HelixLocomotor
  Locomotor = SET_TAXIING   BasicHelicopterTaxiLocomotor

  Behavior = PhysicsBehavior ModuleTag_09
    Mass = 100.0
  End

  Behavior = HelicopterSlowDeathBehavior ModuleTag_10
    DestructionDelay                = 99999999        ; the destruction delay
    SpiralOrbitTurnRate             = 80.0           ; in degrees per second, bigger # = tighter spiral
    SpiralOrbitForwardSpeed         = 110.0           ; bigger # = larger spiral
    SpiralOrbitForwardSpeedDamping  = .9999           ; smaller #'s = slow down faster
    MaxBraking                      = 210   ; max braking we can use during death spiral (lower num = wilder spiral)    
    SoundDeathLoop                  = HelixDamagedLoop
    MinSelfSpin                     = 40                     ; in degrees per second
    MaxSelfSpin                     = 120                     ; in degrees per second
    SelfSpinUpdateDelay             = 300                     ; in milliseconds
    SelfSpinUpdateAmount            = 5                      ; in degrees   
    FallHowFast                     = 8.0%                   ; fraction of gravity, lower = take longer to fall
    MinBladeFlyOffDelay             = 1000                    ; in milliseconds
    MaxBladeFlyOffDelay             = 1000                    ; in milliseconds
    AttachParticle                  = SootySmokeTrail
    AttachParticleBone              = Propeller02
    BladeObjectName                 = HelixBlades
    BladeBoneName                   = Propeller01    
    FXBlade                         = FX_HelicopterBladeExplosion
    OCLBlade                        = OCL_HelicopterBladeExplosion
    FXHitGround                     = FX_HelicopterHitGround
    OCLHitGround                    = OCL_HelicopterHitGround
    FXFinalBlowUp                   = FX_HelixHelicopterBlowUpBig
    OCLFinalBlowUp                  = OCL_HelixBlades
    DelayFromGroundToFinalDeath     = 30
    FinalRubbleObject               = HelixRubbleHull
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = ProductionUpdate ModuleTag_25
    MaxQueueEntries = 1
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Addon01
    UpgradeObject = OCL_HelixGattlingCannon
    TriggeredBy   = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaHelixBombModule Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon02
    UpgradeObject = OCL_HelixPropagandaTower
    TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaHelixBombModule Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon03
    UpgradeObject = OCL_HelixNukeRL
    TriggeredBy   = Upgrade_ChinaOverlordNukeRL 
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaHelixBombModule Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon04
    UpgradeObject = OCL_HelixNukeBombModule
    TriggeredBy   = Upgrade_ChinaHelixBombModule
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon05
    UpgradeObject = OCL_HelixRadar
    TriggeredBy   = Upgrade_ChinaOverlordRadar
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaHelixBombModule
  End

  Behavior = CommandSetUpgrade ModuleTag_26
    CommandSet = ChinaHelixCommandSetUpgraded
    TriggeredBy = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaHelixBombModule Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End

  Behavior = HelixContain ModuleTag_29
    Slots                   = 5
    DamagePercentToUnits    = 100%
    AllowInsideKindOf       = INFANTRY VEHICLE PORTABLE_STRUCTURE
    ForbidInsideKindOf      = AIRCRAFT
    ExitDelay               = 100
    NumberOfExitPaths       = 1
    PassengersAllowedToFire = No
  End

  Behavior        = MaxHealthUpgrade ModuleTag_10B
    TriggeredBy   = Upgrade_ChinaAircraftArmor
    AddMaxHealth  = 150.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Geometry              = CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryHeight        = 30.0     
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME    
  ShadowSizeX           = 89
End

;------------------------------------------------------------------------------
Object Nuke_ChinaJetMIG

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeMig_L
  ButtonImage            = SNNukeMig
  
  UpgradeCameo1 = Upgrade_ChinaAircraftArmor
  
  Draw = W3DModelDraw ModuleTag_01
    ParticlesAttachedToAnimatedBones = Yes

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model               = NVMIGN
      HideSubObject       = BurnerFX01 BurnerFX02
      WeaponLaunchBone    = PRIMARY WeaponA
    End

    ConditionState        = JETEXHAUST
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState       = JETEXHAUST JETAFTERBURNER
      ShowSubObject      = BurnerFX01 BurnerFX02
      ParticleSysBone     = Exhaust01 JetExhaust
      ParticleSysBone     = Exhaust02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = REALLYDAMAGED
      Model               = NVMIGN_D
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = RUBBLE
      Model               = NVMIGN_D
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST
      Model               = NVMIGN_D
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model               = NVMIGN_D
      ShowSubObject       = BurnerFX01 BurnerFX02
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = RUBBLE JETEXHAUST JETAFTERBURNER
      Model               = NVMIGN_D
      HideSubObject       = None 
      ShowSubObject       = None
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

  End

  ; ***DESIGN parameters ***
  DisplayName             = OBJECT:MIG
  EditorSorting           = VEHICLE
  Side                    = ChinaNukeGeneral
  TransportSlotCount      = 0
  VisionRange             = 200.0 
  ShroudClearingRange     = 400.0

  Prerequisites
    Object  = Nuke_ChinaAirfield
  End

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY  Nuke_NukeMissileWeapon
  End

  ArmorSet
    Conditions        = None
    Armor             = AirplaneArmor
    DamageFX          = None
  End

  BuildCost           = 2000
  BuildTime           = 20
  ExperienceValue     = 90 130 191 274
  ExperienceRequired  = 0 270 391 572
  IsTrainable = Yes
  CrusherLevel        = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect             = MigVoiceSelect
  VoiceMove               = MigVoiceMove
  VoiceAttack             = MigVoiceAttack
  VoiceAttackAir          = MigVoiceAttackAir
  VoiceGuard              = MigVoiceAirPatrol
  SoundAmbient            = MigAmbientLoop
  UnitSpecificSounds
    VoiceCreate           = MigVoiceCreate
    Afterburner           = RaptorAfterburner
    VoiceGarrison         = MigVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT
  Body                   = ActiveBody ModuleTag_02
    MaxHealth            = 225.0
    InitialHealth        = 225.0
    SubdualDamageCap = 450
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_03
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_MIGDeathFinalBlowUp
    DestructionDelay                = 99999999  ; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100%      ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%    ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_MigDeathInitial
    OCLInitialDeath                 = OCL_MIGDeathInitial
    DelaySecondaryFromInitialDeath  = 500
    FXSecondary                     = FX_JetDeathSecondary
    OCLSecondary                    = OCL_MIGDeathSecondary
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_MIGDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                  = OCL_MIGDeathFinalBlowUp
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL OCL_MIGDeathFinalBlowUp
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

  Behavior = JetAIUpdate ModuleTag_06
    OutOfAmmoDamagePerSecond  = 0%
    TakeoffDistForMaxLift     = 0%
    TakeoffPause              = 500
    MinHeight                 = 5
    ReturnToBaseIdleTime      = 10000
  End

  Locomotor = SET_NORMAL MIGLocomotor
  Locomotor = SET_TAXIING BasicJetTaxiLocomotor

  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 8000        ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500      ; this often.
  End

  Behavior                       = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior        = MaxHealthUpgrade ModuleTag_10
    TriggeredBy   = Upgrade_ChinaAircraftArmor
    AddMaxHealth  = 56.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Scale = 1.05
  Geometry                 = Box
  GeometryIsSmall          = Yes
  GeometryMajorRadius      = 14.0
  GeometryMinorRadius      = 7.0
  GeometryHeight           = 5.0
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInfantryRedguard

  ; *** ART Parameters ***
  SelectPortrait         = SNRedGuard_L  
  ButtonImage            = SNRedGuard_L
  
  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_InfantryCaptureBuilding
  UpgradeCameo3 = Upgrade_ChinaRadiationDefense
  UpgradeCameo4 = Upgrade_ChinaNuclearBullets

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A
    ; ------- Standing-Around Animations
 
    DefaultConditionState
      Model               = NICNSC_SKN
      IdleAnimation       = NICNSC_SKL.NICNSC_STA 0 35
      IdleAnimation       = NICNSC_SKL.NICNSC_IDA
      IdleAnimation       = NICNSC_SKL.NICNSC_IDB
      AnimationMode       = ONCE
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      TransitionKey       = TRANS_Stand
    End

    ConditionState        = REALLYDAMAGED
      IdleAnimation       = NICNSC_SKL.NICNSC_STB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandDamaged
    End

    ; ------- Machine Gun Animations
    ConditionState      = USING_WEAPON_A 
      Animation         = NICNSC_SKL.NICNSC_ATA
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Firing
    End

    ConditionState      = USING_WEAPON_A REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_ATC
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringDamaged
    End

    ; ------- Firing-related Transitions
    TransitionState   = TRANS_Firing TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
    End

    ;TransitionState   = TRANS_Stand TRANS_Firing
    ;  Animation       = NICNSC_SKL.NICNSC_SA2AA
    ;  AnimationMode   = ONCE
    ;End

    TransitionState   = TRANS_Firing TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE
    End

    ;TransitionState   = TRANS_StandDamaged TRANS_FiringDamaged
    ;  Animation       = NICNSC_SKL.NICNSC_ATCST
    ;  AnimationMode   = ONCE
    ;End

    TransitionState   = TRANS_FiringDamaged TRANS_StandDamaged
      Animation       = NICNSC_SKL.NICNSC_ATCED
      AnimationMode   = ONCE
    End

    ; ------------- Damage Transitions --------------------
    TransitionState = TRANS_StandDamaged TRANS_RunDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 2 2
    End
    TransitionState = TRANS_RunDamaged TRANS_StandDamaged 
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2 2
      Flags           = START_FRAME_LAST
    End
    TransitionState = TRANS_Stand TRANS_StandDamaged 
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 4 5
      Flags           = START_FRAME_LAST
    End

    ; ------- Bayonet Animations
    ConditionState    = PREATTACK_C 
      Animation       = NICNSC_SKL.NICNSC_ATB1
      AnimationMode   = ONCE
      TransitionKey   = TRANS_Stab
    End
    AliasConditionState = PREATTACK_C MOVING
    AliasConditionState = PREATTACK_C FIRING_C
    AliasConditionState = PREATTACK_C BETWEEN_FIRING_SHOTS_C

    ConditionState      = FIRING_C
      Animation         = NICNSC_SKL.NICNSC_ATB2
      AnimationMode     = ONCE
      WaitForStateToFinishIfPossible = TRANS_Stab
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C

    ; ------- Parachuting Animations
    ConditionState    = FREEFALL
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
      TransitionKey   = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState    = PARACHUTING
      Animation       = NICNSC_SKL.NICNSC_PHG
      AnimationMode   = LOOP
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey   = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState   = TRANS_Falling TRANS_Chute
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = ONCE
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState   = TRANS_Chute TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_PTD
      AnimationMode   = ONCE
    End

    ; ------- Movement Animations
    ConditionState      = MOVING
      Animation         = NICNSC_SKL.NICNSC_RNA 26
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING

    ConditionState = MOVING REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_RNB 28
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_RunDamaged
      TransitionKey     = None
    End
    AliasConditionState = MOVING ATTACKING REALLYDAMAGED

    ; ------- Bldg-capture
    ConditionState      = UNPACKING
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState      = RAISING_FLAG
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState      = PACKING
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState     = TRANS_Raising TRANS_Packing
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP2
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    End

    ; ------- Dying Animations
    ConditionState      = DYING
      Animation         = NICNSC_SKL.NICNSC_DTA
      Animation         = NICNSC_SKL.NICNSC_DTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NICNSC_SKL.NICNSC_ATDE1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NICNSC_SKL.NICNSC_ATDE2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NICNSC_SKL.NICNSC_ATDE3
      AnimationMode     = ONCE
      TransitionKey     = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ; ------- Misc Animations
    ConditionState      = SPECIAL_CHEERING
      Animation         = NICNSC_SKL.NICNSC_CHA
      AnimationMode     = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Redguard
  Side                = ChinaNukeGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1       
  VisionRange = 150
  ShroudClearingRange = 200
  BuildCost = 250
  BuildTime = 2.5

  WeaponSet
    Conditions = None
    Weapon = PRIMARY RedguardMachineGun
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY RedguardNuclearMachineGun
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_ChinaNuclearBullets
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = HumanArmorNukeUpgraded
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaBarracks
  End

  ExperienceValue    = 8 11 16 23
  ExperienceRequired = 0 23 33 48
  IsTrainable = Yes
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaInfantryRedguardCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RedGuardVoiceSelect
  VoiceMove = RedGuardVoiceMove
  VoiceGuard = RedGuardVoiceMove
  VoiceAttack = RedGuardVoiceAttack
  VoiceGroupSelect = BattleCrySound
  VoiceFear = RedGuardVoiceFear
  VoiceTaskComplete = RedGuardVoiceCaptureComplete
  UnitSpecificSounds
    VoiceMelee      = RedGuardVoiceAttackBayonet
    VoiceGarrison   = RedGuardVoiceGarrison
    VoiceCreate     = RedGuardVoiceCreate
    VoiceSubdue     = RedGuardVoiceSubdue
    VoiceEnter      = RedGuardVoiceMove
    VoiceEnterHostile = RedGuardVoiceMove
    VoiceGetHealed      = RedGuardVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE PARACHUTABLE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End
  
  Behavior = StealthUpdate ModuleStealth_CHINA
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End  

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_05 ; allows use of command button hunt script with this unit. 
  End

  Locomotor = SET_NORMAL RedguardLocomotor

  Behavior = HordeUpdate ModuleTag_06
    RubOffRadius = 60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 24.0
  End

  Behavior = SquishCollide ModuleTag_10
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_RedGuardDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_RedGuardDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantryChina
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_RedGuardDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_15
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = SpecialAbility ModuleTag_16
    SpecialPowerTemplate      = SpecialAbilityInfantryCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes
    InitiateSound         = RedGuardVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_17
    SpecialPowerTemplate  = SpecialAbilityInfantryCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 20000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 8
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_18
    SpecialPowerTemplate = SpecialAbilityInfantryCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Behavior = AutoFindHealingUpdate   ModuleTag_Heal ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000 ; once a second.
    ScanRange = 300 ;
    NeverHeal = 0.85 ;  don't heal if we are > 85% healthy.
    AlwaysHeal = 0.25 ; if we get below 25%, find healing right away.
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInfantryBlackLotus

  ; *** ART Parameters ***
  SelectPortrait         = SNBlkLotusA_L
  ButtonImage            = SNBlkLotusA
  
  UpgradeCameo1 = Upgrade_ChinaRadiationDefense
  
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    
    ; --- idle
    DefaultConditionState
      Model             = NIHERO_SKN
      IdleAnimation     = NIHERO_SKL.NIHERO_STA 0 17
      IdleAnimation     = NIHERO_SKL.NIHero_IDA
      IdleAnimation     = NIHERO_SKL.NIHero_IDB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Stand
    End

    ConditionState      = REALLYDAMAGED
      IdleAnimation     = NIHERO_SKL.NIHERO_ISTA 0 30
      IdleAnimation     = NIHERO_SKL.NIHero_IIDA
      AnimationMode     = ONCE
      TransitionKey     = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = NIHero_SKL.NIHero_ISTAHIT
      AnimationMode     = ONCE
    End

    ; --- moving
    ConditionState      = MOVING
      Animation         = NIHero_SKL.NIHero_RNA
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING UNPACKING

    ConditionState      = MOVING REALLYDAMAGED
      Animation         = NIHero_SKL.NIHero_IRNA
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING UNPACKING REALLYDAMAGED

    ; --- packing states
    ConditionState      = UNPACKING
      ;Preparing to attack (unpacking gear)
      Animation         = NIHero_SKL.NIHero_ATA1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING FIRING_A

    ConditionState      = FIRING_A
      ;Processing attack (hacking)
      Animation         = NIHero_SKL.NIHero_ATA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringA
    End

    ConditionState      = PACKING
      ;Completing attack (packing gear)
      Animation         = NIHero_SKL.NIHero_ATA3
      AnimationMode     = ONCE
    End
    AliasConditionState = FIRING_A PACKING 

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = NIHero_SKL.NIHero_IATAHIT
      AnimationMode     = ONCE
    End

    ; --- injured-packing states
    ConditionState      = UNPACKING REALLYDAMAGED
      ;Preparing to attack (unpacking gear)
      Animation         = NIHero_SKL.NIHero_IATA1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING FIRING_A REALLYDAMAGED

    ConditionState      = FIRING_A REALLYDAMAGED
      ;Processing attack (hacking)
      Animation         = NIHero_SKL.NIHero_IATA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringAInjured
    End

    ConditionState      = PACKING REALLYDAMAGED
      ;Completing attack (packing gear)
      Animation         = NIHero_SKL.NIHero_IATA3
      AnimationMode     = ONCE
    End
    AliasConditionState = FIRING_A PACKING REALLYDAMAGED

    ; --- normal-dying states
    ConditionState      = DYING
      Animation         = NIHero_SKL.NIHero_DTA
      Animation         = NIHero_SKL.NIHero_DTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NIHero_SKL.NIHero_ADTF1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NIHero_SKL.NIHero_ADTF2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NIHero_SKL.NIHero_ADTF3
      AnimationMode     = ONCE
      TransitionKey     = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ; --- cheering states
    ConditionState      = SPECIAL_CHEERING
      Animation         = NIHERO_SKL.NIHERO_CHA
      AnimationMode     = ONCE
    End

    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = NIHERO_SKL.NIHERO_ICHA
      AnimationMode     = ONCE
    End

    ; --- falling states
    ConditionState      = FREEFALL
      Animation         = NIHero_SKL.NIHero_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = NIHero_SKL.NIHero_PHG
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = NIHero_SKL.NIHero_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = NIHero_SKL.NIHero_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = NIHero_SKL.NIHero_PTD
      AnimationMode     = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackLotus
  Side                = ChinaNukeGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1       
  BuildCost           = 2000
  BuildTime           = 20.0
  VisionRange         = 300
  ShroudClearingRange = 300
  MaxSimultaneousOfType = 1

  WeaponSet
    Conditions  = None 
    Weapon      = PRIMARY None
  End

  ArmorSet
    Conditions  = None
    Armor       = HumanArmor
    DamageFX    = InfantryDamageFX
  End
  ArmorSet
    Conditions  = PLAYER_UPGRADE
    Armor       = HumanArmorNukeUpgraded
    DamageFX    = InfantryDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaBarracks
    Object = Nuke_ChinaPropagandaCenter
    Science = SCIENCE_NUKE SCIENCE_FLAM SCIENCE_TANK SCIENCE_INFA
  End

  CommandSet         = Nuke_ChinaInfantryBlackLotusCommandSet
  ExperienceValue    = 52 69 92 122
  ExperienceRequired = 0 155 206 275
  IsTrainable        = Yes
  CrushableLevel     = 2
  CommandSet         = Nuke_ChinaInfantryBlackLotusCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BlackLotusVoiceSelect
  VoiceMove = BlackLotusVoiceMove
  VoiceAttack = NoSound
  VoiceGuard = BlackLotusVoiceMove
  VoiceFear = BlackLotusVoiceFear
  VoiceTaskComplete = BlackLotusVoiceCaptureComplete
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  
  UnitSpecificSounds
    VoiceCreate          = BlackLotusVoiceCreate
    VoiceGarrison = BlackLotusVoiceMove
    VoiceEnter = BlackLotusVoiceMove
    VoiceEnterHostile = BlackLotusVoiceMove
    VoiceStealCashComplete = BlackLotusVoiceCashComplete
    VoiceDisableVehicleComplete = BlackLotusVoiceDisableComplete
    VoiceCaptureBuildingComplete = BlackLotusVoiceCaptureComplete
    VoiceGetHealed      = BlackLotusVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE HERO CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 750.0
    InitialHealth   = 750.0
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_03
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No
  End

  Locomotor = SET_NORMAL BlackLotusLocomotor
  Locomotor = SET_FREEFALL FreeFallLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 24.0
  End

  Behavior = StealthUpdate ModuleTag_07
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = USING_ABILITY
    HintDetectableConditions    = USING_ABILITY
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent      = EnemyBlackLotusDetected
    OwnDetectionEvaEvent        = OwnBlackLotusDetected
  End

  Behavior = StealthDetectorUpdate ModuleTag_44  ;+
    DetectionRate   = 500
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
  End

  Behavior = SpecialAbility ModuleTag_Ability01
    SpecialPowerTemplate = SpecialAbilityBlackLotusCaptureBuilding
    UpdateModuleStartsAttack = Yes
    InitiateSound         = BlackLotusVoiceHackBuilding
  End
  Behavior = SpecialAbilityUpdate ModuleTag_Ability02
    SpecialPowerTemplate  = SpecialAbilityBlackLotusCaptureBuilding
    StartAbilityRange     = 150.0
    UnpackTime            = 6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime              = 2800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime       = 6000 ;time to complete hack once prepared (unpacked)
    SpecialObject         = BinaryDataStream
    DoCaptureFX           = Yes
    PackSound             = BlackLotusPack
    UnpackSound           = BlackLotusUnpack
    TriggerSound          = BlackLotusTrigger
    PrepSoundLoop         = BlackLotusPrepLoop
    AwardXPForTriggering  = 25
  End
  Behavior = SpecialAbility ModuleTag_Ability03
    SpecialPowerTemplate      = SpecialAbilityBlackLotusDisableVehicleHack
    UpdateModuleStartsAttack  = Yes
    InitiateSound           = BlackLotusVoiceHackVehicle
  End
  Behavior = SpecialAbilityUpdate ModuleTag_Ability04
    SpecialPowerTemplate    = SpecialAbilityBlackLotusDisableVehicleHack
    StartAbilityRange       = 150.0
    UnpackTime              = 2000 ;6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime                = 1000 ;2800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime         = 2000 ;time to complete hack once prepared (unpacked)
    EffectDuration          = 15000 ;duration vehicle is disabled  (30 seconds)
    DisableFXParticleSystem = DisabledEffectBinaryShower0
    SpecialObject           = BinaryDataStream
    PackSound               = BlackLotusPack
    UnpackSound             = BlackLotusUnpack
    TriggerSound            = BlackLotusTrigger
    PrepSoundLoop           = BlackLotusPrepLoop
    AwardXPForTriggering    = 25
  End
  Behavior = SpecialAbility ModuleTag_Ability05
    SpecialPowerTemplate      = SpecialAbilityBlackLotusStealCashHack
    UpdateModuleStartsAttack  = Yes
    InitiateSound         = BlackLotusVoiceHackCash
  End
  Behavior = SpecialAbilityUpdate ModuleTag_Ability06
    SpecialPowerTemplate  = SpecialAbilityBlackLotusStealCashHack
    StartAbilityRange     = 150.0
    UnpackTime            = 6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime              = 5800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime       = 6000 ;time to complete hack once prepared (unpacked)
    EffectValue           = 2000 ;amount of cash stolen
    SpecialObject         = BinaryDataStream
    PackSound             = BlackLotusPack
    UnpackSound           = BlackLotusUnpack
    TriggerSound          = BlackLotusTrigger
    PrepSoundLoop         = BlackLotusPrepLoop
    PersistentPrepTime          = 1000
    PersistenceRequiresRecharge = Yes
    AwardXPForTriggering  = 25
  End
  Behavior = SpecialAbility ModuleTag_Ability07
    SpecialPowerTemplate = SpecialAbilityColonelBurtonTimedCharges
    UpdateModuleStartsAttack = Yes
  End
  Behavior = SpecialAbilityUpdate ModuleTag_Ability08
    SpecialPowerTemplate = SpecialAbilityColonelBurtonTimedCharges
    StartAbilityRange = 0.0
    PreparationTime = 0
    SpecialObject = TimedNeutronCharge
    MaxSpecialObjects = 10
    SpecialObjectsPersistWhenOwnerDies = Yes 
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
    UnpackTime              = 5500          ;NOTE: Modifying this value will require modifying the delay for ColonelBurtonPlantCharge
    FlipOwnerAfterUnpacking = Yes
    FleeRangeAfterCompletion = 100.0        ;Runs away after finishing ability
    UnpackSound             = ColonelBurtonPlantCharge
    LoseStealthOnTrigger    = Yes
    PreTriggerUnstealthTime = 5000 ; in milliseconds
    AwardXPForTriggering  = 25
  End
  Behavior = SpecialAbility ModuleTag_Ability07A
    SpecialPowerTemplate = Demo_SpecialAbilityDemoKellTimedCharges
    UpdateModuleStartsAttack = Yes
  End
  Behavior = SpecialAbilityUpdate ModuleTag_Ability08A
    SpecialPowerTemplate = Demo_SpecialAbilityDemoKellTimedCharges
    StartAbilityRange = 0.0
    PreparationTime = 0
    SpecialObject = TimedNuclearCharge
    MaxSpecialObjects = 10
    SpecialObjectsPersistWhenOwnerDies = Yes 
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
    UnpackTime              = 5500          ;NOTE: Modifying this value will require modifying the delay for ColonelBurtonPlantCharge
    FlipOwnerAfterUnpacking = Yes
    FleeRangeAfterCompletion = 100.0        ;Runs away after finishing ability
    UnpackSound              = ColonelBurtonPlantCharge
    LoseStealthOnTrigger     = Yes
    PreTriggerUnstealthTime  = 5000 ; in milliseconds
    AwardXPForTriggering  = 25
  End
 
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  ; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_BlackLotusDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_BlackLotusDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireFemale
    OCL                 = INITIAL OCL_FlamingInfantryFemale
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_BlackLotusDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_17
    PoisonDamageInterval  = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration        = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = AutoFindHealingUpdate   ModuleTag_Heal ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000 ; once a second.
    ScanRange = 300 ;
    NeverHeal = 0.85 ;  don't heal if we are > 85% healthy.
    AlwaysHeal = 0.25 ; if we get below 25%, find healing right away.
  End
 
  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInfantryTankHunter

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeHunter_L
  ButtonImage            = SNNukeHunter

  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaNeutronShells
  UpgradeCameo3 = Upgrade_ChinaIsotopeStability
  UpgradeCameo4 = Upgrade_ChinaRadiationDefense
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model             = NINUKEHNT
      IdleAnimation     = NITHNT_SKL.NITHNT_STA 0 30
      IdleAnimation     = NITHNT_SKL.NITHNT_IDA
      IdleAnimation     = NITHNT_SKL.NITHNT_IDB
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 0.8 1.2
      TransitionKey     = TRANS_Stand
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle
    End
    AliasConditionState = REALLYDAMAGED

    ;Moving
    ConditionState      = MOVING
      Animation         = NITHNT_SKL.NITHNT_RNA 20
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING REALLYDAMAGED

    ;------------------------------------------------- Firing weapon
    ConditionState      = FIRING_A 
      Animation         = NITHNT_SKL.NITHNT_ATA 
      AnimationMode     = ONCE
      TransitionKey     = TRANS_START_FIRING
    End
    AliasConditionState = FIRING_A REALLYDAMAGED
    AliasConditionState = FIRING_B
    AliasConditionState = FIRING_B REALLYDAMAGED

    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = NITHNT_SKL.NITHNT_STA
      AnimationMode     = ONCE
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = BETWEEN_FIRING_SHOTS_B
    AliasConditionState = BETWEEN_FIRING_SHOTS_B REALLYDAMAGED

    ConditionState      = RELOADING_A
      Animation         = NITHNT_SKL.NITHNT_ATA 10
      AnimationMode     = ONCE
      ;WeaponLaunchBone = PRIMARY WeaponA
    End
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING RELOADING_A REALLYDAMAGED
    AliasConditionState = RELOADING_B
    AliasConditionState = MOVING RELOADING_B
    AliasConditionState = MOVING RELOADING_B REALLYDAMAGED

    ;-------------- Dying
    ConditionState      = DYING
      Animation         = NITHNT_SKL.NITHNT_DTA
      Animation         = NITHNT_SKL.NITHNT_DTB
      AnimationSpeedFactorRange = 0.9 1.25
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NITHNT_SKL.NITHNT_ADTA1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NITHNT_SKL.NITHNT_ADTA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NITHNT_SKL.NITHNT_ADTA3
      AnimationMode     = ONCE
      TransitionKey     = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ;PARACHUTING ANIMATIONS
    ConditionState      = FREEFALL
      Animation         = NITHNT_SKL.NITHNT_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = NITHNT_SKL.NITHNT_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = NITHNT_SKL.NITHNT_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = NITHNT_SKL.NITHNT_PTD
      AnimationMode     = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:NuclearTankHunter
  Side                = ChinaNukeGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1
  BuildCost           = 700
  BuildTime           = 7.0
  VisionRange         = 230
  ShroudClearingRange = 230

  WeaponSet
    Conditions = NONE
    Weapon = PRIMARY ChinaInfantryTankHunterNuclearMissileLauncher
    Weapon = SECONDARY ChinaInfantryTankHunterNeutronMissileLauncher
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes
  End

  ArmorSet
    Conditions      = None
    Armor           = NuclearTankHunterHumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = NuclearTankHunterHumanArmorNukeUpgraded
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaBarracks
    Object = Nuke_ChinaWarFactory
  End
  
  ExperienceValue    = 31 44 65 93
  ExperienceRequired = 0 92 133 194
  IsTrainable = Yes
  CrushableLevel  = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = ChinaInfantryNuclearTankHunterCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TankHunterVoiceSelect
  VoiceMove = TankHunterVoiceMove
  VoiceAttack = TankHunterVoiceAttack
  VoiceAttackAir = TankHunterVoiceAttack
  VoiceGuard = TankHunterVoiceMove
  VoiceFear = TankHunterVoiceFear
  UnitSpecificSounds
    VoiceCreate       = TankHunterVoiceCreate
    VoiceGarrison = TankHunterVoiceGarrison
    VoiceEnter = TankHunterVoiceMove
    VoiceEnterHostile = TankHunterVoiceMove
    VoiceGetHealed    = TankHunterVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 160.0
    InitialHealth   = 160.0
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL BasicHumanLocomotor

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 24.0
  End

  Behavior = SquishCollide ModuleTag_10
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_MissileDefenderDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_MissileDefenderDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantryChina
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_MissileDefenderDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = VeterancyGainCreate ModuleTag_14
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

  Behavior = HordeUpdate ModuleTag_17
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    RubOffRadius = 60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_18
    DeathWeapon   = NuclearTankHunterDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  Behavior = ProductionUpdate ModuleTag_19
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = LockWeaponCreate ModuleTag_20
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End

  Behavior  = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy  = Upgrade_ChinaRadiationDefense
  End

  Behavior = AutoFindHealingUpdate   ModuleTag_Heal01 ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000 ; once a second.
    ScanRange = 300 ;
    NeverHeal = 0.85 ;  don't heal if we are > 85% healthy.
    AlwaysHeal = 0.25 ; if we get below 25%, find healing right away.
  End
 
  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInfantryHacker

  ; *** ART Parameters ***
  SelectPortrait         = SNHacker2_L
  ButtonImage            = SNHacker2
  
  UpgradeCameo1 = Upgrade_ChinaRadiationDefense

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;NORMAL STANDING
    DefaultConditionState
      Model = NIHCKR_SKN
      IdleAnimation = NIHCKR_SKL.NIHCKR_STA 0 25
      ;Regular spice animations
      IdleAnimation = NIHCKR_SKL.NIHCKR_IDA
      IdleAnimation = NIHCKR_SKL.NIHCKR_IDB
      AnimationMode = ONCE
      WeaponFireFXBone = PRIMARY Bone_SatCom
      TransitionKey = TRANS_Stand
    End
    AliasConditionState = REALLYDAMAGED

    ConditionState = MOVING
      Animation = NIHCKR_SKL.NIHCKR_RNA 14
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING UNPACKING
    AliasConditionState = MOVING UNPACKING REALLYDAMAGED

    ConditionState = UNPACKING
      Animation = NIHCKR_SKL.NIHCKR_ATB1
      AnimationMode = ONCE
    End
    AliasConditionState = UNPACKING FIRING_A
    AliasConditionState = UNPACKING REALLYDAMAGED
    AliasConditionState = UNPACKING FIRING_A REALLYDAMAGED

    ;HACKING ATTACK
    ConditionState = FIRING_A
      Animation = NIHCKR_SKL.NIHCKR_ATB2
      AnimationMode = LOOP
      TransitionKey = TRANS_FiringA
    End
    AliasConditionState = FIRING_A REALLYDAMAGED

    ConditionState = PACKING
      Animation = NIHCKR_SKL.NIHCKR_ATB3
      AnimationMode = ONCE
    End
    AliasConditionState = PACKING FIRING_A
    AliasConditionState = PACKING REALLYDAMAGED
    AliasConditionState = PACKING FIRING_A REALLYDAMAGED

    TransitionState = TRANS_FiringA TRANS_Stand ; I was stopped by a stop command, so I get no proper PACKING state
      Animation = NIHCKR_SKL.NIHCKR_ATB3
      AnimationMode = ONCE
    End

    ConditionState = FREEFALL
      Animation = NIHCKR_SKL.NIHCKR_PFL
      AnimationMode = LOOP
      TransitionKey = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState = PARACHUTING
      Animation = NIHCKR_SKL.NIHCKR_PHG
      AnimationMode = LOOP
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING


    ConditionState = DYING
      Animation = NIHCKR_SKL.NIHCKR_DTA
      Animation = NIHCKR_SKL.NIHCKR_DTB
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = NIHCKR_SKL.NIHCKR_ADTG1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = NIHCKR_SKL.NIHCKR_ADTG2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = NIHCKR_SKL.NIHCKR_ADTG3
      AnimationMode = ONCE
      TransitionKey = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ConditionState = SPECIAL_CHEERING
      Animation = NIHCKR_SKL.NIHCKR_CHA
      AnimationMode = LOOP
    End

    TransitionState = TRANS_Falling TRANS_Chute
      Animation = NIHCKR_SKL.NIHCKR_POP
      AnimationMode = ONCE
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState = TRANS_Chute TRANS_Stand
      Animation = NIHCKR_SKL.NIHCKR_PTD
      AnimationMode = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Hacker
  Side = ChinaNukeGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1       
  VisionRange = 150
  ShroudClearingRange = 200
  BuildCost = 600
  BuildTime = 12

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = HumanArmorNukeUpgraded
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaBarracks
    Object = Nuke_ChinaInternetCenter
  End

  ExperienceValue    = 20 30 43 62
  ExperienceRequired = 0 130 400 650
  IsTrainable        = Yes
  CrushableLevel     = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = Nuke_ChinaInfantryHackerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = HackerVoiceSelect
  VoiceMove = HackerVoiceMove
  VoiceAttack = NoSound
  VoiceGuard = HackerVoiceMove
  VoiceFear = HackerVoiceFear
  VoiceTaskComplete = HackerVoiceHackComplete
  UnitSpecificSounds
    VoiceGarrison = HackerVoiceGarrison
    VoiceCreate     = HackerVoiceCreate
    UnitPack        = HackerPack
    UnitUnpack      = HackerUnpack
    UnitCashPing    = HackerCashPing
    VoiceEnter = HackerVoiceMove
    VoiceEnterHostile = HackerVoiceMove
    VoiceGetHealed      = HackerVoiceMove
    VoiceHackInternet   = HackerVoiceModeInternet
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE IGNORES_SELECT_ALL MONEY_HACKER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = HackInternetAIUpdate ModuleTag_03
    UnpackTime          = 7300 ;animation time is 7300 (changing this will scale anim speed)
    PackTime            = 5133 ;animation time is 5133 (changing this will scale anim speed)
    CashUpdateDelay     = 2400
    CashUpdateDelayFast = 2100  ; Fast speed used inside a container (can only hack inside an Internet Center)
    RegularCashAmount   = 5
    VeteranCashAmount   = 6
    EliteCashAmount     = 8
    HeroicCashAmount    = 10
    XpPerCashUpdate     = 1
    PackUnpackVariationFactor = 0.5 ;Adds + or - 20% to pack and unpack time randomly.
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor
 
  Behavior = SpecialAbility ModuleTag_04
    SpecialPowerTemplate = SpecialAbilityHackerDisableBuilding
    UpdateModuleStartsAttack = Yes
    InitiateSound         = HackerVoiceHack
  End

  Behavior = SpecialAbilityUpdate ModuleTag_05
    SpecialPowerTemplate = SpecialAbilityHackerDisableBuilding
    StartAbilityRange = 150.0
    UnpackTime      = 7300 ;animation time is 7300 (changing this will scale anim speed)
    PackTime        = 5133 ;animation time is 5133 (changing this will scale anim speed)
    PreparationTime = 3000

    ;PersistentPrepTime = 500 ; old setting
    PersistentPrepTime = 333 ; NOTE! This drives how often the disable effect gets triggered
                             ; This is also how often a new particle system effect is spawned
    EffectDuration = 2000
    SpecialObject = BinaryDataStream
    DisableFXParticleSystem = DisabledEffectBinaryShower0
    PackSound       = HackerPack
    UnpackSound     = HackerUnpack
    PrepSoundLoop   = HackerPrepLoop
    AwardXPForTriggering  = 5    ;Careful, this is persistant so it's a DoT xp gain!
  End

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 24.0
  End

  Behavior = SquishCollide ModuleTag_08
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_HackerDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_HackerDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantryChina
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_HackerDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_11
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Behavior = AutoFindHealingUpdate   ModuleTag_Heal ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000 ; once a second.
    ScanRange = 300 ;
    NeverHeal = 0.85 ;  don't heal if we are > 85% healthy.
    AlwaysHeal = 0.25 ; if we get below 25%, find healing right away.
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
;Irradiator tank
Object Nuke_ChinaTankDragon

  ; *** ART Parameters ***
  SelectPortrait         = SNRadTank_L
  ButtonImage            = SNRadTank
  
  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaNuclearTanks
  UpgradeCameo3 = Upgrade_ChinaIsotopeStability
 
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = NVRadTank
      Turret = Turret
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponLaunchBone = PRIMARY Muzzle
    End
    ConditionState = REALLYDAMAGED
      Model = NVRadTank_D
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model = NVRadTank_D
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RadTank
  Side = ChinaNukeGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 2       
  BuildCost    = 800
  BuildTime    = 8.0
  VisionRange  = 150
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY IrradiatorWeapon
  End

  ArmorSet
    Conditions = None
    Armor      = IrradiatorTankArmor
    DamageFX   = TankDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaWarFactory
  End

  ExperienceValue    = 36 52 77 110
  ExperienceRequired = 0 109 157 230
  IsTrainable = Yes
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = DragonTankVoiceSelect
  VoiceMove = DragonTankVoiceMove
  VoiceGuard = DragonTankVoiceMove
  VoiceAttack = DragonTankVoiceAttack
  SoundMoveStart = DragonTankMoveStart
  SoundMoveStartDamaged = DragonTankMoveStart

  UnitSpecificSounds
    VoiceCreate     = DragonTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = DragonTankVoiceMove
    VoiceFlameLocation = DragonTankVoiceFireStorm
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 120
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL Nuke_FusionBattleMasterLocomotor

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_06
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End

  Behavior = HordeUpdate ModuleTag_14
    RubOffRadius = 150
    UpdateRate = 1000
    Radius = 75
    KindOf = VEHICLE
    AlliesOnly = Yes
    ExactMatch = No
    Count = 5
    Action = HORDE
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_ChinaTankIrradiatorDeathEffectSimple
  End
  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankIrradiatorDebris
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ReallyDamagedParticleSystem2 = Bone:Smoke RandomBone:Yes Psys:DragonTransitionFire
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_DragonDamageTransition
  End

  Behavior = VeterancyGainCreate ModuleTag_17
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_TankTraining
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 11.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Nuke_ChinaVehicleTroopCrawler

  ; *** ART Parameters ***
  SelectPortrait         = SNAsltTroop_L
  ButtonImage            = SNAsltTroop
  
  UpgradeCameo1 = Upgrade_ChinaRadiationDefense
  
  Draw = W3DTruckDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = NVTClrI
    End
    ConditionState = REALLYDAMAGED
      Model        = NVTClrI_D
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      Model        = NVTClrI
      ParticleSysBone = NONE TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model        = NVTClrI_D
      ParticleSysBone = NONE TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    ; PowerslideSpray = RocketBuggyDirtPowerSlide doesn't powerslide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone     = Wheel01
    RightFrontTireBone    = Wheel08
    LeftRearTireBone      = Wheel03
    RightRearTireBone     = Wheel05
    MidLeftFrontTireBone  = Wheel02
    MidRightFrontTireBone = Wheel07
    MidLeftRearTireBone   = Wheel04
    MidRightRearTireBone  = Wheel06

    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AssaultTroopTransport
  Side = ChinaNukeGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 9
  BuildCost       = 3200
  BuildTime       = 32.0
  VisionRange     = 175
  ShroudClearingRange = 300

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     NONE
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE 
    Weapon              = PRIMARY     Infa_ChinaVehicleTroopCrawlerDummyWeapon
  End 

  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = TankArmorNukeUpgraded
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object  = Nuke_ChinaBarracks
    Object  = Nuke_ChinaWarFactory
    Science = SCIENCE_Rank3
  End

  ExperienceValue    = 14 20 29 42
  ExperienceRequired = 0 41 60 87
  IsTrainable        = Yes
  CrusherLevel       = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = ChinaStandardTroopCrawlerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = AssaultTroopCrawlerVoiceSelect
  VoiceMove = TroopCrawlerVoiceMove
  VoiceGuard = TroopCrawlerVoiceMove
  VoiceAttack = AssaultTroopCrawlerVoiceAttack
  SoundMoveStart = TroopCrawlerMoveStart
  SoundMoveStartDamaged = TroopCrawlerMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    VoiceCreate     = AssaultTroopCrawlerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush = TroopCrawlerVoiceCrush
    VoiceUnload   = TroopCrawlerVoiceUnload
    VoiceEnter = TroopCrawlerVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE HEAL_PAD
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 550.0
    InitialHealth   = 550.0
    SubdualDamageCap = 550
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = TransportAIUpdate ModuleTag_CorrectAI
  End

  Locomotor = SET_NORMAL TroopCrawlerLocomotorSlow

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = HordeUpdate ModuleTag_Horde
    RubOffRadius = 60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = TransportContain ModuleTag_06
    PassengersAllowedToFire = Yes
    Slots                = 8
    ScatterNearbyOnExit  = No
    HealthRegen%PerSec   = 10
    DamagePercentToUnits = 100%
    AllowInsideKindOf    = INFANTRY
    ExitDelay            = 250
    NumberOfExitPaths    = 8
    GoAggressiveOnExit   = No
    ArmedRidersUpgradeMyWeaponSet = Yes
  End

  Behavior = GrantUpgradeCreate ModuleTag_UpgradeIP01
    UpgradeToGrant = Upgrade_ChinaOverlordGattlingCannon
  End
  Behavior = ObjectCreationUpgrade ModuleTag_IP02
    UpgradeObject = OCL_NukeTroopCrawlerInitialPayload
    TriggeredBy   = Upgrade_ChinaOverlordGattlingCannon
  End

  Behavior = SlowDeathBehavior ModuleTag_27
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 1
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_FinalAssaultTroopCrawlerDebris
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL OCL_FinalAssaultTroopCrawlerDeathEffectSimple
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior      = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy = Upgrade_ChinaRadiationDefense
  End

  Behavior = ProductionUpdate ModuleTag_Drone05
    MaxQueueEntries = 1
  End

  Scale = 0.95
  Geometry = BOX
  GeometryMajorRadius = 21.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Nuke_ChinaVehicleInfernoCannon

  ; *** ART Parameters ***
  SelectPortrait         = SNInferno_L
  ButtonImage            = SNInferno
  
  UpgradeCameo1 = Upgrade_ChinaRadiationDefense
  UpgradeCameo2 = Upgrade_ChinaTankRadioactiveShells
  UpgradeCameo3 = Upgrade_ChinaReactiveShells

  Draw                    = W3DTankDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model               = NVInferno
      Turret              = Turret
      TurretPitch         = TurretEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      TransitionKey = TRANS_default
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT

    ConditionState        = PREATTACK_A
      TransitionKey = TRANS_firing
    End
    AliasConditionState = SNOW PREATTACK_A
    AliasConditionState = NIGHT PREATTACK_A
    AliasConditionState = SNOW NIGHT PREATTACK_A

    TransitionState = TRANS_firing TRANS_default
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
    End

    ConditionState        = RUBBLE REALLYDAMAGED
      Model               = NVInferno_D
      TransitionKey = TRANS_default_d
    End
    AliasConditionState = SNOW RUBBLE REALLYDAMAGED
    AliasConditionState = NIGHT RUBBLE REALLYDAMAGED
    AliasConditionState = SNOW NIGHT RUBBLE REALLYDAMAGED

    ConditionState        = RUBBLE REALLYDAMAGED PREATTACK_A
      Model               = NVInferno_D
      TransitionKey = TRANS_firing_d
    End
    AliasConditionState = SNOW RUBBLE REALLYDAMAGED PREATTACK_A
    AliasConditionState = NIGHT RUBBLE REALLYDAMAGED PREATTACK_A
    AliasConditionState = SNOW NIGHT RUBBLE REALLYDAMAGED PREATTACK_A

    TransitionState = TRANS_firing_d TRANS_default_d
      Model               = NVInferno_D
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
    End

    ConditionState = AFLAME
      TransitionKey = TRANS_default_AFLAME
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState = SNOW AFLAME
    AliasConditionState = NIGHT AFLAME
    AliasConditionState = SNOW NIGHT AFLAME

    ConditionState = PREATTACK_A AFLAME
      TransitionKey = TRANS_firing_AFLAME
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState = SNOW PREATTACK_A AFLAME
    AliasConditionState = NIGHT PREATTACK_A AFLAME
    AliasConditionState = SNOW NIGHT PREATTACK_A AFLAME

    TransitionState = TRANS_firing_AFLAME TRANS_default_AFLAME
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = TURRET TankFireContinious
    End

    ConditionState = RUBBLE REALLYDAMAGED AFLAME
      Model        = NVInferno_D
      TransitionKey = TRANS_default_d_AFLAME
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState = SNOW RUBBLE REALLYDAMAGED AFLAME
    AliasConditionState = NIGHT RUBBLE REALLYDAMAGED AFLAME
    AliasConditionState = SNOW NIGHT RUBBLE REALLYDAMAGED AFLAME

    ConditionState = RUBBLE REALLYDAMAGED PREATTACK_A AFLAME
      Model        = NVInferno_D
      TransitionKey = TRANS_firing_d_AFLAME
      ParticleSysBone = TURRET TankFireContinious
    End
    AliasConditionState = SNOW RUBBLE REALLYDAMAGED PREATTACK_A AFLAME
    AliasConditionState = NIGHT RUBBLE REALLYDAMAGED PREATTACK_A AFLAME
    AliasConditionState = SNOW NIGHT RUBBLE REALLYDAMAGED PREATTACK_A AFLAME

    TransitionState = TRANS_firing_d_AFLAME TRANS_default_d_AFLAME
      Model         = NVInferno_D
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = TURRET TankFireContinious
    End
    
    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate      = 3.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:InfernoCannon
  Side               = ChinaNukeGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 3       
  BuildCost          = 1000
  BuildTime          = 12.0
  VisionRange         = 175
  ShroudClearingRange = 175

  WeaponSet
    Conditions       = None 
    Weapon           = PRIMARY ArtilleryCannonGun
  End
  WeaponSet
    Conditions       = PLAYER_UPGRADE
    Weapon           = PRIMARY ArtilleryCannonGunLongRange
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = TruckArmorNukeUpgraded
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object           = Nuke_ChinaWarFactory
  End

  ExperienceValue    = 39 56 82 118
  ExperienceRequired = 0 117 169 247
  IsTrainable = Yes
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = HeavyArtilleryCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect       = InfernoCannonVoiceSelect
  VoiceMove         = InfernoCannonVoiceMove
  VoiceGuard        = InfernoCannonVoiceMove
  VoiceAttack       = InfernoCannonVoiceAttack
  SoundMoveStart    = InfernoCannonMoveStart
  SoundMoveStartDamaged = InfernoCannonMoveStart
  UnitSpecificSounds
    VoiceCreate     = InfernoCannonVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceCrush      = InfernoCannonVoiceCrush
    VoiceEnter      = InfernoCannonVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ArtilleryTraining
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
    Turret
      TurretTurnRate = 100
      TurretPitchRate = 100
      AllowsPitch = Yes
      FirePitch = 45
      ControlledWeaponSlots = PRIMARY SECONDARY
      InitiallyDisabled = yes
    End
    AutoAcquireEnemiesWhenIdle = Yes
    PackTime = 100
    UnpackTime = 100
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
  End

  Locomotor = SET_NORMAL InfernoLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = HordeUpdate ModuleTag_Horde
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000     ; how often to recheck horde status (msec)
    Radius = 75           ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = VEHICLE      ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes      ; do we only count allies towards horde status? 
    ExactMatch = No       ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5             ; how many units must be within Radius to grant us horde-ness
    Action = HORDE        ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX         = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList    = OCL_InfernoCannonDeathEffectSimple
  End

  Behavior = SlowDeathBehavior ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire  
    FX  = FINAL    FX_GenericTankDeathExplosion 
    OCL = FINAL    OCL_InfernoCannonDeathEffect
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:-7 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = CreateCrateDie ModuleTag_10
    CrateData = SalvageCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End

  Behavior      = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_ChinaReactiveShells
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME 
  ShadowSizeX = 45   
End

;------------------------------------------------------------------------------
Object Nuke_ChinaTankGattling

  ; *** ART Parameters ***
  SelectPortrait         = SNGatlingTank_L
  ButtonImage            = SNGatlingTank
  
  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaNuclearBullets
  UpgradeCameo3 = Upgrade_ChinaNuclearTanks
  UpgradeCameo4 = Upgrade_ChinaIsotopeStability
  UpgradeCameo5 = Upgrade_ChinaRadiationDefense
  
  Draw                      = W3DTankDraw ModuleTag_01
    OkToChangeModelColor    = Yes
    
    DefaultConditionState        
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = MANUAL
      Turret              = TURRET01
      TurretPitch         = TURRETEL01
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponLaunchBone    = PRIMARY Muzzle
    End

    ConditionState        = REALLYDAMAGED RUBBLE         
      Model               = NVGattTank_D
    End

    ConditionState = USING_WEAPON_B 
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ConditionState = REALLYDAMAGED USING_WEAPON_B 
      Model               = NVGattTank_D
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ;-----pristine attacking----------------------
    ConditionState        = ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End

    ConditionState = ATTACKING USING_WEAPON_B 
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End

    ConditionState = CONTINUOUS_FIRE_SLOW ATTACKING USING_WEAPON_B 
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ConditionState        = CONTINUOUS_FIRE_MEAN ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End

    ConditionState = CONTINUOUS_FIRE_MEAN ATTACKING USING_WEAPON_B
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast 
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ConditionState        = CONTINUOUS_FIRE_FAST ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
    End

    ConditionState = CONTINUOUS_FIRE_FAST ATTACKING USING_WEAPON_B 
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ;-----damaged attacking----------------------
    ConditionState  REALLYDAMAGED ATTACKING         
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  extemely sloowly
    End

    ConditionState = REALLYDAMAGED ATTACKING USING_WEAPON_B 
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  extemely sloowly
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End

    ConditionState = CONTINUOUS_FIRE_SLOW REALLYDAMAGED ATTACKING USING_WEAPON_B 
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ConditionState        = CONTINUOUS_FIRE_MEAN REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End

    ConditionState = CONTINUOUS_FIRE_MEAN REALLYDAMAGED ATTACKING USING_WEAPON_B 
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
    End

    ConditionState = CONTINUOUS_FIRE_FAST REALLYDAMAGED ATTACKING USING_WEAPON_B 
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
    End

    ConditionState = AFLAME
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState        = REALLYDAMAGED RUBBLE AFLAME
      Model               = NVGattTank_D
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = USING_WEAPON_B AFLAME
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = REALLYDAMAGED USING_WEAPON_B AFLAME
      Model               = NVGattTank_D
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ;-----pristine attacking----------------------
    ConditionState        = ATTACKING AFLAME
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = ATTACKING USING_WEAPON_B AFLAME
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW ATTACKING AFLAME
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = CONTINUOUS_FIRE_SLOW ATTACKING USING_WEAPON_B AFLAME
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState        = CONTINUOUS_FIRE_MEAN ATTACKING AFLAME
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = CONTINUOUS_FIRE_MEAN ATTACKING USING_WEAPON_B AFLAME
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast 
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState        = CONTINUOUS_FIRE_FAST ATTACKING AFLAME
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = CONTINUOUS_FIRE_FAST ATTACKING USING_WEAPON_B AFLAME
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ;-----damaged attacking----------------------
    ConditionState  REALLYDAMAGED ATTACKING AFLAME
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  extemely sloowly
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = REALLYDAMAGED ATTACKING USING_WEAPON_B AFLAME
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  extemely sloowly
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED ATTACKING AFLAME
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = CONTINUOUS_FIRE_SLOW REALLYDAMAGED ATTACKING USING_WEAPON_B AFLAME
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState        = CONTINUOUS_FIRE_MEAN REALLYDAMAGED ATTACKING AFLAME
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = CONTINUOUS_FIRE_MEAN REALLYDAMAGED ATTACKING USING_WEAPON_B AFLAME
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED ATTACKING AFLAME
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone = Turret TankFireContinious
    End

    ConditionState = CONTINUOUS_FIRE_FAST REALLYDAMAGED ATTACKING USING_WEAPON_B AFLAME
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponLaunchBone    = SECONDARY Muzzle
      ParticleSysBone = Turret TankFireContinious
    End

    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName               = OBJECT:GattlingTank
  Side                      = ChinaNukeGeneral
  EditorSorting             = VEHICLE
  TransportSlotCount        = 3  
  BuildCost       = 800
  BuildTime       = 8.0
  VisionRange     = 250
  ShroudClearingRange = 300

  WeaponSet
    Conditions              = None 
    Weapon                  = PRIMARY   GattlingTankGun
    PreferredAgainst        = PRIMARY   AIRCRAFT
    Weapon                  = SECONDARY GattlingTankGunAir
  End

  ArmorSet
    Conditions    = None
    Armor         = GattlingTankArmor
    DamageFX      = TankDamageFX
  End
  ArmorSet
    Conditions    = PLAYER_UPGRADE
    Armor         = GattlingTankArmorNukeUpgraded
    DamageFX      = TankDamageFX
  End

  Prerequisites
    Object        = Nuke_ChinaWarFactory
  End

  ExperienceValue    = 34 49 71 102
  ExperienceRequired = 0 101 146 213
  IsTrainable     = Yes
  CrusherLevel    = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect     = GattlingTankVoiceSelect
  VoiceMove       = GattlingTankVoiceMove
  VoiceGuard      = GattlingTankVoiceMove
  VoiceAttack     = GattlingTankVoiceAttack
  SoundMoveStart  = GattlingTankMoveStart
  SoundMoveStartDamaged = GattlingTankMoveStart

  UnitSpecificSounds
    VoiceCreate     = GattlingTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoopLoud
    VoiceCrush      = GattlingTankVoiceCrush
    VoiceEnter      = GattlingTankVoiceMove
    VoiceRapidFire  = GattlingTankVoiceRapid
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 325.0
    InitialHealth   = 325.0
    SubdualDamageCap = 650
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 180
      TurretPitchRate     = 180
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 45
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 100
  End

  Behavior          = PhysicsBehavior ModuleTag_04
    Mass            = 40.0
  End

  Locomotor = SET_NORMAL Nuke_FusionBattleMasterLocomotor

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_06
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankGattlingDebris
    FX  = FINAL    FX_GattlingExplosionOneFinal
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_ChinaTankGattlingDeathEffectSimple
  End

  Behavior = CreateCrateDie ModuleTag_08
    CrateData = SalvageCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_07
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = WeaponBonusUpgrade ModuleTag_22
    TriggeredBy = Upgrade_ChinaNuclearBullets
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Behavior = HordeUpdate ModuleTag_Horde
    RubOffRadius = 150
    UpdateRate = 1000
    Radius = 75
    KindOf = VEHICLE
    AlliesOnly = Yes
    ExactMatch = no
    Count = 5
    Action = HORDE
  End

  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Nuke_ChinaVehicleSupplyTruck

  ; *** ART Parameters ***
  
  SelectPortrait         = SNSupplyTruck_L
  ButtonImage            = SNSupplyTruck
  
  UpgradeCameo1 = Upgrade_ChinaRadiationDefense
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    DefaultConditionState
      Model           = NVSSUPPLYTK
      HideSubObject   = Cargo01
    End
    
    ConditionState    = REALLYDAMAGED
      Model           = NVSSUPPLYTK_D
    End
    
    ConditionState    = RUBBLE
      Model           = NVSSUPPLYTK_D
    End
    
    ConditionState    = CARRYING
      ShowSubObject   = Cargo01
    End
    
    ConditionState    = REALLYDAMAGED CARRYING
      Model           = NVSSUPPLYTK_D
      ShowSubObject   = Cargo01
    End
    
    ConditionState    = RUBBLE CARRYING
      Model           = NVSSUPPLYTK_D
      ShowSubObject   = Cargo01
    End

    ConditionState = AFLAME
      ParticleSysBone = CHASSIS TankFireContinious
    End
    
    ConditionState    = REALLYDAMAGED AFLAME
      Model           = NVSSupplyTk_D
      ParticleSysBone = CHASSIS TankFireContinious
    End
    
    ConditionState    = RUBBLE AFLAME
      Model           = NVSSupplyTk_D
      ParticleSysBone = CHASSIS TankFireContinious
    End
    
    ConditionState    = CARRYING AFLAME
      ShowSubObject   = Cargo01
      ParticleSysBone = CHASSIS TankFireContinious
    End
    
    ConditionState    = REALLYDAMAGED CARRYING AFLAME
      Model           = NVSSupplyTk_D
      ParticleSysBone = CHASSIS TankFireContinious
      ShowSubObject   = Cargo01
    End
    
    ConditionState    = RUBBLE CARRYING AFLAME
      Model           = NVSSupplyTk_D
      ParticleSysBone = CHASSIS TankFireContinious
      ShowSubObject   = Cargo01
    End
    
    TrackMarks              = EXTireTrack.tga

    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    MidLeftRearTireBone         = Tire03
    MidRightRearTireBone        = Tire04
    LeftRearTireBone            = Tire05
    RightRearTireBone           = Tire06
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

    Dust                    = RocketBuggyDust
    DirtSpray               = RocketBuggyDirtSpray
    PowerslideSpray         = RocketBuggyDirtPowerSlide

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SupplyTruck
  Side                = ChinaNukeGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 2       
  BuildCost           = 600
  BuildTime           = 6.0
  VisionRange         = 150
  ShroudClearingRange = 200

  Prerequisites
    Object = Nuke_ChinaSupplyCenter
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = TruckArmorNukeUpgraded
    DamageFX        = TankDamageFX
  End

  ExperienceValue     = 0 0 0 0 ;Experience point value at each level
  CrusherLevel            = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel          = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet              = StopOnlyGenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect             = SupplyTruckVoiceSelect
  VoiceMove               = SupplyTruckVoiceMove
  VoiceAttack             = NoSound
  SoundMoveStart          = SupplyTruckMoveStart
  SoundMoveStartDamaged = SupplyTruckMoveStart
  UnitSpecificSounds
    VoiceCreate           = SupplyTruckVoiceCreate
    TruckLandingSound     = NoSound
    TruckPowerslideSound  = NoSound
    VoiceSupply           = SupplyTruckVoiceSupply
    VoiceCrush            = SupplyTruckVoiceCrush
    VoiceEnter            = SupplyTruckVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE HARVESTER SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = SupplyTruckAIUpdate ModuleTag_03
    MaxBoxes = 4
    SupplyCenterActionDelay = 400     ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay = 1000 ; ms per box (many small transactions)
    SupplyWarehouseScanDistance = 700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    SuppliesDepletedVoice = SupplyTruckVoiceSuppliesDepleted
  End

  Locomotor = SET_NORMAL SupplyTruckLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 8.0
  End

  ExperienceValue    = 50 50 50 50 ;Experience point value at each level

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_ChinaSupplyTruckDeathEffect
  End

  Behavior = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  
  Behavior = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_ChinaSupplyTruckDeathEffectSimple
  End

  Behavior                       = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_10
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End

  Behavior        = CreateCrateDie ModuleTag_12
    CrateData     = SalvageCrateData
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Geometry = BOX
  GeometryMajorRadius = 17.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 14.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Nuke_ChinaVehicleDozer

  ; *** ART Parameters ***
  SelectPortrait         = SNDozer_L
  ButtonImage            = SNDozer
  
  UpgradeCameo1 = Upgrade_AmericaCompositeArmor
  UpgradeCameo2 = Upgrade_ChinaRadiationDefense

  Draw = W3DTankDraw ModuleTag_01

    OkToChangeModelColor    = Yes

    DefaultConditionState
      Model                 = NVCONSTDOZ_A
      ParticleSysBone       = EXHAUST01 DozerSmokeLight
      ParticleSysBone       = EXHAUST02 DozerSmokeLight
    End
    ConditionState          = MOVING
      ParticleSysBone       = EXHAUST01 DozerSmokeHeavy
    End
    ConditionState = FIRING_A MOVING PREATTACK_A 
      Model = NVCONSTDOZ_A
      Animation = NVCONSTDOZ_A.NVCONSTDOZ_A
      AnimationMode = ONCE
      ParticleSysBone = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = DIRTFX01 DozerDirtFall
    End
    AliasConditionState = ATTACKING FIRING_A MOVING

    ConditionState          = REALLYDAMAGED RUBBLE
      Model                 = NVCONSTDOZ_AD
    End
    ConditionState          = MOVING REALLYDAMAGED RUBBLE
      Model                 = NVCONSTDOZ_AD
      ParticleSysBone       = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone       = EXHAUST02 DozerSmokeHeavy
    End
    ConditionState = FIRING_A MOVING PREATTACK_A REALLYDAMAGED RUBBLE
      Model = NVCONSTDOZ_AD
      Animation = NVCONSTDOZ_AD.NVCONSTDOZ_AD
      AnimationMode = ONCE
      ParticleSysBone = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = DIRTFX01 DozerDirtFall
    End
    AliasConditionState = ATTACKING FIRING_A MOVING REALLYDAMAGED RUBBLE

    ConditionState = AFLAME
      Model           = NVCONSTDOZ_A
      ParticleSysBone = EXHAUST01 DozerSmokeLight
      ParticleSysBone = EXHAUST02 DozerSmokeLight
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState    = MOVING AFLAME
      ParticleSysBone = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState = FIRING_A MOVING PREATTACK_A AFLAME
      Model           = NVCONSTDOZ_A
      Animation       = NVCONSTDOZ_A.NVCONSTDOZ_A
      AnimationMode   = ONCE
      ParticleSysBone = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = DIRTFX01 DozerDirtFall
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = ATTACKING FIRING_A MOVING AFLAME

    ConditionState    = REALLYDAMAGED RUBBLE AFLAME
      Model           = NVCONSTDOZ_AD
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState    = MOVING REALLYDAMAGED RUBBLE AFLAME
      Model           = NVCONSTDOZ_AD
      ParticleSysBone = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = CHASSIS TankFireContinious
    End
    ConditionState    = FIRING_A MOVING PREATTACK_A REALLYDAMAGED RUBBLE AFLAME
      Model           = NVCONSTDOZ_AD
      Animation       = NVCONSTDOZ_AD.NVCONSTDOZ_AD
      AnimationMode   = ONCE
      ParticleSysBone = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone = EXHAUST02 DozerSmokeHeavy
      ParticleSysBone = DIRTFX01 DozerDirtFall
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState = ATTACKING FIRING_A MOVING REALLYDAMAGED RUBBLE AFLAME
    
    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate   = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Dozer
  Side                = ChinaNukeGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3
  BuildCost           = 1000
  BuildTime           = 10
  VisionRange         = 150
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None
  End

  ArmorSet
    Conditions        = None
    Armor             = DozerArmor
    DamageFX          = TankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = DozerArmorNukeUpgraded
    DamageFX          = TankDamageFX
  End

  ExperienceValue     = 0 0 0 0 ;Experience point value at each level
  CrusherLevel        = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Nuke_ChinaDozerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = DozerChinaVoiceSelect
  VoiceMove           = DozerChinaVoiceMove
  VoiceEnter          = DozerChinaVoiceMove
  VoiceTaskComplete   = DozerChinaVoiceBuildComplete
  SoundMoveStart      = DozerChinaMoveStart
  SoundMoveStartDamaged = DozerChinaMoveStart

  UnitSpecificSounds
    VoiceCreate       = DozerChinaVoiceCreate
    VoiceCrush        = DozerChinaVoiceCrush
    VoiceNoBuild      = DozerChinaVoiceBuildNot
    VoiceRepair       = DozerChinaVoiceRepair
    VoiceDisarm       = DozerChinaVoiceClearMine
    VoiceEnter        = DozerChinaVoiceMove
    VoiceBuildResponse = DozerChinaVoiceBuild
  End
 
  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf              = PRELOAD VEHICLE SCORE SELECTABLE CAN_CAST_REFLECTIONS DOZER
  
  Body                = ActiveBody ModuleTag_02
    MaxHealth         = 250.0
    InitialHealth     = 250.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = MaxHealthUpgrade ModuleTag_09Arm
    TriggeredBy   = Upgrade_AmericaCompositeArmor
    AddMaxHealth  = 125.0
    ChangeType    = PRESERVE_RATIO
  End

  Behavior = DozerAIUpdate ModuleTag_03
    RepairHealthPercentPerSecond = 2%    ; % of max health to repair each second
    BoredTime                    = 5000  ; in milliseconds
    BoredRange                   = 150   ; when bored, we look this far away to do something
    AutoAcquireEnemiesWhenIdle   = Yes
  End

  Locomotor = SET_NORMAL ChinaVehicleDozerLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass   = 75.0
  End

  Behavior                 = TransitionDamageFX ModuleTag_06
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 1500
    DestructionDelayVariance = 600
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_ChinaDozerExplode
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End 

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL OCL_ChinaDozerExplodePoisoned
  End

  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
  End
    
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior     = FXListDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX    = FX_CarCrush
  End

  Behavior     = DestroyDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Geometry            = BOX
  GeometryMajorRadius = 17.0;new radius to align mine sweeping position
  ;GeometryMajorRadius = 21.0;old radius
  GeometryMinorRadius = 10.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = NO
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Nuke_ChinaTankECM

  ; *** ART Parameters ***
  SelectPortrait         = SNbanshee_L
  ButtonImage            = SNbanshee

  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaNuclearTanks
  UpgradeCameo3 = Upgrade_ChinaIsotopeStability
  UpgradeCameo4 = Upgrade_ChinaRadiationDefense
  
  Draw = W3DOverlordTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ExtraPublicBone = WEAPONA01

    DefaultConditionState
      Model                           = NVBANSHEE
      Animation = NVBANSHEE.NVBANSHEE
      AnimationMode = LOOP
      Turret                          = TURRET01
    End
    ConditionState = REALLYDAMAGED
      Model                           = NVBANSHEE_D
      Animation = NVBANSHEE_D.NVBANSHEE_D
      AnimationMode = LOOP
    End
    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      Model                           = NVBANSHEE
      Animation = NVBANSHEE.NVBANSHEE
      AnimationMode = LOOP
      Turret                          = TURRET01
      ParticleSysBone = Turret TankFireContinious
    End
    ConditionState = REALLYDAMAGED AFLAME
      Model                           = NVBANSHEE_D
      Animation = NVBANSHEE_D.NVBANSHEE_D
      AnimationMode = LOOP
      ParticleSysBone = Turret TankFireContinious
    End
    AliasConditionState = RUBBLE AFLAME

    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName               = OBJECT:ECMTank
  Side                      = ChinaNukeGeneral
  EditorSorting             = VEHICLE
  TransportSlotCount        = 3  
  BuildCost       = 900
  BuildTime       = 9
  VisionRange     = 150
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY   ECMTankVehicleDisabler
  End

  ArmorSet
    Conditions    = None
    Armor         = TankArmor
    DamageFX      = TankDamageFX
  End
  ArmorSet
    Conditions    = PLAYER_UPGRADE
    Armor         = TankArmorNukeUpgraded
    DamageFX      = TankDamageFX
  End

  Prerequisites
    Object  = Nuke_ChinaWarFactory
    Science = SCIENCE_Rank3
  End

  ExperienceValue   = 37 54 79 113
  ExperienceRequired = 0 112 162 237
  IsTrainable     = Yes
  CrusherLevel    = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect     = FrequencyJammerVoiceSelect
  VoiceMove       = FrequencyJammerVoiceMove
  VoiceGuard      = FrequencyJammerVoiceMove
  VoiceAttack     = FrequencyJammerVoiceAttack
  SoundMoveStart  = MicrowaveTankMoveStart
  SoundMoveStartDamaged = MicrowaveTankMoveStart

  UnitSpecificSounds
    VoiceCreate     = FrequencyJammerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoopLoud
    VoiceCrush      = NoSound
    VoiceEnter      = FrequencyJammerVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY
      TurretTurnRate        = 180
      FiresWhileTurning     = No
      MinIdleScanInterval   = 0
      MaxIdleScanInterval   = 0
      RecenterTime          = 0
      MinIdleScanAngle      = 180
      MaxIdleScanAngle      = 180
      FiresWhileTurning   = Yes
    End
    MoodAttackCheckRate = 100
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior          = PhysicsBehavior ModuleTag_04
    Mass            = 40.0
  End

  Locomotor = SET_NORMAL Nuke_FusionBattleMasterLocomotor

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_06
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End
    
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 600
    DestructionDelayVariance = 300
    FX  = INITIAL WeaponFX_InfernoECMShellDetonation
    OCL = INITIAL OCL_ECMFieldSmall 
    Weapon = INITIAL ECMShellDetonationWeapon1
    FX  = FINAL    FX_GattlingExplosionOneFinal
    OCL = FINAL    OCL_ChinaTankECMDebris
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_ChinaTankECMDeathEffectSimple
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_07
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_22
  End

  Behavior = FireWeaponUpdate ModuleTag_23
    Weapon = ECMTankMissileJammer
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Behavior = HordeUpdate ModuleTag_Horde
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000     ; how often to recheck horde status (msec)
    Radius = 75           ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = VEHICLE      ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes      ; do we only count allies towards horde status? 
    ExactMatch = No       ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5             ; how many units must be within Radius to grant us horde-ness
    Action = HORDE        ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = OverlordContain ModuleTag_Decal
    Slots  = 1
    DamagePercentToUnits  = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PayloadTemplateName   = ECMDecalObject
  End
 
  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Nuke_ChinaVehicleListeningOutpost

  ; *** ART Parameters ***
  SelectPortrait         = NVLOutpost_L
  ButtonImage            = NVLOutpost
  
  UpgradeCameo1 = Upgrade_ChinaRadiationDefense

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = IRFX
    
    ConditionState = NONE
      Model = NVLOUTPOST
    End

    ConditionState       = REALLYDAMAGED  
      Model              = NVLOUTPOST_D
    End
    AliasConditionState  = RUBBLE   

    ConditionState = AFLAME
      Model = NVLOUTPOST
      ParticleSysBone = CHASSIS TankFireContinious
    End

    ConditionState       = REALLYDAMAGED AFLAME 
      Model              = NVLOUTPOST_D
      ParticleSysBone = CHASSIS TankFireContinious
    End
    AliasConditionState  = RUBBLE AFLAME

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    LeftFrontTireBone     = TIRE01
    RightFrontTireBone    = TIRE02
    LeftRearTireBone      = TIRE03
    RightRearTireBone     = TIRE04
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.
  End

  Draw = W3DModelDraw ModuleTag_33
    OkToChangeModelColor = Yes
    
    ConditionState = NONE
      Model = NVLOUTPOST_B
      Animation = NVLOUTPOST_B.NVLOUTPOST_B
      AnimationMode     = LOOP
      TransitionKey = Trans_Deployed
    End
    ConditionState = REALLYDAMAGED
      Model = NVLOUTPOST_BD
      Animation = NVLOUTPOST_BD.NVLOUTPOST_BD
      AnimationMode     = LOOP
      TransitionKey = Trans_Deployed_ReallyDamaged
    End
    
    ConditionState = MOVING
      Model = NVLOUTPOST_A
      Animation = NVLOUTPOST_A.NVLOUTPOST_A
      AnimationMode     = LOOP
      TransitionKey = Trans_Moving
    End
    ConditionState = REALLYDAMAGED MOVING
      Model = NVLOUTPOST_AD
      Animation = NVLOUTPOST_AD.NVLOUTPOST_AD
      AnimationMode     = LOOP
      TransitionKey = Trans_Moving_ReallyDamaged
    End

    ConditionState = RUBBLE
      Model = NONE
    End
    AliasConditionState = RUBBLE MOVING

    ;**** PACKING AND UNPACKING MODES ***
    TransitionState     = Trans_Moving Trans_Deployed
      Model = NVLOUTPOST_C
      Animation = NVLOUTPOST_C.NVLOUTPOST_C
      AnimationMode     = ONCE
    End
    TransitionState     = Trans_Moving_ReallyDamaged Trans_Deployed_ReallyDamaged
      Model = NVLOUTPOST_CD
      Animation = NVLOUTPOST_CD.NVLOUTPOST_CD
      AnimationMode     = ONCE
    End

    TransitionState     = Trans_Deployed Trans_Moving 
      Model = NVLOUTPOST_C
      Animation = NVLOUTPOST_C.NVLOUTPOST_C
      AnimationMode     = ONCE_BACKWARDS
    End
    TransitionState     = Trans_Deployed_ReallyDamaged Trans_Moving_ReallyDamaged 
      Model = NVLOUTPOST_CD
      Animation = NVLOUTPOST_CD.NVLOUTPOST_CD
      AnimationMode     = ONCE_BACKWARDS
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ListeningOutpost
  Side = ChinaNukeGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 5
  BuildCost   = 700
  BuildTime   = 7.0
  VisionRange = 250
  ShroudClearingRange = 500

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TroopCrawlerAssault
  End

  ArmorSet
    Conditions      = None
    Armor           = RadarTruckArmor
    DamageFX        = TankDamageFX
  End
  ArmorSet
    Conditions   = PLAYER_UPGRADE
    Armor        = RadarTruckArmorNukeUpgraded
    DamageFX     = TankDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaWarFactory
  End

  ExperienceValue    = 27 39 58 83
  ExperienceRequired = 0 81 118 173
  IsTrainable        = Yes
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Nuke_ChinaListeningOutpostCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ListeningOutpostVoiceSelect
  VoiceMove = ListeningOutpostVoiceMove
  VoiceGuard = ListeningOutpostVoiceMove
  VoiceAttack = ListeningOutpostVoiceAttack
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  SoundStealthOn  = USStealthOn
  SoundStealthOff = USStealthOff
  UnitSpecificSounds
    VoiceCreate     = ListeningOutpostVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound
    TruckPowerslideSound = NoSound
    VoiceCrush = NoSound
    VoiceUnload   = NoSound
    VoiceEnter = ListeningOutpostVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE REVEALS_ENEMY_PATHS CANNOT_RETALIATE HEAL_PAD IGNORES_SELECT_ALL
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 250.0
    InitialHealth   = 250.0
    SubdualDamageCap = 800
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = StealthDetectorUpdate ModuleTag_StealthDetector ;+
    DetectionRate             = 500
    DetectionRange            = 400
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    IRBeaconParticleSysName   = IRLenzflare
    IRParticleSysBone         = IRFX
    ExtraForbiddenKindOf     = MINE DEMOTRAP
  End

  Behavior = TransportAIUpdate ModuleTag_NewAI
    AutoAcquireEnemiesWhenIdle = No
  End
  Behavior = StealthUpdate ModuleTag_04
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = MOVING RIDERS_ATTACKING
    FriendlyOpacityMin          = 50.0%
    FriendlyOpacityMax          = 100.0%
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Locomotor = SET_NORMAL ListeningOutpostLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 90.0
  End
  Behavior = TransportContain ModuleTag_06
    PassengersAllowedToFire = Yes
    Slots                 = 2
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 100%
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 3
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 1789
    FX  = INITIAL FX_SupplyTruckExplosionOneFinal
    OCL = INITIAL OCL_InitialListeningOutpostDebris
    FX  = FINAL   FX_SupplyTruckExplosionOneFinal
    OCL = FINAL   OCL_FinalListeningOutpostDebris
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 0
    OCL = FINAL   OCL_FinalListeningOutpostDeathEffectSimple
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Nuke_ChinaCommandCenter

  ; *** ART Parameters ***
  
  ; ------------ the main building itself -----------------
  SelectPortrait         = SNComCentr_L
  ButtonImage            = SNComCentr
  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ; DAY ************************************
    DefaultConditionState
      Model              = NBConYardN
      Animation          = NBConYardN.NBConYardN
      AnimationMode      = LOOP    
    End
    ConditionState       = DAMAGED
      Model              = NBConYardN_D
      Animation          = NBConYardN_D.NBConYardN_D
      AnimationMode      = LOOP    
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = NBConYardN_E
      Animation          = NBConYardN_E.NBConYardN_E
      AnimationMode      = LOOP
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Fire04 SmolderingFire
      ParticleSysBone    = Fire05 SmolderingFire
      ParticleSysBone    = Fire06 SmolderingFire
      ParticleSysBone    = Fire07 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End


    ;NIGHT ***********************************
    ConditionState       = NIGHT
      Model              = NBConYardN_N
      Animation          = NBConYardN_N.NBConYardN_N
      AnimationMode      = LOOP    
    End
    ConditionState       = DAMAGED NIGHT
      Model              = NBConYardN_DN
      Animation          = NBConYardN_DN.NBConYardN_DN
      AnimationMode      = LOOP    
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = NBConYardN_EN
      Animation       = NBConYardN_EN.NBConYardN_EN
      AnimationMode   = LOOP
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
    End

    
    ;SNOW *************************************
    ConditionState       = SNOW
      Model              = NBConYardN_S
      Animation          = NBConYardN_S.NBConYardN_S
      AnimationMode      = LOOP    
    End
    ConditionState       = DAMAGED SNOW
      Model              = NBConYardN_DS
      Animation          = NBConYardN_DS.NBConYardN_DS
      AnimationMode      = LOOP    
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = NBConYardN_ES
      Animation          = NBConYardN_ES.NBConYardN_ES
      AnimationMode      = LOOP
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Fire04 SmolderingFire
      ParticleSysBone    = Fire05 SmolderingFire
      ParticleSysBone    = Fire06 SmolderingFire
      ParticleSysBone    = Fire07 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End

    ;NIGHT SNOW *****************************
    ConditionState       = NIGHT SNOW
      Model              = NBConYardN_NS
      Animation          = NBConYardN_NS.NBConYardN_NS
      AnimationMode      = LOOP    
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = NBConYardN_DNS
      Animation          = NBConYardN_DNS.NBConYardN_DNS
      AnimationMode      = LOOP    
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = NBConYardN_ENS
      Animation       = NBConYardN_ENS.NBConYardN_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
    End   
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBConYardN
      Animation          = NBConYardN.NBConYardN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBConYardN_D
      Animation          = NBConYardN_D.NBConYardN_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBConYardN_E
      Animation          = NBConYardN_E.NBConYardN_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBConYardN_N
      Animation          = NBConYardN_N.NBConYardN_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBConYardN_DN
      Animation          = NBConYardN_DN.NBConYardN_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBConYardN_EN
      Animation          = NBConYardN_EN.NBConYardN_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBConYardN_S
      Animation          = NBConYardN_S.NBConYardN_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBConYardN_DS
      Animation          = NBConYardN_DS.NBConYardN_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBConYardN_ES
      Animation          = NBConYardN_ES.NBConYardN_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBConYardN_NS
      Animation          = NBConYardN_NS.NBConYardN_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBConYardN_DNS
      Animation          = NBConYardN_DNS.NBConYardN_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBConYardN_ENS
      Animation          = NBConYardN_ENS.NBConYardN_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

  End
  
  ; ------------ Radar Extending -----------------
  Draw                = W3DModelDraw ModuleTag_02

    DefaultConditionState
      Model             = None
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
       
    ConditionState      = RADAR_EXTENDING RADAR_UPGRADED 
      Model             = NBConYard_A2
      Animation         = NBConYard_A2.NBConYard_A2
      AnimationMode     = ONCE
      Flags             = START_FRAME_FIRST
    End
    
    ConditionState      = RADAR_EXTENDING DAMAGED RADAR_UPGRADED 
      Model             = NBConYard_A2D
      Animation         = NBConYard_A2D.NBConYard_A2D
      AnimationMode     = ONCE
      Flags             = START_FRAME_FIRST
    End
    
    ConditionState      = RADAR_EXTENDING REALLYDAMAGED RUBBLE RADAR_UPGRADED 
      Model             = NBConYard_A2E
      Animation         = NBConYard_A2E.NBConYard_A2E
      AnimationMode     = ONCE
      Flags             = START_FRAME_FIRST
    End
    
    ConditionState      = RADAR_UPGRADED
      Model             = NBConYard_A2
      Animation         = NBConYard_A2.NBConYard_A2
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
    End
    
    ConditionState      = RADAR_UPGRADED DAMAGED
      Model             = NBConYard_A2D
      Animation         = NBConYard_A2D.NBConYard_A2D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
    End
    
    ConditionState      = RADAR_UPGRADED REALLYDAMAGED RUBBLE
      Model             = NBConYard_A2E
      Animation         = NBConYard_A2E.NBConYard_A2E
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
    End
    
    ConditionState      = RADAR_UPGRADED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model             = NBConYard_A2
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
       
    ConditionState      = RADAR_UPGRADED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED 
      Model             = NBConYard_A2D
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End   
    
    ConditionState      = RADAR_UPGRADED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE 
      Model             = NBConYard_A2E
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End   
    
  End
  PlacementViewAngle = -135

  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_04
    AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = SmokeM01 BuildUpSmokeChina
      ParticleSysBone = SmokeS02 BuildUpSmokeChina
      ParticleSysBone = SparksM01 BuildUpSmokeChina
      ParticleSysBone = SparksM02 BuildUpSmokeChina
      ParticleSysBone = SparksS01 BuildUpSmokeChina
      ParticleSysBone = SparksS02 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT

      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = SmokeM01 BuildUpSmokeChina
      ParticleSysBone = SmokeS02 BuildUpSmokeChina
      ParticleSysBone = SparksM01 BuildUpSmokeChina
      ParticleSysBone = SparksM02 BuildUpSmokeChina
      ParticleSysBone = SparksS01 BuildUpSmokeChina
      ParticleSysBone = SparksS02 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = SmokeM01 BuildUpSnowSmoke
      ParticleSysBone = SmokeS02 BuildUpSnowSmoke
      ParticleSysBone = SparksM01 BuildUpSnowSmoke
      ParticleSysBone = SparksM02 BuildUpSnowSmoke
      ParticleSysBone = SparksS01 BuildUpSnowSmoke
      ParticleSysBone = SparksS02 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = SmokeM01 BuildUpNightSnowSmoke
      ParticleSysBone = SmokeS02 BuildUpNightSnowSmoke
      ParticleSysBone = SparksM01 BuildUpNightSnowSmoke
      ParticleSysBone = SparksM02 BuildUpNightSnowSmoke
      ParticleSysBone = SparksS01 BuildUpNightSnowSmoke
      ParticleSysBone = SparksS02 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_05
    AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    
    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5
      Animation       = NBConYard_A5.NBConYard_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5N
      Animation       = NBConYard_A5N.NBConYard_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5S
      Animation       = NBConYard_A5S.NBConYard_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5SN
      Animation       = NBConYard_A5SN.NBConYard_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBConYard_AB
      Animation       = NBConYard_AB.NBConYard_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBConYard_ABN
      Animation       = NBConYard_ABN.NBConYard_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBConYard_ABS
      Animation       = NBConYard_ABS.NBConYard_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBConYard_ABSN
      Animation       = NBConYard_ABSN.NBConYard_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBConYard_AB
      Animation       = NBConYard_AB.NBConYard_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBConYard_ABN
      Animation       = NBConYard_ABN.NBConYard_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBConYard_ABS
      Animation       = NBConYard_ABS.NBConYard_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBConYard_ABSN
      Animation       = NBConYard_ABSN.NBConYard_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
    
; ----------------- the factory door -------------------
  Draw                = W3DModelDraw ModuleTag_06
    DefaultConditionState
      Model           = NBConYard_A7
      Animation       = NBConYard_A7.NBConYard_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = NBConYard_A7
      Animation       = NBConYard_A7.NBConYard_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_CLOSING
      Model           = NBConYard_A7
      Animation       = NBConYard_A7.NBConYard_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End 
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
      
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBConYard_A7
      Animation       = NBConYard_A7.NBConYard_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
     
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED
     
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBConYard_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBConYard_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBConYard_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End
  
  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:CommandCenter
  Side              = ChinaNukeGeneral
  EditorSorting     = STRUCTURE
  BuildCost         = 2500
  BuildTime         = 50.0
  EnergyProduction  = 0
  CommandSet        = Nuke_ChinaCommandCenterCommandSet
  VisionRange       = 300
  ShroudClearingRange = 300
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction

  Prerequisites
    Science = SCIENCE_NUKE
  End
  
  WeaponSet
    Conditions = None
    Weapon = TERTIARY CCSelfdestructWeapon
    AutoChooseSources = TERTIARY NONE
  End  
  
    Behavior = AIUpdateInterface ModuleTag_AI
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect       = CommandCenterChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE COMMANDCENTER SCORE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY IMMUNE_TO_CAPTURE

  Body              = StructureBody ModuleTag_07
    MaxHealth       = 5000.0
    InitialHealth   = 5000.0
    SubdualDamageCap = 5000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = ProductionUpdate ModuleTag_08
    NumDoorAnimations            = 1
    DoorOpeningTime              = 3000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 3000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_09
    UnitCreatePoint   = X:-18.0  Y: 40.0   Z:0.0
    NaturalRallyPoint = X: 60.0  Y: 40.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = RadarUpdate ModuleTag_10
    RadarExtendTime   = 4000     ;in mSeconds
  End

  Behavior             = DestroyDie ModuleTag_11
  End

  Behavior             = CreateObjectDie ModuleTag_12
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior             = FXListDie ModuleTag_13
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior         = RadarUpgrade ModuleTag_14
    TriggeredBy   = Upgrade_Radar
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_15
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End
  Behavior           = OCLSpecialPower ModuleTag_17
    SpecialPowerTemplate = SuperweaponArtilleryBarrage
    UpgradeOCL           = SCIENCE_ArtilleryBarrage3 SUPERWEAPON_ArtilleryBarrage3
    UpgradeOCL           = SCIENCE_ArtilleryBarrage2 SUPERWEAPON_ArtilleryBarrage2
    OCL                  = SUPERWEAPON_ArtilleryBarrage1
    CreateLocation       = CREATE_AT_EDGE_FARTHEST_FROM_TARGET
  End
  Behavior           = OCLSpecialPower ModuleTag_18
    SpecialPowerTemplate = SuperweaponClusterMines
    UpgradeOCL           = SCIENCE_NeutronCluster SUPERWEAPON_ClusterMinesUpgraded
    OCL                  = SUPERWEAPON_ClusterMines
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = CashHackSpecialPower ModuleTag_20
    SpecialPowerTemplate = SuperweaponCashHack
    UpgradeMoneyAmount   = SCIENCE_CashHack3 6000
    UpgradeMoneyAmount   = SCIENCE_CashHack2 4000
    MoneyAmount          = 2000  ; amount of money to steal
  End
  Behavior           = OCLSpecialPower ModuleTag_21
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairEverything3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairEverything2
    OCL                  = SUPERWEAPON_RepairEverything1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_22
    SpecialPowerTemplate = SuperweaponCarpetBomb
    OCL                  = Nuke_SUPERWEAPON_ChinaCarpetBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End 
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower09
    SpecialPowerTemplate = SuperweaponNeutronBomb
    OCL                  = SUPERWEAPON_NeutronBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_SpecialPower10
    SpecialPowerTemplate = SuperweaponSignalMines
    OCL                  = SUPERWEAPON_SignalMines
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End


  Behavior = FlammableUpdate ModuleTag_23
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_24
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaCommandCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ModuleTag_25A
    CommandSet = Nuke_ChinaCommandCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Behavior           = OCLSpecialPower ModuleTag_27
    SpecialPowerTemplate = SuperweaponFrenzy
    UpgradeOCL           = SCIENCE_Frenzy3 SUPERWEAPON_Frenzy3
    UpgradeOCL           = SCIENCE_Frenzy2 SUPERWEAPON_Frenzy2
    OCL                  = SUPERWEAPON_Frenzy1
    CreateLocation       = CREATE_AT_LOCATION
  End

  ;Upgrade for Cluster Mines
  Behavior = GrantScienceUpgrade ModuleTag_Science_1
    GrantScience = SCIENCE_NeutronCluster
    TriggeredBy = Upgrade_ChinaNeutronCluster
  End

  Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
    UpgradeToGrant = Upgrade_ChinaNuclearTanks
  End

  Geometry            = BOX
  FactoryExitWidth    = 25
  GeometryMajorRadius = 60.0
  GeometryMinorRadius = 63.0
  GeometryHeight      = 36.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaAirfield

  ; *** ART Parameters ***
  SelectPortrait         = SNAirfield_L
  ButtonImage            = SNAirfield
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ExtraPublicBone = Runway1Parking1 
    ExtraPublicBone = Runway1Parking2 
    ExtraPublicBone = Runway2Parking1 
    ExtraPublicBone = Runway2Parking2 
    ExtraPublicBone = Runway1Park1Han
    ExtraPublicBone = Runway1Park2Han
    ExtraPublicBone = Runway2Park1Han
    ExtraPublicBone = Runway2Park2Han 
    ExtraPublicBone = Runway1Prep1 
    ExtraPublicBone = Runway1Prep2 
    ExtraPublicBone = Runway2Prep1 
    ExtraPublicBone = Runway2Prep2 
    ExtraPublicBone = RunwayStart1 
    ExtraPublicBone = RunwayStart2 
    ExtraPublicBone = RunwayEnd1 
    ExtraPublicBone = RunwayEnd2

    ExtraPublicBone = HeliPark01

; ------------- DAY ------------------    

    DefaultConditionState
      Model         = NBAirfield
      Animation     = NBAirfield.NBAirfield
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model         = NBAirfield_D
      Animation     = NBAirfield_D.NBAirfield_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = NBAirfield_E
      Animation     = NBAirfield_E.NBAirfield_E
      AnimationMode = LOOP
    End
    
; ------------- SNOW ------------------        
    ConditionState  = SNOW
      Model         = NBAirfield_S
      Animation     = NBAirfield_S.NBAirfield_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model         = NBAirfield_DS
      Animation     = NBAirfield_DS.NBAirfield_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = NBAirfield_ES
      Animation     = NBAirfield_ES.NBAirfield_ES
      AnimationMode = LOOP
    End
    
; ------------- NIGHT ------------------       

    ConditionState = NIGHT
      Model         = NBAirfield_N
      Animation     = NBAirfield_N.NBAirfield_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model         = NBAirfield_DN
      Animation     = NBAirfield_DN.NBAirfield_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model         = NBAirfield_EN
      Animation     = NBAirfield_EN.NBAirfield_EN
      AnimationMode = LOOP
    End
    
; ------------- NIGHT SNOW------------------       
    
    ConditionState = NIGHT SNOW
      Model         = NBAirfield_NS
      Animation     = NBAirfield_NS.NBAirfield_NS
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model         = NBAirfield_DNS
      Animation     = NBAirfield_DNS.NBAirfield_DNS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = NBAirfield_ENS
      Animation     = NBAirfield_ENS.NBAirfield_ENS
      AnimationMode = LOOP
    End
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBAirfield
      Animation          = NBAirfield.NBAirfield
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBAirfield_D
      Animation          = NBAirfield_D.NBAirfield_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBAirfield_E
      Animation          = NBAirfield_E.NBAirfield_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBAirfield_N
      Animation          = NBAirfield_N.NBAirfield_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBAirfield_DN
      Animation          = NBAirfield_DN.NBAirfield_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBAirfield_EN
      Animation          = NBAirfield_EN.NBAirfield_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBAirfield_S
      Animation          = NBAirfield_S.NBAirfield_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBAirfield_DS
      Animation          = NBAirfield_DS.NBAirfield_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBAirfield_ES
      Animation          = NBAirfield_ES.NBAirfield_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBAirfield_NS
      Animation          = NBAirfield_NS.NBAirfield_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBAirfield_DNS
      Animation          = NBAirfield_DNS.NBAirfield_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBAirfield_ENS
      Animation          = NBAirfield_ENS.NBAirfield_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

    
    
  End
  
  
  Draw = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = None
    End
  End

  ; ----------------- door #1 -------------------
  Draw                = W3DModelDraw ModuleTag_03
    DefaultConditionState
      Model           = NBAirfield_A9
      Animation       = NBAirfield_A9.NBAirfield_A9
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = NBAirfield_A9
      Animation       = NBAirfield_A9.NBAirfield_A9
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_1_OPENING
    
    ConditionState    = DOOR_1_CLOSING
      Model           = NBAirfield_A9
      Animation       = NBAirfield_A9.NBAirfield_A9
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBAirfield_A9
      Animation       = NBAirfield_A9.NBAirfield_A9
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBAirfield_A9
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBAirfield_A9
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBAirfield_A9
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED


    
  End

  ; ----------------- door #2 -------------------
; this one has no door #2... (srj)
;  Draw                = W3DModelDraw
;    DefaultConditionState
;      Model           = NBAirfield_A10
;      Animation       = NBAirfield_A10.NBAirfield_A10
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_FIRST
;    End
;    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
;      Model           = NBAirfield_A10
;      Flags           = START_FRAME_FIRST ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
;    End
;    ConditionState    = DOOR_2_OPENING
;      Model           = NBAirfield_A10
;      Animation       = NBAirfield_A10.NBAirfield_A10
;      AnimationMode   = ONCE
;      Flags           = START_FRAME_FIRST
;    End   
;    ConditionState    = DOOR_2_CLOSING
;      Model           = NBAirfield_A10
;      Animation       = NBAirfield_A10.NBAirfield_A10
;      AnimationMode   = ONCE_BACKWARDS
;      Flags           = START_FRAME_LAST
;    End   
;    ConditionState    = DOOR_2_WAITING_OPEN
;      Model           = NBAirfield_A10
;      Animation       = NBAirfield_A10.NBAirfield_A10
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_LAST
;    End   
;  End
  
  ; ----------------- door #3 -------------------
  Draw                = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = NBAirfield_A10
      Animation       = NBAirfield_A10.NBAirfield_A10
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE 
    
    
    
    ConditionState    = DOOR_3_OPENING
      Model           = NBAirfield_A10
      Animation       = NBAirfield_A10.NBAirfield_A10
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_3_OPENING
    AliasConditionState = SNOW DOOR_3_OPENING
    AliasConditionState = SNOW NIGHT DOOR_3_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_3_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_3_OPENING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_3_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_OPENING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_3_OPENING
    
    ConditionState    = DOOR_3_CLOSING
      Model           = NBAirfield_A10
      Animation       = NBAirfield_A10.NBAirfield_A10
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End 
    AliasConditionState = NIGHT DOOR_3_CLOSING
    AliasConditionState = SNOW DOOR_3_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_3_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_3_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_3_CLOSING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_3_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_3_CLOSING
      
    ConditionState    = DOOR_3_WAITING_OPEN
      Model           = NBAirfield_A10
      Animation       = NBAirfield_A10.NBAirfield_A10
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBAirfield_A10
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBAirfield_A10
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBAirfield_A10
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    

    
  End

  ; ----------------- door #4 -------------------
  Draw                = W3DModelDraw ModuleTag_05
    DefaultConditionState
      Model           = NBAirfield_A8
      Animation       = NBAirfield_A8.NBAirfield_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE 
    
    ConditionState    = DOOR_4_OPENING
      Model           = NBAirfield_A8
      Animation       = NBAirfield_A8.NBAirfield_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_4_OPENING
    AliasConditionState = SNOW DOOR_4_OPENING
    AliasConditionState = SNOW NIGHT DOOR_4_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_4_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_4_OPENING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_4_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_OPENING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_4_OPENING
    
    ConditionState    = DOOR_4_CLOSING
      Model           = NBAirfield_A8
      Animation       = NBAirfield_A8.NBAirfield_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_4_CLOSING
    AliasConditionState = SNOW DOOR_4_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_4_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_4_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_4_CLOSING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_4_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    
    ConditionState    = DOOR_4_WAITING_OPEN
      Model           = NBAirfield_A8
      Animation       = NBAirfield_A8.NBAirfield_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End 
    AliasConditionState = NIGHT DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBAirfield_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBAirfield_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBAirfield_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
      
  End

 ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A4
      Animation       = NBAirfield_A4.NBAirfield_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED 
      Model           = NBAirfield_A4N
      Animation       = NBAirfield_A4N.NBAirfield_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED 
      Model           = NBAirfield_A4S
      Animation       = NBAirfield_A4S.NBAirfield_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED 
      Model           = NBAirfield_A4SN
      Animation       = NBAirfield_A4SN.NBAirfield_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBAirfield_A4
      Animation       = NBAirfield_A4.NBAirfield_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBAirfield_A4N
      Animation       = NBAirfield_A4N.NBAirfield_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBAirfield_A4S
      Animation       = NBAirfield_A4S.NBAirfield_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBAirfield_A4SN
      Animation       = NBAirfield_A4SN.NBAirfield_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBAirfield_A4
      Animation       = NBAirfield_A4.NBAirfield_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBAirfield_A4N
      Animation       = NBAirfield_A4N.NBAirfield_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBAirfield_A4S
      Animation       = NBAirfield_A4S.NBAirfield_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBAirfield_A4SN
      Animation       = NBAirfield_A4SN.NBAirfield_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBAirfield_A6
      Animation       = NBAirfield_A6.NBAirfield_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBAirfield_A6N
      Animation       = NBAirfield_A6N.NBAirfield_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBAirfield_A6S
      Animation       = NBAirfield_A6S.NBAirfield_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBAirfield_A6SN
      Animation       = NBAirfield_A6SN.NBAirfield_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBAirfield_A6
      Animation       = NBAirfield_A6.NBAirfield_A6

      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBAirfield_A6N
      Animation       = NBAirfield_A6N.NBAirfield_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBAirfield_A6S
      Animation       = NBAirfield_A6S.NBAirfield_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBAirfield_A6SN
      Animation       = NBAirfield_A6SN.NBAirfield_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBAirfield_A6
      Animation       = NBAirfield_A6.NBAirfield_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBAirfield_A6N
      Animation       = NBAirfield_A6N.NBAirfield_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBAirfield_A6S
      Animation       = NBAirfield_A6S.NBAirfield_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBAirfield_A6SN
      Animation       = NBAirfield_A6SN.NBAirfield_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End


  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_08
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A5
      Animation       = NBAirfield_A5.NBAirfield_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A5N
      Animation       = NBAirfield_A5N.NBAirfield_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End

    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A5S
      Animation       = NBAirfield_A5S.NBAirfield_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End

    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A5SN
      Animation       = NBAirfield_A5SN.NBAirfield_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBAirfield_AB
      Animation       = NBAirfield_AB.NBAirfield_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBAirfield_ABN
      Animation       = NBAirfield_ABN.NBAirfield_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBAirfield_ABS
      Animation       = NBAirfield_ABS.NBAirfield_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBAirfield_ABSN
      Animation       = NBAirfield_ABSN.NBAirfield_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBAirfield_AB
      Animation       = NBAirfield_AB.NBAirfield_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBAirfield_ABN
      Animation       = NBAirfield_ABN.NBAirfield_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBAirfield_ABS
      Animation       = NBAirfield_ABS.NBAirfield_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBAirfield_ABSN
      Animation       = NBAirfield_ABSN.NBAirfield_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Airfield
  Side             = ChinaNukeGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 1500
  BuildTime        = 30
  EnergyProduction = -1
  CommandSet       = Nuke_ChinaAirfieldCommandSet
  VisionRange     = 200
  ShroudClearingRange = 200
  ExperienceValue    = 100 100 100 100

  Prerequisites
    Object = Nuke_ChinaSupplyCenter
    Science = SCIENCE_Rank3
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = AirfieldChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_AIRFIELD SCORE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT

  Body            = StructureBody ModuleTag_09
    MaxHealth       = 3000.0
    InitialHealth   = 3000.0
    SubdualDamageCap = 3000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = ParkingPlaceBehavior ModuleTag_10
    HealAmountPerSecond     = 10
    NumRows                 = 2
    NumCols                 = 2
    HasRunways              = Yes
    ApproachHeight          = 50
    ParkInHangars           = Yes
  End

  Behavior = ProductionUpdate ModuleTag_11
    NumDoorAnimations            = 4
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1000  ;in mSeconds
  End

  Behavior = DestroyDie ModuleTag_12
  End

  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_ABPowerPlantExplode
  End

  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_15
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_17
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaAirfieldCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ModuleTag_25A
    CommandSet = Nuke_ChinaAirfieldCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 83.0
  GeometryMinorRadius = 76.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaNuclearMissileLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeMisl_L
  ButtonImage            = SNNukeMisl

  UpgradeCameo1 = Upgrade_ChinaNuclearMissilePower
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState      = NONE
      Model             = NBNMissle
      WeaponLaunchBone  = SECONDARY RockPos
    End
    ConditionState      = SOLD
      Model             = NONE
    End  
    ConditionState      = SOLD SNOW
      Model             = NONE

    End   
    ConditionState      = SOLD NIGHT
      Model             = NONE
    End    
    ConditionState      = SOLD NIGHT SNOW
      Model             = NONE
    End     
    
    ConditionState      = DAMAGED
      Model             = NBNMissle_D
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
    End
     ConditionState     = REALLYDAMAGED RUBBLE
      Model             = NBNMissle_E
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End 
    ConditionState      = AWAITING_CONSTRUCTION
      Model             = None
    End
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model             = NBNMissle
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model             = NBNMissle_D
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
      Model             = NBNMissle_E
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = DOOR_1_OPENING
      Model             = NBNMissle_A2
      Animation         = NBNMissle_A2.NBNMissle_A2
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End   
    ConditionState      = DOOR_1_WAITING_OPEN
      Model             = NBNMissle_A2
      Animation         = NBNMissle_A2.NBNMissle_A2
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE
      Model             = NBNMissle_A3
      Animation         = NBNMissle_A3.NBNMissle_A3
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
    End   
    ConditionState      = DOOR_1_CLOSING
      Model             = NBNMissle_A3
      Animation         = NBNMissle_A3.NBNMissle_A3
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End   
    ConditionState      = DOOR_1_OPENING DAMAGED 
      Model             = NBNMissle_A2D
      Animation         = NBNMissle_A2D.NBNMissle_A2D
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire

      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED 
      Model             = NBNMissle_A2D
      Animation         = NBNMissle_A2D.NBNMissle_A2D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED 
      Model             = NBNMissle_A3D
      Animation         = NBNMissle_A3D.NBNMissle_A3D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING DAMAGED 
      Model             = NBNMissle_A3D
      Animation         = NBNMissle_A3D.NBNMissle_A3D
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_OPENING REALLYDAMAGED RUBBLE 
      Model             = NBNMissle_A2E
      Animation         = NBNMissle_A2E.NBNMissle_A2E
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE 
      Model             = NBNMissle_A2E
      Animation         = NBNMissle_A2E.NBNMissle_A2E
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED RUBBLE 
      Model             = NBNMissle_A3E
      Animation         = NBNMissle_A3E.NBNMissle_A3E
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED RUBBLE 
      Model             = NBNMissle_A3E
      Animation         = NBNMissle_A3E.NBNMissle_A3E
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   

    ; night
    ConditionState      = NIGHT
      Model             = NBNMissle_N
    End
    ConditionState      = DAMAGED NIGHT
      Model             = NBNMissle_DN
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
    End
     ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_EN
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End
    ConditionState      = AWAITING_CONSTRUCTION NIGHT
      Model             = None
    End
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model             = NBNMissle_N
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model             = NBNMissle_DN
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model             = NBNMissle_EN
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = DOOR_1_OPENING NIGHT
      Model             = NBNMissle_A2N
      Animation         = NBNMissle_A2N.NBNMissle_A2N
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End   
    ConditionState      = DOOR_1_WAITING_OPEN NIGHT
      Model             = NBNMissle_A2N
      Animation         = NBNMissle_A2N.NBNMissle_A2N
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE NIGHT
      Model             = NBNMissle_A3N
      Animation         = NBNMissle_A3N.NBNMissle_A3N
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
    End   
    ConditionState      = DOOR_1_CLOSING NIGHT
      Model             = NBNMissle_A3N
      Animation         = NBNMissle_A3N.NBNMissle_A3N
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End   
    ConditionState      = DOOR_1_OPENING DAMAGED NIGHT
      Model             = NBNMissle_A2DN
      Animation         = NBNMissle_A2DN.NBNMissle_A2DN
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED NIGHT
      Model             = NBNMissle_A2DN
      Animation         = NBNMissle_A2DN.NBNMissle_A2DN
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED NIGHT
      Model             = NBNMissle_A3DN
      Animation         = NBNMissle_A3DN.NBNMissle_A3DN
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING DAMAGED NIGHT
      Model             = NBNMissle_A3DN
      Animation         = NBNMissle_A3DN.NBNMissle_A3DN
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_OPENING REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_A2EN
      Animation         = NBNMissle_A2EN.NBNMissle_A2EN
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_A2EN
      Animation         = NBNMissle_A2EN.NBNMissle_A2EN
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_A3EN
      Animation         = NBNMissle_A3EN.NBNMissle_A3EN
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_A3EN
      Animation         = NBNMissle_A3EN.NBNMissle_A3EN
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    
    ;-------------- SNOW! --------------------
    ConditionState      = SNOW
      Model             = NBNMissle_S
    End
    
    ConditionState      = DAMAGED SNOW
      Model             = NBNMissle_DS
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
    End
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_ES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End 
    ConditionState      = AWAITING_CONSTRUCTION SNOW
      Model             = None
    End
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model             = NBNMissle_S
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model             = NBNMissle_DS
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model             = NBNMissle_ES
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = DOOR_1_OPENING SNOW
      Model             = NBNMissle_A2S
      Animation         = NBNMissle_A2S.NBNMissle_A2S
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End   
    ConditionState      = DOOR_1_WAITING_OPEN SNOW
      Model             = NBNMissle_A2S
      Animation         = NBNMissle_A2S.NBNMissle_A2S
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE SNOW
      Model             = NBNMissle_A3S
      Animation         = NBNMissle_A3S.NBNMissle_A3S
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
    End   
    ConditionState      = DOOR_1_CLOSING SNOW
      Model             = NBNMissle_A3S
      Animation         = NBNMissle_A3S.NBNMissle_A3S
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End   
    ConditionState      = DOOR_1_OPENING DAMAGED SNOW
      Model             = NBNMissle_A2DS
      Animation         = NBNMissle_A2DS.NBNMissle_A2DS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED SNOW
      Model             = NBNMissle_A2DS
      Animation         = NBNMissle_A2DS.NBNMissle_A2DS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED SNOW
      Model             = NBNMissle_A3DS
      Animation         = NBNMissle_A3DS.NBNMissle_A3DS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING DAMAGED SNOW
      Model             = NBNMissle_A3DS
      Animation         = NBNMissle_A3DS.NBNMissle_A3DS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_OPENING REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_A2ES
      Animation         = NBNMissle_A2ES.NBNMissle_A2ES
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_A2ES
      Animation         = NBNMissle_A2ES.NBNMissle_A2ES
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_A3ES
      Animation         = NBNMissle_A3ES.NBNMissle_A3ES
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_A3ES
      Animation         = NBNMissle_A3ES.NBNMissle_A3ES
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   

    ; night
    ConditionState      = NIGHT SNOW
      Model             = NBNMissle_NS
    End
    ConditionState      = DAMAGED NIGHT SNOW
      Model             = NBNMissle_DNS
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
    End
     ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_ENS
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End
    ConditionState      = AWAITING_CONSTRUCTION NIGHT SNOW
      Model             = None
    End
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model             = NBNMissle_NS
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model             = NBNMissle_DNS
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model             = NBNMissle_ENS
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = DOOR_1_OPENING NIGHT SNOW
      Model             = NBNMissle_A2NS
      Animation         = NBNMissle_A2NS.NBNMissle_A2NS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End   
    ConditionState      = DOOR_1_WAITING_OPEN NIGHT SNOW
      Model             = NBNMissle_A2NS
      Animation         = NBNMissle_A2NS.NBNMissle_A2NS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE NIGHT SNOW
      Model             = NBNMissle_A3NS
      Animation         = NBNMissle_A3NS.NBNMissle_A3NS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
    End   
    ConditionState      = DOOR_1_CLOSING NIGHT SNOW
      Model             = NBNMissle_A3NS
      Animation         = NBNMissle_A3NS.NBNMissle_A3NS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End   
    ConditionState      = DOOR_1_OPENING DAMAGED NIGHT SNOW
      Model             = NBNMissle_A2DNS
      Animation         = NBNMissle_A2DNS.NBNMissle_A2DNS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED NIGHT SNOW
      Model             = NBNMissle_A2DNS
      Animation         = NBNMissle_A2DNS.NBNMissle_A2DNS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED NIGHT SNOW
      Model             = NBNMissle_A3DNS
      Animation         = NBNMissle_A3DNS.NBNMissle_A3DNS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING DAMAGED NIGHT SNOW
      Model             = NBNMissle_A3DNS
      Animation         = NBNMissle_A3DNS.NBNMissle_A3DNS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_OPENING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_A2ENS
      Animation         = NBNMissle_A2ENS.NBNMissle_A2ENS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_A2ENS
      Animation         = NBNMissle_A2ENS.NBNMissle_A2ENS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_A3ENS
      Animation         = NBNMissle_A3ENS.NBNMissle_A3ENS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = SECONDARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_A3ENS
      Animation         = NBNMissle_A3ENS.NBNMissle_A3ENSS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End     
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_A4
      Animation       = NBNMissle_A4.NBNMissle_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_A4N
      Animation       = NBNMissle_A4N.NBNMissle_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_A4S
      Animation       = NBNMissle_A4S.NBNMissle_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_A4SN
      Animation       = NBNMissle_A4SN.NBNMissle_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBNMissle_A4
      Animation       = NBNMissle_A4.NBNMissle_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBNMissle_A4N
      Animation       = NBNMissle_A4N.NBNMissle_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBNMissle_A4S
      Animation       = NBNMissle_A4S.NBNMissle_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBNMissle_A4SN
      Animation       = NBNMissle_A4SN.NBNMissle_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBNMissle_A4
      Animation       = NBNMissle_A4.NBNMissle_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBNMissle_A4N
      Animation       = NBNMissle_A4N.NBNMissle_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBNMissle_A4S
      Animation       = NBNMissle_A4S.NBNMissle_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBNMissle_A4SN
      Animation       = NBNMissle_A4SN.NBNMissle_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBNMissle_A6
      Animation       = NBNMissle_A6.NBNMissle_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBNMissle_A6N
      Animation       = NBNMissle_A6N.NBNMissle_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBNMissle_A6S
      Animation       = NBNMissle_A6S.NBNMissle_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBNMissle_A6SN
      Animation       = NBNMissle_A6SN.NBNMissle_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBNMissle_A6
      Animation       = NBNMissle_A6.NBNMissle_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBNMissle_A6N
      Animation       = NBNMissle_A6N.NBNMissle_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBNMissle_A6S
      Animation       = NBNMissle_A6S.NBNMissle_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBNMissle_A6SN
      Animation       = NBNMissle_A6SN.NBNMissle_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End 
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBNMissle_A6
      Animation       = NBNMissle_A6.NBNMissle_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBNMissle_A6N
      Animation       = NBNMissle_A6N.NBNMissle_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBNMissle_A6S
      Animation       = NBNMissle_A6S.NBNMissle_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBNMissle_A6SN
      Animation       = NBNMissle_A6SN.NBNMissle_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model         = NBNMissle_A5
      Animation     = NBNMissle_A5.NBNMissle_A5
      AnimationMode = LOOP
      TransitionKey = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model         = NBNMissle_A5N
      Animation     = NBNMissle_A5N.NBNMissle_A5N
      AnimationMode = LOOP
      TransitionKey = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model         = NBNMissle_A5S
      Animation     = NBNMissle_A5S.NBNMissle_A5S
      AnimationMode = LOOP
      TransitionKey = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model         = NBNMissle_A5SN
      Animation     = NBNMissle_A5SN.NBNMissle_A5SN
      AnimationMode = LOOP
      TransitionKey = UP_SNOWNIGHT
    End
    TransitionState = DOWN_DEFAULT UP_DAY
      Model         = NBNMissle_AB
      Animation     = NBNMissle_AB.NBNMissle_AB
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags         = START_FRAME_FIRST
    End

    TransitionState = DOWN_DEFAULT UP_NIGHT
      Model         = NBNMissle_ABN
      Animation     = NBNMissle_ABN.NBNMissle_ABN
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags         = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_SNOW
      Model         = NBNMissle_ABS
      Animation     = NBNMissle_ABS.NBNMissle_ABS
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags         = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_SNOWNIGHT
      Model         = NBNMissle_ABSN
      Animation     = NBNMissle_ABSN.NBNMissle_ABSN
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags         = START_FRAME_FIRST
    End
    TransitionState = UP_DAY DOWN_DEFAULT
      Model         = NBNMissle_AB
      Animation     = NBNMissle_AB.NBNMissle_AB
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags         = START_FRAME_LAST
    End
    TransitionState = UP_NIGHT DOWN_DEFAULT
      Model         = NBNMissle_ABN
      Animation     = NBNMissle_ABN.NBNMissle_ABN
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags         = START_FRAME_LAST
    End
    TransitionState = UP_SNOW DOWN_DEFAULT
      Model         = NBNMissle_ABS
      Animation     = NBNMissle_ABS.NBNMissle_ABS
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags         = START_FRAME_LAST
    End
    TransitionState = UP_SNOWNIGHT DOWN_DEFAULT
      Model         = NBNMissle_ABSN
      Animation     = NBNMissle_ABSN.NBNMissle_ABSN
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags         = START_FRAME_LAST
    End 
  End

  ; Blinking lights
  Draw = W3DModelDraw ModuleTag_05
    OkToChangeModelColor = Yes
    ; day
    ConditionState    = NONE
      Model           = NBNMissle_AC
      Animation       = NONE
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_AC
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState    = AWAITING_CONSTRUCTION
      Model           = NONE
    End
    ConditionState    = DOOR_1_OPENING
      Model           = NBNMissle_AC
      Animation       = NBNMissle_AC.NBNMissle_AC
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBNMissle_AC
      Animation       = NBNMissle_AC.NBNMissle_AC
      AnimationMode   = LOOP
      Flags           = START_FRAME_LAST
    End
    ConditionState    = DOOR_1_WAITING_TO_CLOSE
      Model           = NBNMissle_AC
      Animation       = NBNMissle_AC.NBNMissle_AC
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
      ;WeaponLaunchBone = SECONDARY RockPos
    End   
    ConditionState    = DOOR_1_CLOSING
      Model           = NBNMissle_AC
      Animation       = NBNMissle_AC.NBNMissle_AC
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
    End
  End

  ; Upgrade
  Draw = W3DModelDraw ModuleTag_Upgrade
    OkToChangeModelColor = Yes

    ConditionState    = NONE
      Model           = NONE
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = DAMAGED SNOW NIGHT
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = REALLYDAMAGED SNOW
    AliasConditionState = REALLYDAMAGED NIGHT
    AliasConditionState = REALLYDAMAGED SNOW NIGHT
    AliasConditionState = RUBBLE

    ConditionState    = WEAPONSET_PLAYER_UPGRADE
      Model           = NBNMU
    End
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE NIGHT

    ConditionState    = WEAPONSET_PLAYER_UPGRADE SNOW
      Model           = NBNMU_S
    End
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE SNOW NIGHT

    ConditionState    = WEAPONSET_PLAYER_UPGRADE DAMAGED
      Model           = NBNMU_D
    End
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE DAMAGED NIGHT

    ConditionState    = WEAPONSET_PLAYER_UPGRADE DAMAGED SNOW
      Model           = NBNMU_DS
    End
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE DAMAGED SNOW NIGHT

    ConditionState    = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model           = NBNMU_E
    End
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED NIGHT

    ConditionState    = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED SNOW
      Model           = NBNMU_ES
    End
    AliasConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED SNOW NIGHT

    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NONE
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW NIGHT
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW NIGHT

    ConditionState    = AWAITING_CONSTRUCTION
      Model           = NONE
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:NuclearMissile
  Side          = ChinaNukeGeneral
  EditorSorting = STRUCTURE
  BuildCost        = 5500
  BuildTime        = 110
  EnergyProduction = -15
  VisionRange      = 200
  ShroudClearingRange = 200
  ShroudRevealToAllRange = 60

  WeaponSet
    Conditions = None 
    Weapon = SECONDARY MultiWarheadNuclearMissileWeapon
    AutoChooseSources = SECONDARY NONE
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = SECONDARY MultiWarheadNuclearMissileWeaponUpgraded
    AutoChooseSources = SECONDARY NONE
  End

  Behavior = WeaponSetUpgrade ModuleTag_Wp
    TriggeredBy = Upgrade_ChinaNuclearMissilePower
  End

  Prerequisites
    Object = Nuke_ChinaPropagandaCenter
    Science = SCIENCE_NUKE SCIENCE_TANK SCIENCE_INFA SCIENCE_FLAM
    Science = SCIENCE_Rank5
  End

  CommandSet        = Nuke_ChinaNuclearMissileCommandSet
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue   = 319 462 676 969
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType

  ; *** AUDIO Parameters ***
  VoiceSelect = NuclearMissileSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_TECHNOLOGY POWERED MP_COUNT_FOR_VICTORY FS_SUPERWEAPON
  Body            = StructureBody ModuleTag_06
    MaxHealth       = 4500.0
    InitialHealth   = 4500.0
    SubdualDamageCap = 9000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior    = OCLSpecialPower ModuleTag_07
    SpecialPowerTemplate = Nuke_SuperweaponNeutronMissile
    OCL                  = SUPERWEAPON_MultiWarheadMissile
  End
  Behavior = SpecialPowerCreate ModuleTag_08
  End
  Behavior = MissileLauncherBuildingUpdate ModuleTag_09
    SpecialPowerTemplate = Nuke_SuperweaponNeutronMissile
    DoorOpenTime         = 8000
    DoorWaitOpenTime     = 2000
    DoorCloseTime        = 8000
    DoorOpeningFX        = ChinaNuclearMissileLauncherDoorOpen
    DoorWaitingToCloseFX = ChinaNuclearMissileLauncherLaunch
    DoorOpenIdleAudio = BuildingNeutronMissileHiss
  End

  Behavior = ProductionUpdate ModuleTag_10
    DisabledTypesToProcess = DISABLED_HELD DISABLED_UNDERPOWERED
  End

  Behavior = DestroyDie ModuleTag_11
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_13
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = AIUpdateInterface ModuleTag_AI
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End
  
  Behavior   = CreateObjectDie ModuleTag_20
    CreationList  = OCL_LargeStructureDebris
  End
  
  Behavior        = FXListDie ModuleTag_21
    ExemptStatus  = UNDER_CONSTRUCTION
    DeathFX       = FX_NukeGLA
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon = ChinaPowerPlantDeathWeapon
    StartsActive  = Yes
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaNuclearMissileCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ModuleTag_25A
    CommandSet = Nuke_ChinaNuclearMissileCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaEMPMines
  End
  
  Geometry            = BOX
  GeometryMajorRadius = 45.0
  GeometryMinorRadius = 55.0
  GeometryHeight      = 64.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaSpeakerTower

  ; *** ART Parameters ***
  SelectPortrait         = SNPropSpeaker_L
  ButtonImage            = SNPropSpeaker

  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging

  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model         = NBPTower
      Animation     = NBPTower.NBPTower
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model         = NBPTower_D
      Animation     = NBPTower_D.NBPTower_D
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = NBPTower_E
      Animation     = NBPTower_E.NBPTower_E
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
    
    ; day Snow
    ConditionState  =  SNOW
      Model         = NBPTower_S
      Animation     = NBPTower_S.NBPTower_S
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED SNOW
      Model         = NBPTower_DS
      Animation     = NBPTower_DS.NBPTower_DS
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState  = REALLYDAMAGED RUBBLE SNOW
      Model         = NBPTower_ES
      Animation     = NBPTower_ES.NBPTower_ES
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End

    ; night
    ConditionState = NIGHT
      Model         = NBPTower_N
      Animation     = NBPTower_N.NBPTower_N
      AnimationMode = LOOP
    End 
    ConditionState = NIGHT DAMAGED
      Model         = NBPTower_DN
      Animation     = NBPTower_DN.NBPTower_DN
      AnimationMode = LOOP
    End
    ConditionState = NIGHT REALLYDAMAGED RUBBLE
      Model         = NBPTower_EN
      Animation     = NBPTower_EN.NBPTower_EN
      AnimationMode = LOOP
    End

    
    ;Snow Night
    
    ConditionState = NIGHT SNOW
      Model         = NBPTower_NS
      Animation     = NBPTower_NS.NBPTower_NS
      AnimationMode = LOOP
    End 
    
    ConditionState = NIGHT SNOW DAMAGED
      Model         = NBPTower_DNS
      Animation     = NBPTower_DNS.NBPTower_DNS
      AnimationMode = LOOP
    End 
    
    ConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
      Model         = NBPTower_ENS
      Animation     = NBPTower_ENS.NBPTower_ENS
      AnimationMode = LOOP
    End 
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBPTower
      Animation          = NBPTower.NBPTower
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBPTower_D
      Animation          = NBPTower_D.NBPTower_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBPTower_E
      Animation          = NBPTower_E.NBPTower_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBPTower_N
      Animation          = NBPTower_N.NBPTower_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBPTower_DN
      Animation          = NBPTower_DN.NBPTower_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBPTower_EN
      Animation          = NBPTower_EN.NBPTower_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBPTower_S
      Animation          = NBPTower_S.NBPTower_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBPTower_DS
      Animation          = NBPTower_DS.NBPTower_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBPTower_ES
      Animation          = NBPTower_ES.NBPTower_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBPTower_NS
      Animation          = NBPTower_NS.NBPTower_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBPTower_DNS
      Animation          = NBPTower_DNS.NBPTower_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBPTower_ENS
      Animation          = NBPTower_ENS.NBPTower_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End   
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A4
      Animation       = NBPTower_A4.NBPTower_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A4N
      Animation       = NBPTower_A4N.NBPTower_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A4S
      Animation       = NBPTower_A4S.NBPTower_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A4SN
      Animation       = NBPTower_A4SN.NBPTower_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBPTower_A4
      Animation       = NBPTower_A4.NBPTower_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBPTower_A4N
      Animation       = NBPTower_A4N.NBPTower_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBPTower_A4S
      Animation       = NBPTower_A4S.NBPTower_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBPTower_A4SN
      Animation       = NBPTower_A4SN.NBPTower_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPTower_A4
      Animation       = NBPTower_A4.NBPTower_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPTower_A4N
      Animation       = NBPTower_A4N.NBPTower_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPTower_A4S
      Animation       = NBPTower_A4S.NBPTower_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPTower_A4SN
      Animation       = NBPTower_A4SN.NBPTower_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBPTower_A6
      Animation       = NBPTower_A6.NBPTower_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPTower_A6N
      Animation       = NBPTower_A6N.NBPTower_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBPTower_A6S
      Animation       = NBPTower_A6S.NBPTower_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPTower_A6SN
      Animation       = NBPTower_A6SN.NBPTower_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBPTower_A6
      Animation       = NBPTower_A6.NBPTower_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBPTower_A6N
      Animation       = NBPTower_A6N.NBPTower_A6N
      AnimationMode   = ONCE

      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBPTower_A6S
      Animation       = NBPTower_A6S.NBPTower_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBPTower_A6SN
      Animation       = NBPTower_A6SN.NBPTower_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPTower_A6
      Animation       = NBPTower_A6.NBPTower_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPTower_A6N
      Animation       = NBPTower_A6N.NBPTower_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPTower_A6S
      Animation       = NBPTower_A6S.NBPTower_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPTower_A6SN
      Animation       = NBPTower_A6SN.NBPTower_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState    = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A5
      Animation       = NBPTower_A5.NBPTower_A5
      AnimationMode   = LOOP
      TransitionKey   = UP_DAY
    End

    ConditionState    = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A5N
      Animation       = NBPTower_A5N.NBPTower_A5N
      AnimationMode   = LOOP
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A5S
      Animation       = NBPTower_A5S.NBPTower_A5S
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A5SN
      Animation       = NBPTower_A5SN.NBPTower_A5SN
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBPTower_AB
      Animation       = NBPTower_AB.NBPTower_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBPTower_ABN
      Animation       = NBPTower_ABN.NBPTower_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBPTower_ABS
      Animation       = NBPTower_ABS.NBPTower_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBPTower_ABSN
      Animation       = NBPTower_ABSN.NBPTower_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPTower_AB
      Animation       = NBPTower_AB.NBPTower_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPTower_ABN
      Animation       = NBPTower_ABN.NBPTower_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPTower_ABS
      Animation       = NBPTower_ABS.NBPTower_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPTower_ABSN
      Animation       = NBPTower_ABSN.NBPTower_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle     = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SpeakerTower
  Side                = ChinaNukeGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 500
  BuildTime           = 10
  EnergyProduction    = -1
  VisionRange         = 200
  ShroudClearingRange = 200

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  Prerequisites
    Object = Nuke_ChinaBarracks
  End

  CommandSet          = ChinaSpeakerTowerCommandSet
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect     = SpeakerTowerSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE FS_BASE_DEFENSE POWERED IMMUNE_TO_CAPTURE MP_COUNT_FOR_VICTORY

  Body            = StructureBody ModuleTag_05
    MaxHealth     = 300.0
    InitialHealth = 300.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior        = PropagandaTowerBehavior ModuleTag_06
    Radius                = 150.0
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 2%   ; get this % of max health every second 
    PulseFX               = FX_PropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 4%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_PropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
  End

  Behavior                = StructureToppleUpdate ModuleTag_16
    StructuralIntegrity   = 0.5
    StructuralDecay       = 1.0
    DamageFXTypes         = ALL -WATER
    CrushingWeaponName    = ToppledStructureWeaponSmall
  End

  Behavior = SlowDeathBehavior ModuleTag_17
    DeathTypes = ALL
    DestructionDelay = 2700
    OCL = FINAL OCL_ABPowerPlantExplode
    FX  = FINAL FX_StructureTinyDeath
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ;-------------DESIGNED FOR TINY SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionTinyExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionTinyShockwave
  End

  Geometry             = BOX
  GeometryMajorRadius  = 6.0
  GeometryMinorRadius  = 6.0
  GeometryHeight       = 51.0
  GeometryIsSmall      = No
  Shadow               = SHADOW_VOLUME
  BuildCompletion      = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaPowerPlant

  ; *** ART Parameters ***
  SelectPortrait         = SNAdvReactor_L
  ButtonImage            = SNAdvReactor

  UpgradeCameo1 = Upgrade_ChinaIsotopeStability

  ;day
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState    = NONE
      Model           = NBPwrPtI
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = DAMAGED
      Model           = NBPwrPtI_D
      ParticleSysBone = Smoke01 SteamLarge
      ParticleSysBone = Smoke02 SteamMedium
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 FireFactionLarge
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBPwrPtI_E
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksMedium
      ParticleSysBone = Spark03 SparksSmall
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ; day overcharge
    ConditionState    = POWER_PLANT_UPGRADED
      Model           = NBPwrPtI
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksSmall
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = DAMAGED POWER_PLANT_UPGRADED
      Model           = NBPwrPtI_D
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED
      Model           = NBPwrPtI_E
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksLarge
      ParticleSysBone = Spark04 SparksLarge
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksMedium
      ParticleSysBone = Spark07 SparksSmall
    End
    
    
    ; Snow-Day
    
    ConditionState    = SNOW
      Model           = NBPwrPtI_S
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = DAMAGED SNOW
      Model           = NBPwrPtI_DS
      ParticleSysBone = Smoke01 SteamLarge
      ParticleSysBone = Smoke02 SteamMedium
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 FireFactionLarge
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = NBPwrPtI_ES
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksMedium
      ParticleSysBone = Spark03 SparksSmall
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ; day overcharge
    ConditionState    = POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPtI_S
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksSmall
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = DAMAGED POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPtI_DS
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPtI_ES
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksLarge
      ParticleSysBone = Spark04 SparksLarge
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksMedium
      ParticleSysBone = Spark07 SparksSmall
    End
    

  ;night snow
    ConditionState    = NIGHT SNOW
      Model           = NBPwrPtI_NS
      Animation       = NBPwrPtI_NS.NBPwrPtI_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = NIGHT DAMAGED SNOW
      Model           = NBPwrPtI_DNS
      Animation       = NBPwrPtI_DNS.NBPwrPtI_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = NBPwrPtI_ENS
      Animation       = NBPwrPtI_ENS.NBPwrPtI_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks
      ParticleSysBone = Spark03 LiveWireSparks
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ; night overcharge
    ConditionState    = NIGHT POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPtI_NS
      Animation       = NBPwrPtI_NS.NBPwrPtI_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksSmall
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = NIGHT DAMAGED POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPtI_DNS
      Animation       = NBPwrPtI_DNS.NBPwrPtI_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPtI_ENS
      Animation       = NBPwrPtI_ENS.NBPwrPtI_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksLarge
      ParticleSysBone = Spark04 SparksLarge
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksMedium
      ParticleSysBone = Spark07 SparksSmall
    End 
    
    
      ;night
    ConditionState    = NIGHT
      Model           = NBPwrPtI_N
      Animation       = NBPwrPtI_N.NBPwrPtI_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = NIGHT DAMAGED
      Model           = NBPwrPtI_DN
      Animation       = NBPwrPtI_DN.NBPwrPtI_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = NBPwrPtI_EN
      Animation       = NBPwrPtI_EN.NBPwrPtI_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks
      ParticleSysBone = Spark03 LiveWireSparks
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ; night overcharge
    ConditionState    = NIGHT POWER_PLANT_UPGRADED
      Model           = NBPwrPtI_N
      Animation       = NBPwrPtI_N.NBPwrPtI_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksSmall
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = NIGHT DAMAGED POWER_PLANT_UPGRADED
      Model           = NBPwrPtI_DN
      Animation       = NBPwrPtI_DN.NBPwrPtI_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT POWER_PLANT_UPGRADED
      Model           = NBPwrPtI_EN
      Animation       = NBPwrPtI_EN.NBPwrPtI_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksLarge
      ParticleSysBone = Spark04 SparksLarge
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksMedium
      ParticleSysBone = Spark07 SparksSmall
    End 
    
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBPwrPtI
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBPwrPtI_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBPwrPtI_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBPwrPtI_N
      Animation          = NBPwrPtI_N.NBPwrPtI_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBPwrPtI_DN
      Animation          = NBPwrPtI_DN.NBPwrPtI_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBPwrPtI_EN
      Animation          = NBPwrPtI_EN.NBPwrPtI_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBPwrPtI_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBPwrPtI_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBPwrPtI_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBPwrPtI_NS
      Animation          = NBPwrPtI_NS.NBPwrPtI_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBPwrPtI_DNS
      Animation          = NBPwrPtI_DNS.NBPwrPtI_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBPwrPtI_ENS
      Animation          = NBPwrPtI_ENS.NBPwrPtI_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD  POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED POWER_PLANT_UPGRADED


  End
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A4
      Animation       = NBPwrPlant_A4.NBPwrPlant_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A4N
      Animation       = NBPwrPlant_A4N.NBPwrPlant_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A4S
      Animation       = NBPwrPlant_A4S.NBPwrPlant_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A4SN
      Animation       = NBPwrPlant_A4SN.NBPwrPlant_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBPwrPlant_A4
      Animation       = NBPwrPlant_A4.NBPwrPlant_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBPwrPlant_A4N
      Animation       = NBPwrPlant_A4N.NBPwrPlant_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBPwrPlant_A4S
      Animation       = NBPwrPlant_A4S.NBPwrPlant_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBPwrPlant_A4SN
      Animation       = NBPwrPlant_A4SN.NBPwrPlant_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPwrPlant_A4
      Animation       = NBPwrPlant_A4.NBPwrPlant_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPwrPlant_A4N

      Animation       = NBPwrPlant_A4N.NBPwrPlant_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPwrPlant_A4S
      Animation       = NBPwrPlant_A4S.NBPwrPlant_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPwrPlant_A4SN
      Animation       = NBPwrPlant_A4SN.NBPwrPlant_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBPwrPlant_A6
      Animation       = NBPwrPlant_A6.NBPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPwrPlant_A6N
      Animation       = NBPwrPlant_A6N.NBPwrPlant_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBPwrPlant_A6S
      Animation       = NBPwrPlant_A6S.NBPwrPlant_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPwrPlant_A6SN
      Animation       = NBPwrPlant_A6SN.NBPwrPlant_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBPwrPlant_A6
      Animation       = NBPwrPlant_A6.NBPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBPwrPlant_A6N
      Animation       = NBPwrPlant_A6N.NBPwrPlant_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBPwrPlant_A6S
      Animation       = NBPwrPlant_A6S.NBPwrPlant_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBPwrPlant_A6SN
      Animation       = NBPwrPlant_A6SN.NBPwrPlant_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPwrPlant_A6
      Animation       = NBPwrPlant_A6.NBPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPwrPlant_A6N
      Animation       = NBPwrPlant_A6N.NBPwrPlant_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPwrPlant_A6S
      Animation       = NBPwrPlant_A6S.NBPwrPlant_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPwrPlant_A6SN
      Animation       = NBPwrPlant_A6SN.NBPwrPlant_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A5
      Animation       = NBPwrPlant_A5.NBPwrPlant_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A5N
      Animation       = NBPwrPlant_A5N.NBPwrPlant_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A5S
      Animation       = NBPwrPlant_A5S.NBPwrPlant_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A5SN
      Animation       = NBPwrPlant_A5SN.NBPwrPlant_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBPwrPlant_AB
      Animation       = NBPwrPlant_AB.NBPwrPlant_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBPwrPlant_ABN
      Animation       = NBPwrPlant_ABN.NBPwrPlant_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBPwrPlant_ABS
      Animation       = NBPwrPlant_ABS.NBPwrPlant_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBPwrPlant_ABSN
      Animation       = NBPwrPlant_ABSN.NBPwrPlant_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBPwrPlant_AB
      Animation       = NBPwrPlant_AB.NBPwrPlant_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBPwrPlant_ABN
      Animation       = NBPwrPlant_ABN.NBPwrPlant_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBPwrPlant_ABS
      Animation       = NBPwrPlant_ABS.NBPwrPlant_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBPwrPlant_ABSN
      Animation       = NBPwrPlant_ABSN.NBPwrPlant_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Nuke_NuclearReactor
  Side                = ChinaNukeGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 1200
  BuildTime           = 20
  EnergyProduction    = 18
  EnergyBonus         = 9
  VisionRange         = 200
  ShroudClearingRange = 200
  ExperienceValue  = 75 75 75 75

  WeaponSet
    Conditions = None
    Weapon     = TERTIARY SlowSelfdestructWeapon
  End

  Behavior = AIUpdateInterface ModuleTag_AI
  End

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = Nuke_ChinaPowerPlantCommandSet
 
  ; *** AUDIO Parameters ***
  VoiceSelect         = NuclearReactorSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction  = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = STRUCTURE
  KindOf        = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_POWER MP_COUNT_FOR_VICTORY

  Body = StructureBody ModuleTag_05
    MaxHealth         = 2400.0
    InitialHealth     = 2400.0
    SubdualDamageCap  = 2400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = OverchargeBehavior ModuleTag_06
    HealthPercentToDrainPerSecond    = 2% ;% of max health to drain per second
    NotAllowedWhenHealthBelowPercent = 5% ;When currHealth below this, it turns off automatically
  End
  
  Behavior = DestroyDie ModuleTag_07
  End

  Behavior = CreateObjectDie ModuleTag_08
    CreationList = OCL_ABPowerPlantExplode
  End
  Behavior = CreateObjectDie ModuleTag_Die3
    CreationList = OCL_PowerPlantDeathLightning
    ExemptStatus = UNDER_CONSTRUCTION
  End
  Behavior = FXListDie ModuleTag_Die4
    DeathFX      = FX_PowerPlantDeathLightning
    ExemptStatus = UNDER_CONSTRUCTION
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_09
    DeathWeapon = Nuke_ChinaPowerPlantDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  Behavior = ProductionUpdate ModuleTag_10
  End

  Behavior = PowerPlantUpdate ModuleTag_11
    RodsExtendTime = 1
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_12
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = FXListDie ModuleTag_16
    DeathFX = FX_BuildingDie
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaPowerPlantCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ModuleTag_25A
    CommandSet = Nuke_ChinaPowerPlantCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 34.0
  GeometryHeight      = 40.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaSupplyCenter

  ; *** ART Parameters ***
  SelectPortrait         = SNSupplyCenter_L
  ButtonImage            = SNSupplyCenter
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ;day
    ConditionState = NONE
      Model = NBSupCent
      ;Animation       = NBSupCent.NBSupCent
      ;AnimationMode   = LOOP
    End
    ConditionState = DAMAGED
      Model = NBSupCent_D
      ;Animation       = NBSupCent_D.NBSupCent_D
      ;AnimationMode   = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = NBSupCent_E
      ;Animation       = NBSupCent_E.NBSupCent_E
      ;AnimationMode   = LOOP
    End
    
    
    ConditionState = SNOW
      Model = NBSupCent_S
      ;Animation       = NBSupCent.NBSupCent
      ;AnimationMode   = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = NBSupCent_DS
      ;Animation       = NBSupCent_D.NBSupCent_D
      ;AnimationMode   = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = NBSupCent_ES
      ;Animation       = NBSupCent_E.NBSupCent_E
      ;AnimationMode   = LOOP
    End
    
    
    ConditionState = SNOW NIGHT
      Model = NBSupCent_NS
      ;Animation       = NBSupCent.NBSupCent
      ;AnimationMode   = LOOP
    End
    ConditionState = DAMAGED SNOW NIGHT
      Model = NBSupCent_DNS
      ;Animation       = NBSupCent_D.NBSupCent_D
      ;AnimationMode   = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model = NBSupCent_ENS
      ;Animation       = NBSupCent_E.NBSupCent_E
      ;AnimationMode   = LOOP
    End
    

    ConditionState = NIGHT
      Model           = NBSupCent_N
      ;Animation       = NBSupCent_N.NBSupCent_N
      ;AnimationMode   = LOOP
    End  
    ConditionState = NIGHT DAMAGED
      Model           = NBSupCent_DN

      ;Animation       = NBSupCent_N.NBSupCent_N
      ;AnimationMode   = LOOP
    End  
    ConditionState = NIGHT REALLYDAMAGED RUBBLE
      Model           = NBSupCent_EN
      ;Animation       = NBSupCent_N.NBSupCent_N
      ;AnimationMode   = LOOP
    End  
    
    
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBSupCent
      ;Animation          = NBSupCent.NBSupCent
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBSupCent_D
      ;Animation          = NBSupCent_D.NBSupCent_D
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBSupCent_E
      ;Animation          = NBSupCent_E.NBSupCent_E
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBSupCent_N
      ;Animation          = NBSupCent_N.NBSupCent_N
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBSupCent_DN
      ;Animation          = NBSupCent_DN.NBSupCent_DN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBSupCent_EN
      ;Animation          = NBSupCent_EN.NBSupCent_EN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBSupCent_S
      ;Animation          = NBSupCent_S.NBSupCent_S
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBSupCent_DS
      ;Animation          = NBSupCent_DS.NBSupCent_DS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBSupCent_ES
      ;Animation          = NBSupCent_ES.NBSupCent_ES
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBSupCent_NS
      ;Animation          = NBSupCent_NS.NBSupCent_NS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBSupCent_DNS
      ;Animation          = NBSupCent_DNS.NBSupCent_DNS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBSupCent_ENS
      ;Animation          = NBSupCent_ENS.NBSupCent_ENS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

  End
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End    
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5
      Animation       = NBSupCent_A5.NBSupCent_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5N
      Animation       = NBSupCent_A5N.NBSupCent_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5S
      Animation       = NBSupCent_A5S.NBSupCent_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5SN
      Animation       = NBSupCent_A5SN.NBSupCent_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBSupCent_AB
      Animation       = NBSupCent_AB.NBSupCent_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBSupCent_ABN
      Animation       = NBSupCent_ABN.NBSupCent_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBSupCent_ABS
      Animation       = NBSupCent_ABS.NBSupCent_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBSupCent_ABSN
      Animation       = NBSupCent_ABSN.NBSupCent_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBSupCent_AB
      Animation       = NBSupCent_AB.NBSupCent_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBSupCent_ABN
      Animation       = NBSupCent_ABN.NBSupCent_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBSupCent_ABS
      Animation       = NBSupCent_ABS.NBSupCent_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBSupCent_ABSN
      Animation       = NBSupCent_ABSN.NBSupCent_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SupplyCenter
  Side             = ChinaNukeGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 1500
  RefundValue      = 450
  BuildTime        = 24
  EnergyProduction = -1
  CommandSet       = Nuke_ChinaSupplyCenterCommandSet
  VisionRange     = 200
  ShroudClearingRange = 200
  ExperienceValue  = 75 75 75 75

  Prerequisites
    Object = Nuke_ChinaPowerPlant 
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  WeaponSet
    Conditions = None
    Weapon     = TERTIARY SlowSelfdestructWeapon
  End

  Behavior = AIUpdateInterface ModuleTag_AI
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyCenterChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CASH_GENERATOR SCORE CAPTURABLE AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY CANNOT_BUILD_NEAR_SUPPLIES FS_SUPPLY_CENTER

  Body                = StructureBody ModuleTag_05
    MaxHealth       = 1500.0
    InitialHealth   = 1500.0
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = SupplyCenterCreate ModuleTag_06
  End

  Behavior = DestroyDie ModuleTag_07
  End

  Behavior                 = CreateObjectDie ModuleTag_08
    CreationList      = OCL_SmallStructureDebris
  End

  Behavior                 = FXListDie ModuleTag_09
    DeathFX           = FX_StructureSmallDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
  End

  Behavior = SupplyCenterProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 52.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior            = SpawnBehavior ModuleTag_12
    SpawnNumber       = 1
    SpawnReplaceDelay = 9999
    SpawnTemplateName = Nuke_ChinaVehicleSupplyTruck
    OneShot           = Yes
    CanReclaimOrphans = No
    SlavesHaveFreeWill = Yes
  End

  Behavior = SupplyCenterDockUpdate ModuleTag_13
    AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
    NumberApproachPositions = -1 ; This is a Boneless dock, so this means infinite can approach
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_14
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaSupplyCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ModuleTag_25A
    CommandSet = Nuke_ChinaSupplyCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 52.0
  GeometryMinorRadius = 47.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaBarracks

  ; *** ART Parameters ***
  SelectPortrait         = SNBarracks_L
  ButtonImage            = SNBarracks
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
 
; day
    ConditionState = NONE
      Model = NBBarracks
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks.NBBarracks
      AnimationMode = LOOP
    End
  
    ConditionState = DAMAGED
      Model = NBBarracks_D
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_D.NBBarracks_D
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED RUBBLE
      Model = NBBarracks_E
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_E.NBBarracks_E
      AnimationMode = LOOP
    End
    
; day SNOW

    ConditionState = SNOW
      Model = NBBarracks_S
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_S.NBBarracks_S
      AnimationMode = LOOP
    End
  
    ConditionState = DAMAGED SNOW
      Model = NBBarracks_DS
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_DS.NBBarracks_DS
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = NBBarracks_ES
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_ES.NBBarracks_ES
      AnimationMode = LOOP
    End

  
; night
    ConditionState = NIGHT
      Model         = NBBarracks_N
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_N.NBBarracks_N
      AnimationMode = LOOP
    End  
    
    ConditionState = DAMAGED NIGHT
      Model = NBBarracks_DN
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_DN.NBBarracks_DN
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = NBBarracks_EN
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_EN.NBBarracks_EN
      AnimationMode = LOOP
    End
    
; night snow   
    ConditionState = NIGHT SNOW
      Model         = NBBarracks_NS
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_NS.NBBarracks_NS
      AnimationMode = LOOP
    End  
    
    ConditionState = DAMAGED NIGHT SNOW
      Model = NBBarracks_DNS
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_DNS.NBBarracks_DNS
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = NBBarracks_ENS
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_ENS.NBBarracks_ENS
      AnimationMode = LOOP
    End
    
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBBarracks
      Animation          = NBBarracks.NBBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBBarracks_D
      Animation          = NBBarracks_D.NBBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBBarracks_E
      Animation          = NBBarracks_E.NBBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBBarracks_N
      Animation          = NBBarracks_N.NBBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBBarracks_DN
      Animation          = NBBarracks_DN.NBBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBBarracks_EN
      Animation          = NBBarracks_EN.NBBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBBarracks_S
      Animation          = NBBarracks_S.NBBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBBarracks_DS
      Animation          = NBBarracks_DS.NBBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBBarracks_ES
      Animation          = NBBarracks_ES.NBBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBBarracks_NS
      Animation          = NBBarracks_NS.NBBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBBarracks_DNS
      Animation          = NBBarracks_DNS.NBBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBBarracks_ENS
      Animation          = NBBarracks_ENS.NBBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  
  End  
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A4
      Animation       = NBBarracks_A4.NBBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A4N
      Animation       = NBBarracks_A4N.NBBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A4S
      Animation       = NBBarracks_A4S.NBBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A4SN
      Animation       = NBBarracks_A4SN.NBBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBBarracks_A4
      Animation       = NBBarracks_A4.NBBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBBarracks_A4N
      Animation       = NBBarracks_A4N.NBBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBBarracks_A4S
      Animation       = NBBarracks_A4S.NBBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBBarracks_A4SN
      Animation       = NBBarracks_A4SN.NBBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBBarracks_A4
      Animation       = NBBarracks_A4.NBBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
     Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBBarracks_A4N
      Animation       = NBBarracks_A4N.NBBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
     Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBBarracks_A4S
      Animation       = NBBarracks_A4S.NBBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
     Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBBarracks_A4SN
      Animation       = NBBarracks_A4SN.NBBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
     Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBBarracks_A6
      Animation       = NBBarracks_A6.NBBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBBarracks_A6N
      Animation       = NBBarracks_A6N.NBBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBBarracks_A6S
      Animation       = NBBarracks_A6S.NBBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBBarracks_A6SN
      Animation       = NBBarracks_A6SN.NBBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBBarracks_A6
      Animation       = NBBarracks_A6.NBBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBBarracks_A6N
      Animation       = NBBarracks_A6N.NBBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBBarracks_A6S
      Animation       = NBBarracks_A6S.NBBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBBarracks_A6SN
      Animation       = NBBarracks_A6SN.NBBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBBarracks_A6
      Animation       = NBBarracks_A6.NBBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBBarracks_A6N
      Animation       = NBBarracks_A6N.NBBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBBarracks_A6S
      Animation       = NBBarracks_A6S.NBBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBBarracks_A6SN
      Animation       = NBBarracks_A6SN.NBBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A5
      Animation       = NBBarracks_A5.NBBarracks_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A5N
      Animation       = NBBarracks_A5N.NBBarracks_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A5S
      Animation       = NBBarracks_A5S.NBBarracks_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A5SN
      Animation       = NBBarracks_A5SN.NBBarracks_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBBarracks_AB
      Animation       = NBBarracks_AB.NBBarracks_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBBarracks_ABN
      Animation       = NBBarracks_ABN.NBBarracks_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBBarracks_ABS
      Animation       = NBBarracks_ABS.NBBarracks_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBBarracks_ABSN
      Animation       = NBBarracks_ABSN.NBBarracks_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBBarracks_AB
      Animation       = NBBarracks_AB.NBBarracks_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBBarracks_ABN
      Animation       = NBBarracks_ABN.NBBarracks_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBBarracks_ABS
      Animation       = NBBarracks_ABS.NBBarracks_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBBarracks_ABSN
      Animation       = NBBarracks_ABSN.NBBarracks_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Barracks
  Side             = ChinaNukeGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 800
  BuildTime        = 16
  EnergyProduction = 0
  CommandSet       = Nuke_ChinaBarracksCommandSet
  VisionRange      = 200
  ShroudClearingRange = 200
  ExperienceValue  = 75 75 75 75

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE HEAL_PAD SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY FS_BARRACKS
  Body            = StructureBody ModuleTag_05
    MaxHealth     = 1600.0
    InitialHealth = 1600.0
    SubdualDamageCap = 1600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = HealContain ModuleTag_06
    ContainMax          = 10 ;way bigger than the # of objects we can have  
    TimeForFullHeal     = 2000   ;(in milliseconds)
    AllowInsideKindOf   = INFANTRY
    AllowAlliesInside   = Yes
    AllowNeutralInside  = No
    AllowEnemiesInside  = No
  End

  Behavior = DestroyDie ModuleTag_07
  End

  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End 

  Behavior = ProductionUpdate ModuleTag_10
  End

  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  -25.0   Z:0.0
    NaturalRallyPoint = X: 36.0  Y:  -25.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
    ExitDelay = 300 ; Mainly for the multiple produced Red Guard.  Make them come out one at a time.
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_12
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaBarracksCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ModuleTag_25A
    CommandSet = Nuke_ChinaBarracksCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 36.0
  GeometryMinorRadius = 44.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End


;------------------------------------------------------------------------------
Object Nuke_ChinaWarFactory

  ; *** ART Parameters ***
  SelectPortrait         = SNWarFact_L
  ButtonImage            = SNWarFact

  ; ------------ the main factory itself -----------------
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    DefaultConditionState
      Model           = NBWarFact  
      ParticleSysBone = Smoke01 UpperSteamVent
    End
    ConditionState    = DAMAGED
      Model           = NBWarFact_D
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBWarFact_E
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
      ParticleSysBone = Fire03  SmolderingFire
      ParticleSysBone = Fire03  SmolderingFlameCore
    End
    
    ConditionState    = SNOW
      Model           = NBWarFact_S  
      ParticleSysBone = Smoke01 UpperSteamVent
    End
    ConditionState = DAMAGED SNOW
      Model           = NBWarFact_DS
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model           = NBWarFact_ES
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
      ParticleSysBone = Fire03  SmolderingFire
      ParticleSysBone = Fire03  SmolderingFlameCore
    End

    ; night **********************************************
    ConditionState  = NIGHT
      Model           = NBWarFact_N     
      ParticleSysBone = Smoke01 UpperSteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = NBWarFact_DN
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = NBWarFact_EN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
      ParticleSysBone = Fire03  SmolderingFire
      ParticleSysBone = Fire03  SmolderingFlameCore
    End
        
    ; night   SNOW
    ConditionState = NIGHT SNOW
      Model           = NBWarFact_NS   
      ParticleSysBone = Smoke01 UpperSteamVent
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model           = NBWarFact_DNS
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = NBWarFact_ENS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
      ParticleSysBone = Fire03  SmolderingFire
      ParticleSysBone = Fire03  SmolderingFlameCore
    End
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBWarFact
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBWarFact_D
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBWarFact_E
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBWarFact_N
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBWarFact_DN
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBWarFact_EN
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBWarFact_S
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBWarFact_DS
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBWarFact_ES
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBWarFact_NS
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBWarFact_DNS
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBWarFact_ENS
      ParticleSysBone = Smoke01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End
  
  ; ------------------ the construction crane ------------
  Draw                   = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    ConditionState       = None
      Model              = NBWarFact_A1
      Animation          = NBWarFact_A1.NBWarFact_A1
      AnimationMode      = LOOP
      WaitForStateToFinishIfPossible = TransitionFinishBeforeSwitch
    End
    ConditionState       = DAMAGED
      Model              = NBWarFact_A1D
      Animation          = NBWarFact_A1D.NBWarFact_A1D
      AnimationMode      = LOOP
      WaitForStateToFinishIfPossible = TransitionFinishBeforeSwitch
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = NBWarFact_A1E
      Animation          = NBWarFact_A1E.NBWarFact_A1E
      AnimationMode      = LOOP
      WaitForStateToFinishIfPossible = TransitionFinishBeforeSwitch
    End
    ConditionState       = ACTIVELY_CONSTRUCTING
      Model              = NBWarFact_A2
      Animation          = NBWarFact_A2.NBWarFact_A2
      AnimationMode      = ONCE
      TransitionKey      = TransitionFinishBeforeSwitch
    End
    ConditionState       = ACTIVELY_CONSTRUCTING DAMAGED
      Model              = NBWarFact_A2D
      Animation          = NBWarFact_A2D.NBWarFact_A2D
      AnimationMode      = ONCE
      TransitionKey      = TransitionFinishBeforeSwitch
    End
    ConditionState       = ACTIVELY_CONSTRUCTING REALLYDAMAGED RUBBLE
      Model              = NBWarFact_A2E
      Animation          = NBWarFact_A2E.NBWarFact_A2E
      AnimationMode      = ONCE
      TransitionKey      = TransitionFinishBeforeSwitch
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBWarFact_A1
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = SOLD DAMAGED REALLYDAMAGED RUBBLE
      Model              = NONE
    End
  End


  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                 = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = NIGHT
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = SNOW
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = SNOW NIGHT
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_DAY
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState     = NIGHT PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_NIGHT
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState     = SNOW PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_SNOW
      ParticleSysBone  = Dust01 BuildingSnowDust
      ParticleSysBone  = Smoke01 BuildUpSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpSnowSmoke
    End
    ConditionState     = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_SNOWNIGHT
      ParticleSysBone  = Dust01 BuildingNightSnowDust
      ParticleSysBone  = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState    = DOWN_DEFAULT UP_DAY
     Model             = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_NIGHT
     Model             = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_SNOW
     Model             = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_SNOWNIGHT
     Model             = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = UP_DAY DOWN_DEFAULT
      Model            = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_NIGHT DOWN_DEFAULT
      Model            = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_SNOW DOWN_DEFAULT
      Model            = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
  End

  ; ------------------ the construction conveyor belt ------------
  Draw = W3DModelDraw ModuleTag_05
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = NBWarFact_A7
      Animation       = NBWarFact_A7.NBWarFact_A7
      AnimationMode   = LOOP
    ;  Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE
    
    ConditionState    = ACTIVELY_CONSTRUCTING
      Model           = NBWarFact_A7
      Animation       = NBWarFact_A7.NBWarFact_A7
      AnimationMode   = LOOP
    ;  Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW NIGHT ACTIVELY_CONSTRUCTING
    AliasConditionState = NIGHT DAMAGED ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW DAMAGED ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW NIGHT DAMAGED ACTIVELY_CONSTRUCTING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE ACTIVELY_CONSTRUCTING


    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBWarFact_A7
      Animation          = NBWarFact_A7.NBWarFact_A7
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

  End

  ; ----------------- the factory door -------------------
  Draw = W3DModelDraw ModuleTag_06
    DefaultConditionState
      Model           = NBWarFact_A8
      Animation       = NBWarFact_A8.NBWarFact_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW

    ConditionState    = DAMAGED
      Model           = NBWarFact_A8D
      Animation       = NBWarFact_A8D.NBWarFact_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBWarFact_A8E
      Animation       = NBWarFact_A8E.NBWarFact_A8E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = NBWarFact_A8
      Animation       = NBWarFact_A8.NBWarFact_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End  
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
     

    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = NBWarFact_A8D
      Animation       = NBWarFact_A8D.NBWarFact_A8D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
   End   
   AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
   AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
   AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED

    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = NBWarFact_A8E
      Animation       = NBWarFact_A8E.NBWarFact_A8E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_CLOSING
      Model           = NBWarFact_A8
      Animation       = NBWarFact_A8.NBWarFact_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    

    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = NBWarFact_A8D
      Animation       = NBWarFact_A8D.NBWarFact_A8D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED

    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = NBWarFact_A8E
      Animation       = NBWarFact_A8E.NBWarFact_A8E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBWarFact_A8
      Animation       = NBWarFact_A8.NBWarFact_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
     

    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = NBWarFact_A8D
      Animation       = NBWarFact_A8D.NBWarFact_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED

    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = NBWarFact_A8E
      Animation       = NBWarFact_A8E.NBWarFact_A8E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBWarFact_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBWarFact_A8D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBWarFact_A8E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

    
    
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A5
      Animation       = NBWarFact_A5.NBWarFact_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A5N
      Animation       = NBWarFact_A5N.NBWarFact_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End

    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A5S
      Animation       = NBWarFact_A5S.NBWarFact_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A5SN
      Animation       = NBWarFact_A5SN.NBWarFact_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBWarFact_AB
      Animation       = NBWarFact_AB.NBWarFact_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBWarFact_ABN
      Animation       = NBWarFact_ABN.NBWarFact_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBWarFact_ABS
      Animation       = NBWarFact_ABS.NBWarFact_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBWarFact_ABSN
      Animation       = NBWarFact_ABSN.NBWarFact_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBWarFact_AB
      Animation       = NBWarFact_AB.NBWarFact_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBWarFact_ABN
      Animation       = NBWarFact_ABN.NBWarFact_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBWarFact_ABS
      Animation       = NBWarFact_ABS.NBWarFact_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBWarFact_ABSN
      Animation       = NBWarFact_ABSN.NBWarFact_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:WarFactory
  Side             = ChinaNukeGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 2000
  BuildTime        = 40
  EnergyProduction = -1
  CommandSet       = Nuke_ChinaWarFactoryCommandSet
  VisionRange      = 200
  ShroudClearingRange = 200
  ExperienceValue  = 100 100 100 100

  Prerequisites
    Object = Nuke_ChinaSupplyCenter
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY FS_WARFACTORY

  Body            = StructureBody ModuleTag_08
    MaxHealth       = 4000.0
    InitialHealth   = 4000.0
    SubdualDamageCap = 4000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DestroyDie ModuleTag_09
  End

  Behavior             = CreateObjectDie ModuleTag_10
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior             = FXListDie ModuleTag_11
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = ProductionUpdate ModuleTag_12
    NumDoorAnimations            = 1
    DoorOpeningTime              = 4000  ;in mSeconds
    DoorWaitOpenTime             = 2000  ;in mSeconds
    DoorCloseTime                = 5000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_13
    UnitCreatePoint   = X:  0.0  Y:-27.0   Z:0.0
    NaturalRallyPoint = X: 57.0  Y:-27.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = RepairDockUpdate ModuleTag_14
    TimeForFullHeal   = 5000   ;(in milliseconds)     
    NumberApproachPositions = 5
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_22
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = TransitionDamageFX ModuleTag_23
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaWarFactoryCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ModuleTag_25A
    CommandSet = Nuke_ChinaWarFactoryCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 57.0
  GeometryMinorRadius = 61.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaPropagandaCenter

  ; *** ART Parameters ***
  SelectPortrait         = SNPropCentr_L
  ButtonImage            = SNPropCentr

  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging

  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ;day
    ConditionState       = NONE
      Model              = NBPCenter
      Animation          = NBPCenter.NBPCenter
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED
      Model              = NBPCenter_D
      Animation          = NBPCenter_D.NBPCenter_D
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = NBPCenter_E
      Animation          = NBPCenter_E.NBPCenter_E
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
;      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
;     ParticleSysBone    = Spark01 
    End 

    ;night
    ConditionState       = NIGHT
      Model              = NBPCenter_N
      Animation          = NBPCenter_N.NBPCenter_N
      AnimationMode      = LOOP
    End
    ;damaged
    ConditionState       = DAMAGED NIGHT
      Model              = NBPCenter_DN
      Animation          = NBPCenter_DN.NBPCenter_DN
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ;reallydamaged
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = NBPCenter_EN
      Animation          = NBPCenter_EN.NBPCenter_EN
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
;      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
;      ParticleSysBone    = Spark01 
    End 

    ConditionState       = SNOW
      Model              = NBPCenter_S
      Animation          = NBPCenter_S.NBPCenter_S
      AnimationMode      = LOOP
    End
        ;damaged
    ConditionState       = DAMAGED SNOW
      Model              = NBPCenter_DS
      Animation          = NBPCenter_DS.NBPCenter_DS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ;reallydamaged
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = NBPCenter_ES
      Animation          = NBPCenter_ES.NBPCenter_ES
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
;      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
;      ParticleSysBone    = Spark01 
    End 

    ;night
    ConditionState       = NIGHT SNOW
      Model              = NBPCenter_NS
      Animation          = NBPCenter_NS.NBPCenter_NS
      AnimationMode      = LOOP
    End
    ;damaged
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = NBPCenter_DNS
      Animation          = NBPCenter_DNS.NBPCenter_DNS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ;reallydamaged
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = NBPCenter_ENS
      Animation          = NBPCenter_ENS.NBPCenter_ENS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
;      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
;      ParticleSysBone    = Spark01 
    End 
    
    
    
    
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBPCenter
      Animation          = NBPCenter.NBPCenter
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBPCenter_D
      Animation          = NBPCenter_D.NBPCenter_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBPCenter_E
      Animation          = NBPCenter_E.NBPCenter_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBPCenter_N
      Animation          = NBPCenter_N.NBPCenter_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBPCenter_DN
      Animation          = NBPCenter_DN.NBPCenter_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBPCenter_EN
      Animation          = NBPCenter_EN.NBPCenter_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBPCenter_S
      Animation          = NBPCenter_S.NBPCenter_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBPCenter_DS
      Animation          = NBPCenter_DS.NBPCenter_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBPCenter_ES
      Animation          = NBPCenter_ES.NBPCenter_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBPCenter_NS
      Animation          = NBPCenter_NS.NBPCenter_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBPCenter_DNS
      Animation          = NBPCenter_DNS.NBPCenter_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBPCenter_ENS
      Animation          = NBPCenter_ENS.NBPCenter_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED





  End  
 
  ; ----------------- the factory door -------------------
  Draw                = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = NBPCenter_A1
      Animation       = NBPCenter_A1.NBPCenter_A1
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED
    AliasConditionState = SNOW REALLYDAMAGED
    AliasConditionState = NIGHT SNOW REALLYDAMAGED


    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED RUBBLE
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A1
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT SNOW DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT REALLYDAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW REALLYDAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT SNOW REALLYDAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    
;    ConditionState    = DAMAGED
;      Model           = NBPCenter_A1D
;      Animation       = NBPCenter_A1D.NBPCenter_A1D
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_FIRST
;    End
;    ConditionState    = REALLYDAMAGED RUBBLE
;      Model           = NBPCenter_A1E
;      Animation       = NBPCenter_A1E.NBPCenter_A1E
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_FIRST
;    End

    ConditionState    = DOOR_1_OPENING
      Model           = NBPCenter_A1
      Animation       = NBPCenter_A1.NBPCenter_A1
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW REALLYDAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED DOOR_1_OPENING
    
    
;    ConditionState    = DOOR_1_OPENING DAMAGED
;      Model           = NBPCenter_A1D
;      Animation       = NBPCenter_A1D.NBPCenter_A1D
;      AnimationMode   = ONCE
;      Flags           = START_FRAME_FIRST
;    End   
;    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
;      Model           = NBPCenter_A1E
;      Animation       = NBPCenter_A1E.NBPCenter_A1E
;      AnimationMode   = ONCE
;      Flags           = START_FRAME_FIRST
;    End

    ConditionState    = DOOR_1_CLOSING
      Model           = NBPCenter_A1
      Animation       = NBPCenter_A1.NBPCenter_A1
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED DOOR_1_CLOSING
    
;    ConditionState    = DOOR_1_CLOSING DAMAGED
;      Model           = NBPCenter_A1D
;      Animation       = NBPCenter_A1D.NBPCenter_A1D
;      AnimationMode   = ONCE_BACKWARDS
;      Flags           = START_FRAME_LAST
;    End   
;    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
;      Model           = NBPCenter_A1E
;      Animation       = NBPCenter_A1E.NBPCenter_A1E
;      AnimationMode   = ONCE_BACKWARDS
;      Flags           = START_FRAME_LAST
;    End   

    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBPCenter_A1
      Animation       = NBPCenter_A1.NBPCenter_A1
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW REALLYDAMAGED DOOR_1_WAITING_OPEN
       
;    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
;      Model           = NBPCenter_A1D
;      Animation       = NBPCenter_A1D.NBPCenter_A1D
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_LAST
;    End   
;    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
;      Model           = NBPCenter_A1E
;      Animation       = NBPCenter_A1E.NBPCenter_A1E
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_LAST
;    End   
  End

  ; -------- spreading propaganda flashing lights ----------
  Draw = W3DModelDraw ModuleTag_03
    DefaultConditionState
      Model           = None
    End
    ConditionState    = SOLD
      Model           = NONE
    End    
    ConditionState    = SOLD SNOW
       Model          = NONE
    End   
    ConditionState    = SOLD NIGHT
       Model          = NONE
    End    
    ConditionState    = SOLD NIGHT SNOW
       Model          = NONE
    End   
    ConditionState    = CONSTRUCTION_COMPLETE
      Model           = NBPCenter_A2
      Animation       = NBPCenter_A2.NBPCenter_A2
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
    End  
  End
     
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A4
      Animation       = NBPCenter_A4.NBPCenter_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A4N
      Animation       = NBPCenter_A4N.NBPCenter_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A4S
      Animation       = NBPCenter_A4S.NBPCenter_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A4SN
      Animation       = NBPCenter_A4SN.NBPCenter_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBPCenter_A4
      Animation       = NBPCenter_A4.NBPCenter_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBPCenter_A4N
      Animation       = NBPCenter_A4N.NBPCenter_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBPCenter_A4S
      Animation       = NBPCenter_A4S.NBPCenter_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBPCenter_A4SN
      Animation       = NBPCenter_A4SN.NBPCenter_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPCenter_A4
      Animation       = NBPCenter_A4.NBPCenter_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPCenter_A4N
      Animation       = NBPCenter_A4N.NBPCenter_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPCenter_A4S
      Animation       = NBPCenter_A4S.NBPCenter_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPCenter_A4SN
      Animation       = NBPCenter_A4SN.NBPCenter_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBPCenter_A6
      Animation       = NBPCenter_A6.NBPCenter_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPCenter_A6N
      Animation       = NBPCenter_A6N.NBPCenter_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBPCenter_A6S
      Animation       = NBPCenter_A6S.NBPCenter_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPCenter_A6SN
      Animation       = NBPCenter_A6SN.NBPCenter_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBPCenter_A6
      Animation       = NBPCenter_A6.NBPCenter_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBPCenter_A6N
      Animation       = NBPCenter_A6N.NBPCenter_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBPCenter_A6S
      Animation       = NBPCenter_A6S.NBPCenter_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBPCenter_A6SN
      Animation       = NBPCenter_A6SN.NBPCenter_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End 
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPCenter_A6
      Animation       = NBPCenter_A6.NBPCenter_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPCenter_A6N
      Animation       = NBPCenter_A6N.NBPCenter_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPCenter_A6S
      Animation       = NBPCenter_A6S.NBPCenter_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPCenter_A6SN
      Animation       = NBPCenter_A6SN.NBPCenter_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A5
      Animation       = NBPCenter_A5.NBPCenter_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A5N
      Animation       = NBPCenter_A5N.NBPCenter_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A5S
      Animation       = NBPCenter_A5S.NBPCenter_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A5SN
      Animation       = NBPCenter_A5SN.NBPCenter_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBPCenter_AB
      Animation       = NBPCenter_AB.NBPCenter_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBPCenter_ABN
      Animation       = NBPCenter_ABN.NBPCenter_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBPCenter_ABS
      Animation       = NBPCenter_ABS.NBPCenter_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBPCenter_ABSN
      Animation       = NBPCenter_ABSN.NBPCenter_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBPCenter_AB
      Animation       = NBPCenter_AB.NBPCenter_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBPCenter_ABN
      Animation       = NBPCenter_ABN.NBPCenter_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBPCenter_ABS
      Animation       = NBPCenter_ABS.NBPCenter_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBPCenter_ABSN
      Animation       = NBPCenter_ABSN.NBPCenter_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:PropagandaCenter
  Side                = ChinaNukeGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 2000
  BuildTime           = 40
  EnergyProduction    = -2
  VisionRange         = 200
  ShroudClearingRange = 200
  ExperienceValue  = 100 100 100 100
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction

  Prerequisites
    Object  = Nuke_ChinaWarFactory
    Science = SCIENCE_Rank3
  End

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = Nuke_ChinaPropagandaCenterCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = PropagandaCenterSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY FS_ADVANCED_TECH POWERED

  Body            = StructureBody ModuleTag_07
    MaxHealth     = 2500.0
    InitialHealth = 2500.0
    SubdualDamageCap = 2500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = ProductionUpdate ModuleTag_10
  End

  Behavior = DestroyDie ModuleTag_12
  End

  Behavior  = FXListDie ModuleTag_14
    DeathFX = FX_StructureMediumDeath
  End

  Behavior                = GenerateMinefieldBehavior ModuleTag_15
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_17
    AflameDuration = 8000    ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay  = 500     ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaPropagandaCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ModuleTag_25A
    CommandSet = Nuke_ChinaPropagandaCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Behavior        = PropagandaTowerBehavior ModuleTag_06Prop
    Radius                = 150.0
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 2%   ; get this % of max health every second 
    PulseFX               = FX_PropagandaCenterPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 4%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_PropagandaCenterSubliminalPulse ;plays as often as DelayBetweenUpdates
  End

  Geometry            = BOX
  GeometryMajorRadius = 33.0
  GeometryMinorRadius = 57.0
  GeometryHeight      = 40.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInternetCenter

  ; *** ART Parameters ***
  ; ------------ the main building itself -----------------
  SelectPortrait         = SNIntCnt_L
  ButtonImage            = SNIntCnt

  UpgradeCameo1 = Upgrade_ChinaSatelliteHackOne
  UpgradeCameo2 = Upgrade_ChinaSatelliteHackTwo

  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ; DAY ************************************
    DefaultConditionState
      Model              = NBINTCNT
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState = USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2
      Animation = NBINTCNT_A2.NBINTCNT_A2
      AnimationMode = ONCE
    End

    ConditionState = USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2F
      Animation = NBINTCNT_A2F.NBINTCNT_A2F
      AnimationMode = ONCE
    End

    ConditionState       = DAMAGED
      Model              = NBINTCNT_D
    End

    ConditionState = DAMAGED USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2D
      Animation = NBINTCNT_A2D.NBINTCNT_A2D
      AnimationMode = ONCE
    End

    ConditionState = DAMAGED USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FD
      Animation = NBINTCNT_A2FD.NBINTCNT_A2FD
      AnimationMode = ONCE
    End

    ConditionState       = REALLYDAMAGED
      Model              = NBINTCNT_E
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
    End
    AliasConditionState = RUBBLE

    ConditionState = REALLYDAMAGED USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2E
      Animation = NBINTCNT_A2E.NBINTCNT_A2E
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE USER_1

    ConditionState = REALLYDAMAGED USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FE
      Animation = NBINTCNT_A2FE.NBINTCNT_A2FE
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE USER_1 USER_2

    ;NIGHT ***********************************
    ConditionState       = NIGHT
      Model              = NBINTCNT_N
    End

    ConditionState = NIGHT USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2N
      Animation = NBINTCNT_A2N.NBINTCNT_A2N
      AnimationMode = ONCE
    End

    ConditionState = NIGHT USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FN
      Animation = NBINTCNT_A2FN.NBINTCNT_A2FN
      AnimationMode = ONCE
    End

    ConditionState       = DAMAGED NIGHT
      Model              = NBINTCNT_DN
    End

    ConditionState = DAMAGED NIGHT USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2DN
      Animation = NBINTCNT_A2DN.NBINTCNT_A2DN
      AnimationMode = ONCE
    End

    ConditionState = DAMAGED NIGHT USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FDN
      Animation = NBINTCNT_A2FDN.NBINTCNT_A2FDN
      AnimationMode = ONCE
    End

    ConditionState    = REALLYDAMAGED NIGHT
      Model           = NBINTCNT_EN
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
    End
    AliasConditionState = RUBBLE NIGHT

    ConditionState = REALLYDAMAGED NIGHT USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2EN
      Animation = NBINTCNT_A2EN.NBINTCNT_A2EN
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE NIGHT USER_1

    ConditionState = REALLYDAMAGED NIGHT USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FEN
      Animation = NBINTCNT_A2FEN.NBINTCNT_A2FEN
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE NIGHT USER_1 USER_2
    
    ;SNOW *************************************
    ConditionState       = SNOW
      Model              = NBINTCNT_S
    End

    ConditionState = SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2S
      Animation = NBINTCNT_A2S.NBINTCNT_A2S
      AnimationMode = ONCE
    End

    ConditionState = SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FS
      Animation = NBINTCNT_A2FS.NBINTCNT_A2FS
      AnimationMode = ONCE
    End

    ConditionState       = DAMAGED SNOW
      Model              = NBINTCNT_DS
    End

    ConditionState = DAMAGED SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2DS
      Animation = NBINTCNT_A2DS.NBINTCNT_A2DS
      AnimationMode = ONCE
    End

    ConditionState = DAMAGED SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FDS
      Animation = NBINTCNT_A2FDS.NBINTCNT_A2FDS
      AnimationMode = ONCE
    End

    ConditionState       = REALLYDAMAGED SNOW
      Model              = NBINTCNT_ES
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
    End
    AliasConditionState = RUBBLE SNOW

    ConditionState = REALLYDAMAGED SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2ES
      Animation = NBINTCNT_A2ES.NBINTCNT_A2ES
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE SNOW USER_1

    ConditionState = REALLYDAMAGED SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FES
      Animation = NBINTCNT_A2FES.NBINTCNT_A2FES
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE SNOW USER_1 USER_2

    ;NIGHT SNOW *****************************
    ConditionState       = NIGHT SNOW
      Model              = NBINTCNT_NS
    End

    ConditionState = NIGHT SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2NS
      Animation = NBINTCNT_A2NS.NBINTCNT_A2NS
      AnimationMode = ONCE
    End

    ConditionState = NIGHT SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FNS
      Animation = NBINTCNT_A2FNS.NBINTCNT_A2FNS
      AnimationMode = ONCE
    End

    ConditionState       = DAMAGED NIGHT SNOW
      Model              = NBINTCNT_DNS
    End

    ConditionState = DAMAGED NIGHT SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2DNS
      Animation = NBINTCNT_A2DNS.NBINTCNT_A2DNS
      AnimationMode = ONCE
    End

    ConditionState = DAMAGED NIGHT SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FDNS
      Animation = NBINTCNT_A2FDNS.NBINTCNT_A2FDNS
      AnimationMode = ONCE
    End

    ConditionState    = REALLYDAMAGED NIGHT SNOW
      Model           = NBINTCNT_ENS
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
    End   
    AliasConditionState = RUBBLE NIGHT SNOW

    ConditionState = REALLYDAMAGED NIGHT SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2ENS
      Animation = NBINTCNT_A2ENS.NBINTCNT_A2ENS
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE NIGHT SNOW USER_1

    ConditionState = REALLYDAMAGED NIGHT SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FENS
      Animation = NBINTCNT_A2FENS.NBINTCNT_A2FENS
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE NIGHT SNOW USER_1 USER_2
    

    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBINTCNT
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBINTCNT_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBINTCNT_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBINTCNT_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBINTCNT_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBINTCNT_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBINTCNT_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBINTCNT_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBINTCNT_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBINTCNT_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBINTCNT_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBINTCNT_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = SOLD  USER_1 USER_2
    AliasConditionState  = SOLD DAMAGED USER_1 USER_2
    AliasConditionState  = SOLD REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = SOLD NIGHT USER_1 USER_2
    AliasConditionState  = SOLD NIGHT DAMAGED USER_1 USER_2
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = SOLD SNOW USER_1 USER_2
    AliasConditionState  = SOLD SNOW DAMAGED USER_1 USER_2
    AliasConditionState  = SOLD SNOW REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = SOLD NIGHT SNOW USER_1 USER_2
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED USER_1 USER_2
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED USER_1 USER_2
  End

  ; ------------ Fan in back --------------
  Draw = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = NBINTCNT_F
      Animation = NBINTCNT_F.NBINTCNT_F
      AnimationMode = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
  End


  ; ------------- First Satellite -----------
  Draw = W3DModelDraw ModuleTag_03
    ConditionState = NONE
      Model           = None
      TransitionKey = Trans_Down
    End
    AliasConditionState = SOLD
    AliasConditionState = AWAITING_CONSTRUCTION
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1

    ConditionState = DAMAGED
      Model           = None
      TransitionKey = Trans_Down_Damaged
    End
    AliasConditionState = SOLD DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1 DAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1 DAMAGED

    ConditionState = REALLYDAMAGED
      Model           = None
      TransitionKey = Trans_Down_Really_Damaged
    End
    AliasConditionState = SOLD REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1 REALLYDAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1 REALLYDAMAGED


    TransitionState = Trans_Down Trans_Up
      Model           = NBINTCNT_AB
      Animation = NBINTCNT_AB.NBINTCNT_AB
      AnimationMode = ONCE
    End
    TransitionState = Trans_Down_Damaged Trans_Up_Damaged
      Model           = NBINTCNT_DAB
      Animation = NBINTCNT_DAB.NBINTCNT_DAB
      AnimationMode = ONCE
    End
    TransitionState = Trans_Down_Really_Damaged Trans_Up_Really_Damaged
      Model           = NBINTCNT_EAB
      Animation = NBINTCNT_EAB.NBINTCNT_EAB
      AnimationMode = ONCE
    End


    ConditionState = USER_1
      Model           = NBINTCNT_AC
      Animation = NBINTCNT_AC.NBINTCNT_AC
      AnimationMode = LOOP
      TransitionKey = Trans_Up
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState = USER_1 DAMAGED
      Model           = NBINTCNT_DAC
      Animation = NBINTCNT_DAC.NBINTCNT_DAC
      AnimationMode = LOOP
      TransitionKey = Trans_Up_Damaged
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState = USER_1 REALLYDAMAGED
      Model           = NBINTCNT_EAC
      Animation = NBINTCNT_EAC.NBINTCNT_EAC
      AnimationMode = LOOP
      TransitionKey = Trans_Up_Really_Damaged
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End


    TransitionState = Trans_Up Trans_Down
      Model           = NBINTCNT_AB
      Animation = NBINTCNT_AB.NBINTCNT_AB
      AnimationMode = ONCE_BACKWARDS
    End
    TransitionState = Trans_Up_Damaged Trans_Down_Damaged
      Model           = NBINTCNT_DAB
      Animation = NBINTCNT_DAB.NBINTCNT_DAB
      AnimationMode = ONCE_BACKWARDS
    End
    TransitionState = Trans_Up_Really_Damaged Trans_Down_Really_Damaged
      Model           = NBINTCNT_EAB
      Animation = NBINTCNT_EAB.NBINTCNT_EAB
      AnimationMode = ONCE_BACKWARDS
    End
  End

  ; ------------- Second Satellite -----------
  Draw = W3DModelDraw ModuleTag_04
    ConditionState = NONE
      Model           = None
      TransitionKey = Trans_Down
    End
    AliasConditionState = SOLD
    AliasConditionState = AWAITING_CONSTRUCTION
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1

    ConditionState = DAMAGED
      Model           = None
      TransitionKey = Trans_Down_Damaged
    End
    AliasConditionState = SOLD DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1 DAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1 DAMAGED

    ConditionState = REALLYDAMAGED
      Model           = None
      TransitionKey = Trans_Down_Really_Damaged
    End
    AliasConditionState = SOLD REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1 REALLYDAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1 REALLYDAMAGED


    TransitionState = Trans_Down Trans_Up
      Model           = NBINTCNT_AF
      Animation = NBINTCNT_AF.NBINTCNT_AF
      AnimationMode = ONCE
    End
    TransitionState = Trans_Down_Damaged Trans_Up_Damaged
      Model           = NBINTCNT_DAF
      Animation = NBINTCNT_DAF.NBINTCNT_DAF
      AnimationMode = ONCE
    End
    TransitionState = Trans_Down_Really_Damaged Trans_Up_Really_Damaged
      Model           = NBINTCNT_EAF
      Animation = NBINTCNT_EAF.NBINTCNT_EAF
      AnimationMode = ONCE
    End

    ConditionState = USER_2
      Model           = NBINTCNT_AG
      Animation = NBINTCNT_AG.NBINTCNT_AG
      AnimationMode = LOOP
      TransitionKey = Trans_Up
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState = USER_2 DAMAGED
      Model           = NBINTCNT_DAG
      Animation = NBINTCNT_DAG.NBINTCNT_DAG
      AnimationMode = LOOP
      TransitionKey = Trans_Up_Damaged
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState = USER_2 REALLYDAMAGED
      Model           = NBINTCNT_EAG
      Animation = NBINTCNT_EAG.NBINTCNT_EAG
      AnimationMode = LOOP
      TransitionKey = Trans_Up_Really_Damaged
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End

    TransitionState = Trans_Up Trans_Down
      Model           = NBINTCNT_AF
      Animation = NBINTCNT_AF.NBINTCNT_AF
      AnimationMode = ONCE_BACKWARDS
    End
    TransitionState = Trans_Up_Damaged Trans_Down_Damaged
      Model           = NBINTCNT_DAF
      Animation = NBINTCNT_DAF.NBINTCNT_DAF
      AnimationMode = ONCE_BACKWARDS
    End
    TransitionState = Trans_Up_Really_Damaged Trans_Down_Really_Damaged
      Model           = NBINTCNT_EAF
      Animation = NBINTCNT_EAF.NBINTCNT_EAF
      AnimationMode = ONCE_BACKWARDS
    End

  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End    
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5
      Animation       = NBSupCent_A5.NBSupCent_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5N
      Animation       = NBSupCent_A5N.NBSupCent_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5S
      Animation       = NBSupCent_A5S.NBSupCent_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5SN
      Animation       = NBSupCent_A5SN.NBSupCent_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBSupCent_AB
      Animation       = NBSupCent_AB.NBSupCent_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBSupCent_ABN
      Animation       = NBSupCent_ABN.NBSupCent_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBSupCent_ABS
      Animation       = NBSupCent_ABS.NBSupCent_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBSupCent_ABSN
      Animation       = NBSupCent_ABSN.NBSupCent_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBSupCent_AB
      Animation       = NBSupCent_AB.NBSupCent_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBSupCent_ABN
      Animation       = NBSupCent_ABN.NBSupCent_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBSupCent_ABS
      Animation       = NBSupCent_ABS.NBSupCent_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBSupCent_ABSN
      Animation       = NBSupCent_ABSN.NBSupCent_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:InternetCenter
  Side              = ChinaNukeGeneral
  EditorSorting     = STRUCTURE
  BuildCost         = 1000
  BuildTime         = 20.0
  EnergyProduction  = -1
  CommandSet        = ChinaInternetCenterCommandSet
  VisionRange       = 200.0
  ShroudClearingRange = 200
  ExperienceValue    = 75 75 75 75

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  Prerequisites
    Object  = Nuke_ChinaWarFactory
  End

  ; *** AUDIO Parameters ***
  VoiceSelect       = CommandCenterChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE IMMUNE_TO_CAPTURE MP_COUNT_FOR_VICTORY FS_INTERNET_CENTER
 
  Body              = StructureBody ModuleTag_08
    MaxHealth       = 2250.0
    InitialHealth   = 2250.0
    SubdualDamageCap = 5000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = InternetHackContain ModuleTag_10 ; Contain module that gives aiHackInternet command to passengers
    PassengersAllowedToFire = No
    Slots                 = 6
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 50%
    AllowInsideKindOf     = MONEY_HACKER
    ExitDelay         = 500
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = No ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior = DestroyDie ModuleTag_12
  End

  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = ProductionUpdate ModuleTag_22
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_23
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_24
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_25
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior        = SpyVisionUpdate ModuleTag_Hack01
    NeedsUpgrade  = Yes
    SelfPowered   = Yes
    SpyOnKindof   = COMMANDCENTER
    TriggeredBy   = Upgrade_ChinaSatelliteHackOne
  End

  Behavior           = OCLSpecialPower ModuleTag_SpecialPower04
    SpecialPowerTemplate = SuperweaponSatelliteHackTwo
    OCL                  = SUPERWEAPON_SatelliteHackTwo
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior = SpecialPowerCreate ModuleTag_Hack05
  End

  Behavior = ArmorUpgrade ModuleTag_32 ;It does no any armor upgrade but needed for neutron mines
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Behavior = ModelConditionUpgrade ModuleTag_18
    ConditionFlag = USER_1
    TriggeredBy = Upgrade_ChinaSatelliteHackOne
  End

  Behavior = ModelConditionUpgrade ModuleTag_19
    ConditionFlag = USER_2
    TriggeredBy = Upgrade_ChinaSatelliteHackTwo
  End
  Behavior = GrantScienceUpgrade ModuleTag_Science_1
    GrantScience = SCIENCE_SatelliteHackTwo
    TriggeredBy = Upgrade_ChinaSatelliteHackTwo
  End
  Behavior = GrantScienceUpgrade ModuleTag_Science_2
    GrantScience = SCIENCE_SatelliteHackThree
    TriggeredBy = Upgrade_ChinaSatelliteHackThree
  End

  Behavior = CommandSetUpgrade ComSet_01
    CommandSet = ChinaInternetCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
    ConflictsWith = Upgrade_ChinaSatelliteHackOne Upgrade_ChinaSatelliteHackTwo Upgrade_ChinaSatelliteHackThree
  End
  Behavior = CommandSetUpgrade ComSet_02
    CommandSet = ChinaInternetCenterCommandSetOne
    TriggeredBy = Upgrade_ChinaSatelliteHackOne
    ConflictsWith = Upgrade_ChinaSatelliteHackTwo Upgrade_ChinaSatelliteHackThree Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ComSet_03
    CommandSet = ChinaInternetCenterCommandSetOneUpgrade
    TriggeredBy = Upgrade_ChinaSatelliteHackOne Upgrade_ChinaMines
    ConflictsWith = Upgrade_ChinaSatelliteHackTwo Upgrade_ChinaSatelliteHackThree
    RequiresAllTriggers = yes
  End
  Behavior = CommandSetUpgrade ComSet_04
    CommandSet = Nuke_ChinaInternetCenterCommandSetTwo
    TriggeredBy = Upgrade_ChinaSatelliteHackTwo
    ConflictsWith = Upgrade_ChinaSatelliteHackThree Upgrade_ChinaMines
  End
  Behavior = CommandSetUpgrade ComSet_05
    CommandSet = Nuke_ChinaInternetCenterCommandSetTwoUpgrade
    TriggeredBy = Upgrade_ChinaSatelliteHackTwo Upgrade_ChinaMines
    ConflictsWith = Upgrade_ChinaSatelliteHackThree
    RequiresAllTriggers = yes
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death
    DeathWeapon   = InternetCenterDeathWeapon
    StartsActive  = Yes
  End

  Geometry            = BOX
  GeometryMajorRadius = 50.0
  GeometryMinorRadius = 50.0
  GeometryHeight      = 36.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaTankBattleMaster

  ; *** ART Parameters ***
  SelectPortrait         = SNWarMaster_L
  ButtonImage            = SNWarMaster

  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaTankRadioactiveShells
  UpgradeCameo3 = Upgrade_ChinaNuclearTanks
  UpgradeCameo4 = Upgrade_ChinaIsotopeStability
  UpgradeCameo5 = Upgrade_ChinaRadiationDefense
 
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model               = NVWrMstr
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      TransitionKey = TRANS_default
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT

    ConditionState  = PREATTACK_A
      TransitionKey = TRANS_firing
    End
    AliasConditionState = SNOW PREATTACK_A
    AliasConditionState = NIGHT PREATTACK_A
    AliasConditionState = SNOW NIGHT PREATTACK_A

    TransitionState = TRANS_firing TRANS_default
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
    End

    ConditionState  = REALLYDAMAGED RUBBLE
      Model         = NVWrMstr_D
      TransitionKey = TRANS_default_d
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE

    ConditionState  = REALLYDAMAGED RUBBLE PREATTACK_A
      Model         = NVWrMstr_D
      TransitionKey = TRANS_firing_d
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE PREATTACK_A
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE PREATTACK_A
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE PREATTACK_A

    TransitionState = TRANS_firing_d TRANS_default_d
      Model         = NVWrMstr_D
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
    End

    ConditionState = AFLAME
      TransitionKey = TRANS_default_AFLAME
      ParticleSysBone = TURRET01 TankFireContinious
    End
    AliasConditionState = SNOW AFLAME
    AliasConditionState = NIGHT AFLAME
    AliasConditionState = SNOW NIGHT AFLAME

    ConditionState  = PREATTACK_A AFLAME
      TransitionKey = TRANS_firing_AFLAME
      ParticleSysBone = TURRET01 TankFireContinious
    End
    AliasConditionState = SNOW PREATTACK_A AFLAME
    AliasConditionState = NIGHT PREATTACK_A AFLAME
    AliasConditionState = SNOW NIGHT PREATTACK_A AFLAME

    TransitionState = TRANS_firing_AFLAME TRANS_default_AFLAME
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = TURRET01 TankFireContinious
    End

    ConditionState  = REALLYDAMAGED RUBBLE AFLAME
      Model         = NVWrMstr_D
      TransitionKey = TRANS_default_d_AFLAME
      ParticleSysBone = TURRET01 TankFireContinious
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE AFLAME
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE AFLAME
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE AFLAME

    ConditionState  = REALLYDAMAGED RUBBLE PREATTACK_A AFLAME
      Model         = NVWrMstr_D
      TransitionKey = TRANS_firing_d_AFLAME
      ParticleSysBone = TURRET01 TankFireContinious
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE PREATTACK_A AFLAME
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE PREATTACK_A AFLAME
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE PREATTACK_A AFLAME

    TransitionState = TRANS_firing_d_AFLAME TRANS_default_d_AFLAME
      Model         = NVWrMstr_D
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = TURRET01 TankFireContinious
    End

    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:NukeMaster
  Side = ChinaNukeGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3
  BuildCost       = 800
  BuildTime       = 8.0
  VisionRange     = 150
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY Nuke_BattleMasterTankGun
  End

  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = TankArmorNukeUpgraded
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaWarFactory
  End

  ExperienceValue    = 36 53 77 111
  ExperienceRequired = 0 109 158 231
  IsTrainable = Yes
  CrusherLevel       = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet       = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BattleMasterTankVoiceSelect
  VoiceMove = BattleMasterTankVoiceMove
  VoiceGuard = BattleMasterTankVoiceMove
  VoiceAttack = BattleMasterTankVoiceAttack
  SoundMoveStart = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceCrush = BattleMasterTankVoiceCrush
    VoiceEnter = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 410.0
    InitialHealth   = 410.0
    SubdualDamageCap = 800
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 120   ; turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL Nuke_FusionBattleMasterLocomotor
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_06
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  Behavior = HordeUpdate ModuleTag_Horde
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000     ; how often to recheck horde status (msec)
    Radius = 75           ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = VEHICLE      ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes      ; do we only count allies towards horde status? 
    ExactMatch = no       ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5             ; how many units must be within Radius to grant us horde-ness
    Action = HORDE        ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
  End
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    CreationList = OCL_ChinaTankBattleMasterDeathEffectSimple
  End
  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankBattleMasterDebris
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Nuke_ChinaTankOverlord

  ; *** ART Parameters ***
  SelectPortrait         = SNOverlord_L
  ButtonImage            = SNOverlord
  
  UpgradeCameo1 = Upgrade_ChinaTankRadioactiveShells
  UpgradeCameo2 = Upgrade_ChinaNuclearTanks
  UpgradeCameo3 = Upgrade_ChinaIsotopeStability
  UpgradeCameo4 = Upgrade_ChinaRadiationDefense
    
  Draw = W3DOverlordTankDraw ModuleTag_01
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model             = NVOvrlrd
      Animation         = NVOvrlrd.NVOvrlrd
      AnimationMode     = LOOP
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponRecoilBone  = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      TransitionKey = TRANS_default
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT

    ConditionState  = PREATTACK_A
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = MUZZLE02 TankCannonSmokeSmall
      TransitionKey = TRANS_firing
    End
    AliasConditionState = SNOW PREATTACK_A
    AliasConditionState = NIGHT PREATTACK_A
    AliasConditionState = SNOW NIGHT PREATTACK_A

    ConditionState  = REALLYDAMAGED
      Model         = NVOvrlrd_D
      Animation     = NVOvrlrd_D.NVOvrlrd_D
      AnimationMode = LOOP
      TransitionKey = TRANS_default_d
    End
    AliasConditionState = SNOW REALLYDAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED
    AliasConditionState = SNOW NIGHT REALLYDAMAGED

    ConditionState  = REALLYDAMAGED PREATTACK_A
      Model         = NVOvrlrd_D
      Animation     = NVOvrlrd_D.NVOvrlrd_D
      AnimationMode = LOOP
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = MUZZLE02 TankCannonSmokeSmall
      TransitionKey = TRANS_firing_d
    End
    AliasConditionState = SNOW REALLYDAMAGED PREATTACK_A
    AliasConditionState = NIGHT REALLYDAMAGED PREATTACK_A
    AliasConditionState = SNOW NIGHT REALLYDAMAGED PREATTACK_A

    ConditionState  = RUBBLE
      Model         = NVOvrlrd_D1
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey = TRANS_default_d1
    End
    AliasConditionState = SNOW RUBBLE
    AliasConditionState = NIGHT RUBBLE
    AliasConditionState = SNOW NIGHT RUBBLE

    TransitionState = TRANS_firing TRANS_default
      Model         = NVOvrlrd
      Animation     = NONE
      AnimationMode = ONCE
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = MUZZLE02 TankCannonSmokeSmall
    End
    TransitionState = TRANS_firing_d TRANS_default_d
      Model           = NVOvrlrd_D
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      Animation     = NONE
      AnimationMode = ONCE
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = MUZZLE02 TankCannonSmokeSmall
    End

    ;----------
    ConditionState = AFLAME
      TransitionKey = TRANS_default_AFLAME
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End
    AliasConditionState = SNOW AFLAME
    AliasConditionState = NIGHT AFLAME
    AliasConditionState = SNOW NIGHT AFLAME

    ConditionState  = PREATTACK_A AFLAME
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = MUZZLE02 TankCannonSmokeSmall
      TransitionKey = TRANS_firing_AFLAME
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End
    AliasConditionState = SNOW PREATTACK_A AFLAME
    AliasConditionState = NIGHT PREATTACK_A AFLAME
    AliasConditionState = SNOW NIGHT PREATTACK_A AFLAME

    ConditionState  = REALLYDAMAGED AFLAME
      Model         = NVOvrlrd_D
      Animation     = NVOvrlrd_D.NVOvrlrd_D
      AnimationMode = LOOP
      TransitionKey = TRANS_default_d_AFLAME
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End
    AliasConditionState = SNOW REALLYDAMAGED AFLAME
    AliasConditionState = NIGHT REALLYDAMAGED AFLAME
    AliasConditionState = SNOW NIGHT REALLYDAMAGED AFLAME

    ConditionState  = REALLYDAMAGED PREATTACK_A AFLAME
      Model         = NVOvrlrd_D
      Animation     = NVOvrlrd_D.NVOvrlrd_D
      AnimationMode = LOOP
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = MUZZLE02 TankCannonSmokeSmall
      TransitionKey = TRANS_firing_d_AFLAME
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End
    AliasConditionState = SNOW REALLYDAMAGED PREATTACK_A AFLAME
    AliasConditionState = NIGHT REALLYDAMAGED PREATTACK_A AFLAME
    AliasConditionState = SNOW NIGHT REALLYDAMAGED PREATTACK_A AFLAME

    ConditionState  = RUBBLE AFLAME
      Model         = NVOvrlrd_D1
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey = TRANS_default_d1_AFLAME
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End
    AliasConditionState = SNOW RUBBLE AFLAME
    AliasConditionState = NIGHT RUBBLE AFLAME
    AliasConditionState = SNOW NIGHT RUBBLE AFLAME

    TransitionState = TRANS_firing_AFLAME TRANS_default_AFLAME
      Model         = NVOvrlrd
      Animation     = NONE
      AnimationMode = ONCE
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = MUZZLE02 TankCannonSmokeSmall
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End
    TransitionState = TRANS_firing_d_AFLAME TRANS_default_d_AFLAME
      Model           = NVOvrlrd_D
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      Animation     = NONE
      AnimationMode = ONCE
      ParticleSysBone = MUZZLE01 TankCannonSmokeSmall
      ParticleSysBone = MUZZLE02 TankCannonSmokeSmall
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
    End

    TrackMarks           = EXTnkTrack.tga
    OkToChangeModelColor = Yes
    TreadAnimationRate = 4;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Overlord
  Side                = ChinaNukeGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0       
  BuildCost       = 2000
  BuildTime       = 20.0
  VisionRange     = 150
  ShroudClearingRange = 300

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY OverlordTankGun
    Weapon = TERTIARY TerroristSuicideNotARealWeapon
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE
    Weapon            = PRIMARY OverlordTankGun
    Weapon            = SECONDARY GattlingBuildingGunAirDummy
    Weapon = TERTIARY TerroristSuicideNotARealWeapon
    AutoChooseSources = TERTIARY NONE
  End

  ArmorSet
    Conditions        = None
    Armor             = TankArmor
    DamageFX          = TankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = TankArmorNukeUpgraded
    DamageFX          = TankDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaWarFactory
    Object = Nuke_ChinaPropagandaCenter
  End

  ExperienceValue    = 86 125 183 262
  ExperienceRequired = 0 259 276 549
  IsTrainable = Yes
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Nuke_ChinaTankOverlordCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = OverlordTankVoiceSelect
  SoundMoveLoop         = HeavyTankMoveLoop
  SoundMoveLoopDamaged  = HeavyTankMoveLoop
  VoiceMove             = OverlordTankVoiceMove
  VoiceGuard            = OverlordTankVoiceMove
  VoiceAttack           = OverlordTankVoiceAttack

  UnitSpecificSounds
    VoiceCreate     = OverlordTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = NewTurretMoveLoop2
    VoiceCrush      = OverlordTankVoiceCrush
    VoiceEnter      = OverlordTankVoiceMove
    VoiceUnload     = OverlordTankVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1200.0
    InitialHealth   = 1200.0
    SubdualDamageCap = 2400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = TransportAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 90
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

   Locomotor = SET_NORMAL Nuke_FusionOverlordLocomotor

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_04
    DeathWeapon   = Nuke_NuclearTankDeathWeapon
    StartsActive  = Yes                       
    ConflictsWith   = Upgrade_ChinaIsotopeStability
  End

  Behavior = OverlordContain ModuleTag_06
    Slots                    = 1
    DamagePercentToUnits    = 100%
    AllowInsideKindOf       = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PassengersInTurret     = Yes
    ExperienceSinkForRider = Yes
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Addon01
    UpgradeObject = OCL_OverlordGattlingCannon
    TriggeredBy   = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon02
    UpgradeObject = OCL_OverlordPropagandaTower
    TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon03
    UpgradeObject = OCL_ChinaTankOverlordIrradiator
    TriggeredBy   = Upgrade_ChinaOverlordIrradiator
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon04
    UpgradeObject = OCL_ChinaTankOverlordNukeRL
    TriggeredBy   = Upgrade_ChinaOverlordNukeRL
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon05
    UpgradeObject = OCL_ChinaTankOverlordRadar
    TriggeredBy   = Upgrade_ChinaOverlordRadar
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL
  End

  ;Behavior = CommandSetUpgrade ModuleTag_12
   ; CommandSet = GenericCommandSet
   ; TriggeredBy = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordIrradiator
   ; ConflictsWith = Upgrade_ChinaOverlordRadar
 ; End
  ;Behavior = CommandSetUpgrade ModuleTag_12A
  ;  CommandSet = ChinaTankOverlordCommandSetWithRadar
   ; TriggeredBy = Upgrade_ChinaOverlordRadar
    ;ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL
 ; End

  Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgrade01
    TriggeredBy = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1
  End

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 100.0
  End

  Behavior = SlowDeathBehavior ModuleTag_16
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankOverlordDebris
    FX  = FINAL    FX_OverlordExplosionOneFinal
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 0
    OCL = FINAL   OCL_ChinaTankOverlordDeathEffectSimple
  End

  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Geometry = BOX
  GeometryMajorRadius = 26.0
  GeometryMinorRadius = 13.0
  GeometryHeight = 15.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInfantryBiohazardTech

  SelectPortrait         = SSChinaBiohazardTechBig
  ButtonImage            = SSChinaBiohazardTechSmall

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;NORMAL STANDING
    DefaultConditionState
      Model = AITECH_SKN
      IdleAnimation = AITECH_SKL.AITECH_STA 0 21
      ;Regular spice animations
      IdleAnimation = AITECH_SKL.AITECH_ADA
      IdleAnimation = AITECH_SKL.AITECH_IDB
      AnimationMode = ONCE
      WeaponLaunchBone = PRIMARY BIOGUNFX
      TransitionKey = TRANS_Stand
    End

    ; NORMAL ATTACK
    ConditionState = FIRING_A
      Animation = AITECH_SKL.AITECH_IDA
      AnimationMode = LOOP
      TransitionKey = TRANS_FiringA
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A
    AliasConditionState = FIRING_A REALLYDAMAGED
    AliasConditionState = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = RELOADING_A REALLYDAMAGED

    ConditionState = MOVING FIRING_A 
      Animation = AITECH_SKL.AITECH_WKB 15
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ConditionState = MOVING
      Animation = AITECH_SKL.AITECH_WKA 15
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone     = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = AITECH_SKL.AITECH_DTA
      Animation = AITECH_SKL.AITECH_DTB
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = AITECH_SKL.AITECH_ADTD1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = AITECH_SKL.AITECH_ADTD2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = AITECH_SKL.AITECH_ADTD3
      AnimationMode = ONCE
      TransitionKey = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ConditionState = SPECIAL_CHEERING
      Animation = AITECH_SKL.AITECH_CHA
      AnimationMode = LOOP
    End

    ;PARACHUTING ANIMATIONS
    ConditionState = FREEFALL
      Animation = AITECH_SKL.AITECH_PFL
      AnimationMode = LOOP
      TransitionKey = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING
    ConditionState = PARACHUTING
      Animation = AITECH_SKL.AITECH_PHG
      AnimationMode = LOOP
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING
    TransitionState = TRANS_Falling TRANS_Chute
      Animation = AITECH_SKL.AITECH_POP
      AnimationMode = ONCE
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End
    TransitionState = TRANS_Chute TRANS_Stand
      Animation = AITECH_SKL.AITECH_PDN
      AnimationMode = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:FieldEngineer
  Side                = ChinaNukeGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1
  VisionRange         = 150
  ShroudClearingRange = 200
  BuildCost = 250
  BuildTime = 2.5
  
  WeaponSet 
    Conditions = None 
    Weapon     = PRIMARY BioHazardTechCleanHazardWeapon 
  End

  ArmorSet
    Conditions = None
    Armor      = HazMatHumanArmor
    DamageFX   = InfantryDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaBarracks
  End
  
  ExperienceValue    = 7 10 15 21
  ExperienceRequired = 0 8 16 32
  IsTrainable        = Yes
  CrushableLevel     = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet         = Nuke_ChinaInfantryHazMatCommandSet

  VoiceSelect = BioHazardVoiceSelect
  VoiceMove = BioHazardVoiceMove
  VoiceGuard = BioHazardVoiceMove
  VoiceAttack = BioHazardVoiceAttack
  VoiceDefect = BioHazardVoiceCreate
  UnitSpecificSounds
    VoiceEnter = BioHazardVoiceMove
    VoiceGarrison = RangerVoiceGarrison
    VoiceCreate = BioHazardVoiceCreate
  End

  UnitSpecificFX
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE 

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
    SubdualDamageCap = 120
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 20
  End

  Behavior = CleanupHazardUpdate ModuleTag_03
    WeaponSlot = PRIMARY
    ScanRate   = 250
    ScanRange  = 300.0
  End

  Behavior = CleanupAreaPower ModuleTag_04
    SpecialPowerTemplate        = SpecialAbilityAmbulanceCleanupArea
    MaxMoveDistanceFromLocation = 300.0
  End

  Behavior = HordeUpdate ModuleTag_06
    RubOffRadius = 60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End


  Behavior = AIUpdateInterface ModuleTag_05
    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS Stealthed
  End

  Behavior = FireWeaponUpdate ModuleTag_23
    Weapon = ChinaMineDetonatorSectorWeapon
    ExclusiveWeaponDelay = 1000
  End

  Locomotor = SET_NORMAL HazMatHumanLocomotor

  Behavior = PhysicsBehavior ModuleTag_08
    Mass = 24.0
  End
  Behavior = ProductionUpdate ModuleTag_09
  End

  Behavior = SquishCollide ModuleTag_10
  End

  Behavior = VeterancyGainCreate ModuleTag_11
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1
    DestructionDelay    = 1
    OCL                 = INITIAL OCL_ChinaInfantryBiohazardTech_Dead
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1
    DestructionDelay    = 1
    OCL                 = INITIAL OCL_ChinaInfantryBiohazardTech_Exploded
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_BioHazardDie
    OCL                 = INITIAL OCL_FlamingInfantryChina
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_RebelDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = AutoFindHealingUpdate ModuleTag_Heal01
    ScanRate = 1000
    ScanRange = 300
    NeverHeal = 0.85
    AlwaysHeal = 0.25
  End

  Behavior = StealthDetectorUpdate ModuleTag_MineDetector ;+
    DetectionRate            = 500
    CanDetectWhileGarrisoned = Yes
    CanDetectWhileContained  = Yes
    ExtraForbiddenKindOf     = VEHICLE INFANTRY STRUCTURE AIRCRAFT
  End

  Behavior = StealthUpdate ModuleTag_Stealth
    StealthDelay                = 2500
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 13.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 175
  ShadowSizeY = 175
  ShadowTexture = decal_mdsec
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Nuke_ChinaJetMiG31

  ; *** ART Parameters ***
  SelectPortrait         = SNRaptorAlt_L
  ButtonImage            = SNRaptorAlt
  
  UpgradeCameo1 = Upgrade_ChinaAircraftArmor
  UpgradeCameo2 = Upgrade_ChinaNeutronShells

  Draw = W3DModelDraw ModuleTag_01
    ParticlesAttachedToAnimatedBones = Yes
    ProjectileBoneFeedbackEnabledSlots = PRIMARY
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model               = NVMig31
      WeaponLaunchBone    = PRIMARY FIREPOINT
      HideSubObject       = BurnerFX01 BurnerFX02
      WeaponLaunchBone    = PRIMARY MISSILE
      WeaponFireFXBone    = PRIMARY MISSILE
    End

    ConditionState        = JETEXHAUST
      ParticleSysBone     = WingTip01 JetContrail
      ParticleSysBone     = WingTip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
    End

    ConditionState        = JETEXHAUST JETAFTERBURNER
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = WingTip01 JetContrail
      ParticleSysBone     = WingTip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ShowSubObject       = BurnerFX01 BurnerFX02
    End

    ConditionState        = REALLYDAMAGED
      Model               = NVMig31_D
      ParticleSysBone     = WingTip01 JetContrail
      ParticleSysBone     = WingTip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
    End

    ConditionState        = RUBBLE
      Model               = NVMig31_E
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST
      Model               = NVMig31_D
      ParticleSysBone     = WingTip01 JetContrail
      ParticleSysBone     = WingTip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model               = NVMig31_D
      ShowSubObject       = BurnerFX01 BurnerFX02
      ParticleSysBone     = Engine01 JetEngineDamagedSmoke
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = WingTip01 JetContrail
      ParticleSysBone     = WingTip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ShowSubObject       = BurnerFX01 BurnerFX02
    End

    ConditionState        = RUBBLE JETEXHAUST JETAFTERBURNER
      Model               = NVMig31_E
      HideSubObject       = None
      ShowSubObject       = None
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = WingTip01 JetContrail
      ParticleSysBone     = WingTip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ShowSubObject       = BurnerFX01 BurnerFX02
    End
  End
  Scale = 1.05

  ; ***DESIGN parameters ***
  DisplayName             = OBJECT:Mig31
  EditorSorting           = VEHICLE
  Side                    = ChinaNukeGeneral
  TransportSlotCount      = 0
  VisionRange             = 400.0 
  ShroudClearingRange     = 500.0
  BuildCost           = 2000
  BuildTime           = 20

  Prerequisites
    Object = Nuke_ChinaAirfield
  End

  WeaponSet
    Conditions        = None
    Weapon            = PRIMARY Mig31MissileWeapon
    PreferredAgainst  = PRIMARY AIRCRAFT
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon            = PRIMARY Nuke_NeutronMissileWeapon
    PreferredAgainst  = PRIMARY AIRCRAFT
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_ChinaNeutronShells
  End

  ArmorSet
    Conditions        = None
    Armor             = AirplaneArmor
    DamageFX          = None
  End

  ExperienceValue       = 76 110 161 231
  ExperienceRequired    = 0 228 330 482
  IsTrainable = Yes
  CrusherLevel           = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = AircraftGenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect             = The31thVoiceSelect
  VoiceMove               = The31thVoiceMove
  VoiceAttack             = The31thVoiceAttack
  VoiceAttackAir          = The31thVoiceAttack
  VoiceGuard              = The31thVoiceMove
  SoundAmbient            = MigAmbientLoop
  UnitSpecificSounds
    VoiceCreate           = The31thVoiceCreate
    Afterburner           = RaptorAfterburner
    VoiceGarrison         = The31thVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority    = UNIT
  KindOf           = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT DRONE

  Body            = ActiveBody ModuleTag_02
    MaxHealth     = 225.0
    InitialHealth = 225.0
    SubdualDamageCap = 450
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_03
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_MIG31DeathFinalBlowUp
    DestructionDelay                = 99999999  ; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100%      ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%    ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_MigDeathInitial
    OCLInitialDeath                 = OCL_MIGDeathInitial
    DelaySecondaryFromInitialDeath  = 500
    FXSecondary                     = FX_JetDeathSecondary
    OCLSecondary                    = OCL_MIGDeathSecondary
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_MIGDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                  = OCL_MIG31DeathFinalBlowUp
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 100
    OCL = FINAL OCL_MIG31DeathFinalBlowUp
  End

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 500.0
  End

  Behavior = JetAIUpdate ModuleTag_07
    OutOfAmmoDamagePerSecond  = 0%
    TakeoffDistForMaxLift     = 0%
    TakeoffPause              = 500
    MinHeight                 = 5
    ReturnToBaseIdleTime      = 10000
  End

  Locomotor = SET_NORMAL MIGLocomotor
  Locomotor = SET_TAXIING BasicJetTaxiLocomotor

  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 8000        ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500      ; this often.
  End

  Behavior                       = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior        = MaxHealthUpgrade ModuleTag_10
    TriggeredBy   = Upgrade_ChinaAircraftArmor
    AddMaxHealth  = 56.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate         = 500
    DetectionRange        = 300
    ExtraRequiredKindOf   = AIRCRAFT
  End

  Geometry                 = Box
  GeometryIsSmall          = Yes
  GeometryMajorRadius      = 14.0
  GeometryMinorRadius      = 7.0
  GeometryHeight           = 5.0
End

;------------------------------------------------------------------------------
Object Nuke_ChinaVehicleSuperNukeCannon

  ; *** ART Parameters ***
  SelectPortrait = SNSNC_L
  ButtonImage    = SNSNC
  
  UpgradeCameo1 = Upgrade_ChinaReactiveShells
  UpgradeCameo2 = Upgrade_ChinaIsotopeStability
  UpgradeCameo3 = Upgrade_ChinaRadiationDefense
  UpgradeCameo4 = Upgrade_ChinaNeutronShells
    
  Draw = W3DOverlordTankDraw ModuleTag_01
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model             = NVsnc
      Turret            = Turret
      TurretPitch       = TurretEL
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponRecoilBone  = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponFireFXBone  = SECONDARY Muzzle
      WeaponRecoilBone  = SECONDARY Barrel
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponLaunchBone  = SECONDARY Muzzle
      WeaponFireFXBone  = TERTIARY Muzzle
      WeaponRecoilBone  = TERTIARY Barrel
      WeaponMuzzleFlash = TERTIARY MuzzleFX
      WeaponLaunchBone  = TERTIARY Muzzle
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT

    ConditionState  = REALLYDAMAGED RUBBLE
      Model         = NVsnc_D
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE

    ConditionState = AFLAME
      ParticleSysBone = FIREPOINT01 TankFireContinious
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = TURRETFRONT TankFireContinious
    End
    AliasConditionState = SNOW AFLAME
    AliasConditionState = NIGHT AFLAME
    AliasConditionState = SNOW NIGHT AFLAME

    ConditionState  = REALLYDAMAGED RUBBLE AFLAME
      Model         = NVsnc_D
      ParticleSysBone = FIREPOINT01 TankFireContinious
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = TURRETFRONT TankFireContinious
    End
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE AFLAME
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE AFLAME
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE AFLAME

    TrackMarks           = EXTnkTrack.tga
    OkToChangeModelColor = Yes
    TreadAnimationRate = 2.5;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SuperNukeCannon
  Side                = ChinaNukeGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0
  BuildCost   = 5000
  BuildTime   = 50.0
  VisionRange         = 200
  ShroudClearingRange = 200

  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY SuperNukeCannonGun
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY SuperNukeCannonGun
    Weapon = SECONDARY SuperNukeCannonNeutronWeapon
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    ShareWeaponReloadTime = Yes
  End

  ArmorSet
    Conditions = None
    Armor      = SuperTruckArmor
    DamageFX   = TankDamageFX
  End

  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = SuperTruckArmorNukeUpgraded
    DamageFX   = TankDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaWarFactory
    Object = Nuke_ChinaPropagandaCenter
    Science = SCIENCE_Rank5
    Science = SCIENCE_NUKE
  End

  ExperienceValue    = 214 311 454 651
  ExperienceRequired = 0 643 932 1362
  IsTrainable = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Nuke_ChinaVehicleSuperNukeCannonCommandSet

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction

  ; *** AUDIO Parameters ***
  VoiceSelect = BerthaVoiceSelect
  SoundMoveStart = OverlordTankMoveStart
  SoundMoveStartDamaged = OverlordTankMoveStart
  VoiceMove = BerthaVoiceMove
  VoiceGuard = BerthaVoiceMove
  VoiceAttack = BerthaVoiceAttack

  UnitSpecificSounds
    VoiceCreate     = BerthaVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = OverlordTankTurretMoveLoop
    VoiceCrush = BerthaVoiceMove
    VoiceEnter = BerthaVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS SCORE VEHICLE DRONE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0
    SubdualDamageCap = 2500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = TransportAIUpdate ModuleTag_03
    Turret
      TurretTurnRate  = 45
      TurretPitchRate = 20
      AllowsPitch = Yes
      FirePitch = 30
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL SlowOverlordLocomotor

  Behavior = OverlordContain ModuleTag_06
    Slots = 1
    DamagePercentToUnits = 100%
    AllowInsideKindOf = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PassengersInTurret = Yes
    ExperienceSinkForRider = Yes
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Addon01
    UpgradeObject = OCL_OverlordGattlingCannon
    TriggeredBy   = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon02
    UpgradeObject = OCL_OverlordPropagandaTower
    TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon03
    UpgradeObject = OCL_ChinaTankOverlordIrradiator
    TriggeredBy   = Upgrade_ChinaOverlordIrradiator
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordNukeRL Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon04
    UpgradeObject = OCL_ChinaTankOverlordNukeRL
    TriggeredBy   = Upgrade_ChinaOverlordNukeRL
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordRadar
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Addon05
    UpgradeObject = OCL_ChinaTankOverlordRadar
    TriggeredBy   = Upgrade_ChinaOverlordRadar
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1
  End

  Behavior = CommandSetUpgrade ModuleTag_12
    CommandSet = Nuke_ChinaVehicleSuperNukeCannonCommandSetWithAddon
    TriggeredBy = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL
    ConflictsWith = Upgrade_ChinaOverlordRadar
  End

  Behavior = CommandSetUpgrade ModuleTag_12A
    CommandSet = Nuke_ChinaVehicleSuperNukeCannonCommandSetWithRadar
    TriggeredBy = Upgrade_ChinaOverlordRadar
    ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordIrradiator Upgrade_ChinaOverlordNukeRL
  End

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 100.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06S
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL OCL_ChinaVehicleSNCDie
    FX  = FINAL FX_OverlordExplosionOneFinal
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_07
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DeathWeapon   = Nuke_NuclearTankDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 0
    OCL = FINAL   OCL_ChinaVehicleSNCDiePoisoned
  End

  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior      = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy = Upgrade_ChinaRadiationDefense
  End
  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_ChinaNeutronShells
  End
  Behavior = WeaponBonusUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_ChinaReactiveShells
  End 

  Geometry = BOX
  GeometryMajorRadius = 28.0
  GeometryMinorRadius = 15.0
  GeometryHeight = 16.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45
End

;------------------------------------------------------------------------------
Object Nuke_ChinaJetIronDragon

  ; *** ART Parameters ***
  SelectPortrait         = SNID_L
  ButtonImage            = SNID

  UpgradeCameo1 = Upgrade_ChinaAircraftArmor

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model             = NVIronDragn
      HideSubObject     = BurnerFX01 BurnerFX02
      WeaponLaunchBone  = PRIMARY FIRE
      TransitionKey = Trans_CLOSED
    End
    
    ConditionState = JETEXHAUST
      Model         = NVIronDragn
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      TransitionKey = Trans_CLOSED
    End

    ConditionState = JETEXHAUST USING_WEAPON_A
      Model         = NVIronDragn_O
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      TransitionKey = Trans_OPENED
    End

    ConditionState = JETEXHAUST JETAFTERBURNER
      ; exhaust
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ; afterburners
      ShowSubObject   = BurnerFX01 BurnerFX02
      ParticleSysBone = Engine01 JetLenzflare
      ParticleSysBone = Engine02 JetLenzflare
      TransitionKey = Trans_CLOSED
    End

    TransitionState = Trans_CLOSED Trans_OPENED
      Model         = NVIronDragn
      Animation     = NVIronDragn.NVIronDragn
      AnimationMode = ONCE
    End

    TransitionState = Trans_OPENED Trans_CLOSED
      Model         = NVIronDragn
      Animation     = NVIronDragn.NVIronDragn
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model           = NVIronDragn_D
      ; damage
      ParticleSysBone = Smoke01 JetSmoke
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      TransitionKey = Trans_CLOSED_D
    End

    ConditionState  = REALLYDAMAGED JETEXHAUST
      Model           = NVIronDragn_D
      ; damage
      ParticleSysBone = Smoke01 JetSmoke
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      ; exhaust
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      TransitionKey = Trans_CLOSED_D
    End

    ConditionState = REALLYDAMAGED JETEXHAUST USING_WEAPON_A
      Model         = NVIronDragn_OD
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      TransitionKey = Trans_OPENED_D
    End

    ConditionState    = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model           = NVIronDragn_D
      ; damage
      ParticleSysBone = Smoke01 JetSmoke
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      ; exhaust
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
      ParticleSysBone = Engine01 JetExhaustHeat
      ParticleSysBone = Engine02 JetExhaustHeat
      ; afterburners
      ShowSubObject   = BurnerFX01 BurnerFX02
      ParticleSysBone = Engine01 JetLenzflare
      ParticleSysBone = Engine02 JetLenzflare
      TransitionKey = Trans_CLOSED_D
    End

    TransitionState = Trans_CLOSED_D Trans_OPENED_D
      Model         = NVIronDragn_D
      Animation     = NVIronDragn_D.NVIronDragn_D
      AnimationMode = ONCE
    End

    TransitionState = Trans_OPENED_D Trans_CLOSED_D
      Model         = NVIronDragn_D
      Animation     = NVIronDragn_D.NVIronDragn_D
      AnimationMode = ONCE_BACKWARDS
    End
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:IronDragon
  EditorSorting         = VEHICLE
  Side                  = ChinaNukeGeneral
  TransportSlotCount    = 0
  VisionRange           = 180.0 
  ShroudClearingRange   = 400.0
  BuildCost           = 2000
  BuildTime           = 25.0

  WeaponSet
    Conditions  = None 
    Weapon      = PRIMARY IronDragonWeapon
  End

  ArmorSet
    Conditions      = None
    Armor           = AirplaneArmor
    DamageFX        = None
  End

  Prerequisites
    Object = Nuke_ChinaAirfield
    Object = Nuke_ChinaPropagandaCenter
  End

  ExperienceValue     = 110 146 195 260
  ExperienceRequired  = 0 330 439 584
  IsTrainable         = Yes
  CrusherLevel        = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect            = The35thVoiceSelect
  VoiceMove              = The35thVoiceMove
  VoiceAttack            = The35thVoiceAttack
  VoiceAttackAir         = The35thVoiceAttack
  VoiceGuard             = The35thVoiceMove
  SoundAmbient           = RaptorAmbientLoop
  SoundAmbientRubble     = NoSound
  UnitSpecificSounds
    VoiceCreate          = The35thVoiceCreate
    SoundEject           = PilotSoundEject
    VoiceEject           = PilotVoiceEject
    VoiceGarrison        = The35thVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_03
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_IronDragonDeathFinalBlowUp
    DestructionDelay                = 99999999; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100% ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%  ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_JetDeathInitial
    DelaySecondaryFromInitialDeath  = 500  ; in milliseconds
    FXSecondary                     = FX_JetDeathSecondary
    FXHitGround                     = FX_JetDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200 ; in milliseconds
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                  = OCL_IronDragonDeathFinalBlowUp
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 10
    OCL = FINAL OCL_IronDragonDeathFinalBlowUp
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

  Behavior = JetAIUpdate ModuleTag_06
    OutOfAmmoDamagePerSecond = 0%
    TakeoffDistForMaxLift  = 100%
    TakeoffPause           = 500
    MinHeight              = 5
    ReturnToBaseIdleTime   = 10000
  End

  Locomotor = SET_NORMAL IronDragonJetLocomotor
  Locomotor = SET_TAXIING BasicJetTaxiLocomotor

  Behavior        = MaxHealthUpgrade ModuleTag_07
    TriggeredBy   = Upgrade_ChinaAircraftArmor
    AddMaxHealth  = 100.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior                 = TransitionDamageFX ModuleTag_22
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Geometry = Cylinder
  GeometryIsSmall = Yes
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 7.0
End

;------------------------------------------------------------------------------
Object Nuke_ChinaVehicleInterContinentalNukeLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SNICNukeCannon_L
  ButtonImage            = SNICNukeCannon

  UpgradeCameo1 = Upgrade_ChinaIsotopeStability
  UpgradeCameo2 = Upgrade_ChinaRadiationDefense

  Draw = W3DTruckDraw ModuleTag_Draw01
    
    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model                           = NVICNC
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFx
      WeaponFireFXBone                = PRIMARY Muzzle
      WeaponRecoilBone                = PRIMARY Barrel
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
    End
    ConditionState                    = RUBBLE
      Model                           = NVICNC_D1
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation       = NVICNC.NVICNC
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeHeavy
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeHeavy
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = BETWEEN_FIRING_SHOTS_B

    ConditionState    = REALLYDAMAGED MOVING
      Model           = NVICNC_D
      Animation       = NVICNC_D.NVICNC_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeHeavy
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeHeavy
    End
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_B
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation       = NVICNC.NVICNC
      AnimationMode   = ONCE
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
    End
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_B

    ConditionState    = REALLYDAMAGED UNPACKING
      Model           = NVICNC_D
      Animation       = NVICNC_D.NVICNC_D
      AnimationMode   = ONCE
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
    End
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_B

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Animation       = NVICNC.NVICNC
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
    End
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_B

    ConditionState    = REALLYDAMAGED PACKING
      Model           = NVICNC_D
      Animation       = NVICNC_D.NVICNC_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
    End
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_B

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED 
      Animation       = NVICNC.NVICNC
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      WeaponRecoilBone = PRIMARY Barrel
    End
    AliasConditionState = DEPLOYED MOVING
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_B
    AliasConditionState = DEPLOYED FIRING_B
    AliasConditionState = DEPLOYED RELOADING_B

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model           = NVICNC_D
      Animation       = NVICNC_D.NVICNC_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      WeaponRecoilBone = PRIMARY Barrel
    End
    AliasConditionState = DEPLOYED REALLYDAMAGED MOVING
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_B
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_B
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_B

    ConditionState                    = AFLAME
      Model                           = NVICNC
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    ConditionState                    = RUBBLE AFLAME
      Model                           = NVICNC_D1
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING AFLAME
      Animation       = NVICNC.NVICNC
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeHeavy
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeHeavy
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = BETWEEN_FIRING_SHOTS_B AFLAME

    ConditionState    = REALLYDAMAGED MOVING AFLAME
      Model           = NVICNC_D
      Animation       = NVICNC_D.NVICNC_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeHeavy
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeHeavy
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_B AFLAME
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING AFLAME
      Animation       = NVICNC.NVICNC
      AnimationMode   = ONCE
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_B AFLAME

    ConditionState    = REALLYDAMAGED UNPACKING AFLAME
      Model           = NVICNC_D
      Animation       = NVICNC_D.NVICNC_D
      AnimationMode   = ONCE
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_B AFLAME

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING AFLAME
      Animation       = NVICNC.NVICNC
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_B AFLAME

    ConditionState    = REALLYDAMAGED PACKING AFLAME
      Model           = NVICNC_D
      Animation       = NVICNC_D.NVICNC_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      ParticleSysBone       = HOUSECOLOR03 DozerSmokeLight
      ParticleSysBone       = HOUSECOLOR07 DozerSmokeLight
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_B AFLAME

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED AFLAME
      Animation       = NVICNC.NVICNC
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      WeaponRecoilBone = PRIMARY Barrel
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    AliasConditionState = DEPLOYED MOVING AFLAME
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = DEPLOYED FIRING_B AFLAME
    AliasConditionState = DEPLOYED RELOADING_B AFLAME

    ConditionState  = DEPLOYED REALLYDAMAGED AFLAME
      Model           = NVICNC_D
      Animation       = NVICNC_D.NVICNC_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      HideSubObject = Wheel05 Wheel06 Wheel07 Wheel08
      WeaponRecoilBone = PRIMARY Barrel
      ParticleSysBone = HOUSECOLOR01 TankFireContinious
      ParticleSysBone = CHASSIS TankFireContinious
      ParticleSysBone = HOUSECOLOR07 TankFireContinious
    End
    AliasConditionState = DEPLOYED REALLYDAMAGED MOVING AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_B AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_B AFLAME

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray

    LeftFrontTireBone     = Wheel02
    RightFrontTireBone    = Wheel01
    LeftRearTireBone      = Wheel12
    RightRearTireBone     = Wheel11
    MidLeftFrontTireBone  = Wheel04
    MidRightFrontTireBone = Wheel03
    MidLeftRearTireBone   = Wheel10
    MidRightRearTireBone  = Wheel09

    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.
  End

  Draw = W3DTruckDraw ModuleTag_Draw02
    DefaultConditionState
      Model                           = NVICNC_W
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model                           = NVICNC_WD
    End

    LeftFrontTireBone     = Wheel06
    RightFrontTireBone    = Wheel05
    LeftRearTireBone      = Wheel08
    RightRearTireBone     = Wheel07

    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ICNukeLauncher
  Side = ChinaNukeGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 0       
  BuildCost       = 3000
  BuildTime       = 30.0
  MaxSimultaneousOfType = 1
  VisionRange         = 175
  ShroudClearingRange = 175
  EnergyProduction  = -1

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY ICNukeCannonGun
  End

  ArmorSet
    Conditions        = None
    Armor             = SuperTruckArmor
    DamageFX          = TankDamageFX
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = SuperTruckArmorNukeUpgraded
    DamageFX          = TankDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaWarFactory
    Object = Nuke_ChinaPropagandaCenter
    Science = SCIENCE_NUKE
    Science = SCIENCE_Rank4
  End

  ExperienceValue     = 84 111 148 198
  ExperienceRequired  = 0 251 334 444
  IsTrainable         = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = Nuke_ChinaVehicleICNukeCannonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = StrategicArtilleryVoiceSelect
  VoiceMove             = StrategicArtilleryVoiceMove
  VoiceGuard            = StrategicArtilleryVoiceMove
  VoiceAttack           = StrategicArtilleryVoiceAttack
  SoundMoveStart        = NukeCannonMoveStart
  SoundMoveStartDamaged = NukeCannonMoveStart
  UnitSpecificSounds
    VoiceCreate         = StrategicArtilleryVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = StrategicArtilleryVoiceMove
    Deploy              = NukeCannonDeploy
    Undeploy            = NukeCannonUnDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE POWERED IGNORES_SELECT_ALL
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 750.0
    InitialHealth   = 750.0
    SubdualDamageCap = 1500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
    PackTime = 3333
    UnpackTime = 3333
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL ScudLauncherLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 300.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaVehicleICNukeCannonDie
    FX  = FINAL    FX_OverlordExplosionOneFinal
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_07
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DeathWeapon   = Nuke_NuclearTankDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 0
    OCL = FINAL   OCL_ChinaVehicleICNukeCannonDeathEffectSimple
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior      = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy = Upgrade_ChinaRadiationDefense
  End

  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction

  Behavior = CommandButtonHuntUpdate  ModuleTag_04B
  End

  Behavior = ProductionUpdate ModuleTag_Drone05
    MaxQueueEntries = 1
  End

  Geometry = BOX
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 12.0
  GeometryHeight = 12.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Nuke_ChinaVehicleNukeLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeCannon_L
  ButtonImage            = SNNukeCannon

  UpgradeCameo1 = Upgrade_ChinaNeutronShells
  UpgradeCameo2 = Upgrade_ChinaRadiationDefense
  UpgradeCameo3 = Upgrade_ChinaReactiveShells

  Draw = W3DTankDraw ModuleTag_01
    
    OkToChangeModelColor = Yes
    ExtraPublicBone = Turret01
    ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model             = NVNukeCn
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponRecoilBone  = PRIMARY Barrel
      WeaponLaunchBone  = SECONDARY Muzzle
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponFireFXBone  = SECONDARY Muzzle
      WeaponRecoilBone  = SECONDARY Barrel
      Turret            = Turret01
      TurretPitch       = TurretEL
    End
    ConditionState      = RUBBLE
      Model             = NVNukeCn_D1
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_C
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = BETWEEN_FIRING_SHOTS_B
    AliasConditionState = BETWEEN_FIRING_SHOTS_C

    ConditionState    = REALLYDAMAGED MOVING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_C
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE
    End
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_C

    ConditionState    = REALLYDAMAGED UNPACKING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE
    End
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_C

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_C

    ConditionState    = REALLYDAMAGED PACKING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_B
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_C

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED 
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = DEPLOYED MOVING
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_B
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_C
    AliasConditionState = DEPLOYED FIRING_A
    AliasConditionState = DEPLOYED FIRING_B
    AliasConditionState = DEPLOYED FIRING_C
    AliasConditionState = DEPLOYED RELOADING_A
    AliasConditionState = DEPLOYED RELOADING_B
    AliasConditionState = DEPLOYED RELOADING_C

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = DEPLOYED REALLYDAMAGED MOVING
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_B
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_C
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_B
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_C
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_B
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_C

    ConditionState = AFLAME
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    ConditionState = RUBBLE AFLAME
      Model        = NVNukeCn_D1
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING AFLAME
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_C AFLAME
    AliasConditionState = BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = BETWEEN_FIRING_SHOTS_C AFLAME

    ConditionState    = REALLYDAMAGED MOVING AFLAME
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_C AFLAME
     
    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING AFLAME
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_C AFLAME

    ConditionState = REALLYDAMAGED UNPACKING AFLAME
      Model        = NVNukeCn_D
      Animation    = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_C AFLAME

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING AFLAME
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_C AFLAME

    ConditionState = REALLYDAMAGED PACKING AFLAME
      Model        = NVNukeCn_D
      Animation    = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_C AFLAME

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState = DEPLOYED AFLAME
      Animation    = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    AliasConditionState = DEPLOYED MOVING AFLAME
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_C AFLAME
    AliasConditionState = DEPLOYED FIRING_A AFLAME
    AliasConditionState = DEPLOYED FIRING_B AFLAME
    AliasConditionState = DEPLOYED FIRING_C AFLAME
    AliasConditionState = DEPLOYED RELOADING_A AFLAME
    AliasConditionState = DEPLOYED RELOADING_B AFLAME
    AliasConditionState = DEPLOYED RELOADING_C AFLAME

    ConditionState = DEPLOYED REALLYDAMAGED AFLAME
      Model        = NVNukeCn_D
      Animation    = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      ParticleSysBone = SMOKE01 TankFireContinious
      ParticleSysBone = SMOKE03 TankFireContinious
      ParticleSysBone = SMOKE04 TankFireContinious
      ParticleSysBone = SMOKE05 TankFireContinious
    End
    AliasConditionState = DEPLOYED REALLYDAMAGED MOVING AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_A AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_B AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_C AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_A AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_B AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_C AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_A AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_B AFLAME
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_C AFLAME

    TrackMarks          = EXTnkTrack.tga
    TreadAnimationRate  = 3.0
  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:NukeLauncher
  Side            = ChinaNukeGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 0
  BuildCost    = 2000
  BuildTime    = 20.0
  VisionRange         = 175
  ShroudClearingRange = 175

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY NukeCannonGun
    Weapon = TERTIARY DeployWeapon
    AutoChooseSources = TERTIARY NONE
    WeaponLockSharedAcrossSets = Yes
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY NukeCannonGun
    Weapon = SECONDARY NukeCannonNeutronWeapon
    Weapon = TERTIARY DeployWeapon
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes
  End

  ArmorSet
    Conditions = None
    Armor      = TruckArmor
    DamageFX   = TankDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = TruckArmorNukeUpgraded
    DamageFX   = TankDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaWarFactory
    Object = Nuke_ChinaPropagandaCenter
  End

  ExperienceValue    = 65 94 137 197
  ExperienceRequired = 0 194 281 411
  IsTrainable = Yes
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Nuke_ChinaVehicleNukeCannonCommandSetGeneric

  ; *** AUDIO Parameters ***
  VoiceSelect           = NukeCannonVoiceSelect
  VoiceMove             = NukeCannonVoiceMove
  VoiceGuard            = NukeCannonVoiceMove
  VoiceAttack           = NukeCannonVoiceAttack
  SoundMoveStart        = NukeCannonMoveStart
  SoundMoveStartDamaged = NukeCannonMoveStart

  UnitSpecificSounds
    VoiceCreate         = NukeCannonVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = NukeCannonVoiceMove
    Deploy              = NukeCannonDeploy
    Undeploy            = NukeCannonUnDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 500
    InitialHealth   = 500
    SubdualDamageCap = 1000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04A
    Turret
      TurretTurnRate        = 80
      AllowsPitch           = No
      RecenterTime          = 5000
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      InitiallyDisabled     = Yes
    End
    AutoAcquireEnemiesWhenIdle = Yes
    PackTime = 3333
    UnpackTime = 3333
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL ChinaNukeCannonLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 100.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL OCL_ChinaVehicleNukeCannonDie
    FX  = FINAL FX_OverlordExplosionOneFinal
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_07
    DeathTypes = ALL -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    DeathWeapon   = Nuke_NuclearTankDeathWeapon
    StartsActive  = Yes
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  Behavior = SlowDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    DestructionDelay = 0
    OCL = FINAL   OCL_ChinaVehicleNukeCannonDeathEffectSimple
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 1       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy = Upgrade_ChinaRadiationDefense
  End

  Behavior = WeaponSetUpgrade ModuleTag_Weapon01
    TriggeredBy = Upgrade_ChinaNeutronShells
  End

  Behavior = WeaponBonusUpgrade ModuleTag_Weapon02
    TriggeredBy = Upgrade_ChinaReactiveShells
  End 

  Behavior = VeterancyGainCreate ModuleTag_Veterancy
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ArtilleryTraining
  End

  Geometry = BOX
  GeometryMajorRadius = 32.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 17.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45    
End

;------------------------------------------------------------------------------
Object Nuke_ChinaNuclearStormLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeStorm_L
  ButtonImage            = SNNukeStorm

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset
    IgnoreConditionStates = SNOW NIGHT

    ConditionState = NONE
      Model         = NBNukeStm
      Animation     = NBNukeStm.NBNukeStm
      AnimationMode = ONCE_BACKWARDS
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 WeaponA10 WeaponA11 WeaponA12 WeaponA13
      TransitionKey = Trans_READY
      ParticleSysBone = FIRE01 SmolderingFire
    End

    TransitionState = Trans_READY Trans_ATTACKING
      Model         = NBNukeStm
      Animation     = NBNukeStm.NBNukeStm
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA
      ParticleSysBone  = FIRE01 SmolderingFire
    End

    ConditionState = ATTACKING
      Model         = NBNukeStm
      Animation     = NBNukeStm.NBNukeStm
      AnimationMode = MANUAL
      Flags         = START_FRAME_LAST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey    = Trans_ATTACKING
      ParticleSysBone  = FIRE01 SmolderingFire
    End
    AliasConditionState = ATTACKING FIRING_B
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B

    TransitionState = Trans_ATTACKING Trans_READY
      Model         = NBNukeStm
      Animation     = NBNukeStm.NBNukeStm
      AnimationMode = ONCE_BACKWARDS
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone = FIRE01 SmolderingFire
      HideSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09 WeaponA10 WeaponA11 WeaponA12 WeaponA13
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBNukeStm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBNukeStm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBNukeStm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
  End

  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_04
    AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = SmokeM01 BuildUpSmokeChina
      ParticleSysBone = SmokeS02 BuildUpSmokeChina
      ParticleSysBone = SparksM01 BuildUpSmokeChina
      ParticleSysBone = SparksM02 BuildUpSmokeChina
      ParticleSysBone = SparksS01 BuildUpSmokeChina
      ParticleSysBone = SparksS02 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = SmokeM01 BuildUpSmokeChina
      ParticleSysBone = SmokeS02 BuildUpSmokeChina
      ParticleSysBone = SparksM01 BuildUpSmokeChina
      ParticleSysBone = SparksM02 BuildUpSmokeChina
      ParticleSysBone = SparksS01 BuildUpSmokeChina
      ParticleSysBone = SparksS02 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = SmokeM01 BuildUpSnowSmoke
      ParticleSysBone = SmokeS02 BuildUpSnowSmoke
      ParticleSysBone = SparksM01 BuildUpSnowSmoke
      ParticleSysBone = SparksM02 BuildUpSnowSmoke
      ParticleSysBone = SparksS01 BuildUpSnowSmoke
      ParticleSysBone = SparksS02 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = SmokeM01 BuildUpNightSnowSmoke
      ParticleSysBone = SmokeS02 BuildUpNightSnowSmoke
      ParticleSysBone = SparksM01 BuildUpNightSnowSmoke
      ParticleSysBone = SparksM02 BuildUpNightSnowSmoke
      ParticleSysBone = SparksS01 BuildUpNightSnowSmoke
      ParticleSysBone = SparksS02 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_05
    AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    
    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5
      Animation       = NBConYard_A5.NBConYard_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5N
      Animation       = NBConYard_A5N.NBConYard_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5S
      Animation       = NBConYard_A5S.NBConYard_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5SN
      Animation       = NBConYard_A5SN.NBConYard_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBConYard_AB
      Animation       = NBConYard_AB.NBConYard_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBConYard_ABN
      Animation       = NBConYard_ABN.NBConYard_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBConYard_ABS
      Animation       = NBConYard_ABS.NBConYard_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBConYard_ABSN
      Animation       = NBConYard_ABSN.NBConYard_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBConYard_AB
      Animation       = NBConYard_AB.NBConYard_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBConYard_ABN
      Animation       = NBConYard_ABN.NBConYard_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBConYard_ABS
      Animation       = NBConYard_ABS.NBConYard_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBConYard_ABSN
      Animation       = NBConYard_ABSN.NBConYard_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:NuclearStorm
  Side             = ChinaNukeGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 12000
  BuildTime        = 240.0
  EnergyProduction = -30
  CommandSet       = Nuke_ChinaNuclearStormCommandSet

  Prerequisites
    Object  = Nuke_ChinaPropagandaCenter
    Science = SCIENCE_NUKE
;    Science = SCIENCE_NukeStorm;  ,   
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Nuke_ChinaNuclearStormCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End

  VisionRange      = 200.0
  ShroudClearingRange = 200
  ShroudRevealToAllRange = 60

  WeaponSet
    Conditions = None 
    Weapon = SECONDARY Nuke_NuclearStormWeapon
    AutoChooseSources = SECONDARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End

  ExperienceValue   = 500 500 500 500
  MaxSimultaneousOfType = 1

  ; *** AUDIO Parameters ***
  VoiceSelect = ScudStormSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE POWERED MP_COUNT_FOR_VICTORY FS_SUPERWEAPON

  Body            = StructureBody ModuleTag_07
    MaxHealth       = 7000.0
    InitialHealth   = 7000.0
    SubdualDamageCap = 14000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior    = OCLSpecialPower ModuleTag_10
    SpecialPowerTemplate = SuperweaponNuclearStorm
    OCL                  = SUPERWEAPON_NuclearStorm
  End
  Behavior = SpecialPowerCreate ModuleTag_11
  End

  Behavior = DestroyDie ModuleTag_12
  End

  Behavior = ProductionUpdate ModuleTag_15
    DisabledTypesToProcess = DISABLED_HELD DISABLED_UNDERPOWERED
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = RadiusDecalUpdate ModuleTag_17
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = FXListDie ModuleTag_19
    DeathFX = FX_BuildingDie
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Die3
    DeathWeapon = ChinaPowerPlantDeathWeapon
    StartsActive  = Yes
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_13
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes
    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End


  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 95.0
  GeometryMinorRadius = 75.0
  GeometryHeight      = 60.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInfantryFN6

  ; *** ART Parameters ***
  SelectPortrait = SNRA_L
  ButtonImage    = SNRA

  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaRadiationDefense

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = NIFN6_SKN
      IdleAnimation = UISmsd_SKL.UISmsd_STA 0 45
      IdleAnimation = UISmsd_SKL.UISmsd_IDA 
      IdleAnimation = UISmsd_SKL.UISmsd_IDB 
      IdleAnimation = UISmsd_SKL.UISmsd_IDC 
      IdleAnimation = UISmsd_SKL.UISmsd_IDD 
      AnimationMode = ONCE
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = PRIMARY Exhaust
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY Exhaust
      WeaponLaunchBone = SECONDARY Muzzle
    End

    ConditionState = MOVING
      Animation = UISmsd_SKL.UISmsd_WKB 25
      AnimationMode = LOOP
      ParticleSysBone   = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = UISmsd_SKL.UISmsd_DTA 
      Animation = UISmsd_SKL.UISmsd_DTB 
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UISmsd_SKL.UISmsd_ADTF1
      Animation = UISmsd_SKL.UISmsd_ADTG21
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UISmsd_SKL.UISmsd_ADTF2
      Animation = UISmsd_SKL.UISmsd_ADTG22
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UISmsd_SKL.UISmsd_ADTF3
      Animation = UISmsd_SKL.UISmsd_ADTG23
      AnimationMode = ONCE
      TransitionKey = None
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ConditionState = FIRING_A 
      Animation = UISmsd_SKL.UISmsd_ATA
      AnimationMode = ONCE
      TransitionKey = TRANS_START_FIRING
    End
    ConditionState = BETWEEN_FIRING_SHOTS_A
      Animation = UISmsd_SKL.UISmsd_STA
      AnimationMode = ONCE
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = RELOADING_A

    ConditionState = SPECIAL_CHEERING
      Animation = UISMSD_SKL.UISMSD_CHA
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:FN6Soldier
  Side        = ChinaNukeGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1
  VisionRange = 300.0
  ShroudClearingRange = 300
  BuildCost = 300
  BuildTime = 3.0

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY   RedArrowMissileWeapon
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    Weapon              = SECONDARY RedArrowMissileWeaponAir
    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = HumanArmorNukeUpgraded
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaBarracks 
    Object = Nuke_ChinaWarFactory
  End

  ExperienceValue    = 14 19 26 34
  ExperienceRequired = 0 43 58 77
  IsTrainable = Yes
  CrushableLevel  = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TankHunterVoiceSelect
  VoiceMove = TankHunterVoiceMove
  VoiceAttack = TankHunterVoiceAttack
  VoiceAttackAir = TankHunterVoiceAttack
  VoiceGuard = TankHunterVoiceMove
  VoiceFear = TankHunterVoiceFear
  UnitSpecificSounds
    VoiceCreate     = TankHunterVoiceCreate
    VoiceGarrison   = TankHunterVoiceGarrison
    VoiceEnter      = TankHunterVoiceMove
    VoiceEnterHostile = TankHunterVoiceMove
    VoiceGetHealed  = TankHunterVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End

  Locomotor = SET_NORMAL RedguardLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 24.0
  End
 
  Behavior = SquishCollide ModuleTag_06
  End

  ; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_StingerSoldierDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_StingerSoldierDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantryChina
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_StingerSoldierDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100
    PoisonDuration = 3000
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

  Behavior = HordeUpdate ModuleTag_06A
    RubOffRadius = 100    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInfantryDesignatorTrooper

  ; *** ART Parameters ***
  SelectPortrait         = SNDesignatorI_L
  ButtonImage            = SNDesignatorI

  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaRadiationDefense
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; idle
    DefaultConditionState
      Model               = NIGR_SKN
      IdleAnimation       = AIHERO_SKL.AIHERO_STA 0 25
      IdleAnimation       = AIHERO_SKL.AIHERO_IDA
      IdleAnimation       = AIHERO_SKL.AIHERO_IDB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_Stand
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      HideSubObject       = MUZZLEFX01
      HideSubObject       = Object01
      HideSubObject       = Knife
    End

    ; injured idle
    ConditionState        = REALLYDAMAGED
      IdleAnimation       = AIHERO_SKL.AIHERO_ISTA 0 30
      IdleAnimation       = AIHERO_SKL.AIHERO_IIDA
      IdleAnimation       = AIHERO_SKL.AIHERO_IIDB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = AIHERO_SKL.AIHERO_ISTAHIT
      AnimationMode     = ONCE
    End
    
    ; moving
    ConditionState        = MOVING
      Animation           = AIHERO_SKL.AIHERO_RNA 26
      AnimationMode       = LOOP
      Flags               = RANDOMSTART
      TransitionKey       = TRANS_Walking
      ParticleSysBone     = None InfantryDustTrails
      HideSubObject     = MUZZLEFX01
    End
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ; injured moving
    ConditionState     = MOVING REALLYDAMAGED
      Animation        = AIHERO_SKL.AIHERO_IRNA 26
      AnimationMode    = LOOP
      Flags            = RANDOMSTART
      TransitionKey    = TRANS_WalkingInjured
      ParticleSysBone  = None InfantryDustTrails
      HideSubObject     = MUZZLEFX01
    End
    AliasConditionState = MOVING FIRING_A REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_A REALLYDAMAGED

    ; Firing animation
    ConditionState      = FIRING_A
      Animation         = AIHERO_SKL.AIHERO_ATA
      AnimationMode     = MANUAL
      AnimationSpeedFactorRange = 1.5 1.5
      TransitionKey     = TRANS_FiringA
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = AIHERO_SKL.AIHERO_ATA
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      WaitForStateToFinishIfPossible = TRANS_FiringA
    End
    AliasConditionState = RELOADING_A

    ; Injured Firing animation
    ConditionState      = FIRING_A REALLYDAMAGED
      Animation         = AIHERO_SKL.AIHERO_IATA
      AnimationMode     = MANUAL
      AnimationSpeedFactorRange = 1.5 1.5
      TransitionKey     = TRANS_FiringAInjured
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
      Animation         = AIHERO_SKL.AIHERO_IATA
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      WaitForStateToFinishIfPossible = TRANS_FiringAInjured
    End
    AliasConditionState = RELOADING_A REALLYDAMAGED

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = AIHERO_SKL.AIHERO_IATAHIT
      AnimationMode     = ONCE
    End

    ; Placing charge animation
    ConditionState      = UNPACKING
      Animation         = AIHERO_SKL.AIHERO_ATB1
      AnimationMode     = ONCE
    End
    AliasConditionState = MOVING UNPACKING

    ; Injured Placing charge animation
    ConditionState      = UNPACKING REALLYDAMAGED
      Animation         = AIHERO_SKL.AIHERO_IATB1
      AnimationMode     = ONCE
    End
    AliasConditionState = MOVING UNPACKING REALLYDAMAGED

    TransitionState     = TRANS_Stabbing TRANS_Stand
      Animation         = AIHERO_SKL.AIHERO_ATC2
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_StabbingInjured TRANS_StandInjured
      Animation         = AIHERO_SKL.AIHERO_IATC2
      AnimationMode     = ONCE
    End

    ; cheering
    ConditionState      = SPECIAL_CHEERING
      Animation         = AIHERO_SKL.AIHERO_CHA
      AnimationMode     = ONCE
    End
    
    ; injured cheering
    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = AIHERO_SKL.AIHERO_ICHA
      AnimationMode     = ONCE
    End
    
    ; climbing
    ConditionState      = CLIMBING
      Animation         = AIHERO_SKL.AIHERO_CLMID
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Climbing
    End
    AliasConditionState = RAPPELLING
    AliasConditionState = CLIMBING REALLYDAMAGED
    AliasConditionState = RAPPELLING REALLYDAMAGED

    ConditionState      = CLIMBING MOVING
      Animation         = AIHERO_SKL.AIHERO_CLMUP
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Climbing
    End
    AliasConditionState = CLIMBING MOVING REALLYDAMAGED

    ConditionState      = RAPPELLING MOVING
      Animation         = AIHERO_SKL.AIHERO_CLMUP
      AnimationMode     = LOOP_BACKWARDS
      TransitionKey     = TRANS_Climbing
    End
    AliasConditionState = RAPPELLING MOVING REALLYDAMAGED

    ; dying anims
    ConditionState      = DYING
      Animation         = AIHERO_SKL.AIHERO_DTA
      Animation         = AIHERO_SKL.AIHERO_DTB
      Animation         = AIHero_SKL.AIHero_IDTA
      Animation         = AIHero_SKL.AIHero_IDTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End
    AliasConditionState = RAPPELLING DYING
    AliasConditionState = CLIMBING DYING

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = AIHERO_SKL.AIHERO_ADTG21
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = AIHERO_SKL.AIHERO_ADTG22
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = AIHERO_SKL.AIHERO_ADTG23
      AnimationMode     = ONCE
      TransitionKey     = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ; misc anims
    ConditionState      = FREEFALL
      Animation         = AIHERO_SKL.AIHERO_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = AIHERO_SKL.AIHERO_PHG
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = AIHERO_SKL.AIHERO_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = AIHERO_SKL.AIHERO_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = AIHERO_SKL.AIHERO_PTD
      AnimationMode     = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:JammerTrooper
  Side                = ChinaNukeGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1
  VisionRange = 150
  ShroudClearingRange = 200
  BuildCost = 400
  BuildTime = 4.0
  CommandSet = JammerTrooperCommandSet
  
  WeaponSet
    Conditions = None
    Weapon = PRIMARY InfantryECMVehicleDisabler
    Weapon = SECONDARY ChinaJammerWeapon
  End
  
  Behavior = LockWeaponCreate ModuleTag_WeaponLock
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End


  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = HumanArmorNukeUpgraded
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaBarracks
  End
  
  ExperienceValue    = 13 19 28 40
  ExperienceRequired = 0 39 57 83
  IsTrainable = Yes
  CrushableLevel     = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = RedGuardVoiceSelect
  VoiceMove = RedGuardVoiceMove
  VoiceGuard = RedGuardVoiceMove
  VoiceAttack = RedGuardVoiceAttack
  VoiceGroupSelect = BattleCrySound
  VoiceFear = RedGuardVoiceFear
  VoiceTaskComplete = RedGuardVoiceCaptureComplete
  UnitSpecificSounds
    VoiceMelee      = RedGuardVoiceAttackBayonet
    VoiceGarrison   = RedGuardVoiceGarrison
    VoiceCreate     = RedGuardVoiceCreate
    VoiceSubdue     = RedGuardVoiceSubdue
    VoiceEnter      = RedGuardVoiceMove
    VoiceEnterHostile = RedGuardVoiceMove
    VoiceGetHealed      = RedGuardVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL RedguardLocomotor

  Behavior = HordeUpdate ModuleTag_06
    RubOffRadius = 60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = PhysicsBehavior ModuleTag_19
    Mass = 24.0
  End

  Behavior = SquishCollide ModuleTag_10
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_MissileDefenderDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_MissileDefenderDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantryChina
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_MissileDefenderDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = AutoFindHealingUpdate   ModuleTag_Heal ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000 ; once a second.
    ScanRange = 300 ;
    NeverHeal = 0.85 ;  don't heal if we are > 85% healthy.
    AlwaysHeal = 0.25 ; if we get below 25%, find healing right away.
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_ChinaRadiationDefense
  End

  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;------------------------------------------------------------------------------
Object Nuke_ChinaInfantryClassicTankHunter

  ; *** ART Parameters ***
  SelectPortrait         = SNTankHunter_L
  ButtonImage            = SNTankHunter
  
  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaRadiationDefense

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  
  
    DefaultConditionState
      Model             = NIMSST_SKN
      IdleAnimation     = NIMSST_SKL.NIMSST_STA 0 30
      IdleAnimation     = NIMSST_SKL.NIMSST_IDA
      IdleAnimation     = NIMSST_SKL.NIMSST_IDB
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 0.8 1.2
      TransitionKey     = TRANS_Stand
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle
    End
    AliasConditionState = REALLYDAMAGED

    ConditionState      = FIRING_A 
      Animation         = NIMSST_SKL.NIMSST_ATA 
      AnimationMode     = ONCE
      TransitionKey     = TRANS_START_FIRING
    End
    AliasConditionState = REALLYDAMAGED FIRING_A
    
    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = NIMSST_SKL.NIMSST_STA
      AnimationMode     = ONCE
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = REALLYDAMAGED BETWEEN_FIRING_SHOTS_A

    ConditionState      = MOVING
      Animation         = NIMSST_SKL.NIMSST_RNA 20
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = REALLYDAMAGED MOVING
    AliasConditionState = MOVING ATTACKING
    AliasConditionState = MOVING ATTACKING REALLYDAMAGED

    ConditionState      = RELOADING_A
      Animation         = NIMSST_SKL.NIMSST_ATA 10
      AnimationMode     = ONCE
      ;WeaponLaunchBone = PRIMARY WeaponA
    End
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = REALLYDAMAGED MOVING RELOADING_A

    ConditionState      = DYING
      Animation         = NIMSST_SKL.NIMSST_DTA
      Animation         = NIMSST_SKL.NIMSST_DTB
      AnimationSpeedFactorRange = 0.9 1.25
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End
    AliasConditionState = DYING RUBBLE

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NIMSST_SKL.NIMSST_ADTD1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NIMSST_SKL.NIMSST_ADTD2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
      ParticleSysBone   = NONE BloodTrailBig
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NIMSST_SKL.NIMSST_ADTD3
      AnimationMode     = ONCE
      TransitionKey     = None
      ParticleSysBone   = None BloodPoolGrowing00
    End

    ;PARACHUTING ANIMATIONS
    ConditionState      = FREEFALL
      Animation         = NIMSST_SKL.NIMSST_POP
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING
    
    ConditionState      = PARACHUTING
      Animation         = NIMSST_SKL.NIMSST_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING
    
   ; TransitionState     = TRANS_Falling TRANS_Chute
   ;   Animation         = NIMSST_SKL.NIMSST_POP
   ;   AnimationMode     = ONCE
   ;   Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
   ; End
    
    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = NIMSST_SKL.NIMSST_PDN
      AnimationMode     = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TankHunter
  Side = ChinaNukeGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1
  VisionRange = 190
  ShroudClearingRange = 200
  BuildCost = 400
  BuildTime = 4.0

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY ChinaInfantryTankHunterMissileLauncher
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = NuclearTankHunterHumanArmorNukeUpgraded
    DamageFX        = InfantryDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaBarracks
  End

  ExperienceValue    = 13 18 27 38
  ExperienceRequired = 0 38 55 80
  IsTrainable = Yes
  CrushableLevel  = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TankHunterVoiceSelect
  VoiceMove = TankHunterVoiceMove
  VoiceAttack = TankHunterVoiceAttack
  VoiceAttackAir = TankHunterVoiceAttack
  VoiceGuard = TankHunterVoiceMove
  VoiceFear = TankHunterVoiceFear
  UnitSpecificSounds
    VoiceCreate          = TankHunterVoiceCreate
    VoiceGarrison = TankHunterVoiceGarrison
    VoiceEnter = TankHunterVoiceMove
    VoiceEnterHostile = TankHunterVoiceMove
    VoiceGetHealed      = TankHunterVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor
  Behavior = HordeUpdate ModuleTag_04
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    RubOffRadius = 60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 24.0
  End

  Behavior = SquishCollide ModuleTag_09
  End

  Behavior = VeterancyGainCreate ModuleTag_Veteran
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_RedGuardTraining
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -SUICIDED -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_2 -EXTRA_3 -EXTRA_4
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_TankHunterDie
    OCL                 = INITIAL OCL_BloodPool
  End
  Behavior = SlowDeathBehavior ModuleTag_DeathGib
    DeathTypes          = NONE +SUICIDED +EXTRA_5
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryGibExplode
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 1
    FX                  = INITIAL FX_GIDieCrushed
    OCL                 = INITIAL OCL_InfantryGibCrush
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.1     ; in Dist/Sec
    DestructionDelay    = 20000
    FX                  = INITIAL FX_TankHunterDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantryChina
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
  Behavior = SlowDeathBehavior ModuleTag_Death08
    DeathTypes          = NONE +EXTRA_6
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_RadiationInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death09
    DeathTypes          = NONE +EXTRA_7
    DestructionDelay    = 1
    FX                  = INITIAL FX_InfantryDieGib
    OCL                 = INITIAL OCL_InfantryMineExplode
    FX                  = FINAL FX_TankHunterDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death15
    DeathTypes          = NONE +EXTRA_2
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrightening
  End
    Behavior = SlowDeathBehavior ModuleTag_Death16
    DeathTypes          = NONE +EXTRA_3
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningBeta
  End
  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +EXTRA_4
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryFrighteningGamma
  End
  ; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_12
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = AutoFindHealingUpdate   ModuleTag_Heal ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000 ; once a second.
    ScanRange = 300 ;
    NeverHeal = 0.85 ;  don't heal if we are > 85% healthy.
    AlwaysHeal = 0.25 ; if we get below 25%, find healing right away.
  End
  
  Behavior  = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy  = Upgrade_ChinaRadiationDefense
  End
 
  Scale = 0.95
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT
End

;===========================================
Object Nuke_ChinaVehicleTCProp

  ; *** ART Parameters ***
  SelectPortrait         = SNTCProp_L
  ButtonImage            = SNTCProp

  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging

  Draw = W3DTruckDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = NVTCrawler
    End

    ConditionState = REALLYDAMAGED
      Model = NVTCrawler_D
    End

    AliasConditionState = RUBBLE

    ConditionState = AFLAME
      Model = NVTCrawler
      ParticleSysBone = FIREPOINT01 TankFireContinious
    End

    ConditionState = REALLYDAMAGED AFLAME
      Model = NVTCrawler_D
      ParticleSysBone = FIREPOINT01 TankFireContinious
    End

    AliasConditionState = RUBBLE AFLAME

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray

    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone     = Wheel01
    RightFrontTireBone    = Wheel08
    LeftRearTireBone      = Wheel03
    RightRearTireBone     = Wheel05
    MidLeftFrontTireBone  = Wheel02
    MidRightFrontTireBone = Wheel07
    MidLeftRearTireBone   = Wheel04
    MidRightRearTireBone  = Wheel06

    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.
  End

  ;------------------------------------------
  Draw                    = W3DModelDraw ModuleTag_Draw02

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = FIREPOINT01
    ExtraPublicBone = LASERBONE

    ConditionState = NONE
      Model         = NVTCrawler_S
      Animation     = NVTCrawler_S.NVTCrawler_S
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED
      Model         = NVTCrawler_SD
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
    ; night
    ConditionState = NIGHT
      Model         = NVTCrawler_S
      Animation     = NVTCrawler_S.NVTCrawler_S
      AnimationMode = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:PropagandaCrawler
  Side = ChinaNukeGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 4
  BuildCost       = 650
  BuildTime       = 6.5
  VisionRange     = 175
  ShroudClearingRange = 400

  WeaponSet
    Conditions = None
    Weapon = PRIMARY Infa_ChinaVehicleTroopCrawlerDummyWeapon
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT
  End

  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End

  Prerequisites
    Object = Nuke_ChinaWarFactory
  End

  ExperienceValue     = 22 29 39 52
  ExperienceRequired  = 0 66 87 116
  IsTrainable         = Yes
  CrusherLevel       = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Tank_ChinaTroopCrawlerCommandSetUpgraded

  ; *** AUDIO Parameters ***
  VoiceSelect = TroopCrawlerVoiceSelect
  VoiceMove =   TroopCrawlerVoiceMove
  VoiceGuard = TroopCrawlerVoiceMove
  VoiceAttack = TroopCrawlerVoiceMove
  SoundMoveStart = TroopCrawlerMoveStart
  SoundMoveStartDamaged = TroopCrawlerMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    VoiceCreate  = TroopCrawlerVoiceCreate
    VoiceUnload  = TroopCrawlerVoiceUnload
    VoiceEnter   = TroopCrawlerVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE ATTACK_NEEDS_LINE_OF_SIGHT TRANSPORT

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 24
  End

  Behavior = AIUpdateInterface ModuleTag_NewAI
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL TroopCrawlerLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 60.0
  End

  Behavior = HordeUpdate ModuleTag_Horde
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000     ; how often to recheck horde status (msec)
    Radius = 75           ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = VEHICLE      ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes      ; do we only count allies towards horde status? 
    ExactMatch = No       ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5             ; how many units must be within Radius to grant us horde-ness
    Action = HORDE        ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = TransportContain ModuleTag_06
    Slots                 = 4
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 10%
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior = InstantDeathBehavior ModuleTag_27D
    DeathTypes = ALL -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_6
    FX  = FX_SupplyTruckExplosionOneFinal
    OCL = OCL_FinalTroopCrawlerDebris
  End

  Behavior = InstantDeathBehavior ModuleTag_Poisoned
    DeathTypes = NONE +POISONED +POISONED_BETA +POISONED_GAMMA +EXTRA_6
    OCL = OCL_FinalTroopCrawlerDeathEffectSimple
  End

  Behavior = InstantDeathBehavior ModuleTag_Crushed
    DeathTypes = NONE +CRUSHED +SPLATTED
    FX = FX_CarCrush
    OCL = OCL_FinalTroopCrawlerDeathEffectSimple
  End

  Behavior = TransitionDamageFX ModuleTag_28
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End
  
   Behavior        = PropagandaTowerBehavior ModuleTag_04
    Radius                = 150.0
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 1%   ; get this % of max health every second 
    PulseFX               = FX_OverlordPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 1.5%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_OverlordPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
    AffectsSelf           = Yes ; Needs this since Tower is not seperate object for Emperor
  End 

  Behavior = CreateCrateDie ModuleTag_32
    CrateData = SalvageCrateData
  End

  Behavior = FlammableUpdate ModuleTag_34
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Scale = 0.95
  Geometry = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45
End